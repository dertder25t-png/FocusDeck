function N7(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Ep(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var R2={exports:{}},dg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k4;function R7(){if(k4)return dg;k4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return dg.Fragment=e,dg.jsx=n,dg.jsxs=n,dg}var M4;function O7(){return M4||(M4=1,R2.exports=R7()),R2.exports}var _=O7(),O2={exports:{}},ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4;function D7(){if(A4)return ct;A4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function x(Y){return Y===null||typeof Y!="object"?null:(Y=v&&Y[v]||Y["@@iterator"],typeof Y=="function"?Y:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,k={};function A(Y,se,U){this.props=Y,this.context=se,this.refs=k,this.updater=U||S}A.prototype.isReactComponent={},A.prototype.setState=function(Y,se){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,se,"setState")},A.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function O(){}O.prototype=A.prototype;function z(Y,se,U){this.props=Y,this.context=se,this.refs=k,this.updater=U||S}var L=z.prototype=new O;L.constructor=z,T(L,A.prototype),L.isPureReactComponent=!0;var I=Array.isArray;function j(){}var B={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function $(Y,se,U){var ke=U.ref;return{$$typeof:t,type:Y,key:se,ref:ke!==void 0?ke:null,props:U}}function G(Y,se){return $(Y.type,se,Y.props)}function X(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function J(Y){var se={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(U){return se[U]})}var ce=/\/+/g;function Z(Y,se){return typeof Y=="object"&&Y!==null&&Y.key!=null?J(""+Y.key):se.toString(36)}function te(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(j,j):(Y.status="pending",Y.then(function(se){Y.status==="pending"&&(Y.status="fulfilled",Y.value=se)},function(se){Y.status==="pending"&&(Y.status="rejected",Y.reason=se)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function V(Y,se,U,ke,Pe){var ze=typeof Y;(ze==="undefined"||ze==="boolean")&&(Y=null);var Ie=!1;if(Y===null)Ie=!0;else switch(ze){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(Y.$$typeof){case t:case e:Ie=!0;break;case m:return Ie=Y._init,V(Ie(Y._payload),se,U,ke,Pe)}}if(Ie)return Pe=Pe(Y),Ie=ke===""?"."+Z(Y,0):ke,I(Pe)?(U="",Ie!=null&&(U=Ie.replace(ce,"$&/")+"/"),V(Pe,se,U,"",function(rt){return rt})):Pe!=null&&(X(Pe)&&(Pe=G(Pe,U+(Pe.key==null||Y&&Y.key===Pe.key?"":(""+Pe.key).replace(ce,"$&/")+"/")+Ie)),se.push(Pe)),1;Ie=0;var ot=ke===""?".":ke+":";if(I(Y))for(var et=0;et<Y.length;et++)ke=Y[et],ze=ot+Z(ke,et),Ie+=V(ke,se,U,ze,Pe);else if(et=x(Y),typeof et=="function")for(Y=et.call(Y),et=0;!(ke=Y.next()).done;)ke=ke.value,ze=ot+Z(ke,et++),Ie+=V(ke,se,U,ze,Pe);else if(ze==="object"){if(typeof Y.then=="function")return V(te(Y),se,U,ke,Pe);throw se=String(Y),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function ae(Y,se,U){if(Y==null)return Y;var ke=[],Pe=0;return V(Y,ke,"","",function(ze){return se.call(U,ze,Pe++)}),ke}function oe(Y){if(Y._status===-1){var se=Y._result;se=se(),se.then(function(U){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=U)},function(U){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=U)}),Y._status===-1&&(Y._status=0,Y._result=se)}if(Y._status===1)return Y._result.default;throw Y._result}var he=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},F={map:ae,forEach:function(Y,se,U){ae(Y,function(){se.apply(this,arguments)},U)},count:function(Y){var se=0;return ae(Y,function(){se++}),se},toArray:function(Y){return ae(Y,function(se){return se})||[]},only:function(Y){if(!X(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return ct.Activity=g,ct.Children=F,ct.Component=A,ct.Fragment=n,ct.Profiler=r,ct.PureComponent=z,ct.StrictMode=i,ct.Suspense=c,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ct.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return B.H.useMemoCache(Y)}},ct.cache=function(Y){return function(){return Y.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(Y,se,U){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var ke=T({},Y.props),Pe=Y.key;if(se!=null)for(ze in se.key!==void 0&&(Pe=""+se.key),se)!q.call(se,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&se.ref===void 0||(ke[ze]=se[ze]);var ze=arguments.length-2;if(ze===1)ke.children=U;else if(1<ze){for(var Ie=Array(ze),ot=0;ot<ze;ot++)Ie[ot]=arguments[ot+2];ke.children=Ie}return $(Y.type,Pe,ke)},ct.createContext=function(Y){return Y={$$typeof:a,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:s,_context:Y},Y},ct.createElement=function(Y,se,U){var ke,Pe={},ze=null;if(se!=null)for(ke in se.key!==void 0&&(ze=""+se.key),se)q.call(se,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(Pe[ke]=se[ke]);var Ie=arguments.length-2;if(Ie===1)Pe.children=U;else if(1<Ie){for(var ot=Array(Ie),et=0;et<Ie;et++)ot[et]=arguments[et+2];Pe.children=ot}if(Y&&Y.defaultProps)for(ke in Ie=Y.defaultProps,Ie)Pe[ke]===void 0&&(Pe[ke]=Ie[ke]);return $(Y,ze,Pe)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(Y){return{$$typeof:l,render:Y}},ct.isValidElement=X,ct.lazy=function(Y){return{$$typeof:m,_payload:{_status:-1,_result:Y},_init:oe}},ct.memo=function(Y,se){return{$$typeof:d,type:Y,compare:se===void 0?null:se}},ct.startTransition=function(Y){var se=B.T,U={};B.T=U;try{var ke=Y(),Pe=B.S;Pe!==null&&Pe(U,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(j,he)}catch(ze){he(ze)}finally{se!==null&&U.types!==null&&(se.types=U.types),B.T=se}},ct.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ct.use=function(Y){return B.H.use(Y)},ct.useActionState=function(Y,se,U){return B.H.useActionState(Y,se,U)},ct.useCallback=function(Y,se){return B.H.useCallback(Y,se)},ct.useContext=function(Y){return B.H.useContext(Y)},ct.useDebugValue=function(){},ct.useDeferredValue=function(Y,se){return B.H.useDeferredValue(Y,se)},ct.useEffect=function(Y,se){return B.H.useEffect(Y,se)},ct.useEffectEvent=function(Y){return B.H.useEffectEvent(Y)},ct.useId=function(){return B.H.useId()},ct.useImperativeHandle=function(Y,se,U){return B.H.useImperativeHandle(Y,se,U)},ct.useInsertionEffect=function(Y,se){return B.H.useInsertionEffect(Y,se)},ct.useLayoutEffect=function(Y,se){return B.H.useLayoutEffect(Y,se)},ct.useMemo=function(Y,se){return B.H.useMemo(Y,se)},ct.useOptimistic=function(Y,se){return B.H.useOptimistic(Y,se)},ct.useReducer=function(Y,se,U){return B.H.useReducer(Y,se,U)},ct.useRef=function(Y){return B.H.useRef(Y)},ct.useState=function(Y){return B.H.useState(Y)},ct.useSyncExternalStore=function(Y,se,U){return B.H.useSyncExternalStore(Y,se,U)},ct.useTransition=function(){return B.H.useTransition()},ct.version="19.2.0",ct}var N4;function Tp(){return N4||(N4=1,O2.exports=D7()),O2.exports}var N=Tp();const Fe=Ep(N),Qk=N7({__proto__:null,default:Fe},[N]);var D2={exports:{}},hg={},z2={exports:{}},j2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R4;function z7(){return R4||(R4=1,(function(t){function e(V,ae){var oe=V.length;V.push(ae);e:for(;0<oe;){var he=oe-1>>>1,F=V[he];if(0<r(F,ae))V[he]=ae,V[oe]=F,oe=he;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var ae=V[0],oe=V.pop();if(oe!==ae){V[0]=oe;e:for(var he=0,F=V.length,Y=F>>>1;he<Y;){var se=2*(he+1)-1,U=V[se],ke=se+1,Pe=V[ke];if(0>r(U,oe))ke<F&&0>r(Pe,U)?(V[he]=Pe,V[ke]=oe,he=ke):(V[he]=U,V[se]=oe,he=se);else if(ke<F&&0>r(Pe,oe))V[he]=Pe,V[ke]=oe,he=ke;else break e}}return ae}function r(V,ae){var oe=V.sortIndex-ae.sortIndex;return oe!==0?oe:V.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],m=1,g=null,v=3,x=!1,S=!1,T=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function L(V){for(var ae=n(d);ae!==null;){if(ae.callback===null)i(d);else if(ae.startTime<=V)i(d),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=n(d)}}function I(V){if(T=!1,L(V),!S)if(n(c)!==null)S=!0,j||(j=!0,J());else{var ae=n(d);ae!==null&&te(I,ae.startTime-V)}}var j=!1,B=-1,q=5,$=-1;function G(){return k?!0:!(t.unstable_now()-$<q)}function X(){if(k=!1,j){var V=t.unstable_now();$=V;var ae=!0;try{e:{S=!1,T&&(T=!1,O(B),B=-1),x=!0;var oe=v;try{t:{for(L(V),g=n(c);g!==null&&!(g.expirationTime>V&&G());){var he=g.callback;if(typeof he=="function"){g.callback=null,v=g.priorityLevel;var F=he(g.expirationTime<=V);if(V=t.unstable_now(),typeof F=="function"){g.callback=F,L(V),ae=!0;break t}g===n(c)&&i(c),L(V)}else i(c);g=n(c)}if(g!==null)ae=!0;else{var Y=n(d);Y!==null&&te(I,Y.startTime-V),ae=!1}}break e}finally{g=null,v=oe,x=!1}ae=void 0}}finally{ae?J():j=!1}}}var J;if(typeof z=="function")J=function(){z(X)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Z=ce.port2;ce.port1.onmessage=X,J=function(){Z.postMessage(null)}}else J=function(){A(X,0)};function te(V,ae){B=A(function(){V(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var oe=v;v=ae;try{return V()}finally{v=oe}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(V,ae){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var oe=v;v=V;try{return ae()}finally{v=oe}},t.unstable_scheduleCallback=function(V,ae,oe){var he=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?he+oe:he):oe=he,V){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=oe+F,V={id:m++,callback:ae,priorityLevel:V,startTime:oe,expirationTime:F,sortIndex:-1},oe>he?(V.sortIndex=oe,e(d,V),n(c)===null&&V===n(d)&&(T?(O(B),B=-1):T=!0,te(I,oe-he))):(V.sortIndex=F,e(c,V),S||x||(S=!0,j||(j=!0,J()))),V},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(V){var ae=v;return function(){var oe=v;v=ae;try{return V.apply(this,arguments)}finally{v=oe}}}})(j2)),j2}var O4;function Dw(){return O4||(O4=1,z2.exports=z7()),z2.exports}var L2={exports:{}},Rr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D4;function j7(){if(D4)return Rr;D4=1;var t=Tp();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,d,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:d,implementation:m}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Rr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rr.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(c,d,null,m)},Rr.flushSync=function(c){var d=a.T,m=i.p;try{if(a.T=null,i.p=2,c)return c()}finally{a.T=d,i.p=m,i.d.f()}},Rr.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(c,d))},Rr.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Rr.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var m=d.as,g=l(m,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):m==="script"&&i.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Rr.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=l(d.as,d.crossOrigin);i.d.M(c,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(c)},Rr.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,g=l(m,d.crossOrigin);i.d.L(c,m,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Rr.preloadModule=function(c,d){if(typeof c=="string")if(d){var m=l(d.as,d.crossOrigin);i.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(c)},Rr.requestFormReset=function(c){i.d.r(c)},Rr.unstable_batchedUpdates=function(c,d){return c(d)},Rr.useFormState=function(c,d,m){return a.H.useFormState(c,d,m)},Rr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Rr.version="19.2.0",Rr}var z4;function Wk(){if(z4)return L2.exports;z4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),L2.exports=j7(),L2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j4;function L7(){if(j4)return hg;j4=1;var t=Dw(),e=Tp(),n=Wk();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var u=o,p=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(p=u.return),o=u.return;while(o)}return u.tag===3?p:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(s(o)!==o)throw Error(i(188))}function d(o){var u=o.alternate;if(!u){if(u=s(o),u===null)throw Error(i(188));return u!==o?null:o}for(var p=o,y=u;;){var w=p.return;if(w===null)break;var E=w.alternate;if(E===null){if(y=w.return,y!==null){p=y;continue}break}if(w.child===E.child){for(E=w.child;E;){if(E===p)return c(w),o;if(E===y)return c(w),u;E=E.sibling}throw Error(i(188))}if(p.return!==y.return)p=w,y=E;else{for(var D=!1,H=w.child;H;){if(H===p){D=!0,p=w,y=E;break}if(H===y){D=!0,y=w,p=E;break}H=H.sibling}if(!D){for(H=E.child;H;){if(H===p){D=!0,p=E,y=w;break}if(H===y){D=!0,y=E,p=w;break}H=H.sibling}if(!D)throw Error(i(189))}}if(p.alternate!==y)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?o:u}function m(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=m(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),z=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function J(o){return o===null||typeof o!="object"?null:(o=X&&o[X]||o["@@iterator"],typeof o=="function"?o:null)}var ce=Symbol.for("react.client.reference");function Z(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ce?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case A:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList";case $:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case z:return o.displayName||"Context";case O:return(o._context.displayName||"Context")+".Consumer";case L:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case B:return u=o.displayName||null,u!==null?u:Z(o.type)||"Memo";case q:u=o._payload,o=o._init;try{return Z(o(u))}catch{}}return null}var te=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},he=[],F=-1;function Y(o){return{current:o}}function se(o){0>F||(o.current=he[F],he[F]=null,F--)}function U(o,u){F++,he[F]=o.current,o.current=u}var ke=Y(null),Pe=Y(null),ze=Y(null),Ie=Y(null);function ot(o,u){switch(U(ze,u),U(Pe,o),U(ke,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?W3(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=W3(u),o=J3(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}se(ke),U(ke,o)}function et(){se(ke),se(Pe),se(ze)}function rt(o){o.memoizedState!==null&&U(Ie,o);var u=ke.current,p=J3(u,o.type);u!==p&&(U(Pe,o),U(ke,p))}function mi(o){Pe.current===o&&(se(ke),se(Pe)),Ie.current===o&&(se(Ie),lg._currentValue=oe)}var gn,Mn;function In(o){if(gn===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);gn=u&&u[1]||"",Mn=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gn+o+Mn}var Ai=!1;function Zn(o,u){if(!o||Ai)return"";Ai=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ge){var de=ge}Reflect.construct(o,[],Se)}else{try{Se.call()}catch(ge){de=ge}o.call(Se.prototype)}}else{try{throw Error()}catch(ge){de=ge}(Se=o())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ge){if(ge&&de&&typeof ge.stack=="string")return[ge.stack,de.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=y.DetermineComponentFrameRoot(),D=E[0],H=E[1];if(D&&H){var Q=D.split(`
`),ue=H.split(`
`);for(w=y=0;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;for(;w<ue.length&&!ue[w].includes("DetermineComponentFrameRoot");)w++;if(y===Q.length||w===ue.length)for(y=Q.length-1,w=ue.length-1;1<=y&&0<=w&&Q[y]!==ue[w];)w--;for(;1<=y&&0<=w;y--,w--)if(Q[y]!==ue[w]){if(y!==1||w!==1)do if(y--,w--,0>w||Q[y]!==ue[w]){var ve=`
`+Q[y].replace(" at new "," at ");return o.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",o.displayName)),ve}while(1<=y&&0<=w);break}}}finally{Ai=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?In(p):""}function er(o,u){switch(o.tag){case 26:case 27:case 5:return In(o.type);case 16:return In("Lazy");case 13:return o.child!==u&&u!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return Zn(o.type,!1);case 11:return Zn(o.type.render,!1);case 1:return Zn(o.type,!0);case 31:return In("Activity");default:return""}}function Ha(o){try{var u="",p=null;do u+=er(o,p),p=o,o=o.return;while(o);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var fs=Object.prototype.hasOwnProperty,$n=t.unstable_scheduleCallback,Pr=t.unstable_cancelCallback,br=t.unstable_shouldYield,An=t.unstable_requestPaint,Hn=t.unstable_now,gu=t.unstable_getCurrentPriorityLevel,ye=t.unstable_ImmediatePriority,_e=t.unstable_UserBlockingPriority,Ge=t.unstable_NormalPriority,Xe=t.unstable_LowPriority,vt=t.unstable_IdlePriority,yn=t.log,Ir=t.unstable_setDisableYieldValue,gi=null,Nn=null;function li(o){if(typeof yn=="function"&&Ir(o),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(gi,o)}catch{}}var It=Math.clz32?Math.clz32:kd,ds=Math.log,xr=Math.LN2;function kd(o){return o>>>=0,o===0?32:31-(ds(o)/xr|0)|0}var yu=256,bo=262144,on=4194304;function Rn(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Un(o,u,p){var y=o.pendingLanes;if(y===0)return 0;var w=0,E=o.suspendedLanes,D=o.pingedLanes;o=o.warmLanes;var H=y&134217727;return H!==0?(y=H&~E,y!==0?w=Rn(y):(D&=H,D!==0?w=Rn(D):p||(p=H&~o,p!==0&&(w=Rn(p))))):(H=y&~E,H!==0?w=Rn(H):D!==0?w=Rn(D):p||(p=y&~o,p!==0&&(w=Rn(p)))),w===0?0:u!==0&&u!==w&&(u&E)===0&&(E=w&-w,p=u&-u,E>=p||E===32&&(p&4194048)!==0)?u:w}function tr(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function nr(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function On(){var o=on;return on<<=1,(on&62914560)===0&&(on=4194304),o}function ir(o){for(var u=[],p=0;31>p;p++)u.push(o);return u}function Hr(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Dn(o,u,p,y,w,E){var D=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var H=o.entanglements,Q=o.expirationTimes,ue=o.hiddenUpdates;for(p=D&~p;0<p;){var ve=31-It(p),Se=1<<ve;H[ve]=0,Q[ve]=-1;var de=ue[ve];if(de!==null)for(ue[ve]=null,ve=0;ve<de.length;ve++){var ge=de[ve];ge!==null&&(ge.lane&=-536870913)}p&=~Se}y!==0&&rr(o,y,0),E!==0&&w===0&&o.tag!==0&&(o.suspendedLanes|=E&~(D&~u))}function rr(o,u,p){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-It(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|p&261930}function Ui(o,u){var p=o.entangledLanes|=u;for(o=o.entanglements;p;){var y=31-It(p),w=1<<y;w&u|o[y]&u&&(o[y]|=u),p&=~w}}function Ur(o,u){var p=u&-u;return p=(p&42)!==0?1:hs(p),(p&(o.suspendedLanes|u))!==0?0:p}function hs(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ps(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Fr(){var o=ae.p;return o!==0?o:(o=window.event,o===void 0?32:x4(o.type))}function Sr(o,u){var p=ae.p;try{return ae.p=o,u()}finally{ae.p=p}}var Gr=Math.random().toString(36).slice(2),ei="__reactFiber$"+Gr,Fi="__reactProps$"+Gr,xo="__reactContainer$"+Gr,ia="__reactEvents$"+Gr,So="__reactListeners$"+Gr,Wc="__reactHandles$"+Gr,Md="__reactResources$"+Gr,Ua="__reactMarker$"+Gr;function pl(o){delete o[ei],delete o[Fi],delete o[ia],delete o[So],delete o[Wc]}function ml(o){var u=o[ei];if(u)return u;for(var p=o.parentNode;p;){if(u=p[xo]||p[ei]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(o=r4(o);o!==null;){if(p=o[ei])return p;o=r4(o)}return u}o=p,p=o.parentNode}return null}function gl(o){if(o=o[ei]||o[xo]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function vu(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function Co(o){var u=o[Md];return u||(u=o[Md]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function ti(o){o[Ua]=!0}var Fa=new Set,Ad={};function wo(o,u){qr(o,u),qr(o+"Capture",u)}function qr(o,u){for(Ad[o]=u,o=0;o<u.length;o++)Fa.add(u[o])}var Vr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jc={},vn={};function Pp(o){return fs.call(vn,o)?!0:fs.call(Jc,o)?!1:Vr.test(o)?vn[o]=!0:(Jc[o]=!0,!1)}function bu(o,u,p){if(Pp(u))if(p===null)o.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+p)}}function Zc(o,u,p){if(p===null)o.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+p)}}function ra(o,u,p,y){if(y===null)o.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(u,p,""+y)}}function ms(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Nd(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ip(o,u,p){var y=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var w=y.get,E=y.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return w.call(this)},set:function(D){p=""+D,E.call(this,D)}}),Object.defineProperty(o,u,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function $c(o){if(!o._valueTracker){var u=Nd(o)?"checked":"value";o._valueTracker=Ip(o,u,""+o[u])}}function Gi(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var p=u.getValue(),y="";return o&&(y=Nd(o)?o.checked?"true":"false":o.value),o=y,o!==p?(u.setValue(o),!0):!1}function ln(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Rd=/[\n"\\]/g;function qi(o){return o.replace(Rd,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function xu(o,u,p,y,w,E,D,H){o.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?o.type=D:o.removeAttribute("type"),u!=null?D==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+ms(u)):o.value!==""+ms(u)&&(o.value=""+ms(u)):D!=="submit"&&D!=="reset"||o.removeAttribute("value"),u!=null?Is(o,D,ms(u)):p!=null?Is(o,D,ms(p)):y!=null&&o.removeAttribute("value"),w==null&&E!=null&&(o.defaultChecked=!!E),w!=null&&(o.checked=w&&typeof w!="function"&&typeof w!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.name=""+ms(H):o.removeAttribute("name")}function Od(o,u,p,y,w,E,D,H){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),u!=null||p!=null){if(!(E!=="submit"&&E!=="reset"||u!=null)){$c(o);return}p=p!=null?""+ms(p):"",u=u!=null?""+ms(u):p,H||u===o.value||(o.value=u),o.defaultValue=u}y=y??w,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=H?o.checked:!!y,o.defaultChecked=!!y,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(o.name=D),$c(o)}function Is(o,u,p){u==="number"&&ln(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function Ga(o,u,p,y){if(o=o.options,u){u={};for(var w=0;w<p.length;w++)u["$"+p[w]]=!0;for(p=0;p<o.length;p++)w=u.hasOwnProperty("$"+o[p].value),o[p].selected!==w&&(o[p].selected=w),w&&y&&(o[p].defaultSelected=!0)}else{for(p=""+ms(p),u=null,w=0;w<o.length;w++){if(o[w].value===p){o[w].selected=!0,y&&(o[w].defaultSelected=!0);return}u!==null||o[w].disabled||(u=o[w])}u!==null&&(u.selected=!0)}}function Dd(o,u,p){if(u!=null&&(u=""+ms(u),u!==o.value&&(o.value=u),p==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=p!=null?""+ms(p):""}function zd(o,u,p,y){if(u==null){if(y!=null){if(p!=null)throw Error(i(92));if(te(y)){if(1<y.length)throw Error(i(93));y=y[0]}p=y}p==null&&(p=""),u=p}p=ms(u),o.defaultValue=p,y=o.textContent,y===p&&y!==""&&y!==null&&(o.value=y),$c(o)}function yl(o,u){if(u){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=u;return}}o.textContent=u}var ty=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hp(o,u,p){var y=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":y?o.setProperty(u,p):typeof p!="number"||p===0||ty.has(u)?u==="float"?o.cssFloat=p:o[u]=(""+p).trim():o[u]=p+"px"}function Up(o,u,p){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var w in u)y=u[w],u.hasOwnProperty(w)&&p[w]!==y&&Hp(o,w,y)}else for(var E in u)u.hasOwnProperty(E)&&Hp(o,E,u[E])}function jd(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ny=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ef(o){return Fp.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function qa(){}var Ld=null;function Bd(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var vl=null,Eo=null;function Gp(o){var u=gl(o);if(u&&(o=u.stateNode)){var p=o[Fi]||null;e:switch(o=u.stateNode,u.type){case"input":if(xu(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+qi(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var y=p[u];if(y!==o&&y.form===o.form){var w=y[Fi]||null;if(!w)throw Error(i(90));xu(y,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(u=0;u<p.length;u++)y=p[u],y.form===o.form&&Gi(y)}break e;case"textarea":Dd(o,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&Ga(o,!!p.multiple,u,!1)}}}var Pd=!1;function qp(o,u,p){if(Pd)return o(u,p);Pd=!0;try{var y=o(u);return y}finally{if(Pd=!1,(vl!==null||Eo!==null)&&(qs(),vl&&(u=vl,o=Eo,Eo=vl=null,Gp(u),o)))for(u=0;u<o.length;u++)Gp(o[u])}}function Su(o,u){var p=o.stateNode;if(p===null)return null;var y=p[Fi]||null;if(y===null)return null;p=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(i(231,u,typeof p));return p}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vp=!1;if(sa)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){Vp=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{Vp=!1}var Yr=null,Id=null,bl=null;function tf(){if(bl)return bl;var o,u=Id,p=u.length,y,w="value"in Yr?Yr.value:Yr.textContent,E=w.length;for(o=0;o<p&&u[o]===w[o];o++);var D=p-o;for(y=1;y<=D&&u[p-y]===w[E-y];y++);return bl=w.slice(o,1<y?1-y:void 0)}function nf(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function wu(){return!0}function iy(){return!1}function sr(o){function u(p,y,w,E,D){this._reactName=p,this._targetInst=w,this.type=y,this.nativeEvent=E,this.target=D,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(p=o[H],this[H]=p?p(E):E[H]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?wu:iy,this.isPropagationStopped=iy,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=wu)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=wu)},persist:function(){},isPersistent:wu}),u}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=sr(To),Eu=g({},To,{view:0,detail:0}),ry=sr(Eu),sf,Hd,Tu,_u=g({},Eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Tu&&(Tu&&o.type==="mousemove"?(sf=o.screenX-Tu.screenX,Hd=o.screenY-Tu.screenY):Hd=sf=0,Tu=o),sf)},movementY:function(o){return"movementY"in o?o.movementY:Hd}}),Yp=sr(_u),sy=g({},_u,{dataTransfer:0}),ay=sr(sy),Kp=g({},Eu,{relatedTarget:0}),Ud=sr(Kp),oy=g({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),Jx=sr(oy),Zx=g({},To,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ly=sr(Zx),af=g({},To,{data:0}),Fd=sr(af),Gd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xp(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=cy[o])?!!u[o]:!1}function qd(){return Xp}var fy=g({},Eu,{key:function(o){if(o.key){var u=Gd[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=nf(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?uy[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qd,charCode:function(o){return o.type==="keypress"?nf(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?nf(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),xl=sr(fy),Vd=g({},_u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qp=sr(Vd),Wp=g({},Eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qd}),dy=sr(Wp),hy=g({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),$x=sr(hy),Ni=g({},_u,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),py=sr(Ni),my=g({},To,{newState:0,oldState:0}),gy=sr(my),yy=[9,13,27,32],Sl=sa&&"CompositionEvent"in window,ku=null;sa&&"documentMode"in document&&(ku=document.documentMode);var Yd=sa&&"TextEvent"in window&&!ku,Jp=sa&&(!Sl||ku&&8<ku&&11>=ku),vy=" ",of=!1;function Kd(o,u){switch(o){case"keyup":return yy.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Cl=!1;function by(o,u){switch(o){case"compositionend":return Zp(u);case"keypress":return u.which!==32?null:(of=!0,vy);case"textInput":return o=u.data,o===vy&&of?null:o;default:return null}}function $p(o,u){if(Cl)return o==="compositionend"||!Sl&&Kd(o,u)?(o=tf(),bl=Id=Yr=null,Cl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Jp&&u.locale!=="ko"?null:u.data;default:return null}}var em={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tm(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!em[o.type]:u==="textarea"}function Xd(o,u,p,y){vl?Eo?Eo.push(y):Eo=[y]:vl=y,u=E1(u,"onChange"),0<u.length&&(p=new rf("onChange","change",null,p,y),o.push({event:p,listeners:u}))}var _o=null,wl=null;function xy(o){q3(o,0)}function Mu(o){var u=vu(o);if(Gi(u))return o}function nm(o,u){if(o==="change")return u}var aa=!1;if(sa){var lf;if(sa){var im="oninput"in document;if(!im){var rm=document.createElement("div");rm.setAttribute("oninput","return;"),im=typeof rm.oninput=="function"}lf=im}else lf=!1;aa=lf&&(!document.documentMode||9<document.documentMode)}function gs(){_o&&(_o.detachEvent("onpropertychange",uf),wl=_o=null)}function uf(o){if(o.propertyName==="value"&&Mu(wl)){var u=[];Xd(u,wl,o,Bd(o)),qp(xy,u)}}function Sy(o,u,p){o==="focusin"?(gs(),_o=u,wl=p,_o.attachEvent("onpropertychange",uf)):o==="focusout"&&gs()}function sm(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Mu(wl)}function Cy(o,u){if(o==="click")return Mu(u)}function wy(o,u){if(o==="input"||o==="change")return Mu(u)}function am(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var ar=typeof Object.is=="function"?Object.is:am;function Au(o,u){if(ar(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var p=Object.keys(o),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var w=p[y];if(!fs.call(u,w)||!ar(o[w],u[w]))return!1}return!0}function cf(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Nu(o,u){var p=cf(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=u&&y>=u)return{node:p,offset:u-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=cf(p)}}function Wt(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Wt(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Ey(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=ln(o.document);u instanceof o.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)o=u.contentWindow;else break;u=ln(o.document)}return u}function om(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var Ty=sa&&"documentMode"in document&&11>=document.documentMode,oa=null,la=null,Ru=null,Qd=!1;function Ou(o,u,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Qd||oa==null||oa!==ln(y)||(y=oa,"selectionStart"in y&&om(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Ru&&Au(Ru,y)||(Ru=y,y=E1(la,"onSelect"),0<y.length&&(u=new rf("onSelect","select",null,u,p),o.push({event:u,listeners:y}),u.target=oa)))}function Vi(o,u){var p={};return p[o.toLowerCase()]=u.toLowerCase(),p["Webkit"+o]="webkit"+u,p["Moz"+o]="moz"+u,p}var El={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},ff={},lm={};sa&&(lm=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Va(o){if(ff[o])return ff[o];if(!El[o])return o;var u=El[o],p;for(p in u)if(u.hasOwnProperty(p)&&p in lm)return ff[o]=u[p];return o}var Wd=Va("animationend"),df=Va("animationiteration"),um=Va("animationstart"),_y=Va("transitionrun"),e2=Va("transitionstart"),ky=Va("transitioncancel"),cm=Va("transitionend"),ys=new Map,hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hf.push("scrollEnd");function vs(o,u){ys.set(o,u),wo(u,[o])}var pf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},bs=[],Ya=0,yi=0;function mf(){for(var o=Ya,u=yi=Ya=0;u<o;){var p=bs[u];bs[u++]=null;var y=bs[u];bs[u++]=null;var w=bs[u];bs[u++]=null;var E=bs[u];if(bs[u++]=null,y!==null&&w!==null){var D=y.pending;D===null?w.next=w:(w.next=D.next,D.next=w),y.pending=w}E!==0&&ko(p,w,E)}}function vi(o,u,p,y){bs[Ya++]=o,bs[Ya++]=u,bs[Ya++]=p,bs[Ya++]=y,yi|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Jd(o,u,p,y){return vi(o,u,p,y),xs(o)}function or(o,u){return vi(o,null,null,u),xs(o)}function ko(o,u,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var w=!1,E=o.return;E!==null;)E.childLanes|=p,y=E.alternate,y!==null&&(y.childLanes|=p),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(w=!0)),o=E,E=E.return;return o.tag===3?(E=o.stateNode,w&&u!==null&&(w=31-It(p),o=E.hiddenUpdates,y=o[w],y===null?o[w]=[u]:y.push(u),u.lane=p|536870912),E):null}function xs(o){if(50<Yo)throw Yo=0,Gl=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Mo={};function fm(o,u,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(o,u,p,y){return new fm(o,u,p,y)}function Zd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Cr(o,u){var p=o.alternate;return p===null?(p=bn(o.tag,u,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=u,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,u=o.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function Du(o,u){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,u=p.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function ua(o,u,p,y,w,E){var D=0;if(y=o,typeof o=="function")Zd(o)&&(D=1);else if(typeof o=="string")D=v7(o,p,ke.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case $:return o=bn(31,p,u,w),o.elementType=$,o.lanes=E,o;case T:return Ao(p.children,w,E,u);case k:D=8,w|=24;break;case A:return o=bn(12,p,u,w|2),o.elementType=A,o.lanes=E,o;case I:return o=bn(13,p,u,w),o.elementType=I,o.lanes=E,o;case j:return o=bn(19,p,u,w),o.elementType=j,o.lanes=E,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case z:D=10;break e;case O:D=9;break e;case L:D=11;break e;case B:D=14;break e;case q:D=16,y=null;break e}D=29,p=Error(i(130,o===null?"null":typeof o,"")),y=null}return u=bn(D,p,u,w),u.elementType=o,u.type=y,u.lanes=E,u}function Ao(o,u,p,y){return o=bn(7,o,y,u),o.lanes=p,o}function $d(o,u,p){return o=bn(6,o,null,u),o.lanes=p,o}function zu(o){var u=bn(18,null,null,0);return u.stateNode=o,u}function eh(o,u,p){return u=bn(4,o.children!==null?o.children:[],o.key,u),u.lanes=p,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var gf=new WeakMap;function Kr(o,u){if(typeof o=="object"&&o!==null){var p=gf.get(o);return p!==void 0?p:(u={value:o,source:u,stack:Ha(u)},gf.set(o,u),u)}return{value:o,source:u,stack:Ha(u)}}var No=[],Ro=0,ju=null,Lu=0,wr=[],un=0,Ka=null,xn=1,Hs="";function ca(o,u){No[Ro++]=Lu,No[Ro++]=ju,ju=o,Lu=u}function My(o,u,p){wr[un++]=xn,wr[un++]=Hs,wr[un++]=Ka,Ka=o;var y=xn;o=Hs;var w=32-It(y)-1;y&=~(1<<w),p+=1;var E=32-It(u)+w;if(30<E){var D=w-w%5;E=(y&(1<<D)-1).toString(32),y>>=D,w-=D,xn=1<<32-It(u)+w|p<<w|y,Hs=E+o}else xn=1<<E|p<<w|y,Hs=o}function fa(o){o.return!==null&&(ca(o,1),My(o,1,0))}function th(o){for(;o===ju;)ju=No[--Ro],No[Ro]=null,Lu=No[--Ro],No[Ro]=null;for(;o===Ka;)Ka=wr[--un],wr[un]=null,Hs=wr[--un],wr[un]=null,xn=wr[--un],wr[un]=null}function nh(o,u){wr[un++]=xn,wr[un++]=Hs,wr[un++]=Ka,xn=u.id,Hs=u.overflow,Ka=o}var zn=null,Jt=null,_t=!1,Xa=null,Xr=!1,Bu=Error(i(519));function da(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ha(Kr(u,o)),Bu}function Ay(o){var u=o.stateNode,p=o.type,y=o.memoizedProps;switch(u[ei]=o,u[Fi]=y,p){case"dialog":At("cancel",u),At("close",u);break;case"iframe":case"object":case"embed":At("load",u);break;case"video":case"audio":for(p=0;p<Ds.length;p++)At(Ds[p],u);break;case"source":At("error",u);break;case"img":case"image":case"link":At("error",u),At("load",u);break;case"details":At("toggle",u);break;case"input":At("invalid",u),Od(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":At("invalid",u);break;case"textarea":At("invalid",u),zd(u,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||y.suppressHydrationWarning===!0||X3(u.textContent,p)?(y.popover!=null&&(At("beforetoggle",u),At("toggle",u)),y.onScroll!=null&&At("scroll",u),y.onScrollEnd!=null&&At("scrollend",u),y.onClick!=null&&(u.onclick=qa),u=!0):u=!1,u||da(o,!0)}function Ny(o){for(zn=o.return;zn;)switch(zn.tag){case 5:case 31:case 13:Xr=!1;return;case 27:case 3:Xr=!0;return;default:zn=zn.return}}function Pu(o){if(o!==zn)return!1;if(!_t)return Ny(o),_t=!0,!1;var u=o.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||g2(o.type,o.memoizedProps)),p=!p),p&&Jt&&da(o),Ny(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Jt=i4(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Jt=i4(o)}else u===27?(u=Jt,rc(o.type)?(o=S2,S2=null,Jt=o):Jt=u):Jt=zn?ka(o.stateNode.nextSibling):null;return!0}function Oo(){Jt=zn=null,_t=!1}function ih(){var o=Xa;return o!==null&&(Ln===null?Ln=o:Ln.push.apply(Ln,o),Xa=null),o}function ha(o){Xa===null?Xa=[o]:Xa.push(o)}var Iu=Y(null),Do=null,pa=null;function Qa(o,u,p){U(Iu,u._currentValue),u._currentValue=p}function ma(o){o._currentValue=Iu.current,se(Iu)}function rh(o,u,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===p)break;o=o.return}}function sh(o,u,p,y){var w=o.child;for(w!==null&&(w.return=o);w!==null;){var E=w.dependencies;if(E!==null){var D=w.child;E=E.firstContext;e:for(;E!==null;){var H=E;E=w;for(var Q=0;Q<u.length;Q++)if(H.context===u[Q]){E.lanes|=p,H=E.alternate,H!==null&&(H.lanes|=p),rh(E.return,p,o),y||(D=null);break e}E=H.next}}else if(w.tag===18){if(D=w.return,D===null)throw Error(i(341));D.lanes|=p,E=D.alternate,E!==null&&(E.lanes|=p),rh(D,p,o),D=null}else D=w.child;if(D!==null)D.return=w;else for(D=w;D!==null;){if(D===o){D=null;break}if(w=D.sibling,w!==null){w.return=D.return,D=w;break}D=D.return}w=D}}function ga(o,u,p,y){o=null;for(var w=u,E=!1;w!==null;){if(!E){if((w.flags&524288)!==0)E=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var D=w.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var H=w.type;ar(w.pendingProps.value,D.value)||(o!==null?o.push(H):o=[H])}}else if(w===Ie.current){if(D=w.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(o!==null?o.push(lg):o=[lg])}w=w.return}o!==null&&sh(u,o,p,y),u.flags|=262144}function yf(o){for(o=o.firstContext;o!==null;){if(!ar(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function zo(o){Do=o,pa=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function tt(o){return Ry(Do,o)}function Hu(o,u){return Do===null&&zo(o),Ry(o,u)}function Ry(o,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},pa===null){if(o===null)throw Error(i(308));pa=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else pa=pa.next=u;return p}var Oy=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(p){return p()})}},t2=t.unstable_scheduleCallback,n2=t.unstable_NormalPriority,ni={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dm(){return{controller:new Oy,data:new Map,refCount:0}}function Tl(o){o.refCount--,o.refCount===0&&t2(n2,function(){o.controller.abort()})}var Qr=null,ah=0,Wa=0,Ss=null;function hm(o,u){if(Qr===null){var p=Qr=[];ah=0,Wa=pe(),Ss={status:"pending",value:void 0,then:function(y){p.push(y)}}}return ah++,u.then(pm,pm),u}function pm(){if(--ah===0&&Qr!==null){Ss!==null&&(Ss.status="fulfilled");var o=Qr;Qr=null,Wa=0,Ss=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function mm(o,u){var p=[],y={status:"pending",value:null,reason:null,then:function(w){p.push(w)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var w=0;w<p.length;w++)(0,p[w])(u)},function(w){for(y.status="rejected",y.reason=w,w=0;w<p.length;w++)(0,p[w])(void 0)}),y}var Dy=V.S;V.S=function(o,u){ng=Hn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&hm(o,u),Dy!==null&&Dy(o,u)};var jo=Y(null);function oh(){var o=jo.current;return o!==null?o:it.pooledCache}function vf(o,u){u===null?U(jo,jo.current):U(jo,u.pool)}function gm(){var o=oh();return o===null?null:{parent:ni._currentValue,pool:o}}var _l=Error(i(460)),bf=Error(i(474)),ht=Error(i(542)),lh={then:function(){}};function Er(o){return o=o.status,o==="fulfilled"||o==="rejected"}function uh(o,u,p){switch(p=o[p],p===void 0?o.push(u):p!==u&&(u.then(qa,qa),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Al(o),o;default:if(typeof u.status=="string")u.then(qa,qa);else{if(o=it,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var w=u;w.status="fulfilled",w.value=y}},function(y){if(u.status==="pending"){var w=u;w.status="rejected",w.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Al(o),o}throw ya=u,_l}}function kl(o){try{var u=o._init;return u(o._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(ya=p,_l):p}}var ya=null;function Ml(){if(ya===null)throw Error(i(459));var o=ya;return ya=null,o}function Al(o){if(o===_l||o===ht)throw Error(i(483))}var Nl=null,Rl=0;function xf(o){var u=Rl;return Rl+=1,Nl===null&&(Nl=[]),uh(Nl,o,u)}function Cs(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Uu(o,u){throw u.$$typeof===v?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function ch(o){function u(ne,ee){if(o){var le=ne.deletions;le===null?(ne.deletions=[ee],ne.flags|=16):le.push(ee)}}function p(ne,ee){if(!o)return null;for(;ee!==null;)u(ne,ee),ee=ee.sibling;return null}function y(ne){for(var ee=new Map;ne!==null;)ne.key!==null?ee.set(ne.key,ne):ee.set(ne.index,ne),ne=ne.sibling;return ee}function w(ne,ee){return ne=Cr(ne,ee),ne.index=0,ne.sibling=null,ne}function E(ne,ee,le){return ne.index=le,o?(le=ne.alternate,le!==null?(le=le.index,le<ee?(ne.flags|=67108866,ee):le):(ne.flags|=67108866,ee)):(ne.flags|=1048576,ee)}function D(ne){return o&&ne.alternate===null&&(ne.flags|=67108866),ne}function H(ne,ee,le,xe){return ee===null||ee.tag!==6?(ee=$d(le,ne.mode,xe),ee.return=ne,ee):(ee=w(ee,le),ee.return=ne,ee)}function Q(ne,ee,le,xe){var Ye=le.type;return Ye===T?ve(ne,ee,le.props.children,xe,le.key):ee!==null&&(ee.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===q&&kl(Ye)===ee.type)?(ee=w(ee,le.props),Cs(ee,le),ee.return=ne,ee):(ee=ua(le.type,le.key,le.props,null,ne.mode,xe),Cs(ee,le),ee.return=ne,ee)}function ue(ne,ee,le,xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==le.containerInfo||ee.stateNode.implementation!==le.implementation?(ee=eh(le,ne.mode,xe),ee.return=ne,ee):(ee=w(ee,le.children||[]),ee.return=ne,ee)}function ve(ne,ee,le,xe,Ye){return ee===null||ee.tag!==7?(ee=Ao(le,ne.mode,xe,Ye),ee.return=ne,ee):(ee=w(ee,le),ee.return=ne,ee)}function Se(ne,ee,le){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=$d(""+ee,ne.mode,le),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:return le=ua(ee.type,ee.key,ee.props,null,ne.mode,le),Cs(le,ee),le.return=ne,le;case S:return ee=eh(ee,ne.mode,le),ee.return=ne,ee;case q:return ee=kl(ee),Se(ne,ee,le)}if(te(ee)||J(ee))return ee=Ao(ee,ne.mode,le,null),ee.return=ne,ee;if(typeof ee.then=="function")return Se(ne,xf(ee),le);if(ee.$$typeof===z)return Se(ne,Hu(ne,ee),le);Uu(ne,ee)}return null}function de(ne,ee,le,xe){var Ye=ee!==null?ee.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Ye!==null?null:H(ne,ee,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case x:return le.key===Ye?Q(ne,ee,le,xe):null;case S:return le.key===Ye?ue(ne,ee,le,xe):null;case q:return le=kl(le),de(ne,ee,le,xe)}if(te(le)||J(le))return Ye!==null?null:ve(ne,ee,le,xe,null);if(typeof le.then=="function")return de(ne,ee,xf(le),xe);if(le.$$typeof===z)return de(ne,ee,Hu(ne,le),xe);Uu(ne,le)}return null}function ge(ne,ee,le,xe,Ye){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ne=ne.get(le)||null,H(ee,ne,""+xe,Ye);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case x:return ne=ne.get(xe.key===null?le:xe.key)||null,Q(ee,ne,xe,Ye);case S:return ne=ne.get(xe.key===null?le:xe.key)||null,ue(ee,ne,xe,Ye);case q:return xe=kl(xe),ge(ne,ee,le,xe,Ye)}if(te(xe)||J(xe))return ne=ne.get(le)||null,ve(ee,ne,xe,Ye,null);if(typeof xe.then=="function")return ge(ne,ee,le,xf(xe),Ye);if(xe.$$typeof===z)return ge(ne,ee,le,Hu(ee,xe),Ye);Uu(ee,xe)}return null}function He(ne,ee,le,xe){for(var Ye=null,Ht=null,Ue=ee,gt=ee=0,Ot=null;Ue!==null&&gt<le.length;gt++){Ue.index>gt?(Ot=Ue,Ue=null):Ot=Ue.sibling;var Ut=de(ne,Ue,le[gt],xe);if(Ut===null){Ue===null&&(Ue=Ot);break}o&&Ue&&Ut.alternate===null&&u(ne,Ue),ee=E(Ut,ee,gt),Ht===null?Ye=Ut:Ht.sibling=Ut,Ht=Ut,Ue=Ot}if(gt===le.length)return p(ne,Ue),_t&&ca(ne,gt),Ye;if(Ue===null){for(;gt<le.length;gt++)Ue=Se(ne,le[gt],xe),Ue!==null&&(ee=E(Ue,ee,gt),Ht===null?Ye=Ue:Ht.sibling=Ue,Ht=Ue);return _t&&ca(ne,gt),Ye}for(Ue=y(Ue);gt<le.length;gt++)Ot=ge(Ue,ne,gt,le[gt],xe),Ot!==null&&(o&&Ot.alternate!==null&&Ue.delete(Ot.key===null?gt:Ot.key),ee=E(Ot,ee,gt),Ht===null?Ye=Ot:Ht.sibling=Ot,Ht=Ot);return o&&Ue.forEach(function(uc){return u(ne,uc)}),_t&&ca(ne,gt),Ye}function $e(ne,ee,le,xe){if(le==null)throw Error(i(151));for(var Ye=null,Ht=null,Ue=ee,gt=ee=0,Ot=null,Ut=le.next();Ue!==null&&!Ut.done;gt++,Ut=le.next()){Ue.index>gt?(Ot=Ue,Ue=null):Ot=Ue.sibling;var uc=de(ne,Ue,Ut.value,xe);if(uc===null){Ue===null&&(Ue=Ot);break}o&&Ue&&uc.alternate===null&&u(ne,Ue),ee=E(uc,ee,gt),Ht===null?Ye=uc:Ht.sibling=uc,Ht=uc,Ue=Ot}if(Ut.done)return p(ne,Ue),_t&&ca(ne,gt),Ye;if(Ue===null){for(;!Ut.done;gt++,Ut=le.next())Ut=Se(ne,Ut.value,xe),Ut!==null&&(ee=E(Ut,ee,gt),Ht===null?Ye=Ut:Ht.sibling=Ut,Ht=Ut);return _t&&ca(ne,gt),Ye}for(Ue=y(Ue);!Ut.done;gt++,Ut=le.next())Ut=ge(Ue,ne,gt,Ut.value,xe),Ut!==null&&(o&&Ut.alternate!==null&&Ue.delete(Ut.key===null?gt:Ut.key),ee=E(Ut,ee,gt),Ht===null?Ye=Ut:Ht.sibling=Ut,Ht=Ut);return o&&Ue.forEach(function(A7){return u(ne,A7)}),_t&&ca(ne,gt),Ye}function en(ne,ee,le,xe){if(typeof le=="object"&&le!==null&&le.type===T&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case x:e:{for(var Ye=le.key;ee!==null;){if(ee.key===Ye){if(Ye=le.type,Ye===T){if(ee.tag===7){p(ne,ee.sibling),xe=w(ee,le.props.children),xe.return=ne,ne=xe;break e}}else if(ee.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===q&&kl(Ye)===ee.type){p(ne,ee.sibling),xe=w(ee,le.props),Cs(xe,le),xe.return=ne,ne=xe;break e}p(ne,ee);break}else u(ne,ee);ee=ee.sibling}le.type===T?(xe=Ao(le.props.children,ne.mode,xe,le.key),xe.return=ne,ne=xe):(xe=ua(le.type,le.key,le.props,null,ne.mode,xe),Cs(xe,le),xe.return=ne,ne=xe)}return D(ne);case S:e:{for(Ye=le.key;ee!==null;){if(ee.key===Ye)if(ee.tag===4&&ee.stateNode.containerInfo===le.containerInfo&&ee.stateNode.implementation===le.implementation){p(ne,ee.sibling),xe=w(ee,le.children||[]),xe.return=ne,ne=xe;break e}else{p(ne,ee);break}else u(ne,ee);ee=ee.sibling}xe=eh(le,ne.mode,xe),xe.return=ne,ne=xe}return D(ne);case q:return le=kl(le),en(ne,ee,le,xe)}if(te(le))return He(ne,ee,le,xe);if(J(le)){if(Ye=J(le),typeof Ye!="function")throw Error(i(150));return le=Ye.call(le),$e(ne,ee,le,xe)}if(typeof le.then=="function")return en(ne,ee,xf(le),xe);if(le.$$typeof===z)return en(ne,ee,Hu(ne,le),xe);Uu(ne,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ee!==null&&ee.tag===6?(p(ne,ee.sibling),xe=w(ee,le),xe.return=ne,ne=xe):(p(ne,ee),xe=$d(le,ne.mode,xe),xe.return=ne,ne=xe),D(ne)):p(ne,ee)}return function(ne,ee,le,xe){try{Rl=0;var Ye=en(ne,ee,le,xe);return Nl=null,Ye}catch(Ue){if(Ue===_l||Ue===ht)throw Ue;var Ht=bn(29,Ue,null,ne.mode);return Ht.lanes=xe,Ht.return=ne,Ht}finally{}}}var Ja=ch(!0),fh=ch(!1),lr=!1;function Sf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ym(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Za(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Lo(o,u,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(qe&2)!==0){var w=y.pending;return w===null?u.next=u:(u.next=w.next,w.next=u),y.pending=u,u=xs(o),ko(o,null,p),u}return vi(o,y,u,p),xs(o)}function Bo(o,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,p|=y,u.lanes=p,Ui(o,p)}}function Ve(o,u){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var w=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var D={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};E===null?w=E=D:E=E.next=D,p=p.next}while(p!==null);E===null?w=E=u:E=E.next=u}else w=E=u;p={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:E,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=u}var vm=!1;function Cf(){if(vm){var o=Ss;if(o!==null)throw o}}function Fu(o,u,p,y){vm=!1;var w=o.updateQueue;lr=!1;var E=w.firstBaseUpdate,D=w.lastBaseUpdate,H=w.shared.pending;if(H!==null){w.shared.pending=null;var Q=H,ue=Q.next;Q.next=null,D===null?E=ue:D.next=ue,D=Q;var ve=o.alternate;ve!==null&&(ve=ve.updateQueue,H=ve.lastBaseUpdate,H!==D&&(H===null?ve.firstBaseUpdate=ue:H.next=ue,ve.lastBaseUpdate=Q))}if(E!==null){var Se=w.baseState;D=0,ve=ue=Q=null,H=E;do{var de=H.lane&-536870913,ge=de!==H.lane;if(ge?(ft&de)===de:(y&de)===de){de!==0&&de===Wa&&(vm=!0),ve!==null&&(ve=ve.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var He=o,$e=H;de=u;var en=p;switch($e.tag){case 1:if(He=$e.payload,typeof He=="function"){Se=He.call(en,Se,de);break e}Se=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=$e.payload,de=typeof He=="function"?He.call(en,Se,de):He,de==null)break e;Se=g({},Se,de);break e;case 2:lr=!0}}de=H.callback,de!==null&&(o.flags|=64,ge&&(o.flags|=8192),ge=w.callbacks,ge===null?w.callbacks=[de]:ge.push(de))}else ge={lane:de,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ve===null?(ue=ve=ge,Q=Se):ve=ve.next=ge,D|=de;if(H=H.next,H===null){if(H=w.shared.pending,H===null)break;ge=H,H=ge.next,ge.next=null,w.lastBaseUpdate=ge,w.shared.pending=null}}while(!0);ve===null&&(Q=Se),w.baseState=Q,w.firstBaseUpdate=ue,w.lastBaseUpdate=ve,E===null&&(w.shared.lanes=0),Ea|=D,o.lanes=D,o.memoizedState=Se}}function Gu(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function zy(o,u){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Gu(p[o],u)}var qu=Y(null),dh=Y(0);function jy(o,u){o=$r,U(dh,o),U(qu,u),$r=o|u.baseLanes}function bm(){U(dh,$r),U(qu,qu.current)}function wf(){$r=dh.current,se(qu),se(dh)}var Tr=Y(null),ur=null;function $a(o){var u=o.alternate;U(kt,kt.current&1),U(Tr,o),ur===null&&(u===null||qu.current!==null||u.memoizedState!==null)&&(ur=o)}function xm(o){U(kt,kt.current),U(Tr,o),ur===null&&(ur=o)}function Ly(o){o.tag===22?(U(kt,kt.current),U(Tr,o),ur===null&&(ur=o)):_r()}function _r(){U(kt,kt.current),U(Tr,Tr.current)}function Fn(o){se(Tr),ur===o&&(ur=null),se(kt)}var kt=Y(0);function Wr(o){for(var u=o;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||b2(p)||x2(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var cn=0,lt=null,Yt=null,wt=null,ws=!1,Vu=!1,Ol=!1,hh=0,Ef=0,Yu=null,Sm=0;function Sn(){throw Error(i(321))}function Cm(o,u){if(u===null)return!1;for(var p=0;p<u.length&&p<o.length;p++)if(!ar(o[p],u[p]))return!1;return!0}function ph(o,u,p,y,w,E){return cn=E,lt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,V.H=o===null||o.memoizedState===null?p1:Fm,Ol=!1,E=p(y,w),Ol=!1,Vu&&(E=Dl(u,p,y,w)),By(o),E}function By(o){V.H=Ku;var u=Yt!==null&&Yt.next!==null;if(cn=0,wt=Yt=lt=null,ws=!1,Ef=0,Yu=null,u)throw Error(i(300));o===null||ii||(o=o.dependencies,o!==null&&yf(o)&&(ii=!0))}function Dl(o,u,p,y){lt=o;var w=0;do{if(Vu&&(Yu=null),Ef=0,Vu=!1,25<=w)throw Error(i(301));if(w+=1,wt=Yt=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}V.H=Es,E=u(p,y)}while(Vu);return E}function zl(){var o=V.H,u=o.useState()[0];return u=typeof u.then=="function"?Tf(u):u,o=o.useState()[0],(Yt!==null?Yt.memoizedState:null)!==o&&(lt.flags|=1024),u}function wm(){var o=hh!==0;return hh=0,o}function Em(o,u,p){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~p}function Tm(o){if(ws){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}ws=!1}cn=0,wt=Yt=lt=null,Vu=!1,Ef=hh=0,Yu=null}function ui(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?lt.memoizedState=wt=o:wt=wt.next=o,wt}function Gn(){if(Yt===null){var o=lt.alternate;o=o!==null?o.memoizedState:null}else o=Yt.next;var u=wt===null?lt.memoizedState:wt.next;if(u!==null)wt=u,Yt=o;else{if(o===null)throw lt.alternate===null?Error(i(467)):Error(i(310));Yt=o,o={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},wt===null?lt.memoizedState=wt=o:wt=wt.next=o}return wt}function mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tf(o){var u=Ef;return Ef+=1,Yu===null&&(Yu=[]),o=uh(Yu,o,u),u=lt,(wt===null?u.memoizedState:wt.next)===null&&(u=u.alternate,V.H=u===null||u.memoizedState===null?p1:Fm),o}function Po(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Tf(o);if(o.$$typeof===z)return tt(o)}throw Error(i(438,String(o)))}function _m(o){var u=null,p=lt.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=lt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(w){return w.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=mh(),lt.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(o),y=0;y<o;y++)p[y]=G;return u.index++,p}function eo(o,u){return typeof u=="function"?u(o):u}function gh(o){var u=Gn();return km(u,Yt,o)}function km(o,u,p){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=p;var w=o.baseQueue,E=y.pending;if(E!==null){if(w!==null){var D=w.next;w.next=E.next,E.next=D}u.baseQueue=w=E,y.pending=null}if(E=o.baseState,w===null)o.memoizedState=E;else{u=w.next;var H=D=null,Q=null,ue=u,ve=!1;do{var Se=ue.lane&-536870913;if(Se!==ue.lane?(ft&Se)===Se:(cn&Se)===Se){var de=ue.revertLane;if(de===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Se===Wa&&(ve=!0);else if((cn&de)===de){ue=ue.next,de===Wa&&(ve=!0);continue}else Se={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(H=Q=Se,D=E):Q=Q.next=Se,lt.lanes|=de,Ea|=de;Se=ue.action,Ol&&p(E,Se),E=ue.hasEagerState?ue.eagerState:p(E,Se)}else de={lane:Se,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(H=Q=de,D=E):Q=Q.next=de,lt.lanes|=Se,Ea|=Se;ue=ue.next}while(ue!==null&&ue!==u);if(Q===null?D=E:Q.next=H,!ar(E,o.memoizedState)&&(ii=!0,ve&&(p=Ss,p!==null)))throw p;o.memoizedState=E,o.baseState=D,o.baseQueue=Q,y.lastRenderedState=E}return w===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function Mm(o){var u=Gn(),p=u.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=o;var y=p.dispatch,w=p.pending,E=u.memoizedState;if(w!==null){p.pending=null;var D=w=w.next;do E=o(E,D.action),D=D.next;while(D!==w);ar(E,u.memoizedState)||(ii=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),p.lastRenderedState=E}return[E,y]}function Py(o,u,p){var y=lt,w=Gn(),E=_t;if(E){if(p===void 0)throw Error(i(407));p=p()}else p=u();var D=!ar((Yt||w).memoizedState,p);if(D&&(w.memoizedState=p,ii=!0),w=w.queue,Lm(Uy.bind(null,y,w,o),[o]),w.getSnapshot!==u||D||wt!==null&&wt.memoizedState.tag&1){if(y.flags|=2048,Io(9,{destroy:void 0},Hy.bind(null,y,w,p,u),null),it===null)throw Error(i(349));E||(cn&127)!==0||Iy(y,u,p)}return p}function Iy(o,u,p){o.flags|=16384,o={getSnapshot:u,value:p},u=lt.updateQueue,u===null?(u=mh(),lt.updateQueue=u,u.stores=[o]):(p=u.stores,p===null?u.stores=[o]:p.push(o))}function Hy(o,u,p,y){u.value=p,u.getSnapshot=y,Fy(u)&&Gy(o)}function Uy(o,u,p){return p(function(){Fy(u)&&Gy(o)})}function Fy(o){var u=o.getSnapshot;o=o.value;try{var p=u();return!ar(o,p)}catch{return!0}}function Gy(o){var u=or(o,2);u!==null&&mt(u,o,2)}function Am(o){var u=ui();if(typeof o=="function"){var p=o;if(o=p(),Ol){li(!0);try{p()}finally{li(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:o},u}function Nm(o,u,p,y){return o.baseState=p,km(o,Yt,typeof y=="function"?y:eo)}function i2(o,u,p,y,w){if(xh(o))throw Error(i(485));if(o=u.action,o!==null){var E={payload:w,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){E.listeners.push(D)}};V.T!==null?p(!0):E.isTransition=!1,y(E),p=u.pending,p===null?(E.next=u.pending=E,qy(u,E)):(E.next=p.next,u.pending=p.next=E)}}function qy(o,u){var p=u.action,y=u.payload,w=o.state;if(u.isTransition){var E=V.T,D={};V.T=D;try{var H=p(w,y),Q=V.S;Q!==null&&Q(D,H),Vy(o,u,H)}catch(ue){Rm(o,u,ue)}finally{E!==null&&D.types!==null&&(E.types=D.types),V.T=E}}else try{E=p(w,y),Vy(o,u,E)}catch(ue){Rm(o,u,ue)}}function Vy(o,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Yy(o,u,y)},function(y){return Rm(o,u,y)}):Yy(o,u,p)}function Yy(o,u,p){u.status="fulfilled",u.value=p,Ky(u),o.state=p,u=o.pending,u!==null&&(p=u.next,p===u?o.pending=null:(p=p.next,u.next=p,qy(o,p)))}function Rm(o,u,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,Ky(u),u=u.next;while(u!==y)}o.action=null}function Ky(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Om(o,u){return u}function Dm(o,u){if(_t){var p=it.formState;if(p!==null){e:{var y=lt;if(_t){if(Jt){t:{for(var w=Jt,E=Xr;w.nodeType!==8;){if(!E){w=null;break t}if(w=ka(w.nextSibling),w===null){w=null;break t}}E=w.data,w=E==="F!"||E==="F"?w:null}if(w){Jt=ka(w.nextSibling),y=w.data==="F!";break e}}da(y)}y=!1}y&&(u=p[0])}}return p=ui(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Om,lastRenderedState:u},p.queue=y,p=f1.bind(null,lt,y),y.dispatch=p,y=Am(!1),E=Um.bind(null,lt,!1,y.queue),y=ui(),w={state:u,dispatch:null,action:o,pending:null},y.queue=w,p=i2.bind(null,lt,w,E,p),w.dispatch=p,y.memoizedState=o,[u,p,!1]}function Xy(o){var u=Gn();return zm(u,Yt,o)}function zm(o,u,p){if(u=km(o,u,Om)[0],o=gh(eo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Tf(u)}catch(D){throw D===_l?ht:D}else y=u;u=Gn();var w=u.queue,E=w.dispatch;return p!==u.memoizedState&&(lt.flags|=2048,Io(9,{destroy:void 0},Qy.bind(null,w,p),null)),[y,E,o]}function Qy(o,u){o.action=u}function jm(o){var u=Gn(),p=Yt;if(p!==null)return zm(u,p,o);Gn(),u=u.memoizedState,p=Gn();var y=p.queue.dispatch;return p.memoizedState=o,[u,y,!1]}function Io(o,u,p,y){return o={tag:o,create:p,deps:y,inst:u,next:null},u=lt.updateQueue,u===null&&(u=mh(),lt.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,u.lastEffect=o),o}function yh(){return Gn().memoizedState}function vh(o,u,p,y){var w=ui();lt.flags|=o,w.memoizedState=Io(1|u,{destroy:void 0},p,y===void 0?null:y)}function bh(o,u,p,y){var w=Gn();y=y===void 0?null:y;var E=w.memoizedState.inst;Yt!==null&&y!==null&&Cm(y,Yt.memoizedState.deps)?w.memoizedState=Io(u,E,p,y):(lt.flags|=o,w.memoizedState=Io(1|u,E,p,y))}function Wy(o,u){vh(8390656,8,o,u)}function Lm(o,u){bh(2048,8,o,u)}function Jy(o){lt.flags|=4;var u=lt.updateQueue;if(u===null)u=mh(),lt.updateQueue=u,u.events=[o];else{var p=u.events;p===null?u.events=[o]:p.push(o)}}function Zy(o){var u=Gn().memoizedState;return Jy({ref:u,nextImpl:o}),function(){if((qe&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function $y(o,u){return bh(4,2,o,u)}function e1(o,u){return bh(4,4,o,u)}function t1(o,u){if(typeof u=="function"){o=o();var p=u(o);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function n1(o,u,p){p=p!=null?p.concat([o]):null,bh(4,4,t1.bind(null,u,o),p)}function Bm(){}function i1(o,u){var p=Gn();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&Cm(u,y[1])?y[0]:(p.memoizedState=[o,u],o)}function r1(o,u){var p=Gn();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&Cm(u,y[1]))return y[0];if(y=o(),Ol){li(!0);try{o()}finally{li(!1)}}return p.memoizedState=[y,u],y}function Pm(o,u,p){return p===void 0||(cn&1073741824)!==0&&(ft&261930)===0?o.memoizedState=u:(o.memoizedState=p,o=bt(),lt.lanes|=o,Ea|=o,p)}function s1(o,u,p,y){return ar(p,u)?p:qu.current!==null?(o=Pm(o,p,y),ar(o,u)||(ii=!0),o):(cn&42)===0||(cn&1073741824)!==0&&(ft&261930)===0?(ii=!0,o.memoizedState=p):(o=bt(),lt.lanes|=o,Ea|=o,u)}function a1(o,u,p,y,w){var E=ae.p;ae.p=E!==0&&8>E?E:8;var D=V.T,H={};V.T=H,Um(o,!1,u,p);try{var Q=w(),ue=V.S;if(ue!==null&&ue(H,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ve=mm(Q,y);_f(o,u,ve,ts(o))}else _f(o,u,y,ts(o))}catch(Se){_f(o,u,{then:function(){},status:"rejected",reason:Se},ts())}finally{ae.p=E,D!==null&&H.types!==null&&(D.types=H.types),V.T=D}}function r2(){}function Im(o,u,p,y){if(o.tag!==5)throw Error(i(476));var w=o1(o).queue;a1(o,w,u,oe,p===null?r2:function(){return l1(o),p(y)})}function o1(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:oe},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:p},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function l1(o){var u=o1(o);u.next===null&&(u=o.alternate.memoizedState),_f(o,u.next.queue,{},ts())}function Hm(){return tt(lg)}function u1(){return Gn().memoizedState}function c1(){return Gn().memoizedState}function s2(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var p=ts();o=Za(p);var y=Lo(u,o,p);y!==null&&(mt(y,u,p),Bo(y,u,p)),u={cache:dm()},o.payload=u;return}u=u.return}}function a2(o,u,p){var y=ts();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},xh(o)?d1(u,p):(p=Jd(o,u,p,y),p!==null&&(mt(p,o,y),h1(p,u,y)))}function f1(o,u,p){var y=ts();_f(o,u,p,y)}function _f(o,u,p,y){var w={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(xh(o))d1(u,w);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var D=u.lastRenderedState,H=E(D,p);if(w.hasEagerState=!0,w.eagerState=H,ar(H,D))return vi(o,u,w,0),it===null&&mf(),!1}catch{}finally{}if(p=Jd(o,u,w,y),p!==null)return mt(p,o,y),h1(p,u,y),!0}return!1}function Um(o,u,p,y){if(y={lane:2,revertLane:pe(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},xh(o)){if(u)throw Error(i(479))}else u=Jd(o,p,y,2),u!==null&&mt(u,o,2)}function xh(o){var u=o.alternate;return o===lt||u!==null&&u===lt}function d1(o,u){Vu=ws=!0;var p=o.pending;p===null?u.next=u:(u.next=p.next,p.next=u),o.pending=u}function h1(o,u,p){if((p&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,p|=y,u.lanes=p,Ui(o,p)}}var Ku={readContext:tt,use:Po,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn};Ku.useEffectEvent=Sn;var p1={readContext:tt,use:Po,useCallback:function(o,u){return ui().memoizedState=[o,u===void 0?null:u],o},useContext:tt,useEffect:Wy,useImperativeHandle:function(o,u,p){p=p!=null?p.concat([o]):null,vh(4194308,4,t1.bind(null,u,o),p)},useLayoutEffect:function(o,u){return vh(4194308,4,o,u)},useInsertionEffect:function(o,u){vh(4,2,o,u)},useMemo:function(o,u){var p=ui();u=u===void 0?null:u;var y=o();if(Ol){li(!0);try{o()}finally{li(!1)}}return p.memoizedState=[y,u],y},useReducer:function(o,u,p){var y=ui();if(p!==void 0){var w=p(u);if(Ol){li(!0);try{p(u)}finally{li(!1)}}}else w=u;return y.memoizedState=y.baseState=w,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:w},y.queue=o,o=o.dispatch=a2.bind(null,lt,o),[y.memoizedState,o]},useRef:function(o){var u=ui();return o={current:o},u.memoizedState=o},useState:function(o){o=Am(o);var u=o.queue,p=f1.bind(null,lt,u);return u.dispatch=p,[o.memoizedState,p]},useDebugValue:Bm,useDeferredValue:function(o,u){var p=ui();return Pm(p,o,u)},useTransition:function(){var o=Am(!1);return o=a1.bind(null,lt,o.queue,!0,!1),ui().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,p){var y=lt,w=ui();if(_t){if(p===void 0)throw Error(i(407));p=p()}else{if(p=u(),it===null)throw Error(i(349));(ft&127)!==0||Iy(y,u,p)}w.memoizedState=p;var E={value:p,getSnapshot:u};return w.queue=E,Wy(Uy.bind(null,y,E,o),[o]),y.flags|=2048,Io(9,{destroy:void 0},Hy.bind(null,y,E,p,u),null),p},useId:function(){var o=ui(),u=it.identifierPrefix;if(_t){var p=Hs,y=xn;p=(y&~(1<<32-It(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=hh++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=Sm++,u="_"+u+"r_"+p.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Hm,useFormState:Dm,useActionState:Dm,useOptimistic:function(o){var u=ui();u.memoizedState=u.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Um.bind(null,lt,!0,p),p.dispatch=u,[o,u]},useMemoCache:_m,useCacheRefresh:function(){return ui().memoizedState=s2.bind(null,lt)},useEffectEvent:function(o){var u=ui(),p={impl:o};return u.memoizedState=p,function(){if((qe&2)!==0)throw Error(i(440));return p.impl.apply(void 0,arguments)}}},Fm={readContext:tt,use:Po,useCallback:i1,useContext:tt,useEffect:Lm,useImperativeHandle:n1,useInsertionEffect:$y,useLayoutEffect:e1,useMemo:r1,useReducer:gh,useRef:yh,useState:function(){return gh(eo)},useDebugValue:Bm,useDeferredValue:function(o,u){var p=Gn();return s1(p,Yt.memoizedState,o,u)},useTransition:function(){var o=gh(eo)[0],u=Gn().memoizedState;return[typeof o=="boolean"?o:Tf(o),u]},useSyncExternalStore:Py,useId:u1,useHostTransitionStatus:Hm,useFormState:Xy,useActionState:Xy,useOptimistic:function(o,u){var p=Gn();return Nm(p,Yt,o,u)},useMemoCache:_m,useCacheRefresh:c1};Fm.useEffectEvent=Zy;var Es={readContext:tt,use:Po,useCallback:i1,useContext:tt,useEffect:Lm,useImperativeHandle:n1,useInsertionEffect:$y,useLayoutEffect:e1,useMemo:r1,useReducer:Mm,useRef:yh,useState:function(){return Mm(eo)},useDebugValue:Bm,useDeferredValue:function(o,u){var p=Gn();return Yt===null?Pm(p,o,u):s1(p,Yt.memoizedState,o,u)},useTransition:function(){var o=Mm(eo)[0],u=Gn().memoizedState;return[typeof o=="boolean"?o:Tf(o),u]},useSyncExternalStore:Py,useId:u1,useHostTransitionStatus:Hm,useFormState:jm,useActionState:jm,useOptimistic:function(o,u){var p=Gn();return Yt!==null?Nm(p,Yt,o,u):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:_m,useCacheRefresh:c1};Es.useEffectEvent=Zy;function Sh(o,u,p,y){u=o.memoizedState,p=p(y,u),p=p==null?u:g({},u,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var kf={enqueueSetState:function(o,u,p){o=o._reactInternals;var y=ts(),w=Za(y);w.payload=u,p!=null&&(w.callback=p),u=Lo(o,w,y),u!==null&&(mt(u,o,y),Bo(u,o,y))},enqueueReplaceState:function(o,u,p){o=o._reactInternals;var y=ts(),w=Za(y);w.tag=1,w.payload=u,p!=null&&(w.callback=p),u=Lo(o,w,y),u!==null&&(mt(u,o,y),Bo(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var p=ts(),y=Za(p);y.tag=2,u!=null&&(y.callback=u),u=Lo(o,y,p),u!==null&&(mt(u,o,p),Bo(u,o,p))}};function Gm(o,u,p,y,w,E,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,E,D):u.prototype&&u.prototype.isPureReactComponent?!Au(p,y)||!Au(w,E):!0}function qm(o,u,p,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==o&&kf.enqueueReplaceState(u,u.state,null)}function Ho(o,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(o=o.defaultProps){p===u&&(p=g({},p));for(var w in o)p[w]===void 0&&(p[w]=o[w])}return p}function m1(o){pf(o)}function Vm(o){console.error(o)}function Ym(o){pf(o)}function Ch(o,u){try{var p=o.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function g1(o,u,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Km(o,u,p){return p=Za(p),p.tag=3,p.payload={element:null},p.callback=function(){Ch(o,u)},p}function Xm(o){return o=Za(o),o.tag=3,o}function y1(o,u,p,y){var w=p.type.getDerivedStateFromError;if(typeof w=="function"){var E=y.value;o.payload=function(){return w(E)},o.callback=function(){g1(u,p,y)}}var D=p.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(o.callback=function(){g1(u,p,y),typeof w!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var H=y.stack;this.componentDidCatch(y.value,{componentStack:H!==null?H:""})})}function ci(o,u,p,y,w){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&ga(u,p,w,!0),p=Tr.current,p!==null){switch(p.tag){case 31:case 13:return ur===null?ec():p.alternate===null&&Cn===0&&(Cn=3),p.flags&=-257,p.flags|=65536,p.lanes=w,y===lh?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),If(o,y,w)),!1;case 22:return p.flags|=65536,y===lh?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),If(o,y,w)),!1}throw Error(i(435,p.tag))}return If(o,y,w),ec(),!1}if(_t)return u=Tr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=w,y!==Bu&&(o=Error(i(422),{cause:y}),ha(Kr(o,p)))):(y!==Bu&&(u=Error(i(423),{cause:y}),ha(Kr(u,p))),o=o.current.alternate,o.flags|=65536,w&=-w,o.lanes|=w,y=Kr(y,p),w=Km(o.stateNode,y,w),Ve(o,w),Cn!==4&&(Cn=2)),!1;var E=Error(i(520),{cause:y});if(E=Kr(E,p),Fl===null?Fl=[E]:Fl.push(E),Cn!==4&&(Cn=2),u===null)return!0;y=Kr(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,o=w&-w,p.lanes|=o,o=Km(p.stateNode,y,o),Ve(p,o),!1;case 1:if(u=p.type,E=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Yn===null||!Yn.has(E))))return p.flags|=65536,w&=-w,p.lanes|=w,w=Xm(w),y1(w,o,p,y),Ve(p,w),!1}p=p.return}while(p!==null);return!1}var wh=Error(i(461)),ii=!1;function bi(o,u,p,y){u.child=o===null?fh(u,null,p,y):Ja(u,o.child,p,y)}function Qm(o,u,p,y,w){p=p.render;var E=u.ref;if("ref"in y){var D={};for(var H in y)H!=="ref"&&(D[H]=y[H])}else D=y;return zo(u),y=ph(o,u,p,D,E,w),H=wm(),o!==null&&!ii?(Em(o,u,w),qn(o,u,w)):(_t&&H&&fa(u),u.flags|=1,bi(o,u,y,w),u.child)}function jl(o,u,p,y,w){if(o===null){var E=p.type;return typeof E=="function"&&!Zd(E)&&E.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=E,Eh(o,u,E,y,w)):(o=ua(p.type,null,y,u,u.mode,w),o.ref=u.ref,o.return=u,u.child=o)}if(E=o.child,!Nh(o,w)){var D=E.memoizedProps;if(p=p.compare,p=p!==null?p:Au,p(D,y)&&o.ref===u.ref)return qn(o,u,w)}return u.flags|=1,o=Cr(E,y),o.ref=u.ref,o.return=u,u.child=o}function Eh(o,u,p,y,w){if(o!==null){var E=o.memoizedProps;if(Au(E,y)&&o.ref===u.ref)if(ii=!1,u.pendingProps=y=E,Nh(o,w))(o.flags&131072)!==0&&(ii=!0);else return u.lanes=o.lanes,qn(o,u,w)}return Xu(o,u,p,y,w)}function Ll(o,u,p,y){var w=y.children,E=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(E=E!==null?E.baseLanes|p:p,o!==null){for(y=u.child=o.child,w=0;y!==null;)w=w|y.lanes|y.childLanes,y=y.sibling;y=w&~E}else y=0,u.child=null;return kr(o,u,E,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&vf(u,E!==null?E.cachePool:null),E!==null?jy(u,E):bm(),Ly(u);else return y=u.lanes=536870912,kr(o,u,E!==null?E.baseLanes|p:p,p,y)}else E!==null?(vf(u,E.cachePool),jy(u,E),_r(),u.memoizedState=null):(o!==null&&vf(u,null),bm(),_r());return bi(o,u,w,p),u.child}function va(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function kr(o,u,p,y,w){var E=oh();return E=E===null?null:{parent:ni._currentValue,pool:E},u.memoizedState={baseLanes:p,cachePool:E},o!==null&&vf(u,null),bm(),Ly(u),o!==null&&ga(o,u,y,!0),u.childLanes=w,null}function Th(o,u){return u=Ah({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function v1(o,u,p){return Ja(u,o.child,null,p),o=Th(u,u.pendingProps),o.flags|=2,Fn(u),u.memoizedState=null,o}function _h(o,u,p){var y=u.pendingProps,w=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(_t){if(y.mode==="hidden")return o=Th(u,y),u.lanes=536870912,va(null,o);if(xm(u),(o=Jt)?(o=n4(o,Xr),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ka!==null?{id:xn,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},p=zu(o),p.return=u,u.child=p,zn=u,Jt=null)):o=null,o===null)throw da(u);return u.lanes=536870912,null}return Th(u,y)}var E=o.memoizedState;if(E!==null){var D=E.dehydrated;if(xm(u),w)if(u.flags&256)u.flags&=-257,u=v1(o,u,p);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(ii||ga(o,u,p,!1),w=(p&o.childLanes)!==0,ii||w){if(y=it,y!==null&&(D=Ur(y,p),D!==0&&D!==E.retryLane))throw E.retryLane=D,or(o,D),mt(y,o,D),wh;ec(),u=v1(o,u,p)}else o=E.treeContext,Jt=ka(D.nextSibling),zn=u,_t=!0,Xa=null,Xr=!1,o!==null&&nh(u,o),u=Th(u,y),u.flags|=4096;return u}return o=Cr(o.child,{mode:y.mode,children:y.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Bl(o,u){var p=u.ref;if(p===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(o===null||o.ref!==p)&&(u.flags|=4194816)}}function Xu(o,u,p,y,w){return zo(u),p=ph(o,u,p,y,void 0,w),y=wm(),o!==null&&!ii?(Em(o,u,w),qn(o,u,w)):(_t&&y&&fa(u),u.flags|=1,bi(o,u,p,w),u.child)}function Mf(o,u,p,y,w,E){return zo(u),u.updateQueue=null,p=Dl(u,y,p,w),By(o),y=wm(),o!==null&&!ii?(Em(o,u,E),qn(o,u,E)):(_t&&y&&fa(u),u.flags|=1,bi(o,u,p,E),u.child)}function kh(o,u,p,y,w){if(zo(u),u.stateNode===null){var E=Mo,D=p.contextType;typeof D=="object"&&D!==null&&(E=tt(D)),E=new p(y,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=kf,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=y,E.state=u.memoizedState,E.refs={},Sf(u),D=p.contextType,E.context=typeof D=="object"&&D!==null?tt(D):Mo,E.state=u.memoizedState,D=p.getDerivedStateFromProps,typeof D=="function"&&(Sh(u,p,D,y),E.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(D=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),D!==E.state&&kf.enqueueReplaceState(E,E.state,null),Fu(u,y,E,w),Cf(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){E=u.stateNode;var H=u.memoizedProps,Q=Ho(p,H);E.props=Q;var ue=E.context,ve=p.contextType;D=Mo,typeof ve=="object"&&ve!==null&&(D=tt(ve));var Se=p.getDerivedStateFromProps;ve=typeof Se=="function"||typeof E.getSnapshotBeforeUpdate=="function",H=u.pendingProps!==H,ve||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H||ue!==D)&&qm(u,E,y,D),lr=!1;var de=u.memoizedState;E.state=de,Fu(u,y,E,w),Cf(),ue=u.memoizedState,H||de!==ue||lr?(typeof Se=="function"&&(Sh(u,p,Se,y),ue=u.memoizedState),(Q=lr||Gm(u,p,Q,y,de,ue,D))?(ve||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=ue),E.props=y,E.state=ue,E.context=D,y=Q):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{E=u.stateNode,ym(o,u),D=u.memoizedProps,ve=Ho(p,D),E.props=ve,Se=u.pendingProps,de=E.context,ue=p.contextType,Q=Mo,typeof ue=="object"&&ue!==null&&(Q=tt(ue)),H=p.getDerivedStateFromProps,(ue=typeof H=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D!==Se||de!==Q)&&qm(u,E,y,Q),lr=!1,de=u.memoizedState,E.state=de,Fu(u,y,E,w),Cf();var ge=u.memoizedState;D!==Se||de!==ge||lr||o!==null&&o.dependencies!==null&&yf(o.dependencies)?(typeof H=="function"&&(Sh(u,p,H,y),ge=u.memoizedState),(ve=lr||Gm(u,p,ve,y,de,ge,Q)||o!==null&&o.dependencies!==null&&yf(o.dependencies))?(ue||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(y,ge,Q),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(y,ge,Q)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||D===o.memoizedProps&&de===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&de===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ge),E.props=y,E.state=ge,E.context=Q,y=ve):(typeof E.componentDidUpdate!="function"||D===o.memoizedProps&&de===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&de===o.memoizedState||(u.flags|=1024),y=!1)}return E=y,Bl(o,u),y=(u.flags&128)!==0,E||y?(E=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,o!==null&&y?(u.child=Ja(u,o.child,null,w),u.child=Ja(u,null,p,w)):bi(o,u,p,w),u.memoizedState=E.state,o=u.child):o=qn(o,u,w),o}function b1(o,u,p,y){return Oo(),u.flags|=256,bi(o,u,p,y),u.child}var Wm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yi(o){return{baseLanes:o,cachePool:gm()}}function Mh(o,u,p){return o=o!==null?o.childLanes&~p:0,u&&(o|=hr),o}function x1(o,u,p){var y=u.pendingProps,w=!1,E=(u.flags&128)!==0,D;if((D=E)||(D=o!==null&&o.memoizedState===null?!1:(kt.current&2)!==0),D&&(w=!0,u.flags&=-129),D=(u.flags&32)!==0,u.flags&=-33,o===null){if(_t){if(w?$a(u):_r(),(o=Jt)?(o=n4(o,Xr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ka!==null?{id:xn,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},p=zu(o),p.return=u,u.child=p,zn=u,Jt=null)):o=null,o===null)throw da(u);return x2(o)?u.lanes=32:u.lanes=536870912,null}var H=y.children;return y=y.fallback,w?(_r(),w=u.mode,H=Ah({mode:"hidden",children:H},w),y=Ao(y,w,p,null),H.return=u,y.return=u,H.sibling=y,u.child=H,y=u.child,y.memoizedState=Yi(p),y.childLanes=Mh(o,D,p),u.memoizedState=Wm,va(null,y)):($a(u),Af(u,H))}var Q=o.memoizedState;if(Q!==null&&(H=Q.dehydrated,H!==null)){if(E)u.flags&256?($a(u),u.flags&=-257,u=Jm(o,u,p)):u.memoizedState!==null?(_r(),u.child=o.child,u.flags|=128,u=null):(_r(),H=y.fallback,w=u.mode,y=Ah({mode:"visible",children:y.children},w),H=Ao(H,w,p,null),H.flags|=2,y.return=u,H.return=u,y.sibling=H,u.child=y,Ja(u,o.child,null,p),y=u.child,y.memoizedState=Yi(p),y.childLanes=Mh(o,D,p),u.memoizedState=Wm,u=va(null,y));else if($a(u),x2(H)){if(D=H.nextSibling&&H.nextSibling.dataset,D)var ue=D.dgst;D=ue,y=Error(i(419)),y.stack="",y.digest=D,ha({value:y,source:null,stack:null}),u=Jm(o,u,p)}else if(ii||ga(o,u,p,!1),D=(p&o.childLanes)!==0,ii||D){if(D=it,D!==null&&(y=Ur(D,p),y!==0&&y!==Q.retryLane))throw Q.retryLane=y,or(o,y),mt(D,o,y),wh;b2(H)||ec(),u=Jm(o,u,p)}else b2(H)?(u.flags|=192,u.child=o.child,u=null):(o=Q.treeContext,Jt=ka(H.nextSibling),zn=u,_t=!0,Xa=null,Xr=!1,o!==null&&nh(u,o),u=Af(u,y.children),u.flags|=4096);return u}return w?(_r(),H=y.fallback,w=u.mode,Q=o.child,ue=Q.sibling,y=Cr(Q,{mode:"hidden",children:y.children}),y.subtreeFlags=Q.subtreeFlags&65011712,ue!==null?H=Cr(ue,H):(H=Ao(H,w,p,null),H.flags|=2),H.return=u,y.return=u,y.sibling=H,u.child=y,va(null,y),y=u.child,H=o.child.memoizedState,H===null?H=Yi(p):(w=H.cachePool,w!==null?(Q=ni._currentValue,w=w.parent!==Q?{parent:Q,pool:Q}:w):w=gm(),H={baseLanes:H.baseLanes|p,cachePool:w}),y.memoizedState=H,y.childLanes=Mh(o,D,p),u.memoizedState=Wm,va(o.child,y)):($a(u),p=o.child,o=p.sibling,p=Cr(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,o!==null&&(D=u.deletions,D===null?(u.deletions=[o],u.flags|=16):D.push(o)),u.child=p,u.memoizedState=null,p)}function Af(o,u){return u=Ah({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Ah(o,u){return o=bn(22,o,null,u),o.lanes=0,o}function Jm(o,u,p){return Ja(u,o.child,null,p),o=Af(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function S1(o,u,p){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),rh(o.return,u,p)}function Pl(o,u,p,y,w,E){var D=o.memoizedState;D===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:w,treeForkCount:E}:(D.isBackwards=u,D.rendering=null,D.renderingStartTime=0,D.last=y,D.tail=p,D.tailMode=w,D.treeForkCount=E)}function Mr(o,u,p){var y=u.pendingProps,w=y.revealOrder,E=y.tail;y=y.children;var D=kt.current,H=(D&2)!==0;if(H?(D=D&1|2,u.flags|=128):D&=1,U(kt,D),bi(o,u,y,p),y=_t?Lu:0,!H&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&S1(o,p,u);else if(o.tag===19)S1(o,p,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(w){case"forwards":for(p=u.child,w=null;p!==null;)o=p.alternate,o!==null&&Wr(o)===null&&(w=p),p=p.sibling;p=w,p===null?(w=u.child,u.child=null):(w=p.sibling,p.sibling=null),Pl(u,!1,w,p,E,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,w=u.child,u.child=null;w!==null;){if(o=w.alternate,o!==null&&Wr(o)===null){u.child=w;break}o=w.sibling,w.sibling=p,p=w,w=o}Pl(u,!0,p,null,E,y);break;case"together":Pl(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function qn(o,u,p){if(o!==null&&(u.dependencies=o.dependencies),Ea|=u.lanes,(p&u.childLanes)===0)if(o!==null){if(ga(o,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,p=Cr(o,o.pendingProps),u.child=p,p.return=u;o.sibling!==null;)o=o.sibling,p=p.sibling=Cr(o,o.pendingProps),p.return=u;p.sibling=null}return u.child}function Nh(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&yf(o)))}function o2(o,u,p){switch(u.tag){case 3:ot(u,u.stateNode.containerInfo),Qa(u,ni,o.memoizedState.cache),Oo();break;case 27:case 5:rt(u);break;case 4:ot(u,u.stateNode.containerInfo);break;case 10:Qa(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,xm(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?($a(u),u.flags|=128,null):(p&u.child.childLanes)!==0?x1(o,u,p):($a(u),o=qn(o,u,p),o!==null?o.sibling:null);$a(u);break;case 19:var w=(o.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(ga(o,u,p,!1),y=(p&u.childLanes)!==0),w){if(y)return Mr(o,u,p);u.flags|=128}if(w=u.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),U(kt,kt.current),y)break;return null;case 22:return u.lanes=0,Ll(o,u,p,u.pendingProps);case 24:Qa(u,ni,o.memoizedState.cache)}return qn(o,u,p)}function Rh(o,u,p){if(o!==null)if(o.memoizedProps!==u.pendingProps)ii=!0;else{if(!Nh(o,p)&&(u.flags&128)===0)return ii=!1,o2(o,u,p);ii=(o.flags&131072)!==0}else ii=!1,_t&&(u.flags&1048576)!==0&&My(u,Lu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var y=u.pendingProps;if(o=kl(u.elementType),u.type=o,typeof o=="function")Zd(o)?(y=Ho(o,y),u.tag=1,u=kh(null,u,o,y,p)):(u.tag=0,u=Xu(null,u,o,y,p));else{if(o!=null){var w=o.$$typeof;if(w===L){u.tag=11,u=Qm(null,u,o,y,p);break e}else if(w===B){u.tag=14,u=jl(null,u,o,y,p);break e}}throw u=Z(o)||o,Error(i(306,u,""))}}return u;case 0:return Xu(o,u,u.type,u.pendingProps,p);case 1:return y=u.type,w=Ho(y,u.pendingProps),kh(o,u,y,w,p);case 3:e:{if(ot(u,u.stateNode.containerInfo),o===null)throw Error(i(387));y=u.pendingProps;var E=u.memoizedState;w=E.element,ym(o,u),Fu(u,y,null,p);var D=u.memoizedState;if(y=D.cache,Qa(u,ni,y),y!==E.cache&&sh(u,[ni],p,!0),Cf(),y=D.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:D.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=b1(o,u,y,p);break e}else if(y!==w){w=Kr(Error(i(424)),u),ha(w),u=b1(o,u,y,p);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Jt=ka(o.firstChild),zn=u,_t=!0,Xa=null,Xr=!0,p=fh(u,null,y,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Oo(),y===w){u=qn(o,u,p);break e}bi(o,u,y,p)}u=u.child}return u;case 26:return Bl(o,u),o===null?(p=l4(u.type,null,u.pendingProps,null))?u.memoizedState=p:_t||(p=u.type,o=u.pendingProps,y=T1(ze.current).createElement(p),y[ei]=u,y[Fi]=o,mr(y,p,o),ti(y),u.stateNode=y):u.memoizedState=l4(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return rt(u),o===null&&_t&&(y=u.stateNode=s4(u.type,u.pendingProps,ze.current),zn=u,Xr=!0,w=Jt,rc(u.type)?(S2=w,Jt=ka(y.firstChild)):Jt=w),bi(o,u,u.pendingProps.children,p),Bl(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&_t&&((w=y=Jt)&&(y=s7(y,u.type,u.pendingProps,Xr),y!==null?(u.stateNode=y,zn=u,Jt=ka(y.firstChild),Xr=!1,w=!0):w=!1),w||da(u)),rt(u),w=u.type,E=u.pendingProps,D=o!==null?o.memoizedProps:null,y=E.children,g2(w,E)?y=null:D!==null&&g2(w,D)&&(u.flags|=32),u.memoizedState!==null&&(w=ph(o,u,zl,null,null,p),lg._currentValue=w),Bl(o,u),bi(o,u,y,p),u.child;case 6:return o===null&&_t&&((o=p=Jt)&&(p=a7(p,u.pendingProps,Xr),p!==null?(u.stateNode=p,zn=u,Jt=null,o=!0):o=!1),o||da(u)),null;case 13:return x1(o,u,p);case 4:return ot(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=Ja(u,null,y,p):bi(o,u,y,p),u.child;case 11:return Qm(o,u,u.type,u.pendingProps,p);case 7:return bi(o,u,u.pendingProps,p),u.child;case 8:return bi(o,u,u.pendingProps.children,p),u.child;case 12:return bi(o,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,Qa(u,u.type,y.value),bi(o,u,y.children,p),u.child;case 9:return w=u.type._context,y=u.pendingProps.children,zo(u),w=tt(w),y=y(w),u.flags|=1,bi(o,u,y,p),u.child;case 14:return jl(o,u,u.type,u.pendingProps,p);case 15:return Eh(o,u,u.type,u.pendingProps,p);case 19:return Mr(o,u,p);case 31:return _h(o,u,p);case 22:return Ll(o,u,p,u.pendingProps);case 24:return zo(u),y=tt(ni),o===null?(w=oh(),w===null&&(w=it,E=dm(),w.pooledCache=E,E.refCount++,E!==null&&(w.pooledCacheLanes|=p),w=E),u.memoizedState={parent:y,cache:w},Sf(u),Qa(u,ni,w)):((o.lanes&p)!==0&&(ym(o,u),Fu(u,null,null,p),Cf()),w=o.memoizedState,E=u.memoizedState,w.parent!==y?(w={parent:y,cache:y},u.memoizedState=w,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=w),Qa(u,ni,y)):(y=E.cache,Qa(u,ni,y),y!==w.cache&&sh(u,[ni],p,!0))),bi(o,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function ba(o){o.flags|=4}function Nf(o,u,p,y,w){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(w&335544128)===w)if(o.stateNode.complete)o.flags|=8192;else if(En())o.flags|=8192;else throw ya=lh,bf}else o.flags&=-16777217}function Zm(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!h4(u))if(En())o.flags|=8192;else throw ya=lh,bf}function to(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?On():536870912,o.lanes|=u,tn|=u)}function xa(o,u){if(!_t)switch(o.tailMode){case"hidden":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Kt(o){var u=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(u)for(var w=o.child;w!==null;)p|=w.lanes|w.childLanes,y|=w.subtreeFlags&65011712,y|=w.flags&65011712,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)p|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=y,o.childLanes=p,u}function Rf(o,u,p){var y=u.pendingProps;switch(th(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(u),null;case 1:return Kt(u),null;case 3:return p=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),ma(ni),et(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(Pu(u)?ba(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ih())),Kt(u),null;case 26:var w=u.type,E=u.memoizedState;return o===null?(ba(u),E!==null?(Kt(u),Zm(u,E)):(Kt(u),Nf(u,w,null,y,p))):E?E!==o.memoizedState?(ba(u),Kt(u),Zm(u,E)):(Kt(u),u.flags&=-16777217):(o=o.memoizedProps,o!==y&&ba(u),Kt(u),Nf(u,w,o,y,p)),null;case 27:if(mi(u),p=ze.current,w=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&ba(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return Kt(u),null}o=ke.current,Pu(u)?Ay(u):(o=s4(w,y,p),u.stateNode=o,ba(u))}return Kt(u),null;case 5:if(mi(u),w=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&ba(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return Kt(u),null}if(E=ke.current,Pu(u))Ay(u);else{var D=T1(ze.current);switch(E){case 1:E=D.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:E=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":E=D.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":E=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":E=D.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof y.is=="string"?D.createElement("select",{is:y.is}):D.createElement("select"),y.multiple?E.multiple=!0:y.size&&(E.size=y.size);break;default:E=typeof y.is=="string"?D.createElement(w,{is:y.is}):D.createElement(w)}}E[ei]=u,E[Fi]=y;e:for(D=u.child;D!==null;){if(D.tag===5||D.tag===6)E.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===u)break e;for(;D.sibling===null;){if(D.return===null||D.return===u)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}u.stateNode=E;e:switch(mr(E,w,y),w){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&ba(u)}}return Kt(u),Nf(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,p),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==y&&ba(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(i(166));if(o=ze.current,Pu(u)){if(o=u.stateNode,p=u.memoizedProps,y=null,w=zn,w!==null)switch(w.tag){case 27:case 5:y=w.memoizedProps}o[ei]=u,o=!!(o.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||X3(o.nodeValue,p)),o||da(u,!0)}else o=T1(o).createTextNode(y),o[ei]=u,u.stateNode=o}return Kt(u),null;case 31:if(p=u.memoizedState,o===null||o.memoizedState!==null){if(y=Pu(u),p!==null){if(o===null){if(!y)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[ei]=u}else Oo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Kt(u),o=!1}else p=ih(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=p),o=!0;if(!o)return u.flags&256?(Fn(u),u):(Fn(u),null);if((u.flags&128)!==0)throw Error(i(558))}return Kt(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(w=Pu(u),y!==null&&y.dehydrated!==null){if(o===null){if(!w)throw Error(i(318));if(w=u.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));w[ei]=u}else Oo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Kt(u),w=!1}else w=ih(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=w),w=!0;if(!w)return u.flags&256?(Fn(u),u):(Fn(u),null)}return Fn(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,o=o!==null&&o.memoizedState!==null,p&&(y=u.child,w=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(w=y.alternate.memoizedState.cachePool.pool),E=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(E=y.memoizedState.cachePool.pool),E!==w&&(y.flags|=2048)),p!==o&&p&&(u.child.flags|=8192),to(u,u.updateQueue),Kt(u),null);case 4:return et(),o===null&&f2(u.stateNode.containerInfo),Kt(u),null;case 10:return ma(u.type),Kt(u),null;case 19:if(se(kt),y=u.memoizedState,y===null)return Kt(u),null;if(w=(u.flags&128)!==0,E=y.rendering,E===null)if(w)xa(y,!1);else{if(Cn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(E=Wr(o),E!==null){for(u.flags|=128,xa(y,!1),o=E.updateQueue,u.updateQueue=o,to(u,o),u.subtreeFlags=0,o=p,p=u.child;p!==null;)Du(p,o),p=p.sibling;return U(kt,kt.current&1|2),_t&&ca(u,y.treeForkCount),u.child}o=o.sibling}y.tail!==null&&Hn()>Vn&&(u.flags|=128,w=!0,xa(y,!1),u.lanes=4194304)}else{if(!w)if(o=Wr(E),o!==null){if(u.flags|=128,w=!0,o=o.updateQueue,u.updateQueue=o,to(u,o),xa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!_t)return Kt(u),null}else 2*Hn()-y.renderingStartTime>Vn&&p!==536870912&&(u.flags|=128,w=!0,xa(y,!1),u.lanes=4194304);y.isBackwards?(E.sibling=u.child,u.child=E):(o=y.last,o!==null?o.sibling=E:u.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Hn(),o.sibling=null,p=kt.current,U(kt,w?p&1|2:p&1),_t&&ca(u,y.treeForkCount),o):(Kt(u),null);case 22:case 23:return Fn(u),wf(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(Kt(u),u.subtreeFlags&6&&(u.flags|=8192)):Kt(u),p=u.updateQueue,p!==null&&to(u,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),o!==null&&se(jo),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),ma(ni),Kt(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function Ts(o,u){switch(th(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return ma(ni),et(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return mi(u),null;case 31:if(u.memoizedState!==null){if(Fn(u),u.alternate===null)throw Error(i(340));Oo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Fn(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Oo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return se(kt),null;case 4:return et(),null;case 10:return ma(u.type),null;case 22:case 23:return Fn(u),wf(),o!==null&&se(jo),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return ma(ni),null;case 25:return null;default:return null}}function Jr(o,u){switch(th(u),u.tag){case 3:ma(ni),et();break;case 26:case 27:case 5:mi(u);break;case 4:et();break;case 31:u.memoizedState!==null&&Fn(u);break;case 13:Fn(u);break;case 19:se(kt);break;case 10:ma(u.type);break;case 22:case 23:Fn(u),wf(),o!==null&&se(jo);break;case 24:ma(ni)}}function _s(o,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var w=y.next;p=w;do{if((p.tag&o)===o){y=void 0;var E=p.create,D=p.inst;y=E(),D.destroy=y}p=p.next}while(p!==w)}}catch(H){Dt(u,u.return,H)}}function Ri(o,u,p){try{var y=u.updateQueue,w=y!==null?y.lastEffect:null;if(w!==null){var E=w.next;y=E;do{if((y.tag&o)===o){var D=y.inst,H=D.destroy;if(H!==void 0){D.destroy=void 0,w=u;var Q=p,ue=H;try{ue()}catch(ve){Dt(w,Q,ve)}}}y=y.next}while(y!==E)}}catch(ve){Dt(u,u.return,ve)}}function Us(o){var u=o.updateQueue;if(u!==null){var p=o.stateNode;try{zy(u,p)}catch(y){Dt(o,o.return,y)}}}function xi(o,u,p){p.props=Ho(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){Dt(o,u,y)}}function no(o,u){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(w){Dt(o,u,w)}}function Oi(o,u){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(w){Dt(o,u,w)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(w){Dt(o,u,w)}else p.current=null}function Of(o){var u=o.type,p=o.memoizedProps,y=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(w){Dt(o,o.return,w)}}function fi(o,u,p){try{var y=o.stateNode;$O(y,o.type,p,u),y[Fi]=u}catch(w){Dt(o,o.return,w)}}function fn(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&rc(o.type)||o.tag===4}function Et(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||fn(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&rc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Sa(o,u,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(o),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=qa));else if(y!==4&&(y===27&&rc(o.type)&&(p=o.stateNode,u=null),o=o.child,o!==null))for(Sa(o,u,p),o=o.sibling;o!==null;)Sa(o,u,p),o=o.sibling}function cr(o,u,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?p.insertBefore(o,u):p.appendChild(o);else if(y!==4&&(y===27&&rc(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(cr(o,u,p),o=o.sibling;o!==null;)cr(o,u,p),o=o.sibling}function Oh(o){var u=o.stateNode,p=o.memoizedProps;try{for(var y=o.type,w=u.attributes;w.length;)u.removeAttributeNode(w[0]);mr(u,y,p),u[ei]=o,u[Fi]=p}catch(E){Dt(o,o.return,E)}}var ks=!1,Zt=!1,Fs=!1,C1=typeof WeakSet=="function"?WeakSet:Set,Si=null;function l2(o,u){if(o=o.containerInfo,p2=O1,o=Ey(o),om(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var w=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var D=0,H=-1,Q=-1,ue=0,ve=0,Se=o,de=null;t:for(;;){for(var ge;Se!==p||w!==0&&Se.nodeType!==3||(H=D+w),Se!==E||y!==0&&Se.nodeType!==3||(Q=D+y),Se.nodeType===3&&(D+=Se.nodeValue.length),(ge=Se.firstChild)!==null;)de=Se,Se=ge;for(;;){if(Se===o)break t;if(de===p&&++ue===w&&(H=D),de===E&&++ve===y&&(Q=D),(ge=Se.nextSibling)!==null)break;Se=de,de=Se.parentNode}Se=ge}p=H===-1||Q===-1?null:{start:H,end:Q}}else p=null}p=p||{start:0,end:0}}else p=null;for(m2={focusedElem:o,selectionRange:p},O1=!1,Si=u;Si!==null;)if(u=Si,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Si=o;else for(;Si!==null;){switch(u=Si,E=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(p=0;p<o.length;p++)w=o[p],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,p=u,w=E.memoizedProps,E=E.memoizedState,y=p.stateNode;try{var He=Ho(p.type,w);o=y.getSnapshotBeforeUpdate(He,E),y.__reactInternalSnapshotBeforeUpdate=o}catch($e){Dt(p,p.return,$e)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,p=o.nodeType,p===9)v2(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":v2(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,Si=o;break}Si=u.return}}function dn(o,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ns(o,p),y&4&&_s(5,p);break;case 1:if(Ns(o,p),y&4)if(o=p.stateNode,u===null)try{o.componentDidMount()}catch(D){Dt(p,p.return,D)}else{var w=Ho(p.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(w,u,o.__reactInternalSnapshotBeforeUpdate)}catch(D){Dt(p,p.return,D)}}y&64&&Us(p),y&512&&no(p,p.return);break;case 3:if(Ns(o,p),y&64&&(o=p.updateQueue,o!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{zy(o,u)}catch(D){Dt(p,p.return,D)}}break;case 27:u===null&&y&4&&Oh(p);case 26:case 5:Ns(o,p),u===null&&y&4&&Of(p),y&512&&no(p,p.return);break;case 12:Ns(o,p);break;case 31:Ns(o,p),y&4&&Uo(o,p);break;case 13:Ns(o,p),y&4&&Qu(o,p),y&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=b.bind(null,p),o7(o,p))));break;case 22:if(y=p.memoizedState!==null||ks,!y){u=u!==null&&u.memoizedState!==null||Zt,w=ks;var E=Zt;ks=y,(Zt=u)&&!E?fr(o,p,(p.subtreeFlags&8772)!==0):Ns(o,p),ks=w,Zt=E}break;case 30:break;default:Ns(o,p)}}function Df(o){var u=o.alternate;u!==null&&(o.alternate=null,Df(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&pl(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ft=null,Ki=!1;function Ms(o,u,p){for(p=p.child;p!==null;)Dh(o,u,p),p=p.sibling}function Dh(o,u,p){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(gi,p)}catch{}switch(p.tag){case 26:Zt||Oi(p,u),Ms(o,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Zt||Oi(p,u);var y=Ft,w=Ki;rc(p.type)&&(Ft=p.stateNode,Ki=!1),Ms(o,u,p),sg(p.stateNode),Ft=y,Ki=w;break;case 5:Zt||Oi(p,u);case 6:if(y=Ft,w=Ki,Ft=null,Ms(o,u,p),Ft=y,Ki=w,Ft!==null)if(Ki)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(p.stateNode)}catch(E){Dt(p,u,E)}else try{Ft.removeChild(p.stateNode)}catch(E){Dt(p,u,E)}break;case 18:Ft!==null&&(Ki?(o=Ft,e4(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),Uh(o)):e4(Ft,p.stateNode));break;case 4:y=Ft,w=Ki,Ft=p.stateNode.containerInfo,Ki=!0,Ms(o,u,p),Ft=y,Ki=w;break;case 0:case 11:case 14:case 15:Ri(2,p,u),Zt||Ri(4,p,u),Ms(o,u,p);break;case 1:Zt||(Oi(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&xi(p,u,y)),Ms(o,u,p);break;case 21:Ms(o,u,p);break;case 22:Zt=(y=Zt)||p.memoizedState!==null,Ms(o,u,p),Zt=y;break;default:Ms(o,u,p)}}function Uo(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Uh(o)}catch(p){Dt(u,u.return,p)}}}function Qu(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Uh(o)}catch(p){Dt(u,u.return,p)}}function $m(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new C1),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new C1),u;default:throw Error(i(435,o.tag))}}function io(o,u){var p=$m(o);u.forEach(function(y){if(!p.has(y)){p.add(y);var w=C.bind(null,o,y);y.then(w,w)}})}function di(o,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var w=p[y],E=o,D=u,H=D;e:for(;H!==null;){switch(H.tag){case 27:if(rc(H.type)){Ft=H.stateNode,Ki=!1;break e}break;case 5:Ft=H.stateNode,Ki=!1;break e;case 3:case 4:Ft=H.stateNode.containerInfo,Ki=!0;break e}H=H.return}if(Ft===null)throw Error(i(160));Dh(E,D,w),Ft=null,Ki=!1,E=w.alternate,E!==null&&(E.return=null),w.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Fo(u,o),u=u.sibling}var As=null;function Fo(o,u){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:di(u,o),hi(o),y&4&&(Ri(3,o,o.return),_s(3,o),Ri(5,o,o.return));break;case 1:di(u,o),hi(o),y&512&&(Zt||p===null||Oi(p,p.return)),y&64&&ks&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var w=As;if(di(u,o),hi(o),y&512&&(Zt||p===null||Oi(p,p.return)),y&4){var E=p!==null?p.memoizedState:null;if(y=o.memoizedState,p===null)if(y===null)if(o.stateNode===null){e:{y=o.type,p=o.memoizedProps,w=w.ownerDocument||w;t:switch(y){case"title":E=w.getElementsByTagName("title")[0],(!E||E[Ua]||E[ei]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=w.createElement(y),w.head.insertBefore(E,w.querySelector("head > title"))),mr(E,y,p),E[ei]=o,ti(E),y=E;break e;case"link":var D=f4("link","href",w).get(y+(p.href||""));if(D){for(var H=0;H<D.length;H++)if(E=D[H],E.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&E.getAttribute("rel")===(p.rel==null?null:p.rel)&&E.getAttribute("title")===(p.title==null?null:p.title)&&E.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){D.splice(H,1);break t}}E=w.createElement(y),mr(E,y,p),w.head.appendChild(E);break;case"meta":if(D=f4("meta","content",w).get(y+(p.content||""))){for(H=0;H<D.length;H++)if(E=D[H],E.getAttribute("content")===(p.content==null?null:""+p.content)&&E.getAttribute("name")===(p.name==null?null:p.name)&&E.getAttribute("property")===(p.property==null?null:p.property)&&E.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&E.getAttribute("charset")===(p.charSet==null?null:p.charSet)){D.splice(H,1);break t}}E=w.createElement(y),mr(E,y,p),w.head.appendChild(E);break;default:throw Error(i(468,y))}E[ei]=o,ti(E),y=E}o.stateNode=y}else d4(w,o.type,o.stateNode);else o.stateNode=c4(w,y,o.memoizedProps);else E!==y?(E===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):E.count--,y===null?d4(w,o.type,o.stateNode):c4(w,y,o.memoizedProps)):y===null&&o.stateNode!==null&&fi(o,o.memoizedProps,p.memoizedProps)}break;case 27:di(u,o),hi(o),y&512&&(Zt||p===null||Oi(p,p.return)),p!==null&&y&4&&fi(o,o.memoizedProps,p.memoizedProps);break;case 5:if(di(u,o),hi(o),y&512&&(Zt||p===null||Oi(p,p.return)),o.flags&32){w=o.stateNode;try{yl(w,"")}catch(He){Dt(o,o.return,He)}}y&4&&o.stateNode!=null&&(w=o.memoizedProps,fi(o,w,p!==null?p.memoizedProps:w)),y&1024&&(Fs=!0);break;case 6:if(di(u,o),hi(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,p=o.stateNode;try{p.nodeValue=y}catch(He){Dt(o,o.return,He)}}break;case 3:if(M1=null,w=As,As=_1(u.containerInfo),di(u,o),As=w,hi(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Uh(u.containerInfo)}catch(He){Dt(o,o.return,He)}Fs&&(Fs=!1,zh(o));break;case 4:y=As,As=_1(o.stateNode.containerInfo),di(u,o),hi(o),As=y;break;case 12:di(u,o),hi(o);break;case 31:di(u,o),hi(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,io(o,y)));break;case 13:di(u,o),hi(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Wu=Hn()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,io(o,y)));break;case 22:w=o.memoizedState!==null;var Q=p!==null&&p.memoizedState!==null,ue=ks,ve=Zt;if(ks=ue||w,Zt=ve||Q,di(u,o),Zt=ve,ks=ue,hi(o),y&8192)e:for(u=o.stateNode,u._visibility=w?u._visibility&-2:u._visibility|1,w&&(p===null||Q||ks||Zt||Ca(o)),p=null,u=o;;){if(u.tag===5||u.tag===26){if(p===null){Q=p=u;try{if(E=Q.stateNode,w)D=E.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{H=Q.stateNode;var Se=Q.memoizedProps.style,de=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;H.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(He){Dt(Q,Q.return,He)}}}else if(u.tag===6){if(p===null){Q=u;try{Q.stateNode.nodeValue=w?"":Q.memoizedProps}catch(He){Dt(Q,Q.return,He)}}}else if(u.tag===18){if(p===null){Q=u;try{var ge=Q.stateNode;w?t4(ge,!0):t4(Q.stateNode,!1)}catch(He){Dt(Q,Q.return,He)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,io(o,p))));break;case 19:di(u,o),hi(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,io(o,y)));break;case 30:break;case 21:break;default:di(u,o),hi(o)}}function hi(o){var u=o.flags;if(u&2){try{for(var p,y=o.return;y!==null;){if(fn(y)){p=y;break}y=y.return}if(p==null)throw Error(i(160));switch(p.tag){case 27:var w=p.stateNode,E=Et(o);cr(o,E,w);break;case 5:var D=p.stateNode;p.flags&32&&(yl(D,""),p.flags&=-33);var H=Et(o);cr(o,H,D);break;case 3:case 4:var Q=p.stateNode.containerInfo,ue=Et(o);Sa(o,ue,Q);break;default:throw Error(i(161))}}catch(ve){Dt(o,o.return,ve)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function zh(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;zh(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Ns(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)dn(o,u.alternate,u),u=u.sibling}function Ca(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Ri(4,u,u.return),Ca(u);break;case 1:Oi(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&xi(u,u.return,p),Ca(u);break;case 27:sg(u.stateNode);case 26:case 5:Oi(u,u.return),Ca(u);break;case 22:u.memoizedState===null&&Ca(u);break;case 30:Ca(u);break;default:Ca(u)}o=o.sibling}}function fr(o,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,w=o,E=u,D=E.flags;switch(E.tag){case 0:case 11:case 15:fr(w,E,p),_s(4,E);break;case 1:if(fr(w,E,p),y=E,w=y.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(ue){Dt(y,y.return,ue)}if(y=E,w=y.updateQueue,w!==null){var H=y.stateNode;try{var Q=w.shared.hiddenCallbacks;if(Q!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Q.length;w++)Gu(Q[w],H)}catch(ue){Dt(y,y.return,ue)}}p&&D&64&&Us(E),no(E,E.return);break;case 27:Oh(E);case 26:case 5:fr(w,E,p),p&&y===null&&D&4&&Of(E),no(E,E.return);break;case 12:fr(w,E,p);break;case 31:fr(w,E,p),p&&D&4&&Uo(w,E);break;case 13:fr(w,E,p),p&&D&4&&Qu(w,E);break;case 22:E.memoizedState===null&&fr(w,E,p),no(E,E.return);break;case 30:break;default:fr(w,E,p)}u=u.sibling}}function Go(o,u){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Tl(p))}function Il(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Tl(o))}function Di(o,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)eg(o,u,p,y),u=u.sibling}function eg(o,u,p,y){var w=u.flags;switch(u.tag){case 0:case 11:case 15:Di(o,u,p,y),w&2048&&_s(9,u);break;case 1:Di(o,u,p,y);break;case 3:Di(o,u,p,y),w&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Tl(o)));break;case 12:if(w&2048){Di(o,u,p,y),o=u.stateNode;try{var E=u.memoizedProps,D=E.id,H=E.onPostCommit;typeof H=="function"&&H(D,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Q){Dt(u,u.return,Q)}}else Di(o,u,p,y);break;case 31:Di(o,u,p,y);break;case 13:Di(o,u,p,y);break;case 23:break;case 22:E=u.stateNode,D=u.alternate,u.memoizedState!==null?E._visibility&2?Di(o,u,p,y):wa(o,u):E._visibility&2?Di(o,u,p,y):(E._visibility|=2,zi(o,u,p,y,(u.subtreeFlags&10256)!==0||!1)),w&2048&&Go(D,u);break;case 24:Di(o,u,p,y),w&2048&&Il(u.alternate,u);break;default:Di(o,u,p,y)}}function zi(o,u,p,y,w){for(w=w&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var E=o,D=u,H=p,Q=y,ue=D.flags;switch(D.tag){case 0:case 11:case 15:zi(E,D,H,Q,w),_s(8,D);break;case 23:break;case 22:var ve=D.stateNode;D.memoizedState!==null?ve._visibility&2?zi(E,D,H,Q,w):wa(E,D):(ve._visibility|=2,zi(E,D,H,Q,w)),w&&ue&2048&&Go(D.alternate,D);break;case 24:zi(E,D,H,Q,w),w&&ue&2048&&Il(D.alternate,D);break;default:zi(E,D,H,Q,w)}u=u.sibling}}function wa(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=o,y=u,w=y.flags;switch(y.tag){case 22:wa(p,y),w&2048&&Go(y.alternate,y);break;case 24:wa(p,y),w&2048&&Il(y.alternate,y);break;default:wa(p,y)}u=u.sibling}}var Hl=8192;function Zr(o,u,p){if(o.subtreeFlags&Hl)for(o=o.child;o!==null;)jh(o,u,p),o=o.sibling}function jh(o,u,p){switch(o.tag){case 26:Zr(o,u,p),o.flags&Hl&&o.memoizedState!==null&&b7(p,As,o.memoizedState,o.memoizedProps);break;case 5:Zr(o,u,p);break;case 3:case 4:var y=As;As=_1(o.stateNode.containerInfo),Zr(o,u,p),As=y;break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=Hl,Hl=16777216,Zr(o,u,p),Hl=y):Zr(o,u,p));break;default:Zr(o,u,p)}}function Ul(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function qo(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Si=y,jn(y,o)}Ul(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ar(o),o=o.sibling}function Ar(o){switch(o.tag){case 0:case 11:case 15:qo(o),o.flags&2048&&Ri(9,o,o.return);break;case 3:qo(o);break;case 12:qo(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,dr(o)):qo(o);break;default:qo(o)}}function dr(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Si=y,jn(y,o)}Ul(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Ri(8,u,u.return),dr(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,dr(u));break;default:dr(u)}o=o.sibling}}function jn(o,u){for(;Si!==null;){var p=Si;switch(p.tag){case 0:case 11:case 15:Ri(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Tl(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Si=y;else e:for(p=o;Si!==null;){y=Si;var w=y.sibling,E=y.return;if(Df(y),y===p){Si=null;break e}if(w!==null){w.return=E,Si=w;break e}Si=E}}}var ro={getCacheForType:function(o){var u=tt(ni),p=u.data.get(o);return p===void 0&&(p=o(),u.data.set(o,p)),p},cacheSignal:function(){return tt(ni).controller.signal}},ut=typeof WeakMap=="function"?WeakMap:Map,qe=0,it=null,pt=null,ft=0,Mt=0,Xi=null,Rs=!1,Gs=!1,tg=!1,$r=0,Cn=0,Ea=0,Vo=0,zf=0,hr=0,tn=0,Fl=null,Ln=null,Bn=!1,Wu=0,ng=0,Vn=1/0,wn=null,Yn=null,Gt=0,es=null,Ju=null,Os=0,Zu=0,$u=null,jf=null,Yo=0,Gl=null;function ts(){return(qe&2)!==0&&ft!==0?ft&-ft:V.T!==null?pe():Fr()}function bt(){if(hr===0)if((ft&536870912)===0||_t){var o=bo;bo<<=1,(bo&3932160)===0&&(bo=262144),hr=o}else hr=536870912;return o=Tr.current,o!==null&&(o.flags|=32),hr}function mt(o,u,p){(o===it&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)&&(Xo(o,0),ri(o,ft,hr,!1)),Hr(o,p),((qe&2)===0||o!==it)&&(o===it&&((qe&2)===0&&(Vo|=p),Cn===4&&ri(o,ft,hr,!1)),we(o))}function xt(o,u,p){if((qe&6)!==0)throw Error(i(327));var y=!p&&(u&127)===0&&(u&o.expiredLanes)===0||tr(o,u),w=y?Lf(o,u):pr(o,u,!0),E=y;do{if(w===0){Gs&&!y&&ri(o,u,0,!1);break}else{if(p=o.current.alternate,E&&!qt(p)){w=pr(o,u,!1),E=!1;continue}if(w===2){if(E=u,o.errorRecoveryDisabledLanes&E)var D=0;else D=o.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){u=D;e:{var H=o;w=Fl;var Q=H.current.memoizedState.isDehydrated;if(Q&&(Xo(H,D).flags|=256),D=pr(H,D,!1),D!==2){if(tg&&!Q){H.errorRecoveryDisabledLanes|=E,Vo|=E,w=4;break e}E=Ln,Ln=w,E!==null&&(Ln===null?Ln=E:Ln.push.apply(Ln,E))}w=D}if(E=!1,w!==2)continue}}if(w===1){Xo(o,0),ri(o,u,0,!0);break}e:{switch(y=o,E=w,E){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:ri(y,u,hr,!Rs);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(w=Wu+300-Hn(),10<w)){if(ri(y,u,hr,!Rs),Un(y,0,!0)!==0)break e;Os=u,y.timeoutHandle=Z3(Tt.bind(null,y,p,Ln,wn,Bn,u,hr,Vo,tn,Rs,E,"Throttled",-0,0),w);break e}Tt(y,p,Ln,wn,Bn,u,hr,Vo,tn,Rs,E,null,-0,0)}}break}while(!0);we(o)}function Tt(o,u,p,y,w,E,D,H,Q,ue,ve,Se,de,ge){if(o.timeoutHandle=-1,Se=u.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qa},jh(u,E,Se);var He=(E&62914560)===E?Wu-Hn():(E&4194048)===E?ng-Hn():0;if(He=x7(Se,He),He!==null){Os=E,o.cancelPendingCommit=He(ao.bind(null,o,u,E,p,y,w,D,H,Q,ve,Se,null,de,ge)),ri(o,E,D,!ue);return}}ao(o,u,E,p,y,w,D,H,Q)}function qt(o){for(var u=o;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var w=p[y],E=w.getSnapshot;w=w.value;try{if(!ar(E(),w))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ri(o,u,p,y){u&=~zf,u&=~Vo,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var w=u;0<w;){var E=31-It(w),D=1<<E;y[E]=-1,w&=~D}p!==0&&rr(o,p,u)}function qs(){return(qe&6)===0?(Le(0),!1):!0}function Ko(){if(pt!==null){if(Mt===0)var o=pt.return;else o=pt,pa=Do=null,Tm(o),Nl=null,Rl=0,o=pt;for(;o!==null;)Jr(o.alternate,o),o=o.return;pt=null}}function Xo(o,u){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,n7(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),Os=0,Ko(),it=o,pt=p=Cr(o.current,null),ft=u,Mt=0,Xi=null,Rs=!1,Gs=tr(o,u),tg=!1,tn=hr=zf=Vo=Ea=Cn=0,Ln=Fl=null,Bn=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var w=31-It(y),E=1<<w;u|=o[w],y&=~E}return $r=u,mf(),p}function Ta(o,u){lt=null,V.H=Ku,u===_l||u===ht?(u=Ml(),Mt=3):u===bf?(u=Ml(),Mt=4):Mt=u===wh?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Xi=u,pt===null&&(Cn=1,Ch(o,Kr(u,o.current)))}function En(){var o=Tr.current;return o===null?!0:(ft&4194048)===ft?ur===null:(ft&62914560)===ft||(ft&536870912)!==0?o===ur:!1}function so(){var o=V.H;return V.H=Ku,o===null?Ku:o}function Qo(){var o=V.A;return V.A=ro,o}function ec(){Cn=4,Rs||(ft&4194048)!==ft&&Tr.current!==null||(Gs=!0),(Ea&134217727)===0&&(Vo&134217727)===0||it===null||ri(it,ft,hr,!1)}function pr(o,u,p){var y=qe;qe|=2;var w=so(),E=Qo();(it!==o||ft!==u)&&(wn=null,Xo(o,u)),u=!1;var D=Cn;e:do try{if(Mt!==0&&pt!==null){var H=pt,Q=Xi;switch(Mt){case 8:Ko(),D=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(u=!0);var ue=Mt;if(Mt=0,Xi=null,ql(o,H,Q,ue),p&&Gs){D=0;break e}break;default:ue=Mt,Mt=0,Xi=null,ql(o,H,Q,ue)}}tc(),D=Cn;break}catch(ve){Ta(o,ve)}while(!0);return u&&o.shellSuspendCounter++,pa=Do=null,qe=y,V.H=w,V.A=E,pt===null&&(it=null,ft=0,mf()),D}function tc(){for(;pt!==null;)Lh(pt)}function Lf(o,u){var p=qe;qe|=2;var y=so(),w=Qo();it!==o||ft!==u?(wn=null,Vn=Hn()+500,Xo(o,u)):Gs=tr(o,u);e:do try{if(Mt!==0&&pt!==null){u=pt;var E=Xi;t:switch(Mt){case 1:Mt=0,Xi=null,ql(o,u,E,1);break;case 2:case 9:if(Er(E)){Mt=0,Xi=null,Bf(u);break}u=function(){Mt!==2&&Mt!==9||it!==o||(Mt=7),we(o)},E.then(u,u);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:Er(E)?(Mt=0,Xi=null,Bf(u)):(Mt=0,Xi=null,ql(o,u,E,7));break;case 5:var D=null;switch(pt.tag){case 26:D=pt.memoizedState;case 5:case 27:var H=pt;if(D?h4(D):H.stateNode.complete){Mt=0,Xi=null;var Q=H.sibling;if(Q!==null)pt=Q;else{var ue=H.return;ue!==null?(pt=ue,Wo(ue)):pt=null}break t}}Mt=0,Xi=null,ql(o,u,E,5);break;case 6:Mt=0,Xi=null,ql(o,u,E,6);break;case 8:Ko(),Cn=6;break e;default:throw Error(i(462))}}Nr();break}catch(ve){Ta(o,ve)}while(!0);return pa=Do=null,V.H=y,V.A=w,qe=p,pt!==null?0:(it=null,ft=0,mf(),Cn)}function Nr(){for(;pt!==null&&!br();)Lh(pt)}function Lh(o){var u=Rh(o.alternate,o,$r);o.memoizedProps=o.pendingProps,u===null?Wo(o):pt=u}function Bf(o){var u=o,p=u.alternate;switch(u.tag){case 15:case 0:u=Mf(p,u,u.pendingProps,u.type,void 0,ft);break;case 11:u=Mf(p,u,u.pendingProps,u.type.render,u.ref,ft);break;case 5:Tm(u);default:Jr(p,u),u=pt=Du(u,$r),u=Rh(p,u,$r)}o.memoizedProps=o.pendingProps,u===null?Wo(o):pt=u}function ql(o,u,p,y){pa=Do=null,Tm(u),Nl=null,Rl=0;var w=u.return;try{if(ci(o,w,u,p,ft)){Cn=1,Ch(o,Kr(p,o.current)),pt=null;return}}catch(E){if(w!==null)throw pt=w,E;Cn=1,Ch(o,Kr(p,o.current)),pt=null;return}u.flags&32768?(_t||y===1?o=!0:Gs||(ft&536870912)!==0?o=!1:(Rs=o=!0,(y===2||y===9||y===3||y===6)&&(y=Tr.current,y!==null&&y.tag===13&&(y.flags|=16384))),Pf(u,o)):Wo(u)}function Wo(o){var u=o;do{if((u.flags&32768)!==0){Pf(u,Rs);return}o=u.return;var p=Rf(u.alternate,u,$r);if(p!==null){pt=p;return}if(u=u.sibling,u!==null){pt=u;return}pt=u=o}while(u!==null);Cn===0&&(Cn=5)}function Pf(o,u){do{var p=Ts(o.alternate,o);if(p!==null){p.flags&=32767,pt=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(o=o.sibling,o!==null)){pt=o;return}pt=o=p}while(o!==null);Cn=6,pt=null}function ao(o,u,p,y,w,E,D,H,Q){o.cancelPendingCommit=null;do nc();while(Gt!==0);if((qe&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(E=u.lanes|u.childLanes,E|=yi,Dn(o,p,E,D,H,Q),o===it&&(pt=it=null,ft=0),Ju=u,es=o,Os=p,Zu=E,$u=w,jf=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,M(Ge,function(){return Bh(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=V.T,V.T=null,w=ae.p,ae.p=2,D=qe,qe|=4;try{l2(o,u,p)}finally{qe=D,ae.p=w,V.T=y}}Gt=1,si(),oo(),Vl()}}function si(){if(Gt===1){Gt=0;var o=es,u=Ju,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=V.T,V.T=null;var y=ae.p;ae.p=2;var w=qe;qe|=4;try{Fo(u,o);var E=m2,D=Ey(o.containerInfo),H=E.focusedElem,Q=E.selectionRange;if(D!==H&&H&&H.ownerDocument&&Wt(H.ownerDocument.documentElement,H)){if(Q!==null&&om(H)){var ue=Q.start,ve=Q.end;if(ve===void 0&&(ve=ue),"selectionStart"in H)H.selectionStart=ue,H.selectionEnd=Math.min(ve,H.value.length);else{var Se=H.ownerDocument||document,de=Se&&Se.defaultView||window;if(de.getSelection){var ge=de.getSelection(),He=H.textContent.length,$e=Math.min(Q.start,He),en=Q.end===void 0?$e:Math.min(Q.end,He);!ge.extend&&$e>en&&(D=en,en=$e,$e=D);var ne=Nu(H,$e),ee=Nu(H,en);if(ne&&ee&&(ge.rangeCount!==1||ge.anchorNode!==ne.node||ge.anchorOffset!==ne.offset||ge.focusNode!==ee.node||ge.focusOffset!==ee.offset)){var le=Se.createRange();le.setStart(ne.node,ne.offset),ge.removeAllRanges(),$e>en?(ge.addRange(le),ge.extend(ee.node,ee.offset)):(le.setEnd(ee.node,ee.offset),ge.addRange(le))}}}}for(Se=[],ge=H;ge=ge.parentNode;)ge.nodeType===1&&Se.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Se.length;H++){var xe=Se[H];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}O1=!!p2,m2=p2=null}finally{qe=w,ae.p=y,V.T=p}}o.current=u,Gt=2}}function oo(){if(Gt===2){Gt=0;var o=es,u=Ju,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=V.T,V.T=null;var y=ae.p;ae.p=2;var w=qe;qe|=4;try{dn(o,u.alternate,u)}finally{qe=w,ae.p=y,V.T=p}}Gt=3}}function Vl(){if(Gt===4||Gt===3){Gt=0,An();var o=es,u=Ju,p=Os,y=jf;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Gt=5:(Gt=0,Ju=es=null,_a(o,o.pendingLanes));var w=o.pendingLanes;if(w===0&&(Yn=null),ps(p),u=u.stateNode,Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(gi,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=V.T,w=ae.p,ae.p=2,V.T=null;try{for(var E=o.onRecoverableError,D=0;D<y.length;D++){var H=y[D];E(H.value,{componentStack:H.stack})}}finally{V.T=u,ae.p=w}}(Os&3)!==0&&nc(),we(o),w=o.pendingLanes,(p&261930)!==0&&(w&42)!==0?o===Gl?Yo++:(Yo=0,Gl=o):Yo=0,Le(0)}}function _a(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Tl(u)))}function nc(){return si(),oo(),Vl(),Bh()}function Bh(){if(Gt!==5)return!1;var o=es,u=Zu;Zu=0;var p=ps(Os),y=V.T,w=ae.p;try{ae.p=32>p?32:p,V.T=null,p=$u,$u=null;var E=es,D=Os;if(Gt=0,Ju=es=null,Os=0,(qe&6)!==0)throw Error(i(331));var H=qe;if(qe|=4,Ar(E.current),eg(E,E.current,D,p),qe=H,Le(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(gi,E)}catch{}return!0}finally{ae.p=w,V.T=y,_a(o,u)}}function ig(o,u,p){u=Kr(p,u),u=Km(o.stateNode,u,2),o=Lo(o,u,2),o!==null&&(Hr(o,2),we(o))}function Dt(o,u,p){if(o.tag===3)ig(o,o,p);else for(;u!==null;){if(u.tag===3){ig(u,o,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Yn===null||!Yn.has(y))){o=Kr(p,o),p=Xm(2),y=Lo(u,p,2),y!==null&&(y1(p,y,u,o),Hr(y,2),we(y));break}}u=u.return}}function If(o,u,p){var y=o.pingCache;if(y===null){y=o.pingCache=new ut;var w=new Set;y.set(u,w)}else w=y.get(u),w===void 0&&(w=new Set,y.set(u,w));w.has(p)||(tg=!0,w.add(p),o=f.bind(null,o,u,p),u.then(o,o))}function f(o,u,p){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,it===o&&(ft&p)===p&&(Cn===4||Cn===3&&(ft&62914560)===ft&&300>Hn()-Wu?(qe&2)===0&&Xo(o,0):zf|=p,tn===ft&&(tn=0)),we(o)}function h(o,u){u===0&&(u=On()),o=or(o,u),o!==null&&(Hr(o,u),we(o))}function b(o){var u=o.memoizedState,p=0;u!==null&&(p=u.retryLane),h(o,p)}function C(o,u){var p=0;switch(o.tag){case 31:case 13:var y=o.stateNode,w=o.memoizedState;w!==null&&(p=w.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(u),h(o,p)}function M(o,u){return $n(o,u)}var R=null,P=null,W=!1,me=!1,Ce=!1,Re=0;function we(o){o!==P&&o.next===null&&(P===null?R=P=o:P=P.next=o),me=!0,W||(W=!0,ie())}function Le(o,u){if(!Ce&&me){Ce=!0;do for(var p=!1,y=R;y!==null;){if(o!==0){var w=y.pendingLanes;if(w===0)var E=0;else{var D=y.suspendedLanes,H=y.pingedLanes;E=(1<<31-It(42|o)+1)-1,E&=w&~(D&~H),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(p=!0,fe(y,E))}else E=ft,E=Un(y,y===it?E:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(E&3)===0||tr(y,E)||(p=!0,fe(y,E));y=y.next}while(p);Ce=!1}}function at(){Ci()}function Ci(){me=W=!1;var o=0;Re!==0&&t7()&&(o=Re);for(var u=Hn(),p=null,y=R;y!==null;){var w=y.next,E=ic(y,u);E===0?(y.next=null,p===null?R=w:p.next=w,w===null&&(P=p)):(p=y,(o!==0||(E&3)!==0)&&(me=!0)),y=w}Gt!==0&&Gt!==5||Le(o),Re!==0&&(Re=0)}function ic(o,u){for(var p=o.suspendedLanes,y=o.pingedLanes,w=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var D=31-It(E),H=1<<D,Q=w[D];Q===-1?((H&p)===0||(H&y)!==0)&&(w[D]=nr(H,u)):Q<=u&&(o.expiredLanes|=H),E&=~H}if(u=it,p=ft,p=Un(o,o===u?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,p===0||o===u&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Pr(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||tr(o,p)){if(u=p&-p,u===o.callbackPriority)return u;switch(y!==null&&Pr(y),ps(p)){case 2:case 8:p=_e;break;case 32:p=Ge;break;case 268435456:p=vt;break;default:p=Ge}return y=Jo.bind(null,o),p=$n(p,y),o.callbackPriority=u,o.callbackNode=p,u}return y!==null&&y!==null&&Pr(y),o.callbackPriority=2,o.callbackNode=null,2}function Jo(o,u){if(Gt!==0&&Gt!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(nc()&&o.callbackNode!==p)return null;var y=ft;return y=Un(o,o===it?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(xt(o,y,u),ic(o,Hn()),o.callbackNode!=null&&o.callbackNode===p?Jo.bind(null,o):null)}function fe(o,u){if(nc())return null;xt(o,u,!0)}function ie(){i7(function(){(qe&6)!==0?$n(ye,at):Ci()})}function pe(){if(Re===0){var o=Wa;o===0&&(o=yu,yu<<=1,(yu&261888)===0&&(yu=256)),Re=o}return Re}function Ae(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ef(""+o)}function Qe(o,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,o.id&&p.setAttribute("form",o.id),u.parentNode.insertBefore(p,u),o=new FormData(o),p.parentNode.removeChild(p),o}function Tn(o,u,p,y,w){if(u==="submit"&&p&&p.stateNode===w){var E=Ae((w[Fi]||null).action),D=y.submitter;D&&(u=(u=D[Fi]||null)?Ae(u.formAction):D.getAttribute("formAction"),u!==null&&(E=u,D=null));var H=new rf("action","action",null,y,w);o.push({event:H,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Re!==0){var Q=D?Qe(w,D):new FormData(w);Im(p,{pending:!0,data:Q,method:w.method,action:E},null,Q)}}else typeof E=="function"&&(H.preventDefault(),Q=D?Qe(w,D):new FormData(w),Im(p,{pending:!0,data:Q,method:w.method,action:E},E,Q))},currentTarget:w}]})}}for(var Je=0;Je<hf.length;Je++){var Rt=hf[Je],wi=Rt.toLowerCase(),Lt=Rt[0].toUpperCase()+Rt.slice(1);vs(wi,"on"+Lt)}vs(Wd,"onAnimationEnd"),vs(df,"onAnimationIteration"),vs(um,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(_y,"onTransitionRun"),vs(e2,"onTransitionStart"),vs(ky,"onTransitionCancel"),vs(cm,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wo("onBeforeInput",["compositionend","keypress","textInput","paste"]),wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ds));function q3(o,u){u=(u&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],w=y.event;y=y.listeners;e:{var E=void 0;if(u)for(var D=y.length-1;0<=D;D--){var H=y[D],Q=H.instance,ue=H.currentTarget;if(H=H.listener,Q!==E&&w.isPropagationStopped())break e;E=H,w.currentTarget=ue;try{E(w)}catch(ve){pf(ve)}w.currentTarget=null,E=Q}else for(D=0;D<y.length;D++){if(H=y[D],Q=H.instance,ue=H.currentTarget,H=H.listener,Q!==E&&w.isPropagationStopped())break e;E=H,w.currentTarget=ue;try{E(w)}catch(ve){pf(ve)}w.currentTarget=null,E=Q}}}}function At(o,u){var p=u[ia];p===void 0&&(p=u[ia]=new Set);var y=o+"__bubble";p.has(y)||(V3(u,o,2,!1),p.add(y))}function c2(o,u,p){var y=0;u&&(y|=4),V3(p,o,y,u)}var w1="_reactListening"+Math.random().toString(36).slice(2);function f2(o){if(!o[w1]){o[w1]=!0,Fa.forEach(function(p){p!=="selectionchange"&&(u2.has(p)||c2(p,!1,o),c2(p,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[w1]||(u[w1]=!0,c2("selectionchange",!1,u))}}function V3(o,u,p,y){switch(x4(u)){case 2:var w=w7;break;case 8:w=E7;break;default:w=_2}p=w.bind(null,u,p,o),w=void 0,!Vp||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(w=!0),y?w!==void 0?o.addEventListener(u,p,{capture:!0,passive:w}):o.addEventListener(u,p,!0):w!==void 0?o.addEventListener(u,p,{passive:w}):o.addEventListener(u,p,!1)}function d2(o,u,p,y,w){var E=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var H=y.stateNode.containerInfo;if(H===w)break;if(D===4)for(D=y.return;D!==null;){var Q=D.tag;if((Q===3||Q===4)&&D.stateNode.containerInfo===w)return;D=D.return}for(;H!==null;){if(D=ml(H),D===null)return;if(Q=D.tag,Q===5||Q===6||Q===26||Q===27){y=E=D;continue e}H=H.parentNode}}y=y.return}qp(function(){var ue=E,ve=Bd(p),Se=[];e:{var de=ys.get(o);if(de!==void 0){var ge=rf,He=o;switch(o){case"keypress":if(nf(p)===0)break e;case"keydown":case"keyup":ge=xl;break;case"focusin":He="focus",ge=Ud;break;case"focusout":He="blur",ge=Ud;break;case"beforeblur":case"afterblur":ge=Ud;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=ay;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=dy;break;case Wd:case df:case um:ge=Jx;break;case cm:ge=$x;break;case"scroll":case"scrollend":ge=ry;break;case"wheel":ge=py;break;case"copy":case"cut":case"paste":ge=ly;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Qp;break;case"toggle":case"beforetoggle":ge=gy}var $e=(u&4)!==0,en=!$e&&(o==="scroll"||o==="scrollend"),ne=$e?de!==null?de+"Capture":null:de;$e=[];for(var ee=ue,le;ee!==null;){var xe=ee;if(le=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||le===null||ne===null||(xe=Su(ee,ne),xe!=null&&$e.push(rg(ee,xe,le))),en)break;ee=ee.return}0<$e.length&&(de=new ge(de,He,null,p,ve),Se.push({event:de,listeners:$e}))}}if((u&7)===0){e:{if(de=o==="mouseover"||o==="pointerover",ge=o==="mouseout"||o==="pointerout",de&&p!==Ld&&(He=p.relatedTarget||p.fromElement)&&(ml(He)||He[xo]))break e;if((ge||de)&&(de=ve.window===ve?ve:(de=ve.ownerDocument)?de.defaultView||de.parentWindow:window,ge?(He=p.relatedTarget||p.toElement,ge=ue,He=He?ml(He):null,He!==null&&(en=s(He),$e=He.tag,He!==en||$e!==5&&$e!==27&&$e!==6)&&(He=null)):(ge=null,He=ue),ge!==He)){if($e=Yp,xe="onMouseLeave",ne="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&($e=Qp,xe="onPointerLeave",ne="onPointerEnter",ee="pointer"),en=ge==null?de:vu(ge),le=He==null?de:vu(He),de=new $e(xe,ee+"leave",ge,p,ve),de.target=en,de.relatedTarget=le,xe=null,ml(ve)===ue&&($e=new $e(ne,ee+"enter",He,p,ve),$e.target=le,$e.relatedTarget=en,xe=$e),en=xe,ge&&He)t:{for($e=WO,ne=ge,ee=He,le=0,xe=ne;xe;xe=$e(xe))le++;xe=0;for(var Ye=ee;Ye;Ye=$e(Ye))xe++;for(;0<le-xe;)ne=$e(ne),le--;for(;0<xe-le;)ee=$e(ee),xe--;for(;le--;){if(ne===ee||ee!==null&&ne===ee.alternate){$e=ne;break t}ne=$e(ne),ee=$e(ee)}$e=null}else $e=null;ge!==null&&Y3(Se,de,ge,$e,!1),He!==null&&en!==null&&Y3(Se,en,He,$e,!0)}}e:{if(de=ue?vu(ue):window,ge=de.nodeName&&de.nodeName.toLowerCase(),ge==="select"||ge==="input"&&de.type==="file")var Ht=nm;else if(tm(de))if(aa)Ht=wy;else{Ht=sm;var Ue=Sy}else ge=de.nodeName,!ge||ge.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ue&&jd(ue.elementType)&&(Ht=nm):Ht=Cy;if(Ht&&(Ht=Ht(o,ue))){Xd(Se,Ht,p,ve);break e}Ue&&Ue(o,de,ue),o==="focusout"&&ue&&de.type==="number"&&ue.memoizedProps.value!=null&&Is(de,"number",de.value)}switch(Ue=ue?vu(ue):window,o){case"focusin":(tm(Ue)||Ue.contentEditable==="true")&&(oa=Ue,la=ue,Ru=null);break;case"focusout":Ru=la=oa=null;break;case"mousedown":Qd=!0;break;case"contextmenu":case"mouseup":case"dragend":Qd=!1,Ou(Se,p,ve);break;case"selectionchange":if(Ty)break;case"keydown":case"keyup":Ou(Se,p,ve)}var gt;if(Sl)e:{switch(o){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else Cl?Kd(o,p)&&(Ot="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ot="onCompositionStart");Ot&&(Jp&&p.locale!=="ko"&&(Cl||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Cl&&(gt=tf()):(Yr=ve,Id="value"in Yr?Yr.value:Yr.textContent,Cl=!0)),Ue=E1(ue,Ot),0<Ue.length&&(Ot=new Fd(Ot,o,null,p,ve),Se.push({event:Ot,listeners:Ue}),gt?Ot.data=gt:(gt=Zp(p),gt!==null&&(Ot.data=gt)))),(gt=Yd?by(o,p):$p(o,p))&&(Ot=E1(ue,"onBeforeInput"),0<Ot.length&&(Ue=new Fd("onBeforeInput","beforeinput",null,p,ve),Se.push({event:Ue,listeners:Ot}),Ue.data=gt)),Tn(Se,o,ue,p,ve)}q3(Se,u)})}function rg(o,u,p){return{instance:o,listener:u,currentTarget:p}}function E1(o,u){for(var p=u+"Capture",y=[];o!==null;){var w=o,E=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||E===null||(w=Su(o,p),w!=null&&y.unshift(rg(o,w,E)),w=Su(o,u),w!=null&&y.push(rg(o,w,E))),o.tag===3)return y;o=o.return}return[]}function WO(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Y3(o,u,p,y,w){for(var E=u._reactName,D=[];p!==null&&p!==y;){var H=p,Q=H.alternate,ue=H.stateNode;if(H=H.tag,Q!==null&&Q===y)break;H!==5&&H!==26&&H!==27||ue===null||(Q=ue,w?(ue=Su(p,E),ue!=null&&D.unshift(rg(p,ue,Q))):w||(ue=Su(p,E),ue!=null&&D.push(rg(p,ue,Q)))),p=p.return}D.length!==0&&o.push({event:u,listeners:D})}var JO=/\r\n?/g,ZO=/\u0000|\uFFFD/g;function K3(o){return(typeof o=="string"?o:""+o).replace(JO,`
`).replace(ZO,"")}function X3(o,u){return u=K3(u),K3(o)===u}function $t(o,u,p,y,w,E){switch(p){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||yl(o,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&yl(o,""+y);break;case"className":Zc(o,"class",y);break;case"tabIndex":Zc(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Zc(o,p,y);break;case"style":Up(o,y,E);break;case"data":if(u!=="object"){Zc(o,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||p!=="href")){o.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=ef(""+y),o.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(p==="formAction"?(u!=="input"&&$t(o,u,"name",w.name,w,null),$t(o,u,"formEncType",w.formEncType,w,null),$t(o,u,"formMethod",w.formMethod,w,null),$t(o,u,"formTarget",w.formTarget,w,null)):($t(o,u,"encType",w.encType,w,null),$t(o,u,"method",w.method,w,null),$t(o,u,"target",w.target,w,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=ef(""+y),o.setAttribute(p,y);break;case"onClick":y!=null&&(o.onclick=qa);break;case"onScroll":y!=null&&At("scroll",o);break;case"onScrollEnd":y!=null&&At("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(p=y.__html,p!=null){if(w.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}p=ef(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""+y):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":y===!0?o.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,y):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(p,y):o.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(p):o.setAttribute(p,y);break;case"popover":At("beforetoggle",o),At("toggle",o),bu(o,"popover",y);break;case"xlinkActuate":ra(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ra(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ra(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ra(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ra(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ra(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ra(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ra(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ra(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":bu(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ny.get(p)||p,bu(o,p,y))}}function h2(o,u,p,y,w,E){switch(p){case"style":Up(o,y,E);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(p=y.__html,p!=null){if(w.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"children":typeof y=="string"?yl(o,y):(typeof y=="number"||typeof y=="bigint")&&yl(o,""+y);break;case"onScroll":y!=null&&At("scroll",o);break;case"onScrollEnd":y!=null&&At("scrollend",o);break;case"onClick":y!=null&&(o.onclick=qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ad.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(w=p.endsWith("Capture"),u=p.slice(2,w?p.length-7:void 0),E=o[Fi]||null,E=E!=null?E[p]:null,typeof E=="function"&&o.removeEventListener(u,E,w),typeof y=="function")){typeof E!="function"&&E!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(u,y,w);break e}p in o?o[p]=y:y===!0?o.setAttribute(p,""):bu(o,p,y)}}}function mr(o,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",o),At("load",o);var y=!1,w=!1,E;for(E in p)if(p.hasOwnProperty(E)){var D=p[E];if(D!=null)switch(E){case"src":y=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:$t(o,u,E,D,p,null)}}w&&$t(o,u,"srcSet",p.srcSet,p,null),y&&$t(o,u,"src",p.src,p,null);return;case"input":At("invalid",o);var H=E=D=w=null,Q=null,ue=null;for(y in p)if(p.hasOwnProperty(y)){var ve=p[y];if(ve!=null)switch(y){case"name":w=ve;break;case"type":D=ve;break;case"checked":Q=ve;break;case"defaultChecked":ue=ve;break;case"value":E=ve;break;case"defaultValue":H=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,u));break;default:$t(o,u,y,ve,p,null)}}Od(o,E,H,Q,ue,D,w,!1);return;case"select":At("invalid",o),y=D=E=null;for(w in p)if(p.hasOwnProperty(w)&&(H=p[w],H!=null))switch(w){case"value":E=H;break;case"defaultValue":D=H;break;case"multiple":y=H;default:$t(o,u,w,H,p,null)}u=E,p=D,o.multiple=!!y,u!=null?Ga(o,!!y,u,!1):p!=null&&Ga(o,!!y,p,!0);return;case"textarea":At("invalid",o),E=w=y=null;for(D in p)if(p.hasOwnProperty(D)&&(H=p[D],H!=null))switch(D){case"value":y=H;break;case"defaultValue":w=H;break;case"children":E=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(91));break;default:$t(o,u,D,H,p,null)}zd(o,y,w,E);return;case"option":for(Q in p)if(p.hasOwnProperty(Q)&&(y=p[Q],y!=null))switch(Q){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:$t(o,u,Q,y,p,null)}return;case"dialog":At("beforetoggle",o),At("toggle",o),At("cancel",o),At("close",o);break;case"iframe":case"object":At("load",o);break;case"video":case"audio":for(y=0;y<Ds.length;y++)At(Ds[y],o);break;case"image":At("error",o),At("load",o);break;case"details":At("toggle",o);break;case"embed":case"source":case"link":At("error",o),At("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in p)if(p.hasOwnProperty(ue)&&(y=p[ue],y!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:$t(o,u,ue,y,p,null)}return;default:if(jd(u)){for(ve in p)p.hasOwnProperty(ve)&&(y=p[ve],y!==void 0&&h2(o,u,ve,y,p,void 0));return}}for(H in p)p.hasOwnProperty(H)&&(y=p[H],y!=null&&$t(o,u,H,y,p,null))}function $O(o,u,p,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,E=null,D=null,H=null,Q=null,ue=null,ve=null;for(ge in p){var Se=p[ge];if(p.hasOwnProperty(ge)&&Se!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":Q=Se;default:y.hasOwnProperty(ge)||$t(o,u,ge,null,y,Se)}}for(var de in y){var ge=y[de];if(Se=p[de],y.hasOwnProperty(de)&&(ge!=null||Se!=null))switch(de){case"type":E=ge;break;case"name":w=ge;break;case"checked":ue=ge;break;case"defaultChecked":ve=ge;break;case"value":D=ge;break;case"defaultValue":H=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,u));break;default:ge!==Se&&$t(o,u,de,ge,y,Se)}}xu(o,D,H,Q,ue,ve,E,w);return;case"select":ge=D=H=de=null;for(E in p)if(Q=p[E],p.hasOwnProperty(E)&&Q!=null)switch(E){case"value":break;case"multiple":ge=Q;default:y.hasOwnProperty(E)||$t(o,u,E,null,y,Q)}for(w in y)if(E=y[w],Q=p[w],y.hasOwnProperty(w)&&(E!=null||Q!=null))switch(w){case"value":de=E;break;case"defaultValue":H=E;break;case"multiple":D=E;default:E!==Q&&$t(o,u,w,E,y,Q)}u=H,p=D,y=ge,de!=null?Ga(o,!!p,de,!1):!!y!=!!p&&(u!=null?Ga(o,!!p,u,!0):Ga(o,!!p,p?[]:"",!1));return;case"textarea":ge=de=null;for(H in p)if(w=p[H],p.hasOwnProperty(H)&&w!=null&&!y.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:$t(o,u,H,null,y,w)}for(D in y)if(w=y[D],E=p[D],y.hasOwnProperty(D)&&(w!=null||E!=null))switch(D){case"value":de=w;break;case"defaultValue":ge=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:w!==E&&$t(o,u,D,w,y,E)}Dd(o,de,ge);return;case"option":for(var He in p)if(de=p[He],p.hasOwnProperty(He)&&de!=null&&!y.hasOwnProperty(He))switch(He){case"selected":o.selected=!1;break;default:$t(o,u,He,null,y,de)}for(Q in y)if(de=y[Q],ge=p[Q],y.hasOwnProperty(Q)&&de!==ge&&(de!=null||ge!=null))switch(Q){case"selected":o.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:$t(o,u,Q,de,y,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in p)de=p[$e],p.hasOwnProperty($e)&&de!=null&&!y.hasOwnProperty($e)&&$t(o,u,$e,null,y,de);for(ue in y)if(de=y[ue],ge=p[ue],y.hasOwnProperty(ue)&&de!==ge&&(de!=null||ge!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,u));break;default:$t(o,u,ue,de,y,ge)}return;default:if(jd(u)){for(var en in p)de=p[en],p.hasOwnProperty(en)&&de!==void 0&&!y.hasOwnProperty(en)&&h2(o,u,en,void 0,y,de);for(ve in y)de=y[ve],ge=p[ve],!y.hasOwnProperty(ve)||de===ge||de===void 0&&ge===void 0||h2(o,u,ve,de,y,ge);return}}for(var ne in p)de=p[ne],p.hasOwnProperty(ne)&&de!=null&&!y.hasOwnProperty(ne)&&$t(o,u,ne,null,y,de);for(Se in y)de=y[Se],ge=p[Se],!y.hasOwnProperty(Se)||de===ge||de==null&&ge==null||$t(o,u,Se,de,y,ge)}function Q3(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function e7(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var w=p[y],E=w.transferSize,D=w.initiatorType,H=w.duration;if(E&&H&&Q3(D)){for(D=0,H=w.responseEnd,y+=1;y<p.length;y++){var Q=p[y],ue=Q.startTime;if(ue>H)break;var ve=Q.transferSize,Se=Q.initiatorType;ve&&Q3(Se)&&(Q=Q.responseEnd,D+=ve*(Q<H?1:(H-ue)/(Q-ue)))}if(--y,u+=8*(E+D)/(w.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var p2=null,m2=null;function T1(o){return o.nodeType===9?o:o.ownerDocument}function W3(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J3(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function g2(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var y2=null;function t7(){var o=window.event;return o&&o.type==="popstate"?o===y2?!1:(y2=o,!0):(y2=null,!1)}var Z3=typeof setTimeout=="function"?setTimeout:void 0,n7=typeof clearTimeout=="function"?clearTimeout:void 0,$3=typeof Promise=="function"?Promise:void 0,i7=typeof queueMicrotask=="function"?queueMicrotask:typeof $3<"u"?function(o){return $3.resolve(null).then(o).catch(r7)}:Z3;function r7(o){setTimeout(function(){throw o})}function rc(o){return o==="head"}function e4(o,u){var p=u,y=0;do{var w=p.nextSibling;if(o.removeChild(p),w&&w.nodeType===8)if(p=w.data,p==="/$"||p==="/&"){if(y===0){o.removeChild(w),Uh(u);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")sg(o.ownerDocument.documentElement);else if(p==="head"){p=o.ownerDocument.head,sg(p);for(var E=p.firstChild;E;){var D=E.nextSibling,H=E.nodeName;E[Ua]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&E.rel.toLowerCase()==="stylesheet"||p.removeChild(E),E=D}}else p==="body"&&sg(o.ownerDocument.body);p=w}while(p);Uh(u)}function t4(o,u){var p=o;o=0;do{var y=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(o===0)break;o--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||o++;p=y}while(p)}function v2(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":v2(p),pl(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function s7(o,u,p,y){for(;o.nodeType===1;){var w=p;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[Ua])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==w.rel||o.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||o.getAttribute("title")!==(w.title==null?null:w.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(w.src==null?null:w.src)||o.getAttribute("type")!==(w.type==null?null:w.type)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var E=w.name==null?null:""+w.name;if(w.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=ka(o.nextSibling),o===null)break}return null}function a7(o,u,p){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=ka(o.nextSibling),o===null))return null;return o}function n4(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=ka(o.nextSibling),o===null))return null;return o}function b2(o){return o.data==="$?"||o.data==="$~"}function x2(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function o7(o,u){var p=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||p.readyState!=="loading")u();else{var y=function(){u(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function ka(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var S2=null;function i4(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"||p==="/&"){if(u===0)return ka(o.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}o=o.nextSibling}return null}function r4(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return o;u--}else p!=="/$"&&p!=="/&"||u++}o=o.previousSibling}return null}function s4(o,u,p){switch(u=T1(p),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function sg(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);pl(o)}var Ma=new Map,a4=new Set;function _1(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Yl=ae.d;ae.d={f:l7,r:u7,D:c7,C:f7,L:d7,m:h7,X:m7,S:p7,M:g7};function l7(){var o=Yl.f(),u=qs();return o||u}function u7(o){var u=gl(o);u!==null&&u.tag===5&&u.type==="form"?l1(u):Yl.r(o)}var Ph=typeof document>"u"?null:document;function o4(o,u,p){var y=Ph;if(y&&typeof u=="string"&&u){var w=qi(u);w='link[rel="'+o+'"][href="'+w+'"]',typeof p=="string"&&(w+='[crossorigin="'+p+'"]'),a4.has(w)||(a4.add(w),o={rel:o,crossOrigin:p,href:u},y.querySelector(w)===null&&(u=y.createElement("link"),mr(u,"link",o),ti(u),y.head.appendChild(u)))}}function c7(o){Yl.D(o),o4("dns-prefetch",o,null)}function f7(o,u){Yl.C(o,u),o4("preconnect",o,u)}function d7(o,u,p){Yl.L(o,u,p);var y=Ph;if(y&&o&&u){var w='link[rel="preload"][as="'+qi(u)+'"]';u==="image"&&p&&p.imageSrcSet?(w+='[imagesrcset="'+qi(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(w+='[imagesizes="'+qi(p.imageSizes)+'"]')):w+='[href="'+qi(o)+'"]';var E=w;switch(u){case"style":E=Ih(o);break;case"script":E=Hh(o)}Ma.has(E)||(o=g({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:o,as:u},p),Ma.set(E,o),y.querySelector(w)!==null||u==="style"&&y.querySelector(ag(E))||u==="script"&&y.querySelector(og(E))||(u=y.createElement("link"),mr(u,"link",o),ti(u),y.head.appendChild(u)))}}function h7(o,u){Yl.m(o,u);var p=Ph;if(p&&o){var y=u&&typeof u.as=="string"?u.as:"script",w='link[rel="modulepreload"][as="'+qi(y)+'"][href="'+qi(o)+'"]',E=w;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Hh(o)}if(!Ma.has(E)&&(o=g({rel:"modulepreload",href:o},u),Ma.set(E,o),p.querySelector(w)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(og(E)))return}y=p.createElement("link"),mr(y,"link",o),ti(y),p.head.appendChild(y)}}}function p7(o,u,p){Yl.S(o,u,p);var y=Ph;if(y&&o){var w=Co(y).hoistableStyles,E=Ih(o);u=u||"default";var D=w.get(E);if(!D){var H={loading:0,preload:null};if(D=y.querySelector(ag(E)))H.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},p),(p=Ma.get(E))&&C2(o,p);var Q=D=y.createElement("link");ti(Q),mr(Q,"link",o),Q._p=new Promise(function(ue,ve){Q.onload=ue,Q.onerror=ve}),Q.addEventListener("load",function(){H.loading|=1}),Q.addEventListener("error",function(){H.loading|=2}),H.loading|=4,k1(D,u,y)}D={type:"stylesheet",instance:D,count:1,state:H},w.set(E,D)}}}function m7(o,u){Yl.X(o,u);var p=Ph;if(p&&o){var y=Co(p).hoistableScripts,w=Hh(o),E=y.get(w);E||(E=p.querySelector(og(w)),E||(o=g({src:o,async:!0},u),(u=Ma.get(w))&&w2(o,u),E=p.createElement("script"),ti(E),mr(E,"link",o),p.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},y.set(w,E))}}function g7(o,u){Yl.M(o,u);var p=Ph;if(p&&o){var y=Co(p).hoistableScripts,w=Hh(o),E=y.get(w);E||(E=p.querySelector(og(w)),E||(o=g({src:o,async:!0,type:"module"},u),(u=Ma.get(w))&&w2(o,u),E=p.createElement("script"),ti(E),mr(E,"link",o),p.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},y.set(w,E))}}function l4(o,u,p,y){var w=(w=ze.current)?_1(w):null;if(!w)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=Ih(p.href),p=Co(w).hoistableStyles,y=p.get(u),y||(y={type:"style",instance:null,count:0,state:null},p.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=Ih(p.href);var E=Co(w).hoistableStyles,D=E.get(o);if(D||(w=w.ownerDocument||w,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,D),(E=w.querySelector(ag(o)))&&!E._p&&(D.instance=E,D.state.loading=5),Ma.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ma.set(o,p),E||y7(w,o,p,D.state))),u&&y===null)throw Error(i(528,""));return D}if(u&&y!==null)throw Error(i(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Hh(p),p=Co(w).hoistableScripts,y=p.get(u),y||(y={type:"script",instance:null,count:0,state:null},p.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Ih(o){return'href="'+qi(o)+'"'}function ag(o){return'link[rel="stylesheet"]['+o+"]"}function u4(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function y7(o,u,p,y){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=o.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),mr(u,"link",p),ti(u),o.head.appendChild(u))}function Hh(o){return'[src="'+qi(o)+'"]'}function og(o){return"script[async]"+o}function c4(o,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var y=o.querySelector('style[data-href~="'+qi(p.href)+'"]');if(y)return u.instance=y,ti(y),y;var w=g({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),ti(y),mr(y,"style",w),k1(y,p.precedence,o),u.instance=y;case"stylesheet":w=Ih(p.href);var E=o.querySelector(ag(w));if(E)return u.state.loading|=4,u.instance=E,ti(E),E;y=u4(p),(w=Ma.get(w))&&C2(y,w),E=(o.ownerDocument||o).createElement("link"),ti(E);var D=E;return D._p=new Promise(function(H,Q){D.onload=H,D.onerror=Q}),mr(E,"link",y),u.state.loading|=4,k1(E,p.precedence,o),u.instance=E;case"script":return E=Hh(p.src),(w=o.querySelector(og(E)))?(u.instance=w,ti(w),w):(y=p,(w=Ma.get(E))&&(y=g({},p),w2(y,w)),o=o.ownerDocument||o,w=o.createElement("script"),ti(w),mr(w,"link",y),o.head.appendChild(w),u.instance=w);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,k1(y,p.precedence,o));return u.instance}function k1(o,u,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=y.length?y[y.length-1]:null,E=w,D=0;D<y.length;D++){var H=y[D];if(H.dataset.precedence===u)E=H;else if(E!==w)break}E?E.parentNode.insertBefore(o,E.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(o,u.firstChild))}function C2(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function w2(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var M1=null;function f4(o,u,p){if(M1===null){var y=new Map,w=M1=new Map;w.set(p,y)}else w=M1,y=w.get(p),y||(y=new Map,w.set(p,y));if(y.has(o))return y;for(y.set(o,null),p=p.getElementsByTagName(o),w=0;w<p.length;w++){var E=p[w];if(!(E[Ua]||E[ei]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var D=E.getAttribute(u)||"";D=o+D;var H=y.get(D);H?H.push(E):y.set(D,[E])}}return y}function d4(o,u,p){o=o.ownerDocument||o,o.head.insertBefore(p,u==="title"?o.querySelector("head > title"):null)}function v7(o,u,p){if(p===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function h4(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function b7(o,u,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var w=Ih(y.href),E=u.querySelector(ag(w));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=A1.bind(o),u.then(o,o)),p.state.loading|=4,p.instance=E,ti(E);return}E=u.ownerDocument||u,y=u4(y),(w=Ma.get(w))&&C2(y,w),E=E.createElement("link"),ti(E);var D=E;D._p=new Promise(function(H,Q){D.onload=H,D.onerror=Q}),mr(E,"link",y),p.instance=E}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(o.count++,p=A1.bind(o),u.addEventListener("load",p),u.addEventListener("error",p))}}var E2=0;function x7(o,u){return o.stylesheets&&o.count===0&&R1(o,o.stylesheets),0<o.count||0<o.imgCount?function(p){var y=setTimeout(function(){if(o.stylesheets&&R1(o,o.stylesheets),o.unsuspend){var E=o.unsuspend;o.unsuspend=null,E()}},6e4+u);0<o.imgBytes&&E2===0&&(E2=62500*e7());var w=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&R1(o,o.stylesheets),o.unsuspend)){var E=o.unsuspend;o.unsuspend=null,E()}},(o.imgBytes>E2?50:800)+u);return o.unsuspend=p,function(){o.unsuspend=null,clearTimeout(y),clearTimeout(w)}}:null}function A1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)R1(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var N1=null;function R1(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,N1=new Map,u.forEach(S7,o),N1=null,A1.call(o))}function S7(o,u){if(!(u.state.loading&4)){var p=N1.get(o);if(p)var y=p.get(null);else{p=new Map,N1.set(o,p);for(var w=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<w.length;E++){var D=w[E];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(p.set(D.dataset.precedence,D),y=D)}y&&p.set(null,y)}w=u.instance,D=w.getAttribute("data-precedence"),E=p.get(D)||y,E===y&&p.set(null,w),p.set(D,w),this.count++,y=A1.bind(this),w.addEventListener("load",y),w.addEventListener("error",y),E?E.parentNode.insertBefore(w,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(w,o.firstChild)),u.state.loading|=4}}var lg={$$typeof:z,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function C7(o,u,p,y,w,E,D,H,Q){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=y,this.onUncaughtError=w,this.onCaughtError=E,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function p4(o,u,p,y,w,E,D,H,Q,ue,ve,Se){return o=new C7(o,u,p,D,Q,ue,ve,Se,H),u=1,E===!0&&(u|=24),E=bn(3,null,null,u),o.current=E,E.stateNode=o,u=dm(),u.refCount++,o.pooledCache=u,u.refCount++,E.memoizedState={element:y,isDehydrated:p,cache:u},Sf(E),o}function m4(o){return o?(o=Mo,o):Mo}function g4(o,u,p,y,w,E){w=m4(w),y.context===null?y.context=w:y.pendingContext=w,y=Za(u),y.payload={element:p},E=E===void 0?null:E,E!==null&&(y.callback=E),p=Lo(o,y,u),p!==null&&(mt(p,o,u),Bo(p,o,u))}function y4(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<u?p:u}}function T2(o,u){y4(o,u),(o=o.alternate)&&y4(o,u)}function v4(o){if(o.tag===13||o.tag===31){var u=or(o,67108864);u!==null&&mt(u,o,67108864),T2(o,67108864)}}function b4(o){if(o.tag===13||o.tag===31){var u=ts();u=hs(u);var p=or(o,u);p!==null&&mt(p,o,u),T2(o,u)}}var O1=!0;function w7(o,u,p,y){var w=V.T;V.T=null;var E=ae.p;try{ae.p=2,_2(o,u,p,y)}finally{ae.p=E,V.T=w}}function E7(o,u,p,y){var w=V.T;V.T=null;var E=ae.p;try{ae.p=8,_2(o,u,p,y)}finally{ae.p=E,V.T=w}}function _2(o,u,p,y){if(O1){var w=k2(y);if(w===null)d2(o,u,y,D1,p),S4(o,y);else if(_7(w,o,u,p,y))y.stopPropagation();else if(S4(o,y),u&4&&-1<T7.indexOf(o)){for(;w!==null;){var E=gl(w);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var D=Rn(E.pendingLanes);if(D!==0){var H=E;for(H.pendingLanes|=2,H.entangledLanes|=2;D;){var Q=1<<31-It(D);H.entanglements[1]|=Q,D&=~Q}we(E),(qe&6)===0&&(Vn=Hn()+500,Le(0))}}break;case 31:case 13:H=or(E,2),H!==null&&mt(H,E,2),qs(),T2(E,2)}if(E=k2(y),E===null&&d2(o,u,y,D1,p),E===w)break;w=E}w!==null&&y.stopPropagation()}else d2(o,u,y,null,p)}}function k2(o){return o=Bd(o),M2(o)}var D1=null;function M2(o){if(D1=null,o=ml(o),o!==null){var u=s(o);if(u===null)o=null;else{var p=u.tag;if(p===13){if(o=a(u),o!==null)return o;o=null}else if(p===31){if(o=l(u),o!==null)return o;o=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return D1=o,null}function x4(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gu()){case ye:return 2;case _e:return 8;case Ge:case Xe:return 32;case vt:return 268435456;default:return 32}default:return 32}}var A2=!1,sc=null,ac=null,oc=null,ug=new Map,cg=new Map,lc=[],T7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function S4(o,u){switch(o){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":ac=null;break;case"mouseover":case"mouseout":oc=null;break;case"pointerover":case"pointerout":ug.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":cg.delete(u.pointerId)}}function fg(o,u,p,y,w,E){return o===null||o.nativeEvent!==E?(o={blockedOn:u,domEventName:p,eventSystemFlags:y,nativeEvent:E,targetContainers:[w]},u!==null&&(u=gl(u),u!==null&&v4(u)),o):(o.eventSystemFlags|=y,u=o.targetContainers,w!==null&&u.indexOf(w)===-1&&u.push(w),o)}function _7(o,u,p,y,w){switch(u){case"focusin":return sc=fg(sc,o,u,p,y,w),!0;case"dragenter":return ac=fg(ac,o,u,p,y,w),!0;case"mouseover":return oc=fg(oc,o,u,p,y,w),!0;case"pointerover":var E=w.pointerId;return ug.set(E,fg(ug.get(E)||null,o,u,p,y,w)),!0;case"gotpointercapture":return E=w.pointerId,cg.set(E,fg(cg.get(E)||null,o,u,p,y,w)),!0}return!1}function C4(o){var u=ml(o.target);if(u!==null){var p=s(u);if(p!==null){if(u=p.tag,u===13){if(u=a(p),u!==null){o.blockedOn=u,Sr(o.priority,function(){b4(p)});return}}else if(u===31){if(u=l(p),u!==null){o.blockedOn=u,Sr(o.priority,function(){b4(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function z1(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var p=k2(o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);Ld=y,p.target.dispatchEvent(y),Ld=null}else return u=gl(p),u!==null&&v4(u),o.blockedOn=p,!1;u.shift()}return!0}function w4(o,u,p){z1(o)&&p.delete(u)}function k7(){A2=!1,sc!==null&&z1(sc)&&(sc=null),ac!==null&&z1(ac)&&(ac=null),oc!==null&&z1(oc)&&(oc=null),ug.forEach(w4),cg.forEach(w4)}function j1(o,u){o.blockedOn===u&&(o.blockedOn=null,A2||(A2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,k7)))}var L1=null;function E4(o){L1!==o&&(L1=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){L1===o&&(L1=null);for(var u=0;u<o.length;u+=3){var p=o[u],y=o[u+1],w=o[u+2];if(typeof y!="function"){if(M2(y||p)===null)continue;break}var E=gl(p);E!==null&&(o.splice(u,3),u-=3,Im(E,{pending:!0,data:w,method:p.method,action:y},y,w))}}))}function Uh(o){function u(Q){return j1(Q,o)}sc!==null&&j1(sc,o),ac!==null&&j1(ac,o),oc!==null&&j1(oc,o),ug.forEach(u),cg.forEach(u);for(var p=0;p<lc.length;p++){var y=lc[p];y.blockedOn===o&&(y.blockedOn=null)}for(;0<lc.length&&(p=lc[0],p.blockedOn===null);)C4(p),p.blockedOn===null&&lc.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var w=p[y],E=p[y+1],D=w[Fi]||null;if(typeof E=="function")D||E4(p);else if(D){var H=null;if(E&&E.hasAttribute("formAction")){if(w=E,D=E[Fi]||null)H=D.formAction;else if(M2(w)!==null)continue}else H=D.action;typeof H=="function"?p[y+1]=H:(p.splice(y,3),y-=3),E4(p)}}}function T4(){function o(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(D){return w=D})},focusReset:"manual",scroll:"manual"})}function u(){w!==null&&(w(),w=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,w=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),w!==null&&(w(),w=null)}}}function N2(o){this._internalRoot=o}B1.prototype.render=N2.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var p=u.current,y=ts();g4(p,y,o,u,null,null)},B1.prototype.unmount=N2.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;g4(o.current,2,null,o,null,null),qs(),u[xo]=null}};function B1(o){this._internalRoot=o}B1.prototype.unstable_scheduleHydration=function(o){if(o){var u=Fr();o={blockedOn:null,target:o,priority:u};for(var p=0;p<lc.length&&u!==0&&u<lc[p].priority;p++);lc.splice(p,0,o),p===0&&C4(o)}};var _4=e.version;if(_4!=="19.2.0")throw Error(i(527,_4,"19.2.0"));ae.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(u),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var M7={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var P1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!P1.isDisabled&&P1.supportsFiber)try{gi=P1.inject(M7),Nn=P1}catch{}}return hg.createRoot=function(o,u){if(!r(o))throw Error(i(299));var p=!1,y="",w=m1,E=Vm,D=Ym;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError)),u=p4(o,1,!1,null,null,p,y,null,w,E,D,T4),o[xo]=u.current,f2(o),new N2(u)},hg.hydrateRoot=function(o,u,p){if(!r(o))throw Error(i(299));var y=!1,w="",E=m1,D=Vm,H=Ym,Q=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(w=p.identifierPrefix),p.onUncaughtError!==void 0&&(E=p.onUncaughtError),p.onCaughtError!==void 0&&(D=p.onCaughtError),p.onRecoverableError!==void 0&&(H=p.onRecoverableError),p.formState!==void 0&&(Q=p.formState)),u=p4(o,1,!0,u,p??null,y,w,Q,E,D,H,T4),u.context=m4(null),p=u.current,y=ts(),y=hs(y),w=Za(y),w.callback=null,Lo(p,w,y),p=y,u.current.lanes=p,Hr(u,p),we(u),o[xo]=u.current,f2(o),new B1(u)},hg.version="19.2.0",hg}var L4;function B7(){if(L4)return D2.exports;L4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),D2.exports=L7(),D2.exports}var P7=B7(),eu=Wk();const Jk=Ep(eu);function nt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function B4(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function zw(...t){return e=>{let n=!1;const i=t.map(r=>{const s=B4(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():B4(t[r],null)}}}}function Pi(...t){return N.useCallback(zw(...t),t)}function I7(t,e){const n=N.createContext(e),i=s=>{const{children:a,...l}=s,c=N.useMemo(()=>l,Object.values(l));return _.jsx(n.Provider,{value:c,children:a})};i.displayName=t+"Provider";function r(s){const a=N.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[i,r]}function md(t,e=[]){let n=[];function i(s,a){const l=N.createContext(a),c=n.length;n=[...n,a];const d=g=>{const{scope:v,children:x,...S}=g,T=v?.[t]?.[c]||l,k=N.useMemo(()=>S,Object.values(S));return _.jsx(T.Provider,{value:k,children:x})};d.displayName=s+"Provider";function m(g,v){const x=v?.[t]?.[c]||l,S=N.useContext(x);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[d,m]}const r=()=>{const s=n.map(a=>N.createContext(a));return function(l){const c=l?.[t]||s;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return r.scopeName=t,[i,H7(r,...e)]}function H7(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const a=i.reduce((l,{useScope:c,scopeName:d})=>{const g=c(s)[`__scope${d}`];return{...l,...g}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function a0(t){const e=U7(t),n=N.forwardRef((i,r)=>{const{children:s,...a}=i,l=N.Children.toArray(s),c=l.find(G7);if(c){const d=c.props.children,m=l.map(g=>g===c?N.Children.count(d)>1?N.Children.only(null):N.isValidElement(d)?d.props.children:null:g);return _.jsx(e,{...a,ref:r,children:N.isValidElement(d)?N.cloneElement(d,void 0,m):null})}return _.jsx(e,{...a,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function U7(t){const e=N.forwardRef((n,i)=>{const{children:r,...s}=n;if(N.isValidElement(r)){const a=V7(r),l=q7(s,r.props);return r.type!==N.Fragment&&(l.ref=i?zw(i,a):a),N.cloneElement(r,l)}return N.Children.count(r)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var F7=Symbol("radix.slottable");function G7(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===F7}function q7(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...l)=>{const c=s(...l);return r(...l),c}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function V7(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function jw(t){const e=t+"CollectionProvider",[n,i]=md(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=T=>{const{scope:k,children:A}=T,O=Fe.useRef(null),z=Fe.useRef(new Map).current;return _.jsx(r,{scope:k,itemMap:z,collectionRef:O,children:A})};a.displayName=e;const l=t+"CollectionSlot",c=a0(l),d=Fe.forwardRef((T,k)=>{const{scope:A,children:O}=T,z=s(l,A),L=Pi(k,z.collectionRef);return _.jsx(c,{ref:L,children:O})});d.displayName=l;const m=t+"CollectionItemSlot",g="data-radix-collection-item",v=a0(m),x=Fe.forwardRef((T,k)=>{const{scope:A,children:O,...z}=T,L=Fe.useRef(null),I=Pi(k,L),j=s(m,A);return Fe.useEffect(()=>(j.itemMap.set(L,{ref:L,...z}),()=>void j.itemMap.delete(L))),_.jsx(v,{[g]:"",ref:I,children:O})});x.displayName=m;function S(T){const k=s(t+"CollectionConsumer",T);return Fe.useCallback(()=>{const O=k.collectionRef.current;if(!O)return[];const z=Array.from(O.querySelectorAll(`[${g}]`));return Array.from(k.itemMap.values()).sort((j,B)=>z.indexOf(j.ref.current)-z.indexOf(B.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:a,Slot:d,ItemSlot:x},S,i]}var Y7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],sn=Y7.reduce((t,e)=>{const n=a0(`Primitive.${e}`),i=N.forwardRef((r,s)=>{const{asChild:a,...l}=r,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(c,{...l,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function Lw(t,e){t&&eu.flushSync(()=>t.dispatchEvent(e))}function Bs(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>e.current?.(...n),[])}function K7(t,e=globalThis?.document){const n=Bs(t);N.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var X7="DismissableLayer",fC="dismissableLayer.update",Q7="dismissableLayer.pointerDownOutside",W7="dismissableLayer.focusOutside",P4,Zk=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tx=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...c}=t,d=N.useContext(Zk),[m,g]=N.useState(null),v=m?.ownerDocument??globalThis?.document,[,x]=N.useState({}),S=Pi(e,B=>g(B)),T=Array.from(d.layers),[k]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),A=T.indexOf(k),O=m?T.indexOf(m):-1,z=d.layersWithOutsidePointerEventsDisabled.size>0,L=O>=A,I=Z7(B=>{const q=B.target,$=[...d.branches].some(G=>G.contains(q));!L||$||(r?.(B),a?.(B),B.defaultPrevented||l?.())},v),j=$7(B=>{const q=B.target;[...d.branches].some(G=>G.contains(q))||(s?.(B),a?.(B),B.defaultPrevented||l?.())},v);return K7(B=>{O===d.layers.size-1&&(i?.(B),!B.defaultPrevented&&l&&(B.preventDefault(),l()))},v),N.useEffect(()=>{if(m)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(P4=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),I4(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=P4)}},[m,v,n,d]),N.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),I4())},[m,d]),N.useEffect(()=>{const B=()=>x({});return document.addEventListener(fC,B),()=>document.removeEventListener(fC,B)},[]),_.jsx(sn.div,{...c,ref:S,style:{pointerEvents:z?L?"auto":"none":void 0,...t.style},onFocusCapture:nt(t.onFocusCapture,j.onFocusCapture),onBlurCapture:nt(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:nt(t.onPointerDownCapture,I.onPointerDownCapture)})});tx.displayName=X7;var J7="DismissableLayerBranch",$k=N.forwardRef((t,e)=>{const n=N.useContext(Zk),i=N.useRef(null),r=Pi(e,i);return N.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),_.jsx(sn.div,{...t,ref:r})});$k.displayName=J7;function Z7(t,e=globalThis?.document){const n=Bs(t),i=N.useRef(!1),r=N.useRef(()=>{});return N.useEffect(()=>{const s=l=>{if(l.target&&!i.current){let c=function(){e6(Q7,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);i.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function $7(t,e=globalThis?.document){const n=Bs(t),i=N.useRef(!1);return N.useEffect(()=>{const r=s=>{s.target&&!i.current&&e6(W7,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function I4(){const t=new CustomEvent(fC);document.dispatchEvent(t)}function e6(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?Lw(r,s):r.dispatchEvent(s)}var eD=tx,tD=$k,su=globalThis?.document?N.useLayoutEffect:()=>{},nD="Portal",nx=N.forwardRef((t,e)=>{const{container:n,...i}=t,[r,s]=N.useState(!1);su(()=>s(!0),[]);const a=n||r&&globalThis?.document?.body;return a?Jk.createPortal(_.jsx(sn.div,{...i,ref:e}),a):null});nx.displayName=nD;function iD(t,e){return N.useReducer((n,i)=>e[n][i]??n,t)}var cu=t=>{const{present:e,children:n}=t,i=rD(e),r=typeof n=="function"?n({present:i.isPresent}):N.Children.only(n),s=Pi(i.ref,sD(r));return typeof n=="function"||i.isPresent?N.cloneElement(r,{ref:s}):null};cu.displayName="Presence";function rD(t){const[e,n]=N.useState(),i=N.useRef(null),r=N.useRef(t),s=N.useRef("none"),a=t?"mounted":"unmounted",[l,c]=iD(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const d=I1(i.current);s.current=l==="mounted"?d:"none"},[l]),su(()=>{const d=i.current,m=r.current;if(m!==t){const v=s.current,x=I1(d);t?c("MOUNT"):x==="none"||d?.display==="none"?c("UNMOUNT"):c(m&&v!==x?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,c]),su(()=>{if(e){let d;const m=e.ownerDocument.defaultView??window,g=x=>{const T=I1(i.current).includes(CSS.escape(x.animationName));if(x.target===e&&T&&(c("ANIMATION_END"),!r.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",d=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},v=x=>{x.target===e&&(s.current=I1(i.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(d),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(d=>{i.current=d?getComputedStyle(d):null,n(d)},[])}}function I1(t){return t?.animationName||"none"}function sD(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var aD=Qk[" useInsertionEffect ".trim().toString()]||su;function Bw({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,a]=oD({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:r;{const m=N.useRef(t!==void 0);N.useEffect(()=>{const g=m.current;g!==l&&console.warn(`${i} is changing from ${g?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,i])}const d=N.useCallback(m=>{if(l){const g=lD(m)?m(t):m;g!==t&&a.current?.(g)}else s(m)},[l,t,s,a]);return[c,d]}function oD({defaultProp:t,onChange:e}){const[n,i]=N.useState(t),r=N.useRef(n),s=N.useRef(e);return aD(()=>{s.current=e},[e]),N.useEffect(()=>{r.current!==n&&(s.current?.(n),r.current=n)},[n,r]),[n,i,s]}function lD(t){return typeof t=="function"}var uD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),cD="VisuallyHidden",Pw=N.forwardRef((t,e)=>_.jsx(sn.span,{...t,ref:e,style:{...uD,...t.style}}));Pw.displayName=cD;var Iw="ToastProvider",[Hw,fD,dD]=jw("Toast"),[t6]=md("Toast",[dD]),[hD,ix]=t6(Iw),n6=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:a}=t,[l,c]=N.useState(null),[d,m]=N.useState(0),g=N.useRef(!1),v=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Iw}\`. Expected non-empty \`string\`.`),_.jsx(Hw.Provider,{scope:e,children:_.jsx(hD,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>m(x=>x+1),[]),onToastRemove:N.useCallback(()=>m(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:v,children:a})})};n6.displayName=Iw;var i6="ToastViewport",pD=["F8"],dC="toast.viewportPause",hC="toast.viewportResume",r6=N.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=pD,label:r="Notifications ({hotkey})",...s}=t,a=ix(i6,n),l=fD(n),c=N.useRef(null),d=N.useRef(null),m=N.useRef(null),g=N.useRef(null),v=Pi(e,g,a.onViewportChange),x=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=a.toastCount>0;N.useEffect(()=>{const k=A=>{i.length!==0&&i.every(z=>A[z]||A.code===z)&&g.current?.focus()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[i]),N.useEffect(()=>{const k=c.current,A=g.current;if(S&&k&&A){const O=()=>{if(!a.isClosePausedRef.current){const j=new CustomEvent(dC);A.dispatchEvent(j),a.isClosePausedRef.current=!0}},z=()=>{if(a.isClosePausedRef.current){const j=new CustomEvent(hC);A.dispatchEvent(j),a.isClosePausedRef.current=!1}},L=j=>{!k.contains(j.relatedTarget)&&z()},I=()=>{k.contains(document.activeElement)||z()};return k.addEventListener("focusin",O),k.addEventListener("focusout",L),k.addEventListener("pointermove",O),k.addEventListener("pointerleave",I),window.addEventListener("blur",O),window.addEventListener("focus",z),()=>{k.removeEventListener("focusin",O),k.removeEventListener("focusout",L),k.removeEventListener("pointermove",O),k.removeEventListener("pointerleave",I),window.removeEventListener("blur",O),window.removeEventListener("focus",z)}}},[S,a.isClosePausedRef]);const T=N.useCallback(({tabbingDirection:k})=>{const O=l().map(z=>{const L=z.ref.current,I=[L,...MD(L)];return k==="forwards"?I:I.reverse()});return(k==="forwards"?O.reverse():O).flat()},[l]);return N.useEffect(()=>{const k=g.current;if(k){const A=O=>{const z=O.altKey||O.ctrlKey||O.metaKey;if(O.key==="Tab"&&!z){const I=document.activeElement,j=O.shiftKey;if(O.target===k&&j){d.current?.focus();return}const $=T({tabbingDirection:j?"backwards":"forwards"}),G=$.findIndex(X=>X===I);B2($.slice(G+1))?O.preventDefault():j?d.current?.focus():m.current?.focus()}};return k.addEventListener("keydown",A),()=>k.removeEventListener("keydown",A)}},[l,T]),_.jsxs(tD,{ref:c,role:"region","aria-label":r.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&_.jsx(pC,{ref:d,onFocusFromOutsideViewport:()=>{const k=T({tabbingDirection:"forwards"});B2(k)}}),_.jsx(Hw.Slot,{scope:n,children:_.jsx(sn.ol,{tabIndex:-1,...s,ref:v})}),S&&_.jsx(pC,{ref:m,onFocusFromOutsideViewport:()=>{const k=T({tabbingDirection:"backwards"});B2(k)}})]})});r6.displayName=i6;var s6="ToastFocusProxy",pC=N.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=ix(s6,n);return _.jsx(Pw,{tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:a=>{const l=a.relatedTarget;!s.viewport?.contains(l)&&i()}})});pC.displayName=s6;var O0="Toast",mD="toast.swipeStart",gD="toast.swipeMove",yD="toast.swipeCancel",vD="toast.swipeEnd",a6=N.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...a}=t,[l,c]=Bw({prop:i,defaultProp:r??!0,onChange:s,caller:O0});return _.jsx(cu,{present:n||l,children:_.jsx(SD,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:Bs(t.onPause),onResume:Bs(t.onResume),onSwipeStart:nt(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:nt(t.onSwipeMove,d=>{const{x:m,y:g}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:nt(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:nt(t.onSwipeEnd,d=>{const{x:m,y:g}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),c(!1)})})})});a6.displayName=O0;var[bD,xD]=t6(O0,{onClose(){}}),SD=N.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:m,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:x,...S}=t,T=ix(O0,n),[k,A]=N.useState(null),O=Pi(e,Z=>A(Z)),z=N.useRef(null),L=N.useRef(null),I=r||T.duration,j=N.useRef(0),B=N.useRef(I),q=N.useRef(0),{onToastAdd:$,onToastRemove:G}=T,X=Bs(()=>{k?.contains(document.activeElement)&&T.viewport?.focus(),a()}),J=N.useCallback(Z=>{!Z||Z===1/0||(window.clearTimeout(q.current),j.current=new Date().getTime(),q.current=window.setTimeout(X,Z))},[X]);N.useEffect(()=>{const Z=T.viewport;if(Z){const te=()=>{J(B.current),d?.()},V=()=>{const ae=new Date().getTime()-j.current;B.current=B.current-ae,window.clearTimeout(q.current),c?.()};return Z.addEventListener(dC,V),Z.addEventListener(hC,te),()=>{Z.removeEventListener(dC,V),Z.removeEventListener(hC,te)}}},[T.viewport,I,c,d,J]),N.useEffect(()=>{s&&!T.isClosePausedRef.current&&J(I)},[s,I,T.isClosePausedRef,J]),N.useEffect(()=>($(),()=>G()),[$,G]);const ce=N.useMemo(()=>k?h6(k):null,[k]);return T.viewport?_.jsxs(_.Fragment,{children:[ce&&_.jsx(CD,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite",children:ce}),_.jsx(bD,{scope:n,onClose:X,children:eu.createPortal(_.jsx(Hw.ItemSlot,{scope:n,children:_.jsx(eD,{asChild:!0,onEscapeKeyDown:nt(l,()=>{T.isFocusedToastEscapeKeyDownRef.current||X(),T.isFocusedToastEscapeKeyDownRef.current=!1}),children:_.jsx(sn.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":T.swipeDirection,...S,ref:O,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:nt(t.onKeyDown,Z=>{Z.key==="Escape"&&(l?.(Z.nativeEvent),Z.nativeEvent.defaultPrevented||(T.isFocusedToastEscapeKeyDownRef.current=!0,X()))}),onPointerDown:nt(t.onPointerDown,Z=>{Z.button===0&&(z.current={x:Z.clientX,y:Z.clientY})}),onPointerMove:nt(t.onPointerMove,Z=>{if(!z.current)return;const te=Z.clientX-z.current.x,V=Z.clientY-z.current.y,ae=!!L.current,oe=["left","right"].includes(T.swipeDirection),he=["left","up"].includes(T.swipeDirection)?Math.min:Math.max,F=oe?he(0,te):0,Y=oe?0:he(0,V),se=Z.pointerType==="touch"?10:2,U={x:F,y:Y},ke={originalEvent:Z,delta:U};ae?(L.current=U,H1(gD,g,ke,{discrete:!1})):H4(U,T.swipeDirection,se)?(L.current=U,H1(mD,m,ke,{discrete:!1}),Z.target.setPointerCapture(Z.pointerId)):(Math.abs(te)>se||Math.abs(V)>se)&&(z.current=null)}),onPointerUp:nt(t.onPointerUp,Z=>{const te=L.current,V=Z.target;if(V.hasPointerCapture(Z.pointerId)&&V.releasePointerCapture(Z.pointerId),L.current=null,z.current=null,te){const ae=Z.currentTarget,oe={originalEvent:Z,delta:te};H4(te,T.swipeDirection,T.swipeThreshold)?H1(vD,x,oe,{discrete:!0}):H1(yD,v,oe,{discrete:!0}),ae.addEventListener("click",he=>he.preventDefault(),{once:!0})}})})})}),T.viewport)})]}):null}),CD=t=>{const{__scopeToast:e,children:n,...i}=t,r=ix(O0,e),[s,a]=N.useState(!1),[l,c]=N.useState(!1);return _D(()=>a(!0)),N.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:_.jsx(nx,{asChild:!0,children:_.jsx(Pw,{...i,children:s&&_.jsxs(_.Fragment,{children:[r.label," ",n]})})})},wD="ToastTitle",o6=N.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return _.jsx(sn.div,{...i,ref:e})});o6.displayName=wD;var ED="ToastDescription",l6=N.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return _.jsx(sn.div,{...i,ref:e})});l6.displayName=ED;var u6="ToastAction",TD=N.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?_.jsx(d6,{altText:n,asChild:!0,children:_.jsx(f6,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${u6}\`. Expected non-empty \`string\`.`),null)});TD.displayName=u6;var c6="ToastClose",f6=N.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=xD(c6,n);return _.jsx(d6,{asChild:!0,children:_.jsx(sn.button,{type:"button",...i,ref:e,onClick:nt(t.onClick,r.onClose)})})});f6.displayName=c6;var d6=N.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return _.jsx(sn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function h6(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),kD(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const a=i.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...h6(i))}}),e}function H1(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?Lw(r,s):r.dispatchEvent(s)}var H4=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function _D(t=()=>{}){const e=Bs(t);su(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function kD(t){return t.nodeType===t.ELEMENT_NODE}function MD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function B2(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var p6=n6,m6=r6,g6=a6,y6=o6,v6=l6;function b6(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=b6(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function AD(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=b6(t))&&(i&&(i+=" "),i+=e);return i}function Pt(...t){return AD(t)}let Ag=null;const x6="focusdeck_access_token",ND="focusdeck_refresh_token";function rx(){return typeof window<"u"&&typeof document<"u"}function U4(t){rx()&&(document.cookie=`${t}=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Lax`)}function RD(t){if(!rx())return null;const e=document.cookie?document.cookie.split("; "):[];for(const n of e)if(n.startsWith(`${t}=`))return decodeURIComponent(n.substring(t.length+1));return null}async function sx(){if(Ag)return Ag;let t=null;try{t=localStorage.getItem("focusdeck_access_token")}catch{t=null}if(t)return Ag=t,t;const e=RD(x6);if(e){Ag=e;try{localStorage.setItem("focusdeck_access_token",e)}catch(n){console.warn("Unable to persist cookie token to localStorage",n)}return e}throw rx()&&(window.location.pathname.includes("/login")||(window.location.href="/login")),new Error("Not authenticated")}async function Ys(t,e={}){const n=await sx();return fetch(t,{...e,headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json",...e.headers}})}async function OD(){try{await fetch("/v1/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${await sx()}`}})}catch(t){console.warn("Logout request failed",t)}Ag=null;try{localStorage.removeItem("focusdeck_access_token"),localStorage.removeItem("focusdeck_refresh_token"),localStorage.removeItem("focusdeck_user")}catch(t){console.warn("Unable to clear auth localStorage entries",t)}U4(x6),U4(ND),rx()&&(window.location.href="/login")}const DD=p6,Uw=N.forwardRef(({className:t,...e},n)=>_.jsx(m6,{ref:n,className:Pt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:top-auto sm:bottom-0 sm:flex-col md:max-w-[420px]",t),...e}));Uw.displayName=m6.displayName;const Fw=N.forwardRef(({className:t,variant:e="default",...n},i)=>_.jsx(g6,{ref:i,className:Pt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-4 transition-all","data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none","data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{"border-gray-700 bg-surface-100":e==="default","border-green-500/20 bg-green-500/10":e==="success","border-red-500/20 bg-red-500/10":e==="error"},t),...n}));Fw.displayName=g6.displayName;const Gw=N.forwardRef(({className:t,...e},n)=>_.jsx(y6,{ref:n,className:Pt("text-sm font-semibold",t),...e}));Gw.displayName=y6.displayName;const qw=N.forwardRef(({className:t,...e},n)=>_.jsx(v6,{ref:n,className:Pt("text-sm opacity-90",t),...e}));qw.displayName=v6.displayName;const zD=N.createContext(void 0);let jD=0;const LD=({children:t})=>{const[e,n]=N.useState([]),i=N.useCallback(s=>{const a=(jD++).toString();n(l=>[...l,{...s,id:a,duration:s.duration||5e3}])},[]),r=N.useCallback(s=>{n(a=>a.filter(l=>l.id!==s))},[]);return N.useEffect(()=>{const s=e.map(a=>a.duration?setTimeout(()=>{r(a.id)},a.duration):null);return()=>{s.forEach(a=>{a&&clearTimeout(a)})}},[e,r]),_.jsx(zD.Provider,{value:{addToast:i,removeToast:r},children:_.jsxs(DD,{children:[t,e.map(s=>_.jsxs(Fw,{variant:s.variant,children:[_.jsxs("div",{className:"flex-1",children:[_.jsx(Gw,{children:s.title}),s.description&&_.jsx(qw,{children:s.description})]}),_.jsx("button",{onClick:()=>r(s.id),className:"text-white",children:"X"})]},s.id))]})})};class Jf extends Error{constructor(e,n){const i=new.target.prototype;super(`${e}: Status code '${n}'`),this.statusCode=n,this.__proto__=i}}class Vw extends Error{constructor(e="A timeout occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class uo extends Error{constructor(e="An abort occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class BD extends Error{constructor(e,n){const i=new.target.prototype;super(e),this.transport=n,this.errorType="UnsupportedTransportError",this.__proto__=i}}class PD extends Error{constructor(e,n){const i=new.target.prototype;super(e),this.transport=n,this.errorType="DisabledTransportError",this.__proto__=i}}class ID extends Error{constructor(e,n){const i=new.target.prototype;super(e),this.transport=n,this.errorType="FailedToStartTransportError",this.__proto__=i}}class F4 extends Error{constructor(e){const n=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=n}}class HD extends Error{constructor(e,n){const i=new.target.prototype;super(e),this.innerErrors=n,this.__proto__=i}}class S6{constructor(e,n,i){this.statusCode=e,this.statusText=n,this.content=i}}class ax{get(e,n){return this.send({...n,method:"GET",url:e})}post(e,n){return this.send({...n,method:"POST",url:e})}delete(e,n){return this.send({...n,method:"DELETE",url:e})}getCookieString(e){return""}}var be;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(be||(be={}));class o0{constructor(){}log(e,n){}}o0.instance=new o0;const UD="8.0.17";class Ti{static isRequired(e,n){if(e==null)throw new Error(`The '${n}' argument is required.`)}static isNotEmpty(e,n){if(!e||e.match(/^\s*$/))throw new Error(`The '${n}' argument should not be empty.`)}static isIn(e,n,i){if(!(e in n))throw new Error(`Unknown ${i} value: ${e}.`)}}class Xn{static get isBrowser(){return!Xn.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Xn.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Xn.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function l0(t,e){let n="";return rd(t)?(n=`Binary data of length ${t.byteLength}`,e&&(n+=`. Content: '${FD(t)}'`)):typeof t=="string"&&(n=`String data of length ${t.length}`,e&&(n+=`. Content: '${t}'`)),n}function FD(t){const e=new Uint8Array(t);let n="";return e.forEach(i=>{const r=i<16?"0":"";n+=`0x${r}${i.toString(16)} `}),n.substr(0,n.length-1)}function rd(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function C6(t,e,n,i,r,s){const a={},[l,c]=dp();a[l]=c,t.log(be.Trace,`(${e} transport) sending data. ${l0(r,s.logMessageContent)}.`);const d=rd(r)?"arraybuffer":"text",m=await n.post(i,{content:r,headers:{...a,...s.headers},responseType:d,timeout:s.timeout,withCredentials:s.withCredentials});t.log(be.Trace,`(${e} transport) request complete. Response status: ${m.statusCode}.`)}function GD(t){return t===void 0?new Fv(be.Information):t===null?o0.instance:t.log!==void 0?t:new Fv(t)}class qD{constructor(e,n){this._subject=e,this._observer=n}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(n=>{})}}class Fv{constructor(e){this._minLevel=e,this.out=console}log(e,n){if(e>=this._minLevel){const i=`[${new Date().toISOString()}] ${be[e]}: ${n}`;switch(e){case be.Critical:case be.Error:this.out.error(i);break;case be.Warning:this.out.warn(i);break;case be.Information:this.out.info(i);break;default:this.out.log(i);break}}}}function dp(){let t="X-SignalR-User-Agent";return Xn.isNode&&(t="User-Agent"),[t,VD(UD,YD(),XD(),KD())]}function VD(t,e,n,i){let r="Microsoft SignalR/";const s=t.split(".");return r+=`${s[0]}.${s[1]}`,r+=` (${t}; `,e&&e!==""?r+=`${e}; `:r+="Unknown OS; ",r+=`${n}`,i?r+=`; ${i}`:r+="; Unknown Runtime Version",r+=")",r}function YD(){if(Xn.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function KD(){if(Xn.isNode)return process.versions.node}function XD(){return Xn.isNode?"NodeJS":"Browser"}function P2(t){return t.stack?t.stack:t.message?t.message:`${t}`}function QD(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class WD extends ax{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||Xn.isNode){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(n("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=n("node-fetch"):this._fetchType=fetch,this._fetchType=n("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(QD());if(typeof AbortController>"u"){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=n("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new uo;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const n=new this._abortControllerType;let i;e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),i=new uo});let r=null;if(e.timeout){const c=e.timeout;r=setTimeout(()=>{n.abort(),this._logger.log(be.Warning,"Timeout from HTTP request."),i=new Vw},c)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},rd(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let s;try{s=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:n.signal})}catch(c){throw i||(this._logger.log(be.Warning,`Error from HTTP request. ${c}.`),c)}finally{r&&clearTimeout(r),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){const c=await G4(s,"text");throw new Jf(c||s.statusText,s.status)}const l=await G4(s,e.responseType);return new S6(s.status,s.statusText,l)}getCookieString(e){let n="";return Xn.isNode&&this._jar&&this._jar.getCookies(e,(i,r)=>n=r.join("; ")),n}}function G4(t,e){let n;switch(e){case"arraybuffer":n=t.arrayBuffer();break;case"text":n=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:n=t.text();break}return n}class JD extends ax{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new uo):e.method?e.url?new Promise((n,i)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(rd(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const s=e.headers;s&&Object.keys(s).forEach(a=>{r.setRequestHeader(a,s[a])}),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),i(new uo)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?n(new S6(r.status,r.statusText,r.response||r.responseText)):i(new Jf(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(be.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),i(new Jf(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(be.Warning,"Timeout from HTTP request."),i(new Vw)},r.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class ZD extends ax{constructor(e){if(super(),typeof fetch<"u"||Xn.isNode)this._httpClient=new WD(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new JD(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new uo):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class Ws{static write(e){return`${e}${Ws.RecordSeparator}`}static parse(e){if(e[e.length-1]!==Ws.RecordSeparator)throw new Error("Message is incomplete.");const n=e.split(Ws.RecordSeparator);return n.pop(),n}}Ws.RecordSeparatorCode=30;Ws.RecordSeparator=String.fromCharCode(Ws.RecordSeparatorCode);class $D{writeHandshakeRequest(e){return Ws.write(JSON.stringify(e))}parseHandshakeResponse(e){let n,i;if(rd(e)){const l=new Uint8Array(e),c=l.indexOf(Ws.RecordSeparatorCode);if(c===-1)throw new Error("Message is incomplete.");const d=c+1;n=String.fromCharCode.apply(null,Array.prototype.slice.call(l.slice(0,d))),i=l.byteLength>d?l.slice(d).buffer:null}else{const l=e,c=l.indexOf(Ws.RecordSeparator);if(c===-1)throw new Error("Message is incomplete.");const d=c+1;n=l.substring(0,d),i=l.length>d?l.substring(d):null}const r=Ws.parse(n),s=JSON.parse(r[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[i,s]}}var dt;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"})(dt||(dt={}));class ez{constructor(){this.observers=[]}next(e){for(const n of this.observers)n.next(e)}error(e){for(const n of this.observers)n.error&&n.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new qD(this,e)}}class tz{constructor(e,n,i){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=n,this._bufferSize=i}async _send(e){const n=this._protocol.writeMessage(e);let i=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let r=()=>{},s=()=>{};rd(n)?this._bufferedByteCount+=n.byteLength:this._bufferedByteCount+=n.length,this._bufferedByteCount>=this._bufferSize&&(i=new Promise((a,l)=>{r=a,s=l})),this._messages.push(new nz(n,this._totalMessageCount,r,s))}try{this._reconnectInProgress||await this._connection.send(n)}catch{this._disconnected()}await i}_ack(e){let n=-1;for(let i=0;i<this._messages.length;i++){const r=this._messages[i];if(r._id<=e.sequenceId)n=i,rd(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else if(this._bufferedByteCount<this._bufferSize)r._resolver();else break}n!==-1&&(this._messages=this._messages.slice(n+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==dt.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const n=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,n<=this._latestReceivedSequenceId?(n===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=n,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:dt.Sequence,sequenceId:e}));const n=this._messages;for(const i of n)await this._connection.send(i._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const n of this._messages)n._rejector(e)}_isInvocationMessage(e){switch(e.type){case dt.Invocation:case dt.StreamItem:case dt.Completion:case dt.StreamInvocation:case dt.CancelInvocation:return!0;case dt.Close:case dt.Sequence:case dt.Ping:case dt.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:dt.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class nz{constructor(e,n,i,r){this._message=e,this._id=n,this._resolver=i,this._rejector=r}}const iz=30*1e3,rz=15*1e3,sz=1e5;var Pn;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(Pn||(Pn={}));class Yw{static create(e,n,i,r,s,a,l){return new Yw(e,n,i,r,s,a,l)}constructor(e,n,i,r,s,a,l){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(be.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ti.isRequired(e,"connection"),Ti.isRequired(n,"logger"),Ti.isRequired(i,"protocol"),this.serverTimeoutInMilliseconds=s??iz,this.keepAliveIntervalInMilliseconds=a??rz,this._statefulReconnectBufferSize=l??sz,this._logger=n,this._protocol=i,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new $D,this.connection.onreceive=c=>this._processIncomingData(c),this.connection.onclose=c=>this._connectionClosed(c),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Pn.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:dt.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==Pn.Disconnected&&this._connectionState!==Pn.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Pn.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Pn.Connecting,this._logger.log(be.Debug,"Starting HubConnection.");try{await this._startInternal(),Xn.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Pn.Connected,this._connectionStarted=!0,this._logger.log(be.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=Pn.Disconnected,this._logger.log(be.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((n,i)=>{this._handshakeResolver=n,this._handshakeRejecter=i});await this.connection.start(this._protocol.transferFormat);try{let n=this._protocol.version;this.connection.features.reconnect||(n=1);const i={protocol:this._protocol.name,version:n};if(this._logger.log(be.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(i)),this._logger.log(be.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new tz(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(n){throw this._logger.log(be.Debug,`Hub handshake failed with error '${n}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(n),n}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===Pn.Disconnected)return this._logger.log(be.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Pn.Disconnecting)return this._logger.log(be.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const n=this._connectionState;return this._connectionState=Pn.Disconnecting,this._logger.log(be.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(be.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(n===Pn.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new uo("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...n){const[i,r]=this._replaceStreamingParams(n),s=this._createStreamInvocation(e,n,r);let a;const l=new ez;return l.cancelCallback=()=>{const c=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],a.then(()=>this._sendWithProtocol(c))},this._callbacks[s.invocationId]=(c,d)=>{if(d){l.error(d);return}else c&&(c.type===dt.Completion?c.error?l.error(new Error(c.error)):l.complete():l.next(c.item))},a=this._sendWithProtocol(s).catch(c=>{l.error(c),delete this._callbacks[s.invocationId]}),this._launchStreams(i,a),l}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...n){const[i,r]=this._replaceStreamingParams(n),s=this._sendWithProtocol(this._createInvocation(e,n,!0,r));return this._launchStreams(i,s),s}invoke(e,...n){const[i,r]=this._replaceStreamingParams(n),s=this._createInvocation(e,n,!1,r);return new Promise((l,c)=>{this._callbacks[s.invocationId]=(m,g)=>{if(g){c(g);return}else m&&(m.type===dt.Completion?m.error?c(new Error(m.error)):l(m.result):c(new Error(`Unexpected message type: ${m.type}`)))};const d=this._sendWithProtocol(s).catch(m=>{c(m),delete this._callbacks[s.invocationId]});this._launchStreams(i,d)})}on(e,n){!e||!n||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(n)===-1&&this._methods[e].push(n))}off(e,n){if(!e)return;e=e.toLowerCase();const i=this._methods[e];if(i)if(n){const r=i.indexOf(n);r!==-1&&(i.splice(r,1),i.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const n=this._protocol.parseMessages(e,this._logger);for(const i of n)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(i)))switch(i.type){case dt.Invocation:this._invokeClientMethod(i).catch(r=>{this._logger.log(be.Error,`Invoke client method threw error: ${P2(r)}`)});break;case dt.StreamItem:case dt.Completion:{const r=this._callbacks[i.invocationId];if(r){i.type===dt.Completion&&delete this._callbacks[i.invocationId];try{r(i)}catch(s){this._logger.log(be.Error,`Stream callback threw error: ${P2(s)}`)}}break}case dt.Ping:break;case dt.Close:{this._logger.log(be.Information,"Close message received from server.");const r=i.error?new Error("Server returned an error on close: "+i.error):void 0;i.allowReconnect===!0?this.connection.stop(r):this._stopPromise=this._stopInternal(r);break}case dt.Ack:this._messageBuffer&&this._messageBuffer._ack(i);break;case dt.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(i);break;default:this._logger.log(be.Warning,`Invalid message type: ${i.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let n,i;try{[i,n]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(r){const s="Error parsing handshake response: "+r;this._logger.log(be.Error,s);const a=new Error(s);throw this._handshakeRejecter(a),a}if(n.error){const r="Server returned handshake error: "+n.error;this._logger.log(be.Error,r);const s=new Error(r);throw this._handshakeRejecter(s),s}else this._logger.log(be.Debug,"Server handshake complete.");return this._handshakeResolver(),i}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Pn.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const n=e.target.toLowerCase(),i=this._methods[n];if(!i){this._logger.log(be.Warning,`No client method with the name '${n}' found.`),e.invocationId&&(this._logger.log(be.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const r=i.slice(),s=!!e.invocationId;let a,l,c;for(const d of r)try{const m=a;a=await d.apply(this,e.arguments),s&&a&&m&&(this._logger.log(be.Error,`Multiple results provided for '${n}'. Sending error to server.`),c=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),l=void 0}catch(m){l=m,this._logger.log(be.Error,`A callback for the method '${n}' threw error '${m}'.`)}c?await this._sendWithProtocol(c):s?(l?c=this._createCompletionMessage(e.invocationId,`${l}`,null):a!==void 0?c=this._createCompletionMessage(e.invocationId,null,a):(this._logger.log(be.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),c=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(c)):a&&this._logger.log(be.Error,`Result given for '${n}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(be.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new uo("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Pn.Disconnecting?this._completeClose(e):this._connectionState===Pn.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===Pn.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=Pn.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),Xn.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(n=>n.apply(this,[e]))}catch(n){this._logger.log(be.Error,`An onclose callback called with error '${e}' threw error '${n}'.`)}}}async _reconnect(e){const n=Date.now();let i=0,r=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),s=this._getNextRetryDelay(i++,0,r);if(s===null){this._logger.log(be.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=Pn.Reconnecting,e?this._logger.log(be.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(be.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(a=>a.apply(this,[e]))}catch(a){this._logger.log(be.Error,`An onreconnecting callback called with error '${e}' threw error '${a}'.`)}if(this._connectionState!==Pn.Reconnecting){this._logger.log(be.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;s!==null;){if(this._logger.log(be.Information,`Reconnect attempt number ${i} will start in ${s} ms.`),await new Promise(a=>{this._reconnectDelayHandle=setTimeout(a,s)}),this._reconnectDelayHandle=void 0,this._connectionState!==Pn.Reconnecting){this._logger.log(be.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Pn.Connected,this._logger.log(be.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(a=>a.apply(this,[this.connection.connectionId]))}catch(a){this._logger.log(be.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${a}'.`)}return}catch(a){if(this._logger.log(be.Information,`Reconnect attempt failed because of error '${a}'.`),this._connectionState!==Pn.Reconnecting){this._logger.log(be.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===Pn.Disconnecting&&this._completeClose();return}r=a instanceof Error?a:new Error(a.toString()),s=this._getNextRetryDelay(i++,Date.now()-n,r)}}this._logger.log(be.Information,`Reconnect retries have been exhausted after ${Date.now()-n} ms and ${i} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,n,i){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:n,previousRetryCount:e,retryReason:i})}catch(r){return this._logger.log(be.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${n}) threw error '${r}'.`),null}}_cancelCallbacksWithError(e){const n=this._callbacks;this._callbacks={},Object.keys(n).forEach(i=>{const r=n[i];try{r(null,e)}catch(s){this._logger.log(be.Error,`Stream 'error' callback called with '${e}' threw error: ${P2(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,n,i,r){if(i)return r.length!==0?{arguments:n,streamIds:r,target:e,type:dt.Invocation}:{arguments:n,target:e,type:dt.Invocation};{const s=this._invocationId;return this._invocationId++,r.length!==0?{arguments:n,invocationId:s.toString(),streamIds:r,target:e,type:dt.Invocation}:{arguments:n,invocationId:s.toString(),target:e,type:dt.Invocation}}}_launchStreams(e,n){if(e.length!==0){n||(n=Promise.resolve());for(const i in e)e[i].subscribe({complete:()=>{n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(i)))},error:r=>{let s;r instanceof Error?s=r.message:r&&r.toString?s=r.toString():s="Unknown error",n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(i,s)))},next:r=>{n=n.then(()=>this._sendWithProtocol(this._createStreamItemMessage(i,r)))}})}}_replaceStreamingParams(e){const n=[],i=[];for(let r=0;r<e.length;r++){const s=e[r];if(this._isObservable(s)){const a=this._invocationId;this._invocationId++,n[a]=s,i.push(a.toString()),e.splice(r,1)}}return[n,i]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,n,i){const r=this._invocationId;return this._invocationId++,i.length!==0?{arguments:n,invocationId:r.toString(),streamIds:i,target:e,type:dt.StreamInvocation}:{arguments:n,invocationId:r.toString(),target:e,type:dt.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:dt.CancelInvocation}}_createStreamItemMessage(e,n){return{invocationId:e,item:n,type:dt.StreamItem}}_createCompletionMessage(e,n,i){return n?{error:n,invocationId:e,type:dt.Completion}:{invocationId:e,result:i,type:dt.Completion}}_createCloseMessage(){return{type:dt.Close}}}const az=[0,2e3,1e4,3e4,null];class q4{constructor(e){this._retryDelays=e!==void 0?[...e,null]:az}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class Zf{}Zf.Authorization="Authorization";Zf.Cookie="Cookie";class oz extends ax{constructor(e,n){super(),this._innerClient=e,this._accessTokenFactory=n}async send(e){let n=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(n=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const i=await this._innerClient.send(e);return n&&i.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):i}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Zf.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Zf.Authorization]&&delete e.headers[Zf.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var ji;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(ji||(ji={}));var Dr;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(Dr||(Dr={}));let lz=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class V4{get pollAborted(){return this._pollAbort.aborted}constructor(e,n,i){this._httpClient=e,this._logger=n,this._pollAbort=new lz,this._options=i,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,n){if(Ti.isRequired(e,"url"),Ti.isRequired(n,"transferFormat"),Ti.isIn(n,Dr,"transferFormat"),this._url=e,this._logger.log(be.Trace,"(LongPolling transport) Connecting."),n===Dr.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[i,r]=dp(),s={[i]:r,...this._options.headers},a={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials};n===Dr.Binary&&(a.responseType="arraybuffer");const l=`${e}&_=${Date.now()}`;this._logger.log(be.Trace,`(LongPolling transport) polling: ${l}.`);const c=await this._httpClient.get(l,a);c.statusCode!==200?(this._logger.log(be.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new Jf(c.statusText||"",c.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,a)}async _poll(e,n){try{for(;this._running;)try{const i=`${e}&_=${Date.now()}`;this._logger.log(be.Trace,`(LongPolling transport) polling: ${i}.`);const r=await this._httpClient.get(i,n);r.statusCode===204?(this._logger.log(be.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):r.statusCode!==200?(this._logger.log(be.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new Jf(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(be.Trace,`(LongPolling transport) data received. ${l0(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(be.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(i){this._running?i instanceof Vw?this._logger.log(be.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=i,this._running=!1):this._logger.log(be.Trace,`(LongPolling transport) Poll errored after shutdown: ${i.message}`)}}finally{this._logger.log(be.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?C6(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(be.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(be.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[n,i]=dp();e[n]=i;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let s;try{await this._httpClient.delete(this._url,r)}catch(a){s=a}s?s instanceof Jf&&(s.statusCode===404?this._logger.log(be.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(be.Trace,`(LongPolling transport) Error sending a DELETE request: ${s}`)):this._logger.log(be.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(be.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(be.Trace,e),this.onclose(this._closeError)}}}class uz{constructor(e,n,i,r){this._httpClient=e,this._accessToken=n,this._logger=i,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,n){return Ti.isRequired(e,"url"),Ti.isRequired(n,"transferFormat"),Ti.isIn(n,Dr,"transferFormat"),this._logger.log(be.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((i,r)=>{let s=!1;if(n!==Dr.Text){r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let a;if(Xn.isBrowser||Xn.isWebWorker)a=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const l=this._httpClient.getCookieString(e),c={};c.Cookie=l;const[d,m]=dp();c[d]=m,a=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...c,...this._options.headers}})}try{a.onmessage=l=>{if(this.onreceive)try{this._logger.log(be.Trace,`(SSE transport) data received. ${l0(l.data,this._options.logMessageContent)}.`),this.onreceive(l.data)}catch(c){this._close(c);return}},a.onerror=l=>{s?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},a.onopen=()=>{this._logger.log(be.Information,`SSE connected to ${this._url}`),this._eventSource=a,s=!0,i()}}catch(l){r(l);return}})}async send(e){return this._eventSource?C6(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class cz{constructor(e,n,i,r,s,a){this._logger=i,this._accessTokenFactory=n,this._logMessageContent=r,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=a}async connect(e,n){Ti.isRequired(e,"url"),Ti.isRequired(n,"transferFormat"),Ti.isIn(n,Dr,"transferFormat"),this._logger.log(be.Trace,"(WebSockets transport) Connecting.");let i;return this._accessTokenFactory&&(i=await this._accessTokenFactory()),new Promise((r,s)=>{e=e.replace(/^http/,"ws");let a;const l=this._httpClient.getCookieString(e);let c=!1;if(Xn.isNode||Xn.isReactNative){const d={},[m,g]=dp();d[m]=g,i&&(d[Zf.Authorization]=`Bearer ${i}`),l&&(d[Zf.Cookie]=l),a=new this._webSocketConstructor(e,void 0,{headers:{...d,...this._headers}})}else i&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(i)}`);a||(a=new this._webSocketConstructor(e)),n===Dr.Binary&&(a.binaryType="arraybuffer"),a.onopen=d=>{this._logger.log(be.Information,`WebSocket connected to ${e}.`),this._webSocket=a,c=!0,r()},a.onerror=d=>{let m=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?m=d.error:m="There was an error with the transport",this._logger.log(be.Information,`(WebSockets transport) ${m}.`)},a.onmessage=d=>{if(this._logger.log(be.Trace,`(WebSockets transport) data received. ${l0(d.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(d.data)}catch(m){this._close(m);return}},a.onclose=d=>{if(c)this._close(d);else{let m=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?m=d.error:m="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(m))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(be.Trace,`(WebSockets transport) sending data. ${l0(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(be.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const Y4=100;class fz{constructor(e,n={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ti.isRequired(e,"url"),this._logger=GD(n.logger),this.baseUrl=this._resolveUrl(e),n=n||{},n.logMessageContent=n.logMessageContent===void 0?!1:n.logMessageContent,typeof n.withCredentials=="boolean"||n.withCredentials===void 0)n.withCredentials=n.withCredentials===void 0?!0:n.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");n.timeout=n.timeout===void 0?100*1e3:n.timeout;let i=null,r=null;if(Xn.isNode&&typeof require<"u"){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;i=s("ws"),r=s("eventsource")}!Xn.isNode&&typeof WebSocket<"u"&&!n.WebSocket?n.WebSocket=WebSocket:Xn.isNode&&!n.WebSocket&&i&&(n.WebSocket=i),!Xn.isNode&&typeof EventSource<"u"&&!n.EventSource?n.EventSource=EventSource:Xn.isNode&&!n.EventSource&&typeof r<"u"&&(n.EventSource=r),this._httpClient=new oz(n.httpClient||new ZD(this._logger),n.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=n,this.onreceive=null,this.onclose=null}async start(e){if(e=e||Dr.Binary,Ti.isIn(e,Dr,"transferFormat"),this._logger.log(be.Debug,`Starting connection with transfer format '${Dr[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const n="Failed to start the HttpConnection before stop() was called.";return this._logger.log(be.Error,n),await this._stopPromise,Promise.reject(new uo(n))}else if(this._connectionState!=="Connected"){const n="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(be.Error,n),Promise.reject(new uo(n))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Kw(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(be.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(be.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(n=>{this._stopPromiseResolver=n}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(n){this._logger.log(be.Error,`HttpConnection.transport.stop() threw error '${n}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(be.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let n=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===ji.WebSockets)this.transport=this._constructTransport(ji.WebSockets),await this._startTransport(n,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let i=null,r=0;do{if(i=await this._getNegotiationResponse(n),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new uo("The connection was stopped during negotiation.");if(i.error)throw new Error(i.error);if(i.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(i.url&&(n=i.url),i.accessToken){const s=i.accessToken;this._accessTokenFactory=()=>s,this._httpClient._accessToken=s,this._httpClient._accessTokenFactory=void 0}r++}while(i.url&&r<Y4);if(r===Y4&&i.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(n,this._options.transport,i,e)}this.transport instanceof V4&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(be.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(i){return this._logger.log(be.Error,"Failed to start the connection: "+i),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(i)}}async _getNegotiationResponse(e){const n={},[i,r]=dp();n[i]=r;const s=this._resolveNegotiateUrl(e);this._logger.log(be.Debug,`Sending negotiation request: ${s}.`);try{const a=await this._httpClient.post(s,{content:"",headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(a.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${a.statusCode}'`));const l=JSON.parse(a.content);return(!l.negotiateVersion||l.negotiateVersion<1)&&(l.connectionToken=l.connectionId),l.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new F4("Client didn't negotiate Stateful Reconnect but the server did.")):l}catch(a){let l="Failed to complete negotiation with the server: "+a;return a instanceof Jf&&a.statusCode===404&&(l=l+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(be.Error,l),Promise.reject(new F4(l))}}_createConnectUrl(e,n){return n?e+(e.indexOf("?")===-1?"?":"&")+`id=${n}`:e}async _createTransport(e,n,i,r){let s=this._createConnectUrl(e,i.connectionToken);if(this._isITransport(n)){this._logger.log(be.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=n,await this._startTransport(s,r),this.connectionId=i.connectionId;return}const a=[],l=i.availableTransports||[];let c=i;for(const d of l){const m=this._resolveTransportOrError(d,n,r,c?.useStatefulReconnect===!0);if(m instanceof Error)a.push(`${d.transport} failed:`),a.push(m);else if(this._isITransport(m)){if(this.transport=m,!c){try{c=await this._getNegotiationResponse(e)}catch(g){return Promise.reject(g)}s=this._createConnectUrl(e,c.connectionToken)}try{await this._startTransport(s,r),this.connectionId=c.connectionId;return}catch(g){if(this._logger.log(be.Error,`Failed to start the transport '${d.transport}': ${g}`),c=void 0,a.push(new ID(`${d.transport} failed: ${g}`,ji[d.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(be.Debug,v),Promise.reject(new uo(v))}}}}return a.length>0?Promise.reject(new HD(`Unable to connect to the server with any of the available transports. ${a.join(" ")}`,a)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case ji.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new cz(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ji.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new uz(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case ji.LongPolling:return new V4(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,n){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async i=>{let r=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,n),await this.features.resend()}catch{r=!0}else{this._stopConnection(i);return}r&&this._stopConnection(i)}:this.transport.onclose=i=>this._stopConnection(i),this.transport.connect(e,n)}_resolveTransportOrError(e,n,i,r){const s=ji[e.transport];if(s==null)return this._logger.log(be.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(dz(n,s))if(e.transferFormats.map(l=>Dr[l]).indexOf(i)>=0){if(s===ji.WebSockets&&!this._options.WebSocket||s===ji.ServerSentEvents&&!this._options.EventSource)return this._logger.log(be.Debug,`Skipping transport '${ji[s]}' because it is not supported in your environment.'`),new BD(`'${ji[s]}' is not supported in your environment.`,s);this._logger.log(be.Debug,`Selecting transport '${ji[s]}'.`);try{return this.features.reconnect=s===ji.WebSockets?r:void 0,this._constructTransport(s)}catch(l){return l}}else return this._logger.log(be.Debug,`Skipping transport '${ji[s]}' because it does not support the requested transfer format '${Dr[i]}'.`),new Error(`'${ji[s]}' does not support ${Dr[i]}.`);else return this._logger.log(be.Debug,`Skipping transport '${ji[s]}' because it was disabled by the client.`),new PD(`'${ji[s]}' is disabled by the client.`,s)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(be.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(be.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(be.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(be.Error,`Connection disconnected with error '${e}'.`):this._logger.log(be.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(n=>{this._logger.log(be.Error,`TransportSendQueue.stop() threw error '${n}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(n){this._logger.log(be.Error,`HttpConnection.onclose(${e}) threw error '${n}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!Xn.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const n=window.document.createElement("a");return n.href=e,this._logger.log(be.Information,`Normalizing '${e}' to '${n.href}'.`),n.href}_resolveNegotiateUrl(e){const n=new URL(e);n.pathname.endsWith("/")?n.pathname+="negotiate":n.pathname+="/negotiate";const i=new URLSearchParams(n.searchParams);return i.has("negotiateVersion")||i.append("negotiateVersion",this._negotiateVersion.toString()),i.has("useStatefulReconnect")?i.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&i.append("useStatefulReconnect","true"),n.search=i.toString(),n.toString()}}function dz(t,e){return!t||(e&t)!==0}class Kw{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new U1,this._transportResult=new U1,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new U1),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new U1;const e=this._transportResult;this._transportResult=void 0;const n=typeof this._buffer[0]=="string"?this._buffer.join(""):Kw._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(n),e.resolve()}catch(i){e.reject(i)}}}static _concatBuffers(e){const n=e.map(s=>s.byteLength).reduce((s,a)=>s+a),i=new Uint8Array(n);let r=0;for(const s of e)i.set(new Uint8Array(s),r),r+=s.byteLength;return i.buffer}}class U1{constructor(){this.promise=new Promise((e,n)=>[this._resolver,this._rejecter]=[e,n])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const hz="json";class pz{constructor(){this.name=hz,this.version=2,this.transferFormat=Dr.Text}parseMessages(e,n){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];n===null&&(n=o0.instance);const i=Ws.parse(e),r=[];for(const s of i){const a=JSON.parse(s);if(typeof a.type!="number")throw new Error("Invalid payload.");switch(a.type){case dt.Invocation:this._isInvocationMessage(a);break;case dt.StreamItem:this._isStreamItemMessage(a);break;case dt.Completion:this._isCompletionMessage(a);break;case dt.Ping:break;case dt.Close:break;case dt.Ack:this._isAckMessage(a);break;case dt.Sequence:this._isSequenceMessage(a);break;default:n.log(be.Information,"Unknown message type '"+a.type+"' ignored.");continue}r.push(a)}return r}writeMessage(e){return Ws.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,n){if(typeof e!="string"||e==="")throw new Error(n)}}const mz={trace:be.Trace,debug:be.Debug,info:be.Information,information:be.Information,warn:be.Warning,warning:be.Warning,error:be.Error,critical:be.Critical,none:be.None};function gz(t){const e=mz[t.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${t}`)}class w6{configureLogging(e){if(Ti.isRequired(e,"logging"),yz(e))this.logger=e;else if(typeof e=="string"){const n=gz(e);this.logger=new Fv(n)}else this.logger=new Fv(e);return this}withUrl(e,n){return Ti.isRequired(e,"url"),Ti.isNotEmpty(e,"url"),this.url=e,typeof n=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...n}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:n},this}withHubProtocol(e){return Ti.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new q4(e):this.reconnectPolicy=e:this.reconnectPolicy=new q4,this}withServerTimeout(e){return Ti.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return Ti.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const n=new fz(this.url,e);return Yw.create(n,this.logger||o0.instance,this.protocol||new pz,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function yz(t){return t.log!==void 0}const vz=N.createContext(null);function bz({children:t}){const[e,n]=N.useState(null),[i,r]=N.useState([]);N.useEffect(()=>{const a=sx();if(!a)return;const l=new w6().withUrl("/hubs/notifications",{accessTokenFactory:()=>a}).withAutomaticReconnect().configureLogging(be.Information).build();n(l)},[]),N.useEffect(()=>{if(e)return e.start().then(()=>{console.log("SignalR Connected"),e.on("ReceiveNotification",(a,l,c)=>{console.log("Notification received:",a,l);const d=Math.random().toString(36).substring(7);r(m=>[...m,{id:d,title:a,message:l,severity:c||"info"}]),setTimeout(()=>{r(m=>m.filter(g=>g.id!==d))},5e3)})}).catch(a=>console.error("SignalR Connection Error: ",a)),()=>{e.stop()}},[e]);const s=a=>{r(l=>l.filter(c=>c.id!==a))};return _.jsxs(vz.Provider,{value:{connection:e,notifications:i,removeNotification:s},children:[t,_.jsxs(p6,{children:[i.map(a=>_.jsx(Fw,{open:!0,onOpenChange:()=>s(a.id),variant:a.severity==="info"?"default":a.severity,children:_.jsxs("div",{className:"grid gap-1",children:[_.jsx(Gw,{children:a.title}),_.jsx(qw,{children:a.message})]})},a.id)),_.jsx(Uw,{})]})]})}const xz=N.createContext(null);function Sz({children:t}){const[e,n]=N.useState(null),[i,r]=N.useState({});return N.useEffect(()=>{const s=sx();if(!s)return;const a=new w6().withUrl("/hubs/privacydata",{accessTokenFactory:()=>s}).withAutomaticReconnect().configureLogging(be.Information).build();n(a)},[]),N.useEffect(()=>{if(e)return e.start().then(()=>{console.log("PrivacyDataHub Connected"),e.on("ReceivePrivacyData",(s,a)=>{r(l=>({...l,[s]:a}))})}).catch(s=>console.error("PrivacyDataHub Connection Error: ",s)),()=>{e.stop()}},[e]),_.jsx(xz.Provider,{value:{data:i},children:t})}const _c={"win-dashboard":{id:"win-dashboard",title:"Dashboard",icon:"fa-grid-2"},"win-email":{id:"win-email",title:"Email",icon:"fa-envelope"},"win-notes":{id:"win-notes",title:"Notes",icon:"fa-note-sticky"},"win-kanban":{id:"win-kanban",title:"Kanban",icon:"fa-list-check"},"win-whiteboard":{id:"win-whiteboard",title:"Canvas",icon:"fa-pen-nib"},"win-jarvis":{id:"win-jarvis",title:"Jarvis",icon:"fa-robot"},"win-files":{id:"win-files",title:"Files",icon:"fa-folder-open"},"win-flashcards":{id:"win-flashcards",title:"Flashcards",icon:"fa-layer-group"}},E6=N.createContext(void 0),Cz=({children:t})=>{const[e,n]=N.useState(["win-dashboard"]),[i,r]=N.useState([]),[s,a]=N.useState("win-dashboard"),[l,c]=N.useState(!1),[d,m]=N.useState([]),[g,v]=N.useState("work"),[x,S]=N.useState(!1),T=()=>{S(X=>{const J=!X;return J?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),J})},[k,A]=N.useState(null),[O,z]=N.useState(!1),L=X=>{if(i.includes(X)){r(J=>J.filter(ce=>ce!==X)),I(X);return}if(e.includes(X)){I(X);return}if(l&&d.length>0){A(X),z(!0);return}n(J=>[...J,X]),I(X)},I=X=>{i.includes(X)&&r(J=>J.filter(ce=>ce!==X)),a(X),d.length>0&&d.includes(X)&&c(!0)},j=X=>{if(n(J=>J.filter(ce=>ce!==X)),r(J=>J.filter(ce=>ce!==X)),d.length>0&&d.includes(X)){const J=d.find(ce=>ce!==X);if(m([]),c(!1),J)a(J);else if(e.length>1){const ce=e.filter(Z=>Z!==X);ce.length>0?a(ce[ce.length-1]):a(null)}}else{const J=e.filter(ce=>ce!==X);s===X&&J.length>0&&a(J[J.length-1])}},B=X=>{if(i.includes(X)||r(J=>[...J,X]),s===X){const ce=e.filter(Z=>Z!==X&&!i.includes(Z)).filter(Z=>Z!==X);ce.length>0?a(ce[ce.length-1]):a(null)}},q=(X,J)=>{c(!0),m([X,J]),a(X),n(ce=>{const Z=new Set(ce);return Z.add(X),Z.add(J),Array.from(Z)}),r(ce=>ce.filter(Z=>Z!==X&&Z!==J))},$=X=>{if(z(!1),!!k){if(e.includes(k)||n(J=>[...J,k]),r(J=>J.filter(ce=>ce!==k)),X==="over")I(k);else if(X==="left"){const J=d[1];J?q(k,J):console.warn("No right app to snap to")}else if(X==="right"){const J=d[0];J?q(J,k):console.warn("No left app to snap to")}A(null)}},G=X=>{v(X),L("win-files")};return _.jsx(E6.Provider,{value:{openApps:e,minimizedApps:i,activeApp:s,splitMode:l,splitApps:d,currentWorkspace:g,launchApp:L,closeApp:j,minimizeApp:B,focusApp:I,snapPair:q,openWorkspace:G,pendingLaunchId:k,setPendingLaunchId:A,showPlacementModal:O,setShowPlacementModal:z,confirmPlacement:$,isDarkMode:x,toggleDarkMode:T},children:t})},D0=()=>{const t=N.useContext(E6);if(!t)throw new Error("useWindowManager must be used within a WindowManagerProvider");return t},cc=({id:t,children:e,headerChips:n})=>{const{openApps:i,minimizedApps:r,activeApp:s,splitMode:a,splitApps:l,closeApp:c,minimizeApp:d,focusApp:m,snapPair:g}=D0(),[v,x]=N.useState(!1),S=N.useRef(null),T=i.includes(t),k=r.includes(t),A=s===t,O=a&&l[0]===t,z=a&&l[1]===t;let L="window-app flex flex-col bg-paper dark:bg-gray-900 border-2 border-ink shadow-hard rounded-xl overflow-hidden absolute transition-all duration-300 ";if(!T||k)L+=" hidden-app opacity-0 pointer-events-none z-[-1]";else if(O)L+=" split-left z-20 w-[calc(50%-8px)] left-0 top-0 bottom-0 rounded-l-xl rounded-r-none border-r border-border";else if(z)L+=" split-right z-20 w-[calc(50%-8px)] right-0 top-0 bottom-0 rounded-r-xl rounded-l-none border-l border-border";else{const B=a&&(l.length===0||!l.includes(t));L+=" maximized w-full h-full left-0 top-0 ",L+=B?" z-30":" z-10",A&&!B?L+=" z-20":!A&&!B&&(L+=" z-10")}N.useEffect(()=>{function B(q){S.current&&!S.current.contains(q.target)&&x(!1)}return v&&document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[v]);const I=B=>{g(t,B),x(!1)},j=i.filter(B=>l.length===0?B!==t:B!==t&&!l.includes(B)&&!r.includes(B));return _.jsxs("div",{id:t,className:L,onClick:()=>m(t),style:!T||k?{display:"none"}:{},children:[_.jsxs("div",{className:"h-12 border-b-2 border-border bg-subtle flex items-center justify-between px-4 shrink-0 select-none",children:[_.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-ink",children:[_.jsx("i",{className:`fa-solid ${_c[t].icon} ${t==="win-dashboard"?"text-accent-blue":t==="win-notes"?"text-accent-yellow":""}`}),_c[t].title]}),_.jsx("div",{className:"flex-1 flex justify-center gap-2 overflow-hidden px-4",children:n}),_.jsxs("div",{className:"flex gap-2 items-center relative",children:[_.jsx("button",{className:"hover:text-accent-blue px-2",onClick:B=>{B.stopPropagation(),d(t)},title:"Minimize",children:_.jsx("i",{className:"fa-solid fa-minus"})}),_.jsx("button",{className:"hover:text-accent-blue px-2 hidden md:inline",onClick:B=>{B.stopPropagation(),x(!v)},children:_.jsx("i",{className:"fa-solid fa-table-columns"})}),_.jsx("button",{className:"hover:text-accent-red px-2",onClick:B=>{B.stopPropagation(),c(t)},children:_.jsx("i",{className:"fa-solid fa-xmark"})}),v&&_.jsx("div",{ref:S,className:"split-dropdown open absolute top-8 right-0 bg-white border-2 border-ink rounded-lg shadow-hard z-50 w-48",children:_.jsx("div",{className:"p-1",children:j.length===0?_.jsx("div",{className:"text-center text-gray-400 italic p-2 text-xs",children:"No other free apps"}):j.map(B=>_.jsxs("button",{onClick:()=>I(B),className:"w-full text-left flex items-center gap-2 p-2 hover:bg-gray-100 rounded text-xs font-medium text-ink",children:[_.jsx("i",{className:`fa-solid ${_c[B].icon} text-gray-500`})," ",_c[B].title]},B))})})]})]}),_.jsx("div",{className:"flex-1 overflow-hidden relative",children:e})]})},wz=({onToggleStart:t})=>{const{openApps:e,minimizedApps:n,activeApp:i,splitMode:r,splitApps:s,focusApp:a,isDarkMode:l,toggleDarkMode:c}=D0(),d=new Set;return _.jsxs("div",{className:"h-14 bg-subtle dark:bg-gray-900 border-t-2 border-border dark:border-gray-700 flex items-center px-2 md:px-4 gap-2 md:gap-4 z-50 shrink-0 relative shadow-[0_-4px_10px_rgba(0,0,0,0.02)] transition-colors duration-300",children:[_.jsxs("button",{onClick:t,className:"h-10 px-4 bg-ink dark:bg-white text-white dark:text-black rounded-lg font-bold text-sm flex items-center gap-2 shadow-hard hover:bg-gray-800 dark:hover:bg-gray-200 transition-all active:scale-95",children:[_.jsx("i",{className:"fa-solid fa-layer-group"})," ",_.jsx("span",{className:"hidden md:inline",children:"Start"})]}),_.jsx("button",{onClick:c,className:"h-10 w-10 flex items-center justify-center rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors text-ink dark:text-white",title:"Toggle Dark Mode",children:_.jsx("i",{className:`fa-solid ${l?"fa-sun":"fa-moon"}`})}),_.jsx("div",{className:"w-px h-8 bg-gray-300 dark:bg-gray-700 hidden md:block"}),_.jsx("div",{className:"flex-1 flex items-end gap-2 overflow-x-auto h-full pb-1 no-scrollbar",id:"task-dock",children:e.map(m=>{if(d.has(m))return null;if(r&&s.length===2&&s.includes(m)){const x=s[0],S=s[1],T=i===x||i===S;return d.add(x),d.add(S),_.jsxs("div",{onClick:()=>a(x),className:`h-10 px-3 flex items-center gap-2 transition-all cursor-pointer border-t-2 border-transparent rounded-t-lg mr-1 relative group ${T?"bg-white border-ink shadow-sm -translate-y-[2px]":"bg-gray-200/50 text-gray-500 hover:bg-gray-200"}`,children:[_.jsxs("div",{className:"flex items-center text-xs gap-0 bg-gray-100 px-2 py-1 rounded-full border border-gray-200 relative",children:[_.jsx("i",{className:`fa-solid ${_c[x].icon} z-10 relative`}),_.jsx("div",{className:"w-4 h-[1px] bg-gray-400 mx-1"}),_.jsx("i",{className:`fa-solid ${_c[S].icon} z-10 relative`})]}),_.jsx("span",{className:"text-xs font-bold hidden md:inline ml-1 text-ink",children:"Context Group"}),T&&_.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-[2px] bg-accent-blue"})]},`${x}-${S}`)}d.add(m);const g=i===m,v=n.includes(m);return _.jsxs("button",{onClick:()=>a(m),className:`task-tab h-10 px-3 md:px-4 rounded-t-lg flex items-center gap-2 text-sm font-medium transition-all flex-shrink-0 relative
                        ${g?"active text-ink font-bold bg-white border-t-2 border-ink shadow-sm -translate-y-[2px]":v?"opacity-50 hover:opacity-100 bg-gray-100 border-t-2 border-transparent hover:bg-white/50":"text-gray-500 hover:bg-white/50 border-t-2 border-transparent"}`,children:[_.jsx("i",{className:`fa-solid ${_c[m].icon} ${g?"text-accent-blue":""}`}),_.jsx("span",{className:"hidden md:inline",children:_c[m].title}),g&&_.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-[2px] bg-accent-blue"}),v&&_.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-gray-400 rounded-full"})]},m)})})]})},Ez=({isOpen:t,onClose:e})=>{const{launchApp:n,openWorkspace:i}=D0(),r=`fixed bottom-14 left-0 w-full md:bottom-16 md:left-4 md:w-[650px] bg-white border-t-2 md:border-2 border-ink shadow-hard rounded-t-xl md:rounded-lg overflow-hidden flex flex-col z-50 h-[70vh] md:h-[550px] transition-all duration-200 origin-bottom-left ${t?"scale-100 opacity-100 pointer-events-auto translate-y-0":"scale-95 opacity-0 pointer-events-none translate-y-5"}`,s=l=>{n(l),e()},a=l=>{i(l),e()};return _.jsxs("div",{id:"start-menu",className:r,children:[_.jsxs("div",{className:"h-16 border-b border-gray-200 p-4 flex items-center gap-3 shrink-0 bg-white",children:[_.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-400"}),_.jsx("input",{type:"text",placeholder:"Search apps, files...",className:"flex-1 outline-none text-sm font-medium placeholder-gray-400 h-full"}),_.jsx("div",{className:"md:hidden",children:_.jsx("button",{onClick:e,children:_.jsx("i",{className:"fa-solid fa-chevron-down"})})})]}),_.jsxs("div",{className:"flex flex-1 overflow-hidden flex-col md:flex-row",children:[_.jsxs("div",{className:"w-full md:w-48 bg-ink text-gray-300 flex flex-row md:flex-col py-4 px-4 items-center md:items-start shrink-0 md:border-r md:border-gray-800",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-0 md:mb-6",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-accent-purple to-accent-blue flex items-center justify-center text-white font-bold text-lg",children:"JD"}),_.jsx("div",{className:"text-white font-bold text-sm",children:"John Doe"})]}),_.jsxs("div",{className:"flex md:flex-col gap-1 ml-auto md:ml-0 w-full md:w-auto",children:[_.jsxs("button",{onClick:()=>s("win-dashboard"),className:"w-full text-left px-3 py-2 rounded hover:bg-gray-800 text-xs font-medium flex items-center gap-3",children:[_.jsx("i",{className:"fa-solid fa-grid-2 w-4"})," ",_.jsx("span",{className:"hidden md:inline",children:"Dashboard"})]}),_.jsxs("button",{onClick:()=>s("win-jarvis"),className:"w-full text-left px-3 py-2 rounded hover:bg-gray-800 text-xs font-medium flex items-center gap-3",children:[_.jsx("i",{className:"fa-solid fa-robot w-4"})," ",_.jsx("span",{className:"hidden md:inline",children:"Jarvis"})]}),_.jsxs("button",{onClick:()=>s("win-email"),className:"w-full text-left px-3 py-2 rounded hover:bg-gray-800 text-xs font-medium flex items-center gap-3",children:[_.jsx("i",{className:"fa-solid fa-envelope w-4"})," ",_.jsx("span",{className:"hidden md:inline",children:"Email"})]}),_.jsxs("button",{onClick:()=>s("win-whiteboard"),className:"w-full text-left px-3 py-2 rounded hover:bg-gray-800 text-xs font-medium flex items-center gap-3",children:[_.jsx("i",{className:"fa-solid fa-pen-nib w-4"})," ",_.jsx("span",{className:"hidden md:inline",children:"Canvas"})]}),_.jsxs("button",{onClick:()=>s("win-flashcards"),className:"w-full text-left px-3 py-2 rounded hover:bg-gray-800 text-xs font-medium flex items-center gap-3",children:[_.jsx("i",{className:"fa-solid fa-layer-group w-4"})," ",_.jsx("span",{className:"hidden md:inline",children:"Flashcards"})]})]})]}),_.jsxs("div",{className:"flex-1 bg-subtle overflow-y-auto p-2 md:p-4",children:[_.jsx("div",{className:"px-2 py-2 text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Your Workspaces"}),_.jsx("div",{className:"mb-2 bg-white rounded-lg border border-transparent hover:border-gray-200 shadow-sm overflow-hidden transition-all cursor-pointer hover:bg-gray-50",onClick:()=>a("work"),children:_.jsxs("div",{className:"flex items-center px-4 py-3",children:[_.jsx("div",{className:"w-8 h-8 rounded bg-blue-100 flex items-center justify-center text-blue-600 mr-3",children:_.jsx("i",{className:"fa-solid fa-briefcase"})}),_.jsx("div",{className:"flex-1",children:_.jsx("div",{className:"text-sm font-bold text-ink",children:"Work Mode"})})]})}),_.jsx("div",{className:"mb-2 bg-white rounded-lg border border-transparent hover:border-gray-200 shadow-sm overflow-hidden transition-all cursor-pointer hover:bg-gray-50",onClick:()=>a("school"),children:_.jsxs("div",{className:"flex items-center px-4 py-3",children:[_.jsx("div",{className:"w-8 h-8 rounded bg-yellow-100 flex items-center justify-center text-yellow-600 mr-3",children:_.jsx("i",{className:"fa-solid fa-graduation-cap"})}),_.jsx("div",{className:"flex-1",children:_.jsx("div",{className:"text-sm font-bold text-ink",children:"School Mode"})})]})})]})]})]})},Tz=()=>{const{showPlacementModal:t,confirmPlacement:e,setShowPlacementModal:n}=D0();return t?_.jsx("div",{id:"placement-modal",className:"absolute inset-0 z-[60] flex items-center justify-center p-4 backdrop-blur-sm bg-paper/80",children:_.jsxs("div",{className:"bg-white border-2 border-ink rounded-xl shadow-hard p-6 w-full max-w-md",children:[_.jsx("h3",{className:"text-lg font-bold mb-4 text-center text-ink",children:"Where should this open?"}),_.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[_.jsxs("button",{onClick:()=>e("left"),className:"flex flex-col items-center p-3 border rounded hover:bg-gray-50 hover:border-black transition-all",children:[_.jsxs("div",{className:"flex gap-1 w-12 h-8 mb-2 border border-gray-300 rounded p-0.5",children:[_.jsx("div",{className:"w-1/2 h-full bg-blue-500 rounded-sm"}),_.jsx("div",{className:"w-1/2 h-full bg-gray-200 rounded-sm"})]}),_.jsx("span",{className:"text-xs font-bold text-ink",children:"Replace Left"})]}),_.jsxs("button",{onClick:()=>e("right"),className:"flex flex-col items-center p-3 border rounded hover:bg-gray-50 hover:border-black transition-all",children:[_.jsxs("div",{className:"flex gap-1 w-12 h-8 mb-2 border border-gray-300 rounded p-0.5",children:[_.jsx("div",{className:"w-1/2 h-full bg-gray-200 rounded-sm"}),_.jsx("div",{className:"w-1/2 h-full bg-blue-500 rounded-sm"})]}),_.jsx("span",{className:"text-xs font-bold text-ink",children:"Replace Right"})]}),_.jsxs("button",{onClick:()=>e("over"),className:"flex flex-col items-center p-3 border rounded hover:bg-gray-50 hover:border-black transition-all",children:[_.jsx("div",{className:"w-12 h-8 mb-2 border border-gray-300 rounded bg-blue-500 p-0.5 relative",children:_.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-white border border-gray-300 rounded-full flex items-center justify-center text-[8px] text-gray-500",children:"NEW"})}),_.jsx("span",{className:"text-xs font-bold text-ink",children:"Open Over"})]})]}),_.jsx("button",{onClick:()=>n(!1),className:"w-full mt-4 text-xs font-bold text-gray-500 hover:text-black",children:"Cancel"})]})}):null},_z=()=>{const[t,e]=N.useState(1500),[n,i]=N.useState(!1),r=1500;N.useEffect(()=>{let m=null;return n&&t>0?m=setInterval(()=>{e(t-1)},1e3):t===0&&i(!1),()=>clearInterval(m)},[n,t]);const s=m=>{const g=Math.floor(m/60),v=m%60;return`${g.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`},a=(r-t)/r*100,l=60,c=2*Math.PI*l,d=c-a/100*c;return _.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-ink text-white p-4 relative overflow-hidden",children:[_.jsxs("div",{className:"relative flex items-center justify-center",children:[_.jsxs("svg",{className:"w-40 h-40 transform -rotate-90",children:[_.jsx("circle",{cx:"80",cy:"80",r:l,fill:"transparent",stroke:"currentColor",strokeWidth:"6",className:"text-gray-700"}),_.jsx("circle",{cx:"80",cy:"80",r:l,fill:"transparent",stroke:"currentColor",strokeWidth:"6",strokeDasharray:c,strokeDashoffset:d,strokeLinecap:"round",className:"text-white transition-all duration-1000 ease-linear"})]}),_.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:_.jsx("div",{className:"text-3xl font-mono font-bold",children:s(t)})})]}),_.jsxs("div",{className:"flex gap-4 mt-4",children:[_.jsx("button",{onClick:()=>i(!n),className:"w-10 h-10 rounded-full bg-white text-ink flex items-center justify-center hover:bg-gray-200 transition-colors shadow-lg",children:_.jsx("i",{className:`fa-solid ${n?"fa-pause":"fa-play"}`})}),_.jsx("button",{onClick:()=>{i(!1),e(1500)},className:"w-10 h-10 rounded-full bg-white/20 text-white flex items-center justify-center hover:bg-white/30 transition-colors",children:_.jsx("i",{className:"fa-solid fa-rotate-right"})})]}),_.jsx("div",{className:"absolute bottom-2 right-2 text-[10px] opacity-50",children:"3/4 Sessions"})]})},kz=()=>{const[t,e]=N.useState([{id:1,text:"Review PR #102",done:!1},{id:2,text:"Email Client",done:!0},{id:3,text:"Update Docs",done:!1}]);return _.jsxs("div",{className:"flex flex-col h-full bg-surface p-4",children:[_.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-3",children:"My Day"}),_.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:t.map(n=>_.jsxs("div",{className:"flex items-center gap-2 group cursor-pointer",onClick:()=>e(t.map(i=>i.id===n.id?{...i,done:!i.done}:i)),children:[_.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${n.done?"bg-accent-green border-accent-green text-white":"border-gray-300 dark:border-gray-600"}`,children:n.done&&_.jsx("i",{className:"fa-solid fa-check text-[10px]"})}),_.jsx("span",{className:`text-sm ${n.done?"line-through text-gray-400":"text-ink"}`,children:n.text})]},n.id))})]})},Mz=()=>_.jsxs("div",{className:"flex flex-col h-full bg-surface p-4",children:[_.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-3",children:"Schedule"}),_.jsxs("div",{className:"space-y-4 relative",children:[_.jsx("div",{className:"absolute left-[5px] top-2 bottom-2 w-0.5 bg-gray-200 dark:bg-gray-700"}),[{time:"10:00",title:"Team Standup",color:"bg-blue-500"},{time:"13:00",title:"Design Review",color:"bg-purple-500"},{time:"15:30",title:"Focus Time",color:"bg-green-500"}].map((t,e)=>_.jsxs("div",{className:"relative pl-4",children:[_.jsx("div",{className:`absolute left-0 top-1.5 w-3 h-3 rounded-full border-2 border-surface ${t.color}`}),_.jsx("div",{className:"text-xs font-mono text-gray-400",children:t.time}),_.jsx("div",{className:"text-sm font-medium text-ink",children:t.title})]},e))]})]}),Az=()=>_.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-gradient-to-br from-blue-400 to-blue-600 text-white p-4",children:[_.jsx("i",{className:"fa-solid fa-cloud-sun text-4xl mb-2 animate-pulse"}),_.jsx("div",{className:"text-2xl font-bold",children:"72F"}),_.jsx("div",{className:"text-xs opacity-80",children:"Partly Cloudy"}),_.jsx("div",{className:"text-xs font-mono mt-2 opacity-60",children:"10:42 AM"})]}),Nz=()=>{const[t,e]=N.useState(!1);return _.jsxs("div",{className:"flex items-center h-full bg-gradient-to-br from-gray-900 to-black text-white p-0 overflow-hidden relative group",children:[_.jsxs("div",{className:"relative h-full w-24 shrink-0",children:[_.jsx("img",{src:"https://picsum.photos/200",alt:"Album Art",className:"w-full h-full object-cover opacity-80 group-hover:opacity-60 transition-opacity"}),_.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors"})]}),_.jsxs("div",{className:"flex-1 p-4 z-10 flex flex-col justify-center",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[_.jsx("i",{className:"fa-brands fa-spotify text-green-500 text-lg"}),_.jsx("span",{className:"text-xs text-green-500 font-bold uppercase tracking-wide",children:"Now Playing"})]}),_.jsx("div",{className:"font-bold text-lg truncate leading-tight",children:"Lo-Fi Beats to Study To"}),_.jsx("div",{className:"text-xs text-gray-400 truncate mb-3",children:"Lofi Girl  2024 Mix"}),_.jsx("div",{className:"w-full h-1 bg-gray-700 rounded-full mb-3 overflow-hidden",children:_.jsx("div",{className:"h-full bg-white w-1/3 rounded-full"})}),_.jsxs("div",{className:"flex items-center gap-6 text-xl",children:[_.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",children:_.jsx("i",{className:"fa-solid fa-backward-step"})}),_.jsx("button",{onClick:()=>e(!t),className:"w-8 h-8 rounded-full bg-white text-black flex items-center justify-center hover:scale-110 transition-transform",children:_.jsx("i",{className:`fa-solid ${t?"fa-pause":"fa-play"} text-xs`})}),_.jsx("button",{className:"text-gray-400 hover:text-white transition-colors",children:_.jsx("i",{className:"fa-solid fa-forward-step"})})]})]}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent pointer-events-none"})]})},Rz=()=>{const[t,e]=N.useState([{id:1,icon:"fa-glass-water",done:!1},{id:2,icon:"fa-book",done:!0},{id:3,icon:"fa-person-running",done:!1},{id:4,icon:"fa-moon",done:!1}]);return _.jsxs("div",{className:"flex flex-col h-full bg-surface p-4 justify-center",children:[_.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-3",children:"Daily Habits"}),_.jsx("div",{className:"flex justify-between px-2",children:t.map(n=>_.jsx("button",{onClick:()=>e(t.map(i=>i.id===n.id?{...i,done:!i.done}:i)),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ${n.done?"bg-green-500 text-white scale-110 shadow-md":"bg-subtle text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:_.jsx("i",{className:`fa-solid ${n.icon}`})},n.id))})]})},Oz=()=>_.jsxs("div",{className:"flex flex-col h-full bg-yellow-100 dark:bg-yellow-900/20 p-4 relative",children:[_.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[20px] border-r-[20px] border-t-white dark:border-t-gray-900 border-r-transparent shadow-sm"}),_.jsx("textarea",{className:"w-full h-full bg-transparent resize-none outline-none text-sm text-gray-800 dark:text-yellow-100 placeholder-yellow-700/50",placeholder:"Scratchpad..."})]}),Dz=()=>_.jsxs("div",{className:"flex flex-col h-full bg-surface p-4 justify-center space-y-3",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[_.jsx("span",{className:"font-bold text-ink",children:"CS101"}),_.jsx("span",{className:"text-gray-500",children:"45%"})]}),_.jsx("div",{className:"h-1.5 bg-subtle rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-blue-500 w-[45%]"})})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[_.jsx("span",{className:"font-bold text-ink",children:"MATH202"}),_.jsx("span",{className:"text-gray-500",children:"70%"})]}),_.jsx("div",{className:"h-1.5 bg-subtle rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-purple-500 w-[70%]"})})]})]}),zz=()=>_.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-surface p-6 text-center border-l-4 border-accent-yellow",children:[_.jsx("p",{className:"font-serif italic text-ink text-lg mb-2",children:'"The only way to do great work is to love what you do."'}),_.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:" Steve Jobs"})]}),jz=()=>_.jsxs("div",{className:"flex flex-col h-full bg-surface p-4",children:[_.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-3",children:"Recent"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center gap-2 text-sm text-ink hover:text-blue-500 cursor-pointer transition-colors",children:[_.jsx("i",{className:"fa-solid fa-note-sticky text-yellow-500"})," Q4_Strategy"]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm text-ink hover:text-blue-500 cursor-pointer transition-colors",children:[_.jsx("i",{className:"fa-solid fa-layer-group text-blue-500"})," Study Set 4"]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm text-ink hover:text-blue-500 cursor-pointer transition-colors",children:[_.jsx("i",{className:"fa-solid fa-list-check text-teal-500"})," Launch Plan"]})]})]}),I2={"focus-timer":{title:"Focus Timer",defaultW:2,defaultH:1,component:_z},tasks:{title:"Tasks",defaultW:1,defaultH:2,component:kz},calendar:{title:"Calendar",defaultW:1,defaultH:2,component:Mz},weather:{title:"Weather",defaultW:1,defaultH:1,component:Az},spotify:{title:"Spotify",defaultW:2,defaultH:1,component:Nz},habits:{title:"Habits",defaultW:2,defaultH:1,component:Rz},"quick-note":{title:"Quick Note",defaultW:1,defaultH:1,component:Oz},"course-progress":{title:"Course Progress",defaultW:1,defaultH:1,component:Dz},quote:{title:"Quote",defaultW:2,defaultH:1,component:zz},"recent-files":{title:"Recent Files",defaultW:1,defaultH:1,component:jz}},Lz=[{id:"w1",type:"weather",title:"Weather",w:1,h:1},{id:"w2",type:"focus-timer",title:"Focus Timer",w:2,h:1},{id:"w3",type:"tasks",title:"Tasks",w:1,h:2},{id:"w4",type:"calendar",title:"Calendar",w:1,h:2},{id:"w5",type:"spotify",title:"Spotify",w:2,h:1},{id:"w6",type:"habits",title:"Habits",w:2,h:1}],Bz=()=>{const[t,e]=N.useState(Lz),[n,i]=N.useState(!1),r=a=>{const l=I2[a],c={id:Date.now().toString(),type:a,title:l.title,w:l.defaultW,h:l.defaultH};e([...t,c]),i(!1)},s=a=>{e(t.filter(l=>l.id!==a))};return _.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 bg-paper dark:bg-gray-900 h-full relative",children:[_.jsxs("div",{className:"max-w-6xl mx-auto",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{className:"text-3xl font-display font-bold text-ink",children:"Welcome Back."}),_.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-ink text-white rounded-lg text-sm font-bold hover:opacity-80 transition-opacity",children:[_.jsx("i",{className:"fa-solid fa-plus mr-2"})," Add Widget"]})]}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 auto-rows-[180px]",children:t.map(a=>{const l=I2[a.type].component;return _.jsxs("div",{className:"bg-surface border-2 border-ink rounded-xl shadow-hard overflow-hidden relative group transition-all hover:shadow-lg",style:{gridColumn:`span ${a.w}`,gridRow:`span ${a.h}`},children:[_.jsx("div",{className:"absolute top-2 right-2 z-20 opacity-0 group-hover:opacity-100 transition-opacity",children:_.jsx("button",{onClick:()=>s(a.id),className:"w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center shadow-sm hover:bg-red-600",children:_.jsx("i",{className:"fa-solid fa-xmark text-xs"})})}),_.jsx(l,{})]},a.id)})})]}),n&&_.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-8",children:_.jsxs("div",{className:"bg-surface border-2 border-ink rounded-xl shadow-hard w-full max-w-3xl max-h-[80vh] flex flex-col",children:[_.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[_.jsx("h2",{className:"text-xl font-bold text-ink",children:"Add Widget"}),_.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-ink",children:_.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),_.jsx("div",{className:"p-6 overflow-y-auto grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(I2).map(([a,l])=>_.jsxs("button",{onClick:()=>r(a),className:"flex flex-col items-center p-4 border border-border rounded-lg hover:bg-subtle hover:border-accent-blue transition-all group",children:[_.jsx("div",{className:"w-12 h-12 bg-subtle rounded-lg mb-3 flex items-center justify-center group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30",children:_.jsx("i",{className:"fa-solid fa-puzzle-piece text-gray-400 group-hover:text-blue-500 text-xl"})}),_.jsx("span",{className:"font-bold text-sm text-ink",children:l.title}),_.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[l.defaultW,"x",l.defaultH]})]},a))})]})})]})};var _p=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Pz={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Iz=class{#e=Pz;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Vf=new Iz;function Hz(t){setTimeout(t,0)}var sd=typeof window>"u"||"Deno"in globalThis;function ns(){}function Uz(t,e){return typeof t=="function"?t(e):t}function mC(t){return typeof t=="number"&&t>=0&&t!==1/0}function T6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Nc(t,e){return typeof t=="function"?t(e):t}function Ra(t,e){return typeof t=="function"?t(e):t}function K4(t,e){const{type:n="all",exact:i,fetchStatus:r,predicate:s,queryKey:a,stale:l}=t;if(a){if(i){if(e.queryHash!==Xw(a,e.options))return!1}else if(!u0(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||s&&!s(e))}function X4(t,e){const{exact:n,status:i,predicate:r,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(ad(e.options.mutationKey)!==ad(s))return!1}else if(!u0(e.options.mutationKey,s))return!1}return!(i&&e.state.status!==i||r&&!r(e))}function Xw(t,e){return(e?.queryKeyHashFn||ad)(t)}function ad(t){return JSON.stringify(t,(e,n)=>gC(n)?Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{}):n)}function u0(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>u0(t[n],e[n])):!1}var Fz=Object.prototype.hasOwnProperty;function _6(t,e){if(t===e)return t;const n=Q4(t)&&Q4(e);if(!n&&!(gC(t)&&gC(e)))return e;const r=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),a=s.length,l=n?new Array(a):{};let c=0;for(let d=0;d<a;d++){const m=n?d:s[d],g=t[m],v=e[m];if(g===v){l[m]=g,(n?d<r:Fz.call(t,m))&&c++;continue}if(g===null||v===null||typeof g!="object"||typeof v!="object"){l[m]=v;continue}const x=_6(g,v);l[m]=x,x===g&&c++}return r===a&&c===r?t:l}function Gv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Q4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gC(t){if(!W4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!W4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function W4(t){return Object.prototype.toString.call(t)==="[object Object]"}function Gz(t){return new Promise(e=>{Vf.setTimeout(e,t)})}function yC(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?_6(t,e):e}function qz(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function Vz(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var Qw=Symbol();function k6(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Qw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function M6(t,e){return typeof t=="function"?t(...e):!!t}var Yz=class extends _p{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!sd&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ww=new Yz;function vC(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});n.status="pending",n.catch(()=>{});function i(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{i({status:"fulfilled",value:r}),t(r)},n.reject=r=>{i({status:"rejected",reason:r}),e(r)},n}var Kz=Hz;function Xz(){let t=[],e=0,n=l=>{l()},i=l=>{l()},r=Kz;const s=l=>{e?t.push(l):r(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&r(()=>{i(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{i=l},setScheduler:l=>{r=l}}}var Bi=Xz(),Qz=class extends _p{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!sd&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},qv=new Qz;function Wz(t){return Math.min(1e3*2**t,3e4)}function A6(t){return(t??"online")==="online"?qv.isOnline():!0}var bC=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function N6(t){let e=!1,n=0,i;const r=vC(),s=()=>r.status!=="pending",a=T=>{if(!s()){const k=new bC(T);v(k),t.onCancel?.(k)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>Ww.isFocused()&&(t.networkMode==="always"||qv.isOnline())&&t.canRun(),m=()=>A6(t.networkMode)&&t.canRun(),g=T=>{s()||(i?.(),r.resolve(T))},v=T=>{s()||(i?.(),r.reject(T))},x=()=>new Promise(T=>{i=k=>{(s()||d())&&T(k)},t.onPause?.()}).then(()=>{i=void 0,s()||t.onContinue?.()}),S=()=>{if(s())return;let T;const k=n===0?t.initialPromise:void 0;try{T=k??t.fn()}catch(A){T=Promise.reject(A)}Promise.resolve(T).then(g).catch(A=>{if(s())return;const O=t.retry??(sd?0:3),z=t.retryDelay??Wz,L=typeof z=="function"?z(n,A):z,I=O===!0||typeof O=="number"&&n<O||typeof O=="function"&&O(n,A);if(e||!I){v(A);return}n++,t.onFail?.(n,A),Gz(L).then(()=>d()?void 0:x()).then(()=>{e?v(A):S()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(i?.(),r),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?S():x().then(S),r)}}var R6=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mC(this.gcTime)&&(this.#e=Vf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(sd?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Vf.clearTimeout(this.#e),this.#e=void 0)}},Jz=class extends R6{#e;#t;#n;#r;#i;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Z4(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Z4(this.options);e.data!==void 0&&(this.setState(J4(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=yC(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(ns).catch(ns):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Ra(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Nc(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!T6(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,i=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},r=()=>{const l=k6(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(m),m})();return this.#o=!1,this.options.persister?this.options.persister(l,d,this):l(d)},a=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return i(l),l})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta}),this.#i=N6({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:l=>{l instanceof bC&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const l=await this.#i.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof bC){if(l.silent)return this.#i.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...O6(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...J4(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?i:void 0,i;case"error":const r=t.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Bi.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function O6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:A6(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function J4(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Z4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zz=class extends _p{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#o=vC(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#a;#o;#s;#m;#d;#h;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),$4(this.#t,this.options)?this.#f():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xC(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xC(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#S(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ra(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#C(),this.#t.setOptions(this.options),e._defaulted&&!Gv(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&e5(this.#t,n,this.options,e)&&this.#f(),this.updateResult(),i&&(this.#t!==n||Ra(this.options.enabled,this.#t)!==Ra(e.enabled,this.#t)||Nc(this.options.staleTime,this.#t)!==Nc(e.staleTime,this.#t))&&this.#g();const r=this.#y();i&&(this.#t!==n||Ra(this.options.enabled,this.#t)!==Ra(e.enabled,this.#t)||r!==this.#l)&&this.#v(r)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return ej(this,n)&&(this.#r=n,this.#a=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,i)=>(this.trackProp(i),e?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#f({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#f(t){this.#C();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(ns)),e}#g(){this.#x();const t=Nc(this.options.staleTime,this.#t);if(sd||this.#r.isStale||!mC(t))return;const n=T6(this.#r.dataUpdatedAt,t)+1;this.#u=Vf.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#S(),this.#l=t,!(sd||Ra(this.options.enabled,this.#t)===!1||!mC(this.#l)||this.#l===0)&&(this.#c=Vf.setInterval(()=>{(this.options.refetchIntervalInBackground||Ww.isFocused())&&this.#f()},this.#l))}#b(){this.#g(),this.#v(this.#y())}#x(){this.#u&&(Vf.clearTimeout(this.#u),this.#u=void 0)}#S(){this.#c&&(Vf.clearInterval(this.#c),this.#c=void 0)}createResult(t,e){const n=this.#t,i=this.options,r=this.#r,s=this.#i,a=this.#a,c=t!==n?t.state:this.#n,{state:d}=t;let m={...d},g=!1,v;if(e._optimisticResults){const q=this.hasListeners(),$=!q&&$4(t,e),G=q&&e5(t,n,e,i);($||G)&&(m={...m,...O6(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:S,status:T}=m;v=m.data;let k=!1;if(e.placeholderData!==void 0&&v===void 0&&T==="pending"){let q;r?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(q=r.data,k=!0):q=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,q!==void 0&&(T="success",v=yC(r?.data,q,e),g=!0)}if(e.select&&v!==void 0&&!k)if(r&&v===s?.data&&e.select===this.#m)v=this.#d;else try{this.#m=e.select,v=e.select(v),v=yC(r?.data,v,e),this.#d=v,this.#s=null}catch(q){this.#s=q}this.#s&&(x=this.#s,v=this.#d,S=Date.now(),T="error");const A=m.fetchStatus==="fetching",O=T==="pending",z=T==="error",L=O&&A,I=v!==void 0,B={status:T,fetchStatus:m.fetchStatus,isPending:O,isSuccess:T==="success",isError:z,isInitialLoading:L,isLoading:L,data:v,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:S,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>c.dataUpdateCount||m.errorUpdateCount>c.errorUpdateCount,isFetching:A,isRefetching:A&&!O,isLoadingError:z&&!I,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:z&&I,isStale:Jw(t,e),refetch:this.refetch,promise:this.#o,isEnabled:Ra(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const q=X=>{B.status==="error"?X.reject(B.error):B.data!==void 0&&X.resolve(B.data)},$=()=>{const X=this.#o=B.promise=vC();q(X)},G=this.#o;switch(G.status){case"pending":t.queryHash===n.queryHash&&q(G);break;case"fulfilled":(B.status==="error"||B.data!==G.value)&&$();break;case"rejected":(B.status!=="error"||B.error!==G.reason)&&$();break}}return B}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#h=this.#t),Gv(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,r=typeof i=="function"?i():i;if(r==="all"||!r&&!this.#p.size)return!0;const s=new Set(r??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#r).some(a=>{const l=a;return this.#r[l]!==t[l]&&s.has(l)})};this.#w({listeners:n()})}#C(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#w(t){Bi.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function $z(t,e){return Ra(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function $4(t,e){return $z(t,e)||t.state.data!==void 0&&xC(t,e,e.refetchOnMount)}function xC(t,e,n){if(Ra(e.enabled,t)!==!1&&Nc(e.staleTime,t)!=="static"){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&Jw(t,e)}return!1}function e5(t,e,n,i){return(t!==e||Ra(i.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Jw(t,n)}function Jw(t,e){return Ra(e.enabled,t)!==!1&&t.isStaleByTime(Nc(e.staleTime,t))}function ej(t,e){return!Gv(t.getCurrentResult(),e)}function t5(t){return{onFetch:(e,n)=>{const i=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let m=!1;const g=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},v=k6(e.options,e.fetchOptions),x=async(S,T,k)=>{if(m)return Promise.reject();if(T==null&&S.pages.length)return Promise.resolve(S);const O=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:T,direction:k?"backward":"forward",meta:e.options.meta};return g(j),j})(),z=await v(O),{maxPages:L}=e.options,I=k?Vz:qz;return{pages:I(S.pages,z,L),pageParams:I(S.pageParams,T,L)}};if(r&&s.length){const S=r==="backward",T=S?tj:n5,k={pages:s,pageParams:a},A=T(i,k);l=await x(k,A,S)}else{const S=t??s.length;do{const T=c===0?a[0]??i.initialPageParam:n5(i,l);if(c>0&&T==null)break;l=await x(l,T),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function n5(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function tj(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var nj=class extends R6{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||D6(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#i({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=N6({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(s,a)=>{this.#i({type:"failed",failureCount:s,error:a})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",r=!this.#r.canStart();try{if(i)e();else{this.#i({type:"pending",variables:t,isPaused:r}),await this.#n.config.onMutate?.(t,this,n);const a=await this.options.onMutate?.(t,n);a!==this.state.context&&this.#i({type:"pending",context:a,variables:t,isPaused:r})}const s=await this.#r.start();return await this.#n.config.onSuccess?.(s,t,this.state.context,this,n),await this.options.onSuccess?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(s,null,t,this.state.context,n),this.#i({type:"success",data:s}),s}catch(s){try{throw await this.#n.config.onError?.(s,t,this.state.context,this,n),await this.options.onError?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,s,t,this.state.context,n),s}finally{this.#i({type:"error",error:s})}}finally{this.#n.runNext(this)}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Bi.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function D6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ij=class extends _p{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const i=new nj({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(i),i}add(t){this.#e.add(t);const e=F1(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=F1(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=F1(t);if(typeof e=="string"){const i=this.#t.get(e)?.find(r=>r.state.status==="pending");return!i||i===t}else return!0}runNext(t){const e=F1(t);return typeof e=="string"?this.#t.get(e)?.find(i=>i!==t&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Bi.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>X4(e,n))}findAll(t={}){return this.getAll().filter(e=>X4(t,e))}notify(t){Bi.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Bi.batch(()=>Promise.all(t.map(e=>e.continue().catch(ns))))}};function F1(t){return t.options.scope?.id}var rj=class extends _p{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),Gv(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&ad(n.mutationKey)!==ad(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#a()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??D6();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){Bi.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,i=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,n,i,r),this.#r.onSettled?.(e.data,null,n,i,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,i,r),this.#r.onSettled?.(void 0,e.error,n,i,r))}this.listeners.forEach(n=>{n(this.#t)})})}},sj=class extends _p{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const i=e.queryKey,r=e.queryHash??Xw(i,e);let s=this.get(r);return s||(s=new Jz({client:t,queryKey:i,queryHash:r,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Bi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>K4(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>K4(t,n)):e}notify(t){Bi.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Bi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Bi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},aj=class{#e;#t;#n;#r;#i;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new sj,this.#t=t.mutationCache||new ij,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=Ww.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=qv.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Nc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(i.queryHash)?.state.data,a=Uz(e,s);if(a!==void 0)return this.#e.build(this,i).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Bi.batch(()=>this.#e.findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Bi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Bi.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=Bi.batch(()=>this.#e.findAll(t).map(r=>r.cancel(n)));return Promise.all(i).then(ns).catch(ns)}invalidateQueries(t,e={}){return Bi.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=Bi.batch(()=>this.#e.findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let s=r.fetch(void 0,n);return n.throwOnError||(s=s.catch(ns)),r.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(ns)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Nc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ns).catch(ns)}fetchInfiniteQuery(t){return t.behavior=t5(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ns).catch(ns)}ensureInfiniteQueryData(t){return t.behavior=t5(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qv.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(ad(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(i=>{u0(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(ad(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(i=>{u0(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Xw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Qw&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},z6=N.createContext(void 0),gd=t=>{const e=N.useContext(z6);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},oj=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),_.jsx(z6.Provider,{value:t,children:e})),j6=N.createContext(!1),lj=()=>N.useContext(j6);j6.Provider;function uj(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var cj=N.createContext(uj()),fj=()=>N.useContext(cj),dj=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},hj=t=>{N.useEffect(()=>{t.clearReset()},[t])},pj=({result:t,errorResetBoundary:e,throwOnError:n,query:i,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(r&&t.data===void 0||M6(n,[t.error,i])),mj=t=>{if(t.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),i=t.staleTime;t.staleTime=typeof i=="function"?(...r)=>n(i(...r)):n(i),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},gj=(t,e)=>t.isLoading&&t.isFetching&&!e,yj=(t,e)=>t?.suspense&&e.isPending,i5=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function vj(t,e,n){const i=lj(),r=fj(),s=gd(),a=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=i?"isRestoring":"optimistic",mj(a),dj(a,r),hj(r);const l=!s.getQueryCache().get(a.queryHash),[c]=N.useState(()=>new e(s,a)),d=c.getOptimisticResult(a),m=!i&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(g=>{const v=m?c.subscribe(Bi.batchCalls(g)):ns;return c.updateResult(),v},[c,m]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(a)},[a,c]),yj(a,d))throw i5(a,c,r);if(pj({result:d,errorResetBoundary:r,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!sd&&gj(d,i)&&(l?i5(a,c,r):s.getQueryCache().get(a.queryHash)?.promise)?.catch(ns).finally(()=>{c.updateResult()}),a.notifyOnChangeProps?d:c.trackResult(d)}function Zw(t,e){return vj(t,Zz)}function z0(t,e){const n=gd(),[i]=N.useState(()=>new rj(n,t));N.useEffect(()=>{i.setOptions(t)},[i,t]);const r=N.useSyncExternalStore(N.useCallback(a=>i.subscribe(Bi.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),s=N.useCallback((a,l)=>{i.mutate(a,l).catch(ns)},[i]);if(r.error&&M6(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:s,mutateAsync:r.mutate}}const ox={getNotes:async(t,e,n,i)=>{const r=new URLSearchParams;t&&r.append("search",t),e&&r.append("tag",e),n!==void 0&&r.append("pinned",String(n)),i&&r.append("type",i);const s=await Ys(`/api/notes?${r.toString()}`);if(!s.ok)throw new Error("Failed to fetch notes");return s.json()},getNote:async t=>{const e=await Ys(`/api/notes/${t}`);if(!e.ok)throw new Error("Failed to fetch note");return e.json()},createNote:async t=>{const e=await Ys("/api/notes",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to create note");return e.json()},updateNote:async(t,e)=>{if(!(await Ys(`/api/notes/${t}`,{method:"PUT",body:JSON.stringify(e)})).ok)throw new Error("Failed to update note")},deleteNote:async t=>{if(!(await Ys(`/api/notes/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete note")},getStats:async()=>{const t=await Ys("/api/notes/stats");if(!t.ok)throw new Error("Failed to fetch stats");return t.json()}},lx={getTasks:async t=>{const e=new URLSearchParams;t!==void 0&&e.append("completed",String(t));const n=await Ys(`/api/tasks?${e.toString()}`);if(!n.ok)throw new Error("Failed to fetch tasks");return n.json()},createTask:async t=>{const e=await Ys("/api/tasks",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to create task");return e.json()},updateTask:async(t,e)=>{if(!(await Ys(`/api/tasks/${t}`,{method:"PUT",body:JSON.stringify(e)})).ok)throw new Error("Failed to update task")},deleteTask:async t=>{if(!(await Ys(`/api/tasks/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete task")}};function bj(t,e,n){return Zw({queryKey:["notes",{search:t,tag:e,pinned:n}],queryFn:()=>ox.getNotes(t,e,n)})}function xj(t){return Zw({queryKey:["note",t],queryFn:()=>ox.getNote(t),enabled:!!t})}function Sj(){const t=gd();return z0({mutationFn:e=>ox.createNote(e),onSuccess:()=>{t.invalidateQueries({queryKey:["notes"]}),t.invalidateQueries({queryKey:["noteStats"]})}})}function Cj(){const t=gd();return z0({mutationFn:({id:e,note:n})=>ox.updateNote(e,n),onSuccess:(e,{id:n})=>{t.invalidateQueries({queryKey:["notes"]}),t.invalidateQueries({queryKey:["note",n]}),t.invalidateQueries({queryKey:["noteStats"]})}})}var H2={exports:{}},U2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r5;function wj(){if(r5)return U2;r5=1;var t=Tp();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function l(g,v){var x=v(),S=i({inst:{value:x,getSnapshot:v}}),T=S[0].inst,k=S[1];return s(function(){T.value=x,T.getSnapshot=v,c(T)&&k({inst:T})},[g,x,v]),r(function(){return c(T)&&k({inst:T}),g(function(){c(T)&&k({inst:T})})},[g]),a(x),x}function c(g){var v=g.getSnapshot;g=g.value;try{var x=v();return!n(g,x)}catch{return!0}}function d(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return U2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,U2}var s5;function L6(){return s5||(s5=1,H2.exports=wj()),H2.exports}var B6=L6();function gr(t){this.content=t}gr.prototype={constructor:gr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,r=i.find(t),s=i.content.slice();return r==-1?s.push(n||t,e):(s[r+1]=e,n&&(s[r]=n)),new gr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new gr(n)},addToStart:function(t,e){return new gr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new gr(n)},addBefore:function(t,e,n){var i=this.remove(e),r=i.content.slice(),s=i.find(t);return r.splice(s==-1?r.length:s,0,e,n),new gr(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=gr.from(t),t.size?new gr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=gr.from(t),t.size?new gr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=gr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};gr.from=function(t){if(t instanceof gr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new gr(e)};function P6(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let r=t.child(i),s=e.child(i);if(r==s){n+=r.nodeSize;continue}if(!r.sameMarkup(s))return n;if(r.isText&&r.text!=s.text){for(let a=0;r.text[a]==s.text[a];a++)n++;return n}if(r.content.size||s.content.size){let a=P6(r.content,s.content,n+1);if(a!=null)return a}n+=r.nodeSize}}function I6(t,e,n,i){for(let r=t.childCount,s=e.childCount;;){if(r==0||s==0)return r==s?null:{a:n,b:i};let a=t.child(--r),l=e.child(--s),c=a.nodeSize;if(a==l){n-=c,i-=c;continue}if(!a.sameMarkup(l))return{a:n,b:i};if(a.isText&&a.text!=l.text){let d=0,m=Math.min(a.text.length,l.text.length);for(;d<m&&a.text[a.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,i--;return{a:n,b:i}}if(a.content.size||l.content.size){let d=I6(a.content,l.content,n-1,i-1);if(d)return d}n-=c,i-=c}}class Ee{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,n,i,r=0,s){for(let a=0,l=0;l<n;a++){let c=this.content[a],d=l+c.nodeSize;if(d>e&&i(c,r+l,s||null,a)!==!1&&c.content.size){let m=l+1;c.nodesBetween(Math.max(0,e-m),Math.min(c.content.size,n-m),i,r+m)}l=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,i,r){let s="",a=!0;return this.nodesBetween(e,n,(l,c)=>{let d=l.isText?l.text.slice(Math.max(e,c)-c,n-c):l.isLeaf?r?typeof r=="function"?r(l):r:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&i&&(a?a=!1:s+=i),s+=d},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,i=e.firstChild,r=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(i)&&(r[r.length-1]=n.withText(n.text+i.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new Ee(r,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let i=[],r=0;if(n>e)for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;c>e&&((a<e||c>n)&&(l.isText?l=l.cut(Math.max(0,e-a),Math.min(l.text.length,n-a)):l=l.cut(Math.max(0,e-a-1),Math.min(l.content.size,n-a-1))),i.push(l),r+=l.nodeSize),a=c}return new Ee(i,r)}cutByIndex(e,n){return e==n?Ee.empty:e==0&&n==this.content.length?this:new Ee(this.content.slice(e,n))}replaceChild(e,n){let i=this.content[e];if(i==n)return this;let r=this.content.slice(),s=this.size+n.nodeSize-i.nodeSize;return r[e]=n,new Ee(r,s)}addToStart(e){return new Ee([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ee(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,i=0;n<this.content.length;n++){let r=this.content[n];e(r,i,n),i+=r.nodeSize}}findDiffStart(e,n=0){return P6(this,e,n)}findDiffEnd(e,n=this.size,i=e.size){return I6(this,e,n,i)}findIndex(e){if(e==0)return G1(0,e);if(e==this.size)return G1(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let r=this.child(n),s=i+r.nodeSize;if(s>=e)return s==e?G1(n+1,s):G1(n,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ee.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ee(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ee.empty;let n,i=0;for(let r=0;r<e.length;r++){let s=e[r];i+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(n||(n=e.slice(0,r)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ee(n||e,i)}static from(e){if(!e)return Ee.empty;if(e instanceof Ee)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ee([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ee.empty=new Ee([],0);const F2={index:0,offset:0};function G1(t,e){return F2.index=t,F2.offset=e,F2}function Vv(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!Vv(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!Vv(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}let nn=class SC{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,i=!1;for(let r=0;r<e.length;r++){let s=e[r];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,r));else{if(s.type.excludes(this.type))return e;!i&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,r)),n.push(this),i=!0),n&&n.push(s)}}return n||(n=e.slice()),i||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Vv(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[n.type];if(!i)throw new RangeError(`There is no mark type ${n.type} in this schema`);let r=i.create(n.attrs);return i.checkAttrs(r.attrs),r}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(n[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return SC.none;if(e instanceof SC)return[e];let n=e.slice();return n.sort((i,r)=>i.type.rank-r.type.rank),n}};nn.none=[];class Yv extends Error{}class Be{constructor(e,n,i){this.content=e,this.openStart=n,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let i=U6(this.content,e+this.openStart,n);return i&&new Be(i,this.openStart,this.openEnd)}removeBetween(e,n){return new Be(H6(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Be.empty;let i=n.openStart||0,r=n.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Be(Ee.fromJSON(e,n.content),i,r)}static maxOpen(e,n=!0){let i=0,r=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)r++;return new Be(e,i,r)}}Be.empty=new Be(Ee.empty,0,0);function H6(t,e,n){let{index:i,offset:r}=t.findIndex(e),s=t.maybeChild(i),{index:a,offset:l}=t.findIndex(n);if(r==e||s.isText){if(l!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(H6(s.content,e-r-1,n-r-1)))}function U6(t,e,n,i){let{index:r,offset:s}=t.findIndex(e),a=t.maybeChild(r);if(s==e||a.isText)return i&&!i.canReplace(r,r,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=U6(a.content,e-s-1,n,a);return l&&t.replaceChild(r,a.copy(l))}function Ej(t,e,n){if(n.openStart>t.depth)throw new Yv("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Yv("Inconsistent open depths");return F6(t,e,n,0)}function F6(t,e,n,i){let r=t.index(i),s=t.node(i);if(r==e.index(i)&&i<t.depth-n.openStart){let a=F6(t,e,n,i+1);return s.copy(s.content.replaceChild(r,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==i&&e.depth==i){let a=t.parent,l=a.content;return ed(a,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:a,end:l}=Tj(n,t);return ed(s,q6(t,a,l,e,i))}else return ed(s,Kv(t,e,i))}function G6(t,e){if(!e.type.compatibleContent(t.type))throw new Yv("Cannot join "+e.type.name+" onto "+t.type.name)}function CC(t,e,n){let i=t.node(n);return G6(i,e.node(n)),i}function $f(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Hg(t,e,n,i){let r=(e||t).node(n),s=0,a=e?e.index(n):r.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&($f(t.nodeAfter,i),s++));for(let l=s;l<a;l++)$f(r.child(l),i);e&&e.depth==n&&e.textOffset&&$f(e.nodeBefore,i)}function ed(t,e){return t.type.checkContent(e),t.copy(e)}function q6(t,e,n,i,r){let s=t.depth>r&&CC(t,e,r+1),a=i.depth>r&&CC(n,i,r+1),l=[];return Hg(null,t,r,l),s&&a&&e.index(r)==n.index(r)?(G6(s,a),$f(ed(s,q6(t,e,n,i,r+1)),l)):(s&&$f(ed(s,Kv(t,e,r+1)),l),Hg(e,n,r,l),a&&$f(ed(a,Kv(n,i,r+1)),l)),Hg(i,null,r,l),new Ee(l)}function Kv(t,e,n){let i=[];if(Hg(null,t,n,i),t.depth>n){let r=CC(t,e,n+1);$f(ed(r,Kv(t,e,n+1)),i)}return Hg(e,null,n,i),new Ee(i)}function Tj(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)r=e.node(s).copy(Ee.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}class c0{constructor(e,n,i){this.pos=e,this.path=n,this.parentOffset=i,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(n);return i?e.child(n).cut(i):r}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let i=this.path[n*3],r=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)r+=i.child(s).nodeSize;return r}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return nn.none;if(this.textOffset)return e.child(n).marks;let i=e.maybeChild(n-1),r=e.maybeChild(n);if(!i){let l=i;i=r,r=l}let s=i.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!r||!s[a].isInSet(r.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let i=n.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!n||n(this.node(i))))return new Xv(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let i=[],r=0,s=n;for(let a=e;;){let{index:l,offset:c}=a.content.findIndex(s),d=s-c;if(i.push(a,l,r+c),!d||(a=a.child(l),a.isText))break;s=d-1,r+=c+1}return new c0(n,i,s)}static resolveCached(e,n){let i=a5.get(e);if(i)for(let s=0;s<i.elts.length;s++){let a=i.elts[s];if(a.pos==n)return a}else a5.set(e,i=new _j);let r=i.elts[i.i]=c0.resolve(e,n);return i.i=(i.i+1)%kj,r}}class _j{constructor(){this.elts=[],this.i=0}}const kj=12,a5=new WeakMap;class Xv{constructor(e,n,i){this.$from=e,this.$to=n,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Mj=Object.create(null);let Rc=class wC{constructor(e,n,i,r=nn.none){this.type=e,this.attrs=n,this.marks=r,this.content=i||Ee.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,i,r=0){this.content.nodesBetween(e,n,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,i,r){return this.content.textBetween(e,n,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,i){return this.type==e&&Vv(this.attrs,n||e.defaultAttrs||Mj)&&nn.sameSet(this.marks,i||nn.none)}copy(e=null){return e==this.content?this:new wC(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new wC(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,i=!1){if(e==n)return Be.empty;let r=this.resolve(e),s=this.resolve(n),a=i?0:r.sharedDepth(n),l=r.start(a),d=r.node(a).content.cut(r.pos-l,s.pos-l);return new Be(d,r.depth-a,s.depth-a)}replace(e,n,i){return Ej(this.resolve(e),this.resolve(n),i)}nodeAt(e){for(let n=this;;){let{index:i,offset:r}=n.content.findIndex(e);if(n=n.maybeChild(i),!n)return null;if(r==e||n.isText)return n;e-=r+1}}childAfter(e){let{index:n,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(n),index:n,offset:i};let r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}}resolve(e){return c0.resolveCached(this,e)}resolveNoCache(e){return c0.resolve(this,e)}rangeHasMark(e,n,i){let r=!1;return n>e&&this.nodesBetween(e,n,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),V6(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,i=Ee.empty,r=0,s=i.childCount){let a=this.contentMatchAt(e).matchFragment(i,r,s),l=a&&a.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let c=r;c<s;c++)if(!this.type.allowsMarks(i.child(c).marks))return!1;return!0}canReplaceWith(e,n,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(e).matchType(i),a=s&&s.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=nn.none;for(let n=0;n<this.marks.length;n++){let i=this.marks[n];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!nn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let i;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,i)}let r=Ee.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,r,i);return s.type.checkAttrs(s.attrs),s}};Rc.prototype.text=void 0;class Qv extends Rc{constructor(e,n,i,r){if(super(e,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):V6(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Qv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Qv(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function V6(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class od{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let i=new Aj(e,n);if(i.next==null)return od.empty;let r=Y6(i);i.next&&i.err("Unexpected trailing text");let s=Lj(jj(r));return Bj(s,i),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,i=e.childCount){let r=this;for(let s=n;r&&s<i;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let i=0;i<e.next.length;i++)if(this.next[n].type==e.next[i].type)return!0;return!1}fillBefore(e,n=!1,i=0){let r=[this];function s(a,l){let c=a.matchFragment(e,i);if(c&&(!n||c.validEnd))return Ee.from(l.map(d=>d.createAndFill()));for(let d=0;d<a.next.length;d++){let{type:m,next:g}=a.next[d];if(!(m.isText||m.hasRequiredAttrs())&&r.indexOf(g)==-1){r.push(g);let v=s(g,l.concat(m));if(v)return v}}return null}return s(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(e)){let a=[];for(let l=r;l.type;l=l.via)a.push(l.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!r.type||c.validEnd)&&(i.push({match:l.contentMatch,type:l,via:r}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(i){e.push(i);for(let r=0;r<i.next.length;r++)e.indexOf(i.next[r].next)==-1&&n(i.next[r].next)}return n(this),e.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let a=0;a<i.next.length;a++)s+=(a?", ":"")+i.next[a].type.name+"->"+e.indexOf(i.next[a].next);return s}).join(`
`)}}od.empty=new od(!0);class Aj{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Y6(t){let e=[];do e.push(Nj(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Nj(t){let e=[];do e.push(Rj(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Rj(t){let e=zj(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Oj(t,e);else break;return e}function o5(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Oj(t,e){let n=o5(t),i=n;return t.eat(",")&&(t.next!="}"?i=o5(t):i=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function Dj(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let r=[];for(let s in n){let a=n[s];a.isInGroup(e)&&r.push(a)}return r.length==0&&t.err("No node type or group '"+e+"' found"),r}function zj(t){if(t.eat("(")){let e=Y6(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Dj(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function jj(t){let e=[[]];return r(s(t,0),n()),e;function n(){return e.push([])-1}function i(a,l,c){let d={term:c,to:l};return e[a].push(d),d}function r(a,l){a.forEach(c=>c.to=l)}function s(a,l){if(a.type=="choice")return a.exprs.reduce((c,d)=>c.concat(s(d,l)),[]);if(a.type=="seq")for(let c=0;;c++){let d=s(a.exprs[c],l);if(c==a.exprs.length-1)return d;r(d,l=n())}else if(a.type=="star"){let c=n();return i(l,c),r(s(a.expr,c),c),[i(c)]}else if(a.type=="plus"){let c=n();return r(s(a.expr,l),c),r(s(a.expr,c),c),[i(c)]}else{if(a.type=="opt")return[i(l)].concat(s(a.expr,l));if(a.type=="range"){let c=l;for(let d=0;d<a.min;d++){let m=n();r(s(a.expr,c),m),c=m}if(a.max==-1)r(s(a.expr,c),c);else for(let d=a.min;d<a.max;d++){let m=n();i(c,m),r(s(a.expr,c),m),c=m}return[i(c)]}else{if(a.type=="name")return[i(l,void 0,a.value)];throw new Error("Unknown expr type")}}}}function K6(t,e){return e-t}function l5(t,e){let n=[];return i(e),n.sort(K6);function i(r){let s=t[r];if(s.length==1&&!s[0].term)return i(s[0].to);n.push(r);for(let a=0;a<s.length;a++){let{term:l,to:c}=s[a];!l&&n.indexOf(c)==-1&&i(c)}}}function Lj(t){let e=Object.create(null);return n(l5(t,0));function n(i){let r=[];i.forEach(a=>{t[a].forEach(({term:l,to:c})=>{if(!l)return;let d;for(let m=0;m<r.length;m++)r[m][0]==l&&(d=r[m][1]);l5(t,c).forEach(m=>{d||r.push([l,d=[]]),d.indexOf(m)==-1&&d.push(m)})})});let s=e[i.join(",")]=new od(i.indexOf(t.length-1)>-1);for(let a=0;a<r.length;a++){let l=r[a][1].sort(K6);s.next.push({type:r[a][0],next:e[l.join(",")]||n(l)})}return s}}function Bj(t,e){for(let n=0,i=[t];n<i.length;n++){let r=i[n],s=!r.validEnd,a=[];for(let l=0;l<r.next.length;l++){let{type:c,next:d}=r.next[l];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),i.indexOf(d)==-1&&i.push(d)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function X6(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function Q6(t,e){let n=Object.create(null);for(let i in t){let r=e&&e[i];if(r===void 0){let s=t[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}n[i]=r}return n}function W6(t,e,n,i){for(let r in e)if(!(r in t))throw new RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let r in t){let s=t[r];s.validate&&s.validate(e[r])}}function J6(t,e){let n=Object.create(null);if(e)for(let i in e)n[i]=new Ij(t,i,e[i]);return n}let u5=class Z6{constructor(e,n,i){this.name=e,this.schema=n,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=J6(e,i.attrs),this.defaultAttrs=X6(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==od.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Q6(this.attrs,e)}create(e=null,n,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Rc(this,this.computeAttrs(e),Ee.from(n),nn.setFrom(i))}createChecked(e=null,n,i){return n=Ee.from(n),this.checkContent(n),new Rc(this,this.computeAttrs(e),n,nn.setFrom(i))}createAndFill(e=null,n,i){if(e=this.computeAttrs(e),n=Ee.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let r=this.contentMatch.matchFragment(n),s=r&&r.fillBefore(Ee.empty,!0);return s?new Rc(this,e,n.append(s),nn.setFrom(i)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){W6(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?n&&n.push(e[i]):n||(n=e.slice(0,i));return n?n.length?n:nn.none:e}static compile(e,n){let i=Object.create(null);e.forEach((s,a)=>i[s]=new Z6(s,n,a));let r=n.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function Pj(t,e,n){let i=n.split("|");return r=>{let s=r===null?"null":typeof r;if(i.indexOf(s)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${t}, got ${s}`)}}class Ij{constructor(e,n,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?Pj(e,n,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class ux{constructor(e,n,i,r){this.name=e,this.rank=n,this.schema=i,this.spec=r,this.attrs=J6(e,r.attrs),this.excluded=null;let s=X6(this.attrs);this.instance=s?new nn(this,s):null}create(e=null){return!e&&this.instance?this.instance:new nn(this,Q6(this.attrs,e))}static compile(e,n){let i=Object.create(null),r=0;return e.forEach((s,a)=>i[s]=new ux(s,r++,n,a)),i}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){W6(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let $6=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let r in e)n[r]=e[r];n.nodes=gr.from(e.nodes),n.marks=gr.from(e.marks||{}),this.nodes=u5.compile(this.spec.nodes,this),this.marks=ux.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],a=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=i[a]||(i[a]=od.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?c5(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:c5(this,a.split(" "))}this.nodeFromJSON=r=>Rc.fromJSON(this,r),this.markFromJSON=r=>nn.fromJSON(this,r),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,i,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof u5){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,i,r)}text(e,n){let i=this.nodes.text;return new Qv(i,i.defaultAttrs,e,nn.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function c5(t,e){let n=[];for(let i=0;i<e.length;i++){let r=e[i],s=t.marks[r],a=s;if(s)n.push(s);else for(let l in t.marks){let c=t.marks[l];(r=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(r)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}function Hj(t){return t.tag!=null}function Uj(t){return t.style!=null}class Oc{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let i=this.matchedStyles=[];n.forEach(r=>{if(Hj(r))this.tags.push(r);else if(Uj(r)){let s=/[^=]*/.exec(r.style)[0];i.indexOf(s)<0&&i.push(s),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=e.nodes[r.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let i=new d5(this,n,!1);return i.addAll(e,nn.none,n.from,n.to),i.finish()}parseSlice(e,n={}){let i=new d5(this,n,!0);return i.addAll(e,nn.none,n.from,n.to),Be.maxOpen(i.finish())}matchTag(e,n,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(qj(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,n,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let a=this.styles[s],l=a.style;if(!(l.indexOf(e)!=0||a.context&&!i.matchesContext(a.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(a.getAttrs){let c=a.getAttrs(n);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let n=[];function i(r){let s=r.priority==null?50:r.priority,a=0;for(;a<n.length;a++){let l=n[a];if((l.priority==null?50:l.priority)<s)break}n.splice(a,0,r)}for(let r in e.marks){let s=e.marks[r].spec.parseDOM;s&&s.forEach(a=>{i(a=h5(a)),a.mark||a.ignore||a.clearMark||(a.mark=r)})}for(let r in e.nodes){let s=e.nodes[r].spec.parseDOM;s&&s.forEach(a=>{i(a=h5(a)),a.node||a.ignore||a.mark||(a.node=r)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Oc(e,Oc.schemaRules(e)))}}const eM={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Fj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},tM={ol:!0,ul:!0},f0=1,EC=2,Ug=4;function f5(t,e,n){return e!=null?(e?f0:0)|(e==="full"?EC:0):t&&t.whitespace=="pre"?f0|EC:n&~Ug}class q1{constructor(e,n,i,r,s,a){this.type=e,this.attrs=n,this.marks=i,this.solid=r,this.options=a,this.content=[],this.activeMarks=nn.none,this.match=s||(a&Ug?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ee.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(e.type))?(this.match=i,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&f0)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let n=Ee.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ee.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!eM.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class d5{constructor(e,n,i){this.parser=e,this.options=n,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let r=n.topNode,s,a=f5(null,n.preserveWhitespace,0)|(i?Ug:0);r?s=new q1(r.type,r.attrs,nn.none,!0,n.topMatch||r.type.contentMatch,a):i?s=new q1(null,null,nn.none,!0,null,a):s=new q1(e.schema.topNodeType,null,nn.none,!0,null,a),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let i=e.nodeValue,r=this.top,s=r.options&EC?"full":this.localPreserveWS||(r.options&f0)>0,{schema:a}=this.parser;if(s==="full"||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(s)if(s==="full")i=i.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(i)&&this.top.findWrapping(a.linebreakReplacement.create())){let l=i.split(/\r?\n|\r/);for(let c=0;c<l.length;c++)c&&this.insertNode(a.linebreakReplacement.create(),n,!0),l[c]&&this.insertNode(a.text(l[c]),n,!/\S/.test(l[c]));i=""}else i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let l=r.content[r.content.length-1],c=e.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(i=i.slice(1))}i&&this.insertNode(a.text(i),n,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,n,i){let r=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),l;tM.hasOwnProperty(a)&&this.parser.normalizeLists&&Gj(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,i));e:if(c?c.ignore:Fj.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let d,m=this.needsBlock;if(eM.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let g=c&&c.skip?n:this.readStyles(e,n);g&&this.addAll(e,g),d&&this.sync(s),this.needsBlock=m}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,c,d,c.consuming===!1?l:void 0)}this.localPreserveWS=r}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let i=e.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let s=this.parser.matchedStyles[r],a=i.getPropertyValue(s);if(a)for(let l=void 0;;){let c=this.parser.matchStyle(s,a,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(d=>!c.clearMark(d)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return n}addElementByRule(e,n,i,r){let s,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let c=this.enter(a,n.attrs||null,i,n.preserveWhitespace);c&&(s=!0,i=c)}else{let c=this.parser.schema.marks[n.mark];i=i.concat(c.create(n.attrs))}let l=this.top;if(a&&a.isLeaf)this.findInside(e);else if(r)this.addElement(e,i,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,i,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,i),this.findAround(e,c,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,i,r){let s=i||0;for(let a=i?e.childNodes[i]:e.firstChild,l=r==null?null:e.childNodes[r];a!=l;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,n);this.findAtPoint(e,s)}findPlace(e,n,i){let r,s;for(let a=this.open,l=0;a>=0;a--){let c=this.nodes[a],d=c.findWrapping(e);if(d&&(!r||r.length>d.length+l)&&(r=d,s=c,!d.length))break;if(c.solid){if(i)break;l+=2}}if(!r)return null;this.sync(s);for(let a=0;a<r.length;a++)n=this.enterInner(r[a],null,n,!1);return n}insertNode(e,n,i){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let r=this.findPlace(e,n,i);if(r){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=nn.none;for(let l of r.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):p5(l.type,e.type))&&(a=l.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,n,i,r){let s=this.findPlace(e.create(n),i,!1);return s&&(s=this.enterInner(e,n,i,!0,r)),s}enterInner(e,n,i,r=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let l=f5(e,s,a.options);a.options&Ug&&a.content.length==0&&(l|=Ug);let c=nn.none;return i=i.filter(d=>(a.type?a.type.allowsMarkType(d.type):p5(d.type,e))?(c=d.addToSet(c),!1):!0),this.nodes.push(new q1(e,n,c,r,null,l)),this.open++,i}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=f0)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let i=this.nodes[n].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,i){if(e!=n&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&n.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),a=(l,c)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;c>=s;c--)if(a(l-1,c))return!0;return!1}else{let m=c>0||c==0&&r?this.nodes[c].type:i&&c>=s?i.node(c-s).type:null;if(!m||m.name!=d&&!m.isInGroup(d))return!1;c--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let n in this.parser.schema.nodes){let i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}}}function Gj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&tM.hasOwnProperty(i)&&n?(n.appendChild(e),e=n):i=="li"?n=e:i&&(n=null)}}function qj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function h5(t){let e={};for(let n in t)e[n]=t[n];return e}function p5(t,e){let n=e.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(t))continue;let s=[],a=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:d,next:m}=l.edge(c);if(d==e||s.indexOf(m)<0&&a(m))return!0}};if(a(r.contentMatch))return!0}}class yd{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},i){i||(i=G2(n).createDocumentFragment());let r=i,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let l=0,c=0;for(;l<s.length&&c<a.marks.length;){let d=a.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)r=s.pop()[1];for(;c<a.marks.length;){let d=a.marks[c++],m=this.serializeMark(d,a.isInline,n);m&&(s.push([d,r]),r.appendChild(m.dom),r=m.contentDOM||m.dom)}}r.appendChild(this.serializeNodeInner(a,n))}),i}serializeNodeInner(e,n){let{dom:i,contentDOM:r}=_v(G2(n),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,r)}return i}serializeNode(e,n={}){let i=this.serializeNodeInner(e,n);for(let r=e.marks.length-1;r>=0;r--){let s=this.serializeMark(e.marks[r],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(e,n,i={}){let r=this.marks[e.type.name];return r&&_v(G2(i),r(e,n),null,e.attrs)}static renderSpec(e,n,i=null,r){return _v(e,n,i,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new yd(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=m5(e.nodes);return n.text||(n.text=i=>i.text),n}static marksFromSchema(e){return m5(e.marks)}}function m5(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function G2(t){return t.document||window.document}const g5=new WeakMap;function Vj(t){let e=g5.get(t);return e===void 0&&g5.set(t,e=Yj(t)),e}function Yj(t){let e=null;function n(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let r=0;r<i.length;r++)n(i[r]);else for(let r in i)n(i[r])}return n(t),e}function _v(t,e,n,i){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],s;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(s=Vj(i))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=r.indexOf(" ");a>0&&(n=r.slice(0,a),r=r.slice(a+1));let l,c=n?t.createElementNS(n,r):t.createElement(r),d=e[1],m=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){m=2;for(let g in d)if(d[g]!=null){let v=g.indexOf(" ");v>0?c.setAttributeNS(g.slice(0,v),g.slice(v+1),d[g]):g=="style"&&c.style?c.style.cssText=d[g]:c.setAttribute(g,d[g])}}for(let g=m;g<e.length;g++){let v=e[g];if(v===0){if(g<e.length-1||g>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:x,contentDOM:S}=_v(t,v,n,i);if(c.appendChild(x),S){if(l)throw new RangeError("Multiple content holes");l=S}}}return{dom:c,contentDOM:l}}const nM=65535,iM=Math.pow(2,16);function Kj(t,e){return t+e*iM}function y5(t){return t&nM}function Xj(t){return(t-(t&nM))/iM}const rM=1,sM=2,kv=4,aM=8;class TC{constructor(e,n,i){this.pos=e,this.delInfo=n,this.recover=i}get deleted(){return(this.delInfo&aM)>0}get deletedBefore(){return(this.delInfo&(rM|kv))>0}get deletedAfter(){return(this.delInfo&(sM|kv))>0}get deletedAcross(){return(this.delInfo&kv)>0}}class Xs{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Xs.empty)return Xs.empty}recover(e){let n=0,i=y5(e);if(!this.inverted)for(let r=0;r<i;r++)n+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+n+Xj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,i){let r=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;let d=this.ranges[l+s],m=this.ranges[l+a],g=c+d;if(e<=g){let v=d?e==c?-1:e==g?1:n:n,x=c+r+(v<0?0:m);if(i)return x;let S=e==(n<0?c:g)?null:Kj(l/3,e-c),T=e==c?sM:e==g?rM:kv;return(n<0?e!=c:e!=g)&&(T|=aM),new TC(x,T,S)}r+=m-d}return i?e+r:new TC(e+r,0,null)}touches(e,n){let i=0,r=y5(n),s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let d=this.ranges[l+s],m=c+d;if(e<=m&&l==r*3)return!0;i+=this.ranges[l+a]-d}return!1}forEach(e){let n=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let a=this.ranges[r],l=a-(this.inverted?s:0),c=a+(this.inverted?0:s),d=this.ranges[r+n],m=this.ranges[r+i];e(l,l+d,c,c+m),s+=m-d}}invert(){return new Xs(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Xs.empty:new Xs(e<0?[0,-e,0]:[0,0,e])}}Xs.empty=new Xs([]);class d0{constructor(e,n,i=0,r=e?e.length:0){this.mirror=n,this.from=i,this.to=r,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new d0(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,i=this._maps.length;n<e._maps.length;n++){let r=e.getMirror(n);this.appendMap(e._maps[n],r!=null&&r<n?i+r:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,i=this._maps.length+e._maps.length;n>=0;n--){let r=e.getMirror(n);this.appendMap(e._maps[n].invert(),r!=null&&r>n?i-r-1:void 0)}}invert(){let e=new d0;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,i){let r=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],l=a.mapResult(e,n);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(l.recover);continue}}r|=l.delInfo,e=l.pos}return i?e:new TC(e,r,null)}}const q2=Object.create(null);class Lr{getMap(){return Xs.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=q2[n.stepType];if(!i)throw new RangeError(`No step type ${n.stepType} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in q2)throw new RangeError("Duplicate use of step JSON ID "+e);return q2[e]=n,n.prototype.jsonID=e,n}}class _i{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new _i(e,null)}static fail(e){return new _i(null,e)}static fromReplace(e,n,i,r){try{return _i.ok(e.replace(n,i,r))}catch(s){if(s instanceof Yv)return _i.fail(s.message);throw s}}}function $w(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let s=t.child(r);s.content.size&&(s=s.copy($w(s.content,e,s))),s.isInline&&(s=e(s,n,r)),i.push(s)}return Ee.fromArray(i)}class kc extends Lr{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new Be($w(n.content,(a,l)=>!a.isAtom||!l.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),r),n.openStart,n.openEnd);return _i.fromReplace(e,this.from,this.to,s)}invert(){return new co(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new kc(n.pos,i.pos,this.mark)}merge(e){return e instanceof kc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new kc(n.from,n.to,e.markFromJSON(n.mark))}}Lr.jsonID("addMark",kc);class co extends Lr{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=new Be($w(n.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),n.openStart,n.openEnd);return _i.fromReplace(e,this.from,this.to,i)}invert(){return new kc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new co(n.pos,i.pos,this.mark)}merge(e){return e instanceof co&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new co(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new co(n.from,n.to,e.markFromJSON(n.mark))}}Lr.jsonID("removeMark",co);class Mc extends Lr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return _i.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return _i.fromReplace(e,this.pos,this.pos+1,new Be(Ee.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let i=this.mark.addToSet(n.marks);if(i.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(i))return new Mc(this.pos,n.marks[r]);return new Mc(this.pos,this.mark)}}return new ld(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Mc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Mc(n.pos,e.markFromJSON(n.mark))}}Lr.jsonID("addNodeMark",Mc);class ld extends Lr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return _i.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return _i.fromReplace(e,this.pos,this.pos+1,new Be(Ee.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Mc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ld(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ld(n.pos,e.markFromJSON(n.mark))}}Lr.jsonID("removeNodeMark",ld);class Wi extends Lr{constructor(e,n,i,r=!1){super(),this.from=e,this.to=n,this.slice=i,this.structure=r}apply(e){return this.structure&&_C(e,this.from,this.to)?_i.fail("Structure replace would overwrite content"):_i.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Xs([this.from,this.to-this.from,this.slice.size])}invert(e){return new Wi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deletedAcross&&i.deletedAcross?null:new Wi(n.pos,Math.max(n.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Wi)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Be.empty:new Be(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Wi(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Be.empty:new Be(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Wi(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Wi(n.from,n.to,Be.fromJSON(e,n.slice),!!n.structure)}}Lr.jsonID("replace",Wi);class Ji extends Lr{constructor(e,n,i,r,s,a,l=!1){super(),this.from=e,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=a,this.structure=l}apply(e){if(this.structure&&(_C(e,this.from,this.gapFrom)||_C(e,this.gapTo,this.to)))return _i.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return _i.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,n.content);return i?_i.fromReplace(e,this.from,this.to,i):_i.fail("Content does not fit in gap")}getMap(){return new Xs([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ji(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return n.deletedAcross&&i.deletedAcross||r<n.pos||s>i.pos?null:new Ji(n.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ji(n.from,n.to,n.gapFrom,n.gapTo,Be.fromJSON(e,n.slice),n.insert,!!n.structure)}}Lr.jsonID("replaceAround",Ji);function _C(t,e,n){let i=t.resolve(e),r=n-e,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let a=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,r--}}return!1}function Qj(t,e,n,i){let r=[],s=[],a,l;t.doc.nodesBetween(e,n,(c,d,m)=>{if(!c.isInline)return;let g=c.marks;if(!i.isInSet(g)&&m.type.allowsMarkType(i.type)){let v=Math.max(d,e),x=Math.min(d+c.nodeSize,n),S=i.addToSet(g);for(let T=0;T<g.length;T++)g[T].isInSet(S)||(a&&a.to==v&&a.mark.eq(g[T])?a.to=x:r.push(a=new co(v,x,g[T])));l&&l.to==v?l.to=x:s.push(l=new kc(v,x,i))}}),r.forEach(c=>t.step(c)),s.forEach(c=>t.step(c))}function Wj(t,e,n,i){let r=[],s=0;t.doc.nodesBetween(e,n,(a,l)=>{if(!a.isInline)return;s++;let c=null;if(i instanceof ux){let d=a.marks,m;for(;m=i.isInSet(d);)(c||(c=[])).push(m),d=m.removeFromSet(d)}else i?i.isInSet(a.marks)&&(c=[i]):c=a.marks;if(c&&c.length){let d=Math.min(l+a.nodeSize,n);for(let m=0;m<c.length;m++){let g=c[m],v;for(let x=0;x<r.length;x++){let S=r[x];S.step==s-1&&g.eq(r[x].style)&&(v=S)}v?(v.to=d,v.step=s):r.push({style:g,from:Math.max(l,e),to:d,step:s})}}}),r.forEach(a=>t.step(new co(a.from,a.to,a.style)))}function eE(t,e,n,i=n.contentMatch,r=!0){let s=t.doc.nodeAt(e),a=[],l=e+1;for(let c=0;c<s.childCount;c++){let d=s.child(c),m=l+d.nodeSize,g=i.matchType(d.type);if(!g)a.push(new Wi(l,m,Be.empty));else{i=g;for(let v=0;v<d.marks.length;v++)n.allowsMarkType(d.marks[v].type)||t.step(new co(l,m,d.marks[v]));if(r&&d.isText&&n.whitespace!="pre"){let v,x=/\r?\n|\r/g,S;for(;v=x.exec(d.text);)S||(S=new Be(Ee.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),a.push(new Wi(l+v.index,l+v.index+v[0].length,S))}}l=m}if(!i.validEnd){let c=i.fillBefore(Ee.empty,!0);t.replace(l,l,new Be(c,0,0))}for(let c=a.length-1;c>=0;c--)t.step(a[c])}function Jj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function kp(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth,r=0,s=0;;--i){let a=t.$from.node(i),l=t.$from.index(i)+r,c=t.$to.indexAfter(i)-s;if(i<t.depth&&a.canReplace(l,c,n))return i;if(i==0||a.type.spec.isolating||!Jj(a,l,c))break;l&&(r=1),c<a.childCount&&(s=1)}return null}function Zj(t,e,n){let{$from:i,$to:r,depth:s}=e,a=i.before(s+1),l=r.after(s+1),c=a,d=l,m=Ee.empty,g=0;for(let S=s,T=!1;S>n;S--)T||i.index(S)>0?(T=!0,m=Ee.from(i.node(S).copy(m)),g++):c--;let v=Ee.empty,x=0;for(let S=s,T=!1;S>n;S--)T||r.after(S+1)<r.end(S)?(T=!0,v=Ee.from(r.node(S).copy(v)),x++):d++;t.step(new Ji(c,d,a,l,new Be(m.append(v),g,x),m.size-g,!0))}function tE(t,e,n=null,i=t){let r=$j(t,e),s=r&&eL(i,e);return s?r.map(v5).concat({type:e,attrs:n}).concat(s.map(v5)):null}function v5(t){return{type:t,attrs:null}}function $j(t,e){let{parent:n,startIndex:i,endIndex:r}=t,s=n.contentMatchAt(i).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return n.canReplaceWith(i,r,a)?s:null}function eL(t,e){let{parent:n,startIndex:i,endIndex:r}=t,s=n.child(i),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let d=i;c&&d<r;d++)c=c.matchType(n.child(d).type);return!c||!c.validEnd?null:a}function tL(t,e,n){let i=Ee.empty;for(let a=n.length-1;a>=0;a--){if(i.size){let l=n[a].type.contentMatch.matchFragment(i);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=Ee.from(n[a].type.create(n[a].attrs,i))}let r=e.start,s=e.end;t.step(new Ji(r,s,r,s,new Be(i,0,0),n.length,!0))}function nL(t,e,n,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(a,l)=>{let c=typeof r=="function"?r(a):r;if(a.isTextblock&&!a.hasMarkup(i,c)&&iL(t.doc,t.mapping.slice(s).map(l),i)){let d=null;if(i.schema.linebreakReplacement){let x=i.whitespace=="pre",S=!!i.contentMatch.matchType(i.schema.linebreakReplacement);x&&!S?d=!1:!x&&S&&(d=!0)}d===!1&&lM(t,a,l,s),eE(t,t.mapping.slice(s).map(l,1),i,void 0,d===null);let m=t.mapping.slice(s),g=m.map(l,1),v=m.map(l+a.nodeSize,1);return t.step(new Ji(g,v,g+1,v-1,new Be(Ee.from(i.create(c,null,a.marks)),0,0),1,!0)),d===!0&&oM(t,a,l,s),!1}})}function oM(t,e,n,i){e.forEach((r,s)=>{if(r.isText){let a,l=/\r?\n|\r/g;for(;a=l.exec(r.text);){let c=t.mapping.slice(i).map(n+1+s+a.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function lM(t,e,n,i){e.forEach((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let a=t.mapping.slice(i).map(n+1+s);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function iL(t,e,n){let i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}function rL(t,e,n,i,r){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(i,null,r||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ji(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Be(Ee.from(a),0,0),1,!0))}function nu(t,e,n=1,i){let r=t.resolve(e),s=r.depth-n,a=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!a.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let d=r.depth-1,m=n-2;d>s;d--,m--){let g=r.node(d),v=r.index(d);if(g.type.spec.isolating)return!1;let x=g.content.cutByIndex(v,g.childCount),S=i&&i[m+1];S&&(x=x.replaceChild(0,S.type.create(S.attrs)));let T=i&&i[m]||g;if(!g.canReplace(v+1,g.childCount)||!T.type.validContent(x))return!1}let l=r.indexAfter(s),c=i&&i[0];return r.node(s).canReplaceWith(l,l,c?c.type:r.node(s+1).type)}function sL(t,e,n=1,i){let r=t.doc.resolve(e),s=Ee.empty,a=Ee.empty;for(let l=r.depth,c=r.depth-n,d=n-1;l>c;l--,d--){s=Ee.from(r.node(l).copy(s));let m=i&&i[d];a=Ee.from(m?m.type.create(m.attrs,a):r.node(l).copy(a))}t.step(new Wi(e,e,new Be(s.append(a),n,n),!0))}function Uc(t,e){let n=t.resolve(e),i=n.index();return uM(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function aL(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:i}=t.type.schema;for(let r=0;r<e.childCount;r++){let s=e.child(r),a=s.type==i?t.type.schema.nodes.text:s.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function uM(t,e){return!!(t&&e&&!t.isLeaf&&aL(t,e))}function cx(t,e,n=-1){let i=t.resolve(e);for(let r=i.depth;;r--){let s,a,l=i.index(r);if(r==i.depth?(s=i.nodeBefore,a=i.nodeAfter):n>0?(s=i.node(r+1),l++,a=i.node(r).maybeChild(l)):(s=i.node(r).maybeChild(l-1),a=i.node(r+1)),s&&!s.isTextblock&&uM(s,a)&&i.node(r).canReplace(l,l+1))return e;if(r==0)break;e=n<0?i.before(r):i.after(r)}}function oL(t,e,n){let i=null,{linebreakReplacement:r}=t.doc.type.schema,s=t.doc.resolve(e-n),a=s.node().type;if(r&&a.inlineContent){let m=a.whitespace=="pre",g=!!a.contentMatch.matchType(r);m&&!g?i=!1:!m&&g&&(i=!0)}let l=t.steps.length;if(i===!1){let m=t.doc.resolve(e+n);lM(t,m.node(),m.before(),l)}a.inlineContent&&eE(t,e+n-1,a,s.node().contentMatchAt(s.index()),i==null);let c=t.mapping.slice(l),d=c.map(e-n);if(t.step(new Wi(d,c.map(e+n,-1),Be.empty,!0)),i===!0){let m=t.doc.resolve(d);oM(t,m.node(),m.before(),t.steps.length)}return t}function lL(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,n))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,n))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function cM(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let r=n.content;for(let s=0;s<n.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let a=i.depth;a>=0;a--){let l=a==i.depth?0:i.pos<=(i.start(a+1)+i.end(a+1))/2?-1:1,c=i.index(a)+(l>0?1:0),d=i.node(a),m=!1;if(s==1)m=d.canReplace(c,c,r);else{let g=d.contentMatchAt(c).findWrapping(r.firstChild.type);m=g&&d.canReplaceWith(c,c,g[0])}if(m)return l==0?i.pos:l<0?i.before(a+1):i.after(a+1)}return null}function fx(t,e,n=e,i=Be.empty){if(e==n&&!i.size)return null;let r=t.resolve(e),s=t.resolve(n);return fM(r,s,i)?new Wi(e,n,i):new uL(r,s,i).fit()}function fM(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class uL{constructor(e,n,i){this.$from=e,this.$to=n,this.unplaced=i,this.frontier=[],this.placed=Ee.empty;for(let r=0;r<=e.depth;r++){let s=e.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=Ee.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let s=this.placed,a=i.depth,l=r.depth;for(;a&&l&&s.childCount==1;)s=s.firstChild.content,a--,l--;let c=new Be(s,a,l);return e>-1?new Ji(i.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||i.pos!=this.$to.pos?new Wi(i.pos,r.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let s=n.firstChild;if(n.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){e=i;break}n=s.content}for(let n=1;n<=2;n++)for(let i=n==1?e:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=V2(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let a=r.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:d}=this.frontier[l],m,g=null;if(n==1&&(a?d.matchType(a.type)||(g=d.fillBefore(Ee.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:l,parent:s,inject:g};if(n==2&&a&&(m=d.findWrapping(a.type)))return{sliceDepth:i,frontierDepth:l,parent:s,wrap:m};if(s&&d.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=V2(e,n);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new Be(e,n+1,Math.max(i,r.size+n>=e.size-i?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=V2(e,n);if(r.childCount<=1&&n>0){let s=e.size-n<=n+r.size;this.unplaced=new Be(Ng(e,n-1,1),n-1,s?n-1:i)}else this.unplaced=new Be(Ng(e,n,1),n,i)}placeNodes({sliceDepth:e,frontierDepth:n,parent:i,inject:r,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let T=0;T<s.length;T++)this.openFrontierNode(s[T]);let a=this.unplaced,l=i?i.content:a.content,c=a.openStart-e,d=0,m=[],{match:g,type:v}=this.frontier[n];if(r){for(let T=0;T<r.childCount;T++)m.push(r.child(T));g=g.matchFragment(r)}let x=l.size+e-(a.content.size-a.openEnd);for(;d<l.childCount;){let T=l.child(d),k=g.matchType(T.type);if(!k)break;d++,(d>1||c==0||T.content.size)&&(g=k,m.push(dM(T.mark(v.allowedMarks(T.marks)),d==1?c:0,d==l.childCount?x:-1)))}let S=d==l.childCount;S||(x=-1),this.placed=Rg(this.placed,n,Ee.from(m)),this.frontier[n].match=g,S&&x<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let T=0,k=l;T<x;T++){let A=k.lastChild;this.frontier.push({type:A.type,match:A.contentMatchAt(A.childCount)}),k=A.content}this.unplaced=S?e==0?Be.empty:new Be(Ng(a.content,e-1,1),e-1,x<0?a.openEnd:e-1):new Be(Ng(a.content,e,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Y2(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:i,type:r}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=Y2(e,n,r,i,s);if(a){for(let l=n-1;l>=0;l--){let{match:c,type:d}=this.frontier[l],m=Y2(e,l,d,c,!0);if(!m||m.childCount)continue e}return{depth:n,fit:a,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Rg(this.placed,n.depth,n.fit)),e=n.move;for(let i=n.depth+1;i<=e.depth;i++){let r=e.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,s)}return e}openFrontierNode(e,n=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Rg(this.placed,this.depth,Ee.from(e.create(n,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ee.empty,!0);n.childCount&&(this.placed=Rg(this.placed,this.frontier.length,n))}}function Ng(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ng(t.firstChild.content,e-1,n)))}function Rg(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Rg(t.lastChild.content,e-1,n)))}function V2(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function dM(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,dM(i.firstChild,e-1,i.childCount==1?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(Ee.empty,!0)))),t.copy(i)}function Y2(t,e,n,i,r){let s=t.node(e),a=r?t.indexAfter(e):t.index(e);if(a==s.childCount&&!n.compatibleContent(s.type))return null;let l=i.fillBefore(s.content,!0,a);return l&&!cL(n,s.content,a)?l:null}function cL(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}function fL(t){return t.spec.defining||t.spec.definingForContent}function dL(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let r=t.doc.resolve(e),s=t.doc.resolve(n);if(fM(r,s,i))return t.step(new Wi(e,n,i));let a=pM(r,s);a[a.length-1]==0&&a.pop();let l=-(r.depth+1);a.unshift(l);for(let v=r.depth,x=r.pos-1;v>0;v--,x--){let S=r.node(v).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;a.indexOf(v)>-1?l=v:r.before(v)==x&&a.splice(1,0,-v)}let c=a.indexOf(l),d=[],m=i.openStart;for(let v=i.content,x=0;;x++){let S=v.firstChild;if(d.push(S),x==i.openStart)break;v=S.content}for(let v=m-1;v>=0;v--){let x=d[v],S=fL(x.type);if(S&&!x.sameMarkup(r.node(Math.abs(l)-1)))m=v;else if(S||!x.type.isTextblock)break}for(let v=i.openStart;v>=0;v--){let x=(v+m+1)%(i.openStart+1),S=d[x];if(S)for(let T=0;T<a.length;T++){let k=a[(T+c)%a.length],A=!0;k<0&&(A=!1,k=-k);let O=r.node(k-1),z=r.index(k-1);if(O.canReplaceWith(z,z,S.type,S.marks))return t.replace(r.before(k),A?s.after(k):n,new Be(hM(i.content,0,i.openStart,x),x,i.openEnd))}}let g=t.steps.length;for(let v=a.length-1;v>=0&&(t.replace(e,n,i),!(t.steps.length>g));v--){let x=a[v];x<0||(e=r.before(x),n=s.after(x))}}function hM(t,e,n,i,r){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(hM(s.content,e+1,n,i,s)))}if(e>i){let s=r.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(Ee.empty,!0))}return t}function hL(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=lL(t.doc,e,i.type);r!=null&&(e=n=r)}t.replaceRange(e,n,new Be(Ee.from(i),0,0))}function pL(t,e,n){let i=t.doc.resolve(e),r=t.doc.resolve(n),s=pM(i,r);for(let a=0;a<s.length;a++){let l=s[a],c=a==s.length-1;if(c&&l==0||i.node(l).type.contentMatch.validEnd)return t.delete(i.start(l),r.end(l));if(l>0&&(c||i.node(l-1).canReplace(i.index(l-1),r.indexAfter(l-1))))return t.delete(i.before(l),r.after(l))}for(let a=1;a<=i.depth&&a<=r.depth;a++)if(e-i.start(a)==i.depth-a&&n>i.end(a)&&r.end(a)-n!=r.depth-a&&i.start(a-1)==r.start(a-1)&&i.node(a-1).canReplace(i.index(a-1),r.index(a-1)))return t.delete(i.before(a),n);t.delete(e,n)}function pM(t,e){let n=[],i=Math.min(t.depth,e.depth);for(let r=i;r>=0;r--){let s=t.start(r);if(s<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(s==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==s-1)&&n.push(r)}return n}class ap extends Lr{constructor(e,n,i){super(),this.pos=e,this.attr=n,this.value=i}apply(e){let n=e.nodeAt(this.pos);if(!n)return _i.fail("No node at attribute step's position");let i=Object.create(null);for(let s in n.attrs)i[s]=n.attrs[s];i[this.attr]=this.value;let r=n.type.create(i,null,n.marks);return _i.fromReplace(e,this.pos,this.pos+1,new Be(Ee.from(r),0,n.isLeaf?0:1))}getMap(){return Xs.empty}invert(e){return new ap(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ap(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ap(n.pos,n.attr,n.value)}}Lr.jsonID("attr",ap);class h0 extends Lr{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,e.content,e.marks);return _i.ok(i)}getMap(){return Xs.empty}invert(e){return new h0(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new h0(n.attr,n.value)}}Lr.jsonID("docAttr",h0);let hp=class extends Error{};hp=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};hp.prototype=Object.create(Error.prototype);hp.prototype.constructor=hp;hp.prototype.name="TransformError";let mM=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new d0}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new hp(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,i=Be.empty){let r=fx(this.doc,e,n,i);return r&&this.step(r),this}replaceWith(e,n,i){return this.replace(e,n,new Be(Ee.from(i),0,0))}delete(e,n){return this.replace(e,n,Be.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,i){return dL(this,e,n,i),this}replaceRangeWith(e,n,i){return hL(this,e,n,i),this}deleteRange(e,n){return pL(this,e,n),this}lift(e,n){return Zj(this,e,n),this}join(e,n=1){return oL(this,e,n),this}wrap(e,n){return tL(this,e,n),this}setBlockType(e,n=e,i,r=null){return nL(this,e,n,i,r),this}setNodeMarkup(e,n,i=null,r){return rL(this,e,n,i,r),this}setNodeAttribute(e,n,i){return this.step(new ap(e,n,i)),this}setDocAttribute(e,n){return this.step(new h0(e,n)),this}addNodeMark(e,n){return this.step(new Mc(e,n)),this}removeNodeMark(e,n){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(n instanceof nn)n.isInSet(i.marks)&&this.step(new ld(e,n));else{let r=i.marks,s,a=[];for(;s=n.isInSet(r);)a.push(new ld(e,s)),r=s.removeFromSet(r);for(let l=a.length-1;l>=0;l--)this.step(a[l])}return this}split(e,n=1,i){return sL(this,e,n,i),this}addMark(e,n,i){return Qj(this,e,n,i),this}removeMark(e,n,i){return Wj(this,e,n,i),this}clearIncompatible(e,n,i){return eE(this,e,n,i),this}};const K2=Object.create(null);class Ct{constructor(e,n,i){this.$anchor=e,this.$head=n,this.ranges=i||[new mL(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Be.empty){let i=n.content.lastChild,r=null;for(let l=0;l<n.openEnd;l++)r=i,i=i.lastChild;let s=e.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){let{$from:c,$to:d}=a[l],m=e.mapping.slice(s);e.replaceRange(m.map(c.pos),m.map(d.pos),l?Be.empty:n),l==0&&S5(e,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,n){let i=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:a,$to:l}=r[s],c=e.mapping.slice(i),d=c.map(a.pos),m=c.map(l.pos);s?e.deleteRange(d,m):(e.replaceRangeWith(d,m,n),S5(e,i,n.isInline?-1:1))}}static findFrom(e,n,i=!1){let r=e.parent.inlineContent?new st(e):$h(e.node(0),e.parent,e.pos,e.index(),n,i);if(r)return r;for(let s=e.depth-1;s>=0;s--){let a=n<0?$h(e.node(0),e.node(s),e.before(s+1),e.index(s),n,i):$h(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,i);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Js(e.node(0))}static atStart(e){return $h(e,e,0,0,1)||new Js(e)}static atEnd(e){return $h(e,e,e.content.size,e.childCount,-1)||new Js(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=K2[n.type];if(!i)throw new RangeError(`No selection type ${n.type} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in K2)throw new RangeError("Duplicate use of selection JSON ID "+e);return K2[e]=n,n.prototype.jsonID=e,n}getBookmark(){return st.between(this.$anchor,this.$head).getBookmark()}}Ct.prototype.visible=!0;class mL{constructor(e,n){this.$from=e,this.$to=n}}let b5=!1;function x5(t){!b5&&!t.parent.inlineContent&&(b5=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class st extends Ct{constructor(e,n=e){x5(e),x5(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let i=e.resolve(n.map(this.head));if(!i.parent.inlineContent)return Ct.near(i);let r=e.resolve(n.map(this.anchor));return new st(r.parent.inlineContent?r:i,i)}replace(e,n=Be.empty){if(super.replace(e,n),n==Be.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof st&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new dx(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new st(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,i=n){let r=e.resolve(n);return new this(r,i==n?r:e.resolve(i))}static between(e,n,i){let r=e.pos-n.pos;if((!i||r)&&(i=r>=0?1:-1),!n.parent.inlineContent){let s=Ct.findFrom(n,i,!0)||Ct.findFrom(n,-i,!0);if(s)n=s.$head;else return Ct.near(n,i)}return e.parent.inlineContent||(r==0?e=n:(e=(Ct.findFrom(e,-i,!0)||Ct.findFrom(e,i,!0)).$anchor,e.pos<n.pos!=r<0&&(e=n))),new st(e,n)}}Ct.jsonID("text",st);class dx{constructor(e,n){this.anchor=e,this.head=n}map(e){return new dx(e.map(this.anchor),e.map(this.head))}resolve(e){return st.between(e.resolve(this.anchor),e.resolve(this.head))}}class We extends Ct{constructor(e){let n=e.nodeAfter,i=e.node(0).resolve(e.pos+n.nodeSize);super(e,i),this.node=n}map(e,n){let{deleted:i,pos:r}=n.mapResult(this.anchor),s=e.resolve(r);return i?Ct.near(s):new We(s)}content(){return new Be(Ee.from(this.node),0,0)}eq(e){return e instanceof We&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new nE(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new We(e.resolve(n.anchor))}static create(e,n){return new We(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}We.prototype.visible=!1;Ct.jsonID("node",We);class nE{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:i}=e.mapResult(this.anchor);return n?new dx(i,i):new nE(i)}resolve(e){let n=e.resolve(this.anchor),i=n.nodeAfter;return i&&We.isSelectable(i)?new We(n):Ct.near(n)}}class Js extends Ct{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Be.empty){if(n==Be.empty){e.delete(0,e.doc.content.size);let i=Ct.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Js(e)}map(e){return new Js(e)}eq(e){return e instanceof Js}getBookmark(){return gL}}Ct.jsonID("all",Js);const gL={map(){return this},resolve(t){return new Js(t)}};function $h(t,e,n,i,r,s=!1){if(e.inlineContent)return st.create(t,n);for(let a=i-(r>0?0:1);r>0?a<e.childCount:a>=0;a+=r){let l=e.child(a);if(l.isAtom){if(!s&&We.isSelectable(l))return We.create(t,n-(r<0?l.nodeSize:0))}else{let c=$h(t,l,n+r,r<0?l.childCount:0,r,s);if(c)return c}n+=l.nodeSize*r}return null}function S5(t,e,n){let i=t.steps.length-1;if(i<e)return;let r=t.steps[i];if(!(r instanceof Wi||r instanceof Ji))return;let s=t.mapping.maps[i],a;s.forEach((l,c,d,m)=>{a==null&&(a=m)}),t.setSelection(Ct.near(t.doc.resolve(a),n))}const C5=1,V1=2,w5=4;class yL extends mM{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|C5)&~V1,this.storedMarks=null,this}get selectionSet(){return(this.updated&C5)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=V1,this}ensureMarks(e){return nn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&V1)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~V1,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let i=this.selection;return n&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||nn.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,i){let r=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(i==null&&(i=n),!e)return this.deleteRange(n,i);let s=this.storedMarks;if(!s){let a=this.doc.resolve(n);s=i==n?a.marks():a.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(n,i,r.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Ct.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=w5,this}get scrolledIntoView(){return(this.updated&w5)>0}}function E5(t,e){return!e||!t?t:t.bind(e)}class Og{constructor(e,n,i){this.name=e,this.init=E5(n.init,i),this.apply=E5(n.apply,i)}}const vL=[new Og("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Og("selection",{init(t,e){return t.selection||Ct.atStart(e.doc)},apply(t){return t.selection}}),new Og("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,i){return i.selection.$cursor?t.storedMarks:null}}),new Og("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class X2{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=vL.slice(),n&&n.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Og(i.key,i.spec.state,i))})}}class rp{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=n){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],i=this.applyInner(e),r=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let l=this.config.plugins[a];if(l.spec.appendTransaction){let c=r?r[a].n:0,d=r?r[a].state:this,m=c<n.length&&l.spec.appendTransaction.call(l,c?n.slice(c):n,d,i);if(m&&i.filterTransaction(m,a)){if(m.setMeta("appendedTransaction",e),!r){r=[];for(let g=0;g<this.config.plugins.length;g++)r.push(g<a?{state:i,n:n.length}:{state:this,n:0})}n.push(m),i=i.applyInner(m),s=!0}r&&(r[a]={state:i,n:n.length})}}if(!s)return{state:i,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new rp(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new yL(this)}static create(e){let n=new X2(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new rp(n);for(let r=0;r<n.fields.length;r++)i[n.fields[r].name]=n.fields[r].init(e,i);return i}reconfigure(e){let n=new X2(this.schema,e.plugins),i=n.fields,r=new rp(n);for(let s=0;s<i.length;s++){let a=i[s].name;r[a]=this.hasOwnProperty(a)?this[a]:i[s].init(e,r)}return r}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],s=r.spec.state;s&&s.toJSON&&(n[i]=s.toJSON.call(r,this[r.key]))}return n}static fromJSON(e,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new X2(e.schema,e.plugins),s=new rp(r);return r.fields.forEach(a=>{if(a.name=="doc")s.doc=Rc.fromJSON(e.schema,n.doc);else if(a.name=="selection")s.selection=Ct.fromJSON(s.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let l in i){let c=i[l],d=c.spec.state;if(c.key==a.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[a.name]=d.fromJSON.call(c,e,n[l],s);return}}s[a.name]=a.init(e,s)}}),s}}function gM(t,e,n){for(let i in t){let r=t[i];r instanceof Function?r=r.bind(e):i=="handleDOMEvents"&&(r=gM(r,e,{})),n[i]=r}return n}class Wn{constructor(e){this.spec=e,this.props={},e.props&&gM(e.props,this,this.props),this.key=e.key?e.key.key:yM("plugin")}getState(e){return e[this.key]}}const Q2=Object.create(null);function yM(t){return t in Q2?t+"$"+ ++Q2[t]:(Q2[t]=0,t+"$")}class Ii{constructor(e="key"){this.key=yM(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const iE=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function vM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const bM=(t,e,n)=>{let i=vM(t,n);if(!i)return!1;let r=rE(i);if(!r){let a=i.blockRange(),l=a&&kp(a);return l==null?!1:(e&&e(t.tr.lift(a,l).scrollIntoView()),!0)}let s=r.nodeBefore;if(MM(t,r,e,-1))return!0;if(i.parent.content.size==0&&(pp(s,"end")||We.isSelectable(s)))for(let a=i.depth;;a--){let l=fx(t.doc,i.before(a),i.after(a),Be.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(pp(s,"end")?Ct.findFrom(c.doc.resolve(c.mapping.map(r.pos,-1)),-1):We.create(c.doc,r.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||i.node(a-1).childCount>1)break}return s.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1},bL=(t,e,n)=>{let i=vM(t,n);if(!i)return!1;let r=rE(i);return r?xM(t,r,e):!1},xL=(t,e,n)=>{let i=CM(t,n);if(!i)return!1;let r=sE(i);return r?xM(t,r,e):!1};function xM(t,e,n){let i=e.nodeBefore,r=i,s=e.pos-1;for(;!r.isTextblock;s--){if(r.type.spec.isolating)return!1;let m=r.lastChild;if(!m)return!1;r=m}let a=e.nodeAfter,l=a,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let m=l.firstChild;if(!m)return!1;l=m}let d=fx(t.doc,s,c,Be.empty);if(!d||d.from!=s||d instanceof Wi&&d.slice.size>=c-s)return!1;if(n){let m=t.tr.step(d);m.setSelection(st.create(m.doc,s)),n(m.scrollIntoView())}return!0}function pp(t,e,n=!1){for(let i=t;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&i.childCount!=1)return!1}return!1}const SM=(t,e,n)=>{let{$head:i,empty:r}=t.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=rE(i)}let a=s&&s.nodeBefore;return!a||!We.isSelectable(a)?!1:(e&&e(t.tr.setSelection(We.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function rE(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function CM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const wM=(t,e,n)=>{let i=CM(t,n);if(!i)return!1;let r=sE(i);if(!r)return!1;let s=r.nodeAfter;if(MM(t,r,e,1))return!0;if(i.parent.content.size==0&&(pp(s,"start")||We.isSelectable(s))){let a=fx(t.doc,i.before(),i.after(),Be.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(pp(s,"start")?Ct.findFrom(l.doc.resolve(l.mapping.map(r.pos)),1):We.create(l.doc,l.mapping.map(r.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},EM=(t,e,n)=>{let{$head:i,empty:r}=t.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=sE(i)}let a=s&&s.nodeAfter;return!a||!We.isSelectable(a)?!1:(e&&e(t.tr.setSelection(We.create(t.doc,s.pos)).scrollIntoView()),!0)};function sE(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const SL=(t,e)=>{let n=t.selection,i=n instanceof We,r;if(i){if(n.node.isTextblock||!Uc(t.doc,n.from))return!1;r=n.from}else if(r=cx(t.doc,n.from,-1),r==null)return!1;if(e){let s=t.tr.join(r);i&&s.setSelection(We.create(s.doc,r-t.doc.resolve(r).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},CL=(t,e)=>{let n=t.selection,i;if(n instanceof We){if(n.node.isTextblock||!Uc(t.doc,n.to))return!1;i=n.to}else if(i=cx(t.doc,n.to,1),i==null)return!1;return e&&e(t.tr.join(i).scrollIntoView()),!0},wL=(t,e)=>{let{$from:n,$to:i}=t.selection,r=n.blockRange(i),s=r&&kp(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)},TM=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!n.parent.type.spec.code||!n.sameParent(i)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function aE(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const EL=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let r=n.node(-1),s=n.indexAfter(-1),a=aE(r.contentMatchAt(s));if(!a||!r.canReplaceWith(s,s,a))return!1;if(e){let l=n.after(),c=t.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Ct.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},_M=(t,e)=>{let n=t.selection,{$from:i,$to:r}=n;if(n instanceof Js||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=aE(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,l=t.tr.insert(a,s.createAndFill());l.setSelection(st.create(l.doc,a+1)),e(l.scrollIntoView())}return!0},kM=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(nu(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let i=n.blockRange(),r=i&&kp(i);return r==null?!1:(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)};function TL(t){return(e,n)=>{let{$from:i,$to:r}=e.selection;if(e.selection instanceof We&&e.selection.node.isBlock)return!i.parentOffset||!nu(e.doc,i.pos)?!1:(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let s=[],a,l,c=!1,d=!1;for(let x=i.depth;;x--)if(i.node(x).isBlock){c=i.end(x)==i.pos+(i.depth-x),d=i.start(x)==i.pos-(i.depth-x),l=aE(i.node(x-1).contentMatchAt(i.indexAfter(x-1))),s.unshift(c&&l?{type:l}:null),a=x;break}else{if(x==1)return!1;s.unshift(null)}let m=e.tr;(e.selection instanceof st||e.selection instanceof Js)&&m.deleteSelection();let g=m.mapping.map(i.pos),v=nu(m.doc,g,s.length,s);if(v||(s[0]=l?{type:l}:null,v=nu(m.doc,g,s.length,s)),!v)return!1;if(m.split(g,s.length,s),!c&&d&&i.node(a).type!=l){let x=m.mapping.map(i.before(a)),S=m.doc.resolve(x);l&&i.node(a-1).canReplaceWith(S.index(),S.index()+1,l)&&m.setNodeMarkup(m.mapping.map(i.before(a)),l)}return n&&n(m.scrollIntoView()),!0}}const _L=TL(),kL=(t,e)=>{let{$from:n,to:i}=t.selection,r,s=n.sharedDepth(i);return s==0?!1:(r=n.before(s),e&&e(t.tr.setSelection(We.create(t.doc,r))),!0)};function ML(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,s=e.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(r.isTextblock||Uc(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function MM(t,e,n,i){let r=e.nodeBefore,s=e.nodeAfter,a,l,c=r.type.spec.isolating||s.type.spec.isolating;if(!c&&ML(t,e,n))return!0;let d=!c&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(a=(l=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&l.matchType(a[0]||s.type).validEnd){if(n){let x=e.pos+s.nodeSize,S=Ee.empty;for(let A=a.length-1;A>=0;A--)S=Ee.from(a[A].create(null,S));S=Ee.from(r.copy(S));let T=t.tr.step(new Ji(e.pos-1,x,e.pos,x,new Be(S,1,0),a.length,!0)),k=T.doc.resolve(x+2*a.length);k.nodeAfter&&k.nodeAfter.type==r.type&&Uc(T.doc,k.pos)&&T.join(k.pos),n(T.scrollIntoView())}return!0}let m=s.type.spec.isolating||i>0&&c?null:Ct.findFrom(e,1),g=m&&m.$from.blockRange(m.$to),v=g&&kp(g);if(v!=null&&v>=e.depth)return n&&n(t.tr.lift(g,v).scrollIntoView()),!0;if(d&&pp(s,"start",!0)&&pp(r,"end")){let x=r,S=[];for(;S.push(x),!x.isTextblock;)x=x.lastChild;let T=s,k=1;for(;!T.isTextblock;T=T.firstChild)k++;if(x.canReplace(x.childCount,x.childCount,T.content)){if(n){let A=Ee.empty;for(let z=S.length-1;z>=0;z--)A=Ee.from(S[z].copy(A));let O=t.tr.step(new Ji(e.pos-S.length,e.pos+s.nodeSize,e.pos+k,e.pos+s.nodeSize-k,new Be(A,S.length,0),0,!0));n(O.scrollIntoView())}return!0}}return!1}function AM(t){return function(e,n){let i=e.selection,r=t<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(n&&n(e.tr.setSelection(st.create(e.doc,t<0?r.start(s):r.end(s)))),!0):!1}}const AL=AM(-1),NL=AM(1);function RL(t,e=null){return function(n,i){let{$from:r,$to:s}=n.selection,a=r.blockRange(s),l=a&&tE(a,t,e);return l?(i&&i(n.tr.wrap(a,l).scrollIntoView()),!0):!1}}function T5(t,e=null){return function(n,i){let r=!1;for(let s=0;s<n.selection.ranges.length&&!r;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(a,l,(c,d)=>{if(r)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)r=!0;else{let m=n.doc.resolve(d),g=m.index();r=m.parent.canReplaceWith(g,g+1,t)}})}if(!r)return!1;if(i){let s=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[a];s.setBlockType(l,c,t,e)}i(s.scrollIntoView())}return!0}}function oE(...t){return function(e,n,i){for(let r=0;r<t.length;r++)if(t[r](e,n,i))return!0;return!1}}oE(iE,bM,SM);oE(iE,wM,EM);oE(TM,_M,kM,_L);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function OL(t,e=null){return function(n,i){let{$from:r,$to:s}=n.selection,a=r.blockRange(s);if(!a)return!1;let l=i?n.tr:null;return DL(l,a,t,e)?(i&&i(l.scrollIntoView()),!0):!1}}function DL(t,e,n,i=null){let r=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);s=new Xv(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new Xv(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),r=!0}let l=tE(s,n,i,e);return l?(t&&zL(t,e,l,r,n),!0):!1}function zL(t,e,n,i,r){let s=Ee.empty;for(let m=n.length-1;m>=0;m--)s=Ee.from(n[m].type.create(n[m].attrs,s));t.step(new Ji(e.start-(i?2:0),e.end,e.start,e.end,new Be(s,0,0),n.length,!0));let a=0;for(let m=0;m<n.length;m++)n[m].type==r&&(a=m+1);let l=n.length-a,c=e.start+n.length-(i?2:0),d=e.parent;for(let m=e.startIndex,g=e.endIndex,v=!0;m<g;m++,v=!1)!v&&nu(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=d.child(m).nodeSize;return t}function jL(t){return function(e,n){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,a=>a.childCount>0&&a.firstChild.type==t);return s?n?i.node(s.depth-1).type==t?LL(e,n,t,s):BL(e,n,s):!0:!1}}function LL(t,e,n,i){let r=t.tr,s=i.end,a=i.$to.end(i.depth);s<a&&(r.step(new Ji(s-1,a,s,a,new Be(Ee.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new Xv(r.doc.resolve(i.$from.pos),r.doc.resolve(a),i.depth));const l=kp(i);if(l==null)return!1;r.lift(i,l);let c=r.doc.resolve(r.mapping.map(s,-1)-1);return Uc(r.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&r.join(c.pos),e(r.scrollIntoView()),!0}function BL(t,e,n){let i=t.tr,r=n.parent;for(let x=n.end,S=n.endIndex-1,T=n.startIndex;S>T;S--)x-=r.child(S).nodeSize,i.delete(x-1,x+1);let s=i.doc.resolve(n.start),a=s.nodeAfter;if(i.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,c=n.endIndex==r.childCount,d=s.node(-1),m=s.index(-1);if(!d.canReplace(m+(l?0:1),m+1,a.content.append(c?Ee.empty:Ee.from(r))))return!1;let g=s.pos,v=g+a.nodeSize;return i.step(new Ji(g-(l?1:0),v+(c?1:0),g+1,v-1,new Be((l?Ee.empty:Ee.from(r.copy(Ee.empty))).append(c?Ee.empty:Ee.from(r.copy(Ee.empty))),l?0:1,c?0:1),l?0:1)),e(i.scrollIntoView()),!0}function PL(t){return function(e,n){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,d=>d.childCount>0&&d.firstChild.type==t);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let l=s.parent,c=l.child(a-1);if(c.type!=t)return!1;if(n){let d=c.lastChild&&c.lastChild.type==l.type,m=Ee.from(d?t.create():null),g=new Be(Ee.from(t.create(null,Ee.from(l.type.create(null,m)))),d?3:1,0),v=s.start,x=s.end;n(e.tr.step(new Ji(v-(d?3:1),x,v,x,g,1,!0)).scrollIntoView())}return!0}}const yr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},mp=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let kC=null;const $l=function(t,e,n){let i=kC||(kC=document.createRange());return i.setEnd(t,n??t.nodeValue.length),i.setStart(t,e||0),i},IL=function(){kC=null},ud=function(t,e,n,i){return n&&(_5(t,e,n,i,-1)||_5(t,e,n,i,1))},HL=/^(img|br|input|textarea|hr)$/i;function _5(t,e,n,i,r){for(var s;;){if(t==n&&e==i)return!0;if(e==(r<0?0:ja(t))){let a=t.parentNode;if(!a||a.nodeType!=1||j0(t)||HL.test(t.nodeName)||t.contentEditable=="false")return!1;e=yr(t)+(r<0?0:1),t=a}else if(t.nodeType==1){let a=t.childNodes[e+(r<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=r;else return!1;else t=a,e=r<0?ja(t):0}else return!1}}function ja(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function UL(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ja(t)}else if(t.parentNode&&!j0(t))e=yr(t),t=t.parentNode;else return null}}function FL(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!j0(t))e=yr(t)+1,t=t.parentNode;else return null}}function GL(t,e,n){for(let i=e==0,r=e==ja(t);i||r;){if(t==n)return!0;let s=yr(t);if(t=t.parentNode,!t)return!1;i=i&&s==0,r=r&&s==ja(t)}}function j0(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const hx=function(t){return t.focusNode&&ud(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function qf(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function qL(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function VL(t,e,n){if(t.caretPositionFromPoint)try{let i=t.caretPositionFromPoint(e,n);if(i)return{node:i.offsetNode,offset:Math.min(ja(i.offsetNode),i.offset)}}catch{}if(t.caretRangeFromPoint){let i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:Math.min(ja(i.startContainer),i.startOffset)}}}const rl=typeof navigator<"u"?navigator:null,k5=typeof document<"u"?document:null,Fc=rl&&rl.userAgent||"",MC=/Edge\/(\d+)/.exec(Fc),NM=/MSIE \d/.exec(Fc),AC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fc),Ls=!!(NM||AC||MC),Dc=NM?document.documentMode:AC?+AC[1]:MC?+MC[1]:0,Ba=!Ls&&/gecko\/(\d+)/i.test(Fc);Ba&&+(/Firefox\/(\d+)/.exec(Fc)||[0,0])[1];const NC=!Ls&&/Chrome\/(\d+)/.exec(Fc),zr=!!NC,RM=NC?+NC[1]:0,ss=!Ls&&!!rl&&/Apple Computer/.test(rl.vendor),gp=ss&&(/Mobile\/\w+/.test(Fc)||!!rl&&rl.maxTouchPoints>2),Oa=gp||(rl?/Mac/.test(rl.platform):!1),YL=rl?/Win/.test(rl.platform):!1,tu=/Android \d/.test(Fc),L0=!!k5&&"webkitFontSmoothing"in k5.documentElement.style,KL=L0?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function XL(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Kl(t,e){return typeof t=="number"?t:t[e]}function QL(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*i}}function M5(t,e,n){let i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let a=n||t.dom;a;){if(a.nodeType!=1){a=mp(a);continue}let l=a,c=l==s.body,d=c?XL(s):QL(l),m=0,g=0;if(e.top<d.top+Kl(i,"top")?g=-(d.top-e.top+Kl(r,"top")):e.bottom>d.bottom-Kl(i,"bottom")&&(g=e.bottom-e.top>d.bottom-d.top?e.top+Kl(r,"top")-d.top:e.bottom-d.bottom+Kl(r,"bottom")),e.left<d.left+Kl(i,"left")?m=-(d.left-e.left+Kl(r,"left")):e.right>d.right-Kl(i,"right")&&(m=e.right-d.right+Kl(r,"right")),m||g)if(c)s.defaultView.scrollBy(m,g);else{let x=l.scrollLeft,S=l.scrollTop;g&&(l.scrollTop+=g),m&&(l.scrollLeft+=m);let T=l.scrollLeft-x,k=l.scrollTop-S;e={left:e.left-T,top:e.top-k,right:e.right-T,bottom:e.bottom-k}}let v=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(v))break;a=v=="absolute"?a.offsetParent:mp(a)}}function WL(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),i,r;for(let s=(e.left+e.right)/2,a=n+1;a<Math.min(innerHeight,e.bottom);a+=5){let l=t.root.elementFromPoint(s,a);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=n-20){i=l,r=c.top;break}}return{refDOM:i,refTop:r,stack:OM(t.dom)}}function OM(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=mp(i));return e}function JL({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;DM(n,i==0?0:i-e)}function DM(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:r,left:s}=t[n];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}let Fh=null;function ZL(t){if(t.setActive)return t.setActive();if(Fh)return t.focus(Fh);let e=OM(t);t.focus(Fh==null?{get preventScroll(){return Fh={preventScroll:!0},!0}}:void 0),Fh||(Fh=!1,DM(e,0))}function zM(t,e){let n,i=2e8,r,s=0,a=e.top,l=e.top,c,d;for(let m=t.firstChild,g=0;m;m=m.nextSibling,g++){let v;if(m.nodeType==1)v=m.getClientRects();else if(m.nodeType==3)v=$l(m).getClientRects();else continue;for(let x=0;x<v.length;x++){let S=v[x];if(S.top<=a&&S.bottom>=l){a=Math.max(S.bottom,a),l=Math.min(S.top,l);let T=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(T<i){n=m,i=T,r=T&&n.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,m.nodeType==1&&T&&(s=g+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!c&&S.left<=e.left&&S.right>=e.left&&(c=m,d={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!n&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(s=g+1)}}return!n&&c&&(n=c,r=d,i=0),n&&n.nodeType==3?$L(n,r):!n||i&&n.nodeType==1?{node:t,offset:s}:zM(n,r)}function $L(t,e){let n=t.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);let s=mc(i,1);if(s.top!=s.bottom&&lE(e,s))return{node:t,offset:r+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function lE(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eB(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tB(t,e,n){let{node:i,offset:r}=zM(e,n),s=-1;if(i.nodeType==1&&!i.firstChild){let a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(i,r,s)}function nB(t,e,n,i){let r=-1;for(let s=e,a=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!a&&c.left>i.left||c.top>i.top?r=l.posBefore:(!a&&c.right<i.left||c.bottom<i.top)&&(r=l.posAfter),a=!0),!l.contentDOM&&r<0&&!l.node.isText))return(l.node.isBlock?i.top<(c.top+c.bottom)/2:i.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n,-1)}function jM(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),s=r;;){let a=t.childNodes[s];if(a.nodeType==1){let l=a.getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(lE(e,d))return jM(a,e,d)}}if((s=(s+1)%i)==r)break}return t}function iB(t,e){let n=t.dom.ownerDocument,i,r=0,s=VL(n,e.left,e.top);s&&({node:i,offset:r}=s);let a=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!a||!t.dom.contains(a.nodeType!=1?a.parentNode:a)){let d=t.dom.getBoundingClientRect();if(!lE(e,d)||(a=jM(t.dom,e,d),!a))return null}if(ss)for(let d=a;i&&d;d=mp(d))d.draggable&&(i=void 0);if(a=eB(a,e),i){if(Ba&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let m=i.childNodes[r],g;m.nodeName=="IMG"&&(g=m.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&r++}let d;L0&&r&&i.nodeType==1&&(d=i.childNodes[r-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&r--,i==t.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(l=nB(t,i,r,e))}l==null&&(l=tB(t,a,e));let c=t.docView.nearestDesc(a,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function A5(t){return t.top<t.bottom||t.left<t.right}function mc(t,e){let n=t.getClientRects();if(n.length){let i=n[e<0?0:n.length-1];if(A5(i))return i}return Array.prototype.find.call(n,A5)||t.getBoundingClientRect()}const rB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function LM(t,e,n){let{node:i,offset:r,atom:s}=t.docView.domFromPos(e,n<0?-1:1),a=L0||Ba;if(i.nodeType==3)if(a&&(rB.test(i.nodeValue)||(n<0?!r:r==i.nodeValue.length))){let c=mc($l(i,r,r),n);if(Ba&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let d=mc($l(i,r-1,r-1),-1);if(d.top==c.top){let m=mc($l(i,r,r+1),-1);if(m.top!=c.top)return pg(m,m.left<d.left)}}return c}else{let c=r,d=r,m=n<0?1:-1;return n<0&&!r?(d++,m=-1):n>=0&&r==i.nodeValue.length?(c--,m=1):n<0?c--:d++,pg(mc($l(i,c,d),m),m<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&r&&(n<0||r==ja(i))){let c=i.childNodes[r-1];if(c.nodeType==1)return W2(c.getBoundingClientRect(),!1)}if(s==null&&r<ja(i)){let c=i.childNodes[r];if(c.nodeType==1)return W2(c.getBoundingClientRect(),!0)}return W2(i.getBoundingClientRect(),n>=0)}if(s==null&&r&&(n<0||r==ja(i))){let c=i.childNodes[r-1],d=c.nodeType==3?$l(c,ja(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return pg(mc(d,1),!1)}if(s==null&&r<ja(i)){let c=i.childNodes[r];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?$l(c,0,a?0:1):c.nodeType==1?c:null:null;if(d)return pg(mc(d,-1),!0)}return pg(mc(i.nodeType==3?$l(i):i,-n),n>=0)}function pg(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function W2(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function BM(t,e,n){let i=t.state,r=t.root.activeElement;i!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r&&r.focus()}}function sB(t,e,n){let i=e.selection,r=n=="up"?i.$from:i.$to;return BM(t,e,()=>{let{node:s}=t.docView.domFromPos(r.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let a=LM(t,r.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=$l(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let m=c[d];if(m.bottom>m.top+1&&(n=="up"?a.top-m.top>(m.bottom-a.top)*2:m.bottom-a.bottom>(a.bottom-m.top)*2))return!1}}return!0})}const aB=/[\u0590-\u08ac]/;function oB(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,a=r==i.parent.content.size,l=t.domSelection();return l?!aB.test(i.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:a:BM(t,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:m,anchorOffset:g}=t.domSelectionRange(),v=l.caretBidiLevel;l.modify("move",n,"character");let x=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:S,focusOffset:T}=t.domSelectionRange(),k=S&&!x.contains(S.nodeType==1?S:S.parentNode)||c==S&&d==T;try{l.collapse(m,g),c&&(c!=m||d!=g)&&l.extend&&l.extend(c,d)}catch{}return v!=null&&(l.caretBidiLevel=v),k}):i.pos==i.start()||i.pos==i.end()}let N5=null,R5=null,O5=!1;function lB(t,e,n){return N5==e&&R5==n?O5:(N5=e,R5=n,O5=n=="up"||n=="down"?sB(t,e,n):oB(t,e,n))}const Pa=0,D5=1,Yf=2,sl=3;class B0{constructor(e,n,i,r){this.parent=e,this.children=n,this.dom=i,this.contentDOM=r,this.dirty=Pa,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,i=this.posAtStart;;n++){let r=this.children[n];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let s,a;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=n>yr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let i=!0,r=e;r;r=r.parentNode){let s=this.getDesc(r),a;if(s&&(!n||s.node))if(i&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))i=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let i=n;i;i=i.parent)if(i==this)return n}posFromDOM(e,n,i){for(let r=e;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(e,n,i)}return-1}descAt(e){for(let n=0,i=0;n<this.children.length;n++){let r=this.children[n],s=i+r.size;if(i==e&&s!=i){for(;!r.border&&r.children.length;)for(let a=0;a<r.children.length;a++){let l=r.children[a];if(l.size){r=l;break}}return r}if(e<s)return r.descAt(e-i-r.border);i=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let a=this.children[i],l=s+a.size;if(l>e||a instanceof IM){r=e-s;break}s=l}if(r)return this.children[i].domFromPos(r-this.children[i].border,n);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof PM&&s.side>=0;i--);if(n<=0){let s,a=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,a=!1);return s&&n&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?yr(s.dom)+1:0}}else{let s,a=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?yr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let a=i,l=0;;l++){let c=this.children[l],d=a+c.size;if(r==-1&&e<=d){let m=a+c.border;if(e>=m&&n<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,m);e=a;for(let g=l;g>0;g--){let v=this.children[g-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){r=yr(v.dom)+1;break}e-=v.size}r==-1&&(r=0)}if(r>-1&&(d>n||l==this.children.length-1)){n=d;for(let m=l+1;m<this.children.length;m++){let g=this.children[m];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=yr(g.dom);break}n+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=d}return{node:this.contentDOM,from:e,to:n,fromOffset:r,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:i}=this.domFromPos(e,0);if(n.nodeType!=1||i==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[i]}setSelection(e,n,i,r=!1){let s=Math.min(e,n),a=Math.max(e,n);for(let x=0,S=0;x<this.children.length;x++){let T=this.children[x],k=S+T.size;if(s>S&&a<k)return T.setSelection(e-S-T.border,n-S-T.border,i,r);S=k}let l=this.domFromPos(e,e?-1:1),c=n==e?l:this.domFromPos(n,n?-1:1),d=i.root.getSelection(),m=i.domSelectionRange(),g=!1;if((Ba||ss)&&e==n){let{node:x,offset:S}=l;if(x.nodeType==3){if(g=!!(S&&x.nodeValue[S-1]==`
`),g&&S==x.nodeValue.length)for(let T=x,k;T;T=T.parentNode){if(k=T.nextSibling){k.nodeName=="BR"&&(l=c={node:k.parentNode,offset:yr(k)+1});break}let A=T.pmViewDesc;if(A&&A.node&&A.node.isBlock)break}}else{let T=x.childNodes[S-1];g=T&&(T.nodeName=="BR"||T.contentEditable=="false")}}if(Ba&&m.focusNode&&m.focusNode!=c.node&&m.focusNode.nodeType==1){let x=m.focusNode.childNodes[m.focusOffset];x&&x.contentEditable=="false"&&(r=!0)}if(!(r||g&&ss)&&ud(l.node,l.offset,m.anchorNode,m.anchorOffset)&&ud(c.node,c.offset,m.focusNode,m.focusOffset))return;let v=!1;if((d.extend||e==n)&&!(g&&Ba)){d.collapse(l.node,l.offset);try{e!=n&&d.extend(c.node,c.offset),v=!0}catch{}}if(!v){if(e>n){let S=l;l=c,c=S}let x=document.createRange();x.setEnd(c.node,c.offset),x.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(i==a?e<=a&&n>=i:e<a&&n>i){let l=i+s.border,c=a-s.border;if(e>=l&&n<=c){this.dirty=e==i||n==a?Yf:D5,e==l&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=sl:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Yf:sl}i=a}this.dirty=Yf}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let i=e==1?Yf:D5;n.dirty<i&&(n.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class PM extends B0{constructor(e,n,i,r){let s,a=n.type.toDOM;if(typeof a=="function"&&(a=a(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(a.nodeType!=1){let l=document.createElement("span");l.appendChild(a),a=l}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Pa&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class uB extends B0{constructor(e,n,i,r){super(e,[],n,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class cd extends B0{constructor(e,n,i,r,s){super(e,[],i,r),this.mark=n,this.spec=s}static create(e,n,i,r){let s=r.nodeViews[n.type.name],a=s&&s(n,r,i);return(!a||!a.dom)&&(a=yd.renderSpec(document,n.type.spec.toDOM(n,i),null,n.attrs)),new cd(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&sl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=sl&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Pa){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=Pa}}slice(e,n,i){let r=cd.create(this.parent,this.mark,!0,i),s=this.children,a=this.size;n<a&&(s=OC(s,n,a,i)),e>0&&(s=OC(s,0,e,i));for(let l=0;l<s.length;l++)s[l].parent=r;return r.children=s,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class zc extends B0{constructor(e,n,i,r,s,a,l,c,d){super(e,[],s,a),this.node=n,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=l}static create(e,n,i,r,s,a){let l=s.nodeViews[n.type.name],c,d=l&&l(n,s,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},i,r),m=d&&d.dom,g=d&&d.contentDOM;if(n.isText){if(!m)m=document.createTextNode(n.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:g}=yd.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!g&&!n.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),n.type.spec.draggable&&(m.draggable=!0));let v=m;return m=FM(m,i,n),d?c=new cB(e,n,i,r,m,g||null,v,d,s,a+1):n.isText?new px(e,n,i,r,m,v,s):new zc(e,n,i,r,m,g||null,v,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let i=this.children[n];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ee.empty)}return e}matchesNode(e,n,i){return this.dirty==Pa&&e.eq(this.node)&&Wv(n,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let i=this.node.inlineContent,r=n,s=e.composing?this.localCompositionInfo(e,n):null,a=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new dB(this,a&&a.node,e);mB(this.node,this.innerDeco,(d,m,g)=>{d.spec.marks?c.syncToMarks(d.spec.marks,i,e):d.type.side>=0&&!g&&c.syncToMarks(m==this.node.childCount?nn.none:this.node.child(m).marks,i,e),c.placeWidget(d,e,r)},(d,m,g,v)=>{c.syncToMarks(d.marks,i,e);let x;c.findNodeMatch(d,m,g,v)||l&&e.state.selection.from>r&&e.state.selection.to<r+d.nodeSize&&(x=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(d,m,g,x,e)||c.updateNextNode(d,m,g,e,v,r)||c.addNode(d,m,g,e,r),r+=d.nodeSize}),c.syncToMarks([],i,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Yf)&&(a&&this.protectLocalComposition(e,a),HM(this.contentDOM,this.children,e),gp&&gB(this.dom))}localCompositionInfo(e,n){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof st)||i<n||r>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=yB(this.node.content,a,i-n,r-n);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:i,text:r}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new uB(this,s,n,r);e.input.compositionNodes.push(a),this.children=OC(this.children,i,i+r.length,e,a)}update(e,n,i,r){return this.dirty==sl||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,i,r),!0)}updateInner(e,n,i,r){this.updateOuterDeco(n),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=Pa}updateOuterDeco(e){if(Wv(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=UM(this.dom,this.nodeDOM,RC(this.outerDeco,this.node,n),RC(e,this.node,n)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function z5(t,e,n,i,r){FM(i,e,t);let s=new zc(void 0,t,e,n,i,i,i,r,0);return s.contentDOM&&s.updateChildren(r,0),s}class px extends zc{constructor(e,n,i,r,s,a,l){super(e,n,i,r,s,null,a,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,i,r){return this.dirty==sl||this.dirty!=Pa&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Pa||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=Pa,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,i){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,i){let r=this.node.cut(e,n),s=document.createTextNode(r.text);return new px(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=sl)}get domAtom(){return!1}isText(e){return this.node.text==e}}class IM extends B0{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Pa&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cB extends zc{constructor(e,n,i,r,s,a,l,c,d,m){super(e,n,i,r,s,a,l,d,m),this.spec=c}update(e,n,i,r){if(this.dirty==sl)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,i);return s&&this.updateInner(e,n,i,r),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,i,r){this.spec.setSelection?this.spec.setSelection(e,n,i.root):super.setSelection(e,n,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function HM(t,e,n){let i=t.firstChild,r=!1;for(let s=0;s<e.length;s++){let a=e[s],l=a.dom;if(l.parentNode==t){for(;l!=i;)i=j5(i),r=!0;i=i.nextSibling}else r=!0,t.insertBefore(l,i);if(a instanceof cd){let c=i?i.previousSibling:t.lastChild;HM(a.contentDOM,a.children,n),i=c?c.nextSibling:t.firstChild}}for(;i;)i=j5(i),r=!0;r&&n.trackWrites==t&&(n.trackWrites=null)}const Fg=function(t){t&&(this.nodeName=t)};Fg.prototype=Object.create(null);const Kf=[new Fg];function RC(t,e,n){if(t.length==0)return Kf;let i=n?Kf[0]:new Fg,r=[i];for(let s=0;s<t.length;s++){let a=t[s].type.attrs;if(a){a.nodeName&&r.push(i=new Fg(a.nodeName));for(let l in a){let c=a[l];c!=null&&(n&&r.length==1&&r.push(i=new Fg(e.isInline?"span":"div")),l=="class"?i.class=(i.class?i.class+" ":"")+c:l=="style"?i.style=(i.style?i.style+";":"")+c:l!="nodeName"&&(i[l]=c))}}}return r}function UM(t,e,n,i){if(n==Kf&&i==Kf)return e;let r=e;for(let s=0;s<i.length;s++){let a=i[s],l=n[s];if(s){let c;l&&l.nodeName==a.nodeName&&r!=t&&(c=r.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(r),l=Kf[0]),r=c}fB(r,l||Kf[0],a)}return r}function fB(t,e,n){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in n)&&t.removeAttribute(i);for(let i in n)i!="class"&&i!="style"&&i!="nodeName"&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.add(r[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(e.style);)t.style.removeProperty(r[1])}n.style&&(t.style.cssText+=n.style)}}function FM(t,e,n){return UM(t,t,Kf,RC(e,n,t.nodeType!=1))}function Wv(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function j5(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class dB{constructor(e,n,i){this.lock=n,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hB(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let i=e;i<n;i++)this.top.children[i].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,i){let r=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;r<a&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=Pa,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(e[s])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=cd.create(this.top,e[s],n,i);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,i,r){let s=-1,a;if(r>=this.preMatch.index&&(a=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&a.matchesNode(e,n,i))s=this.top.children.indexOf(a,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let d=this.top.children[l];if(d.matchesNode(e,n,i)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,i,r,s){let a=this.top.children[r];return a.dirty==sl&&a.dom==a.contentDOM&&(a.dirty=Yf),a.update(e,n,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}e=n}}updateNextNode(e,n,i,r,s,a){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof zc){let d=this.preMatch.matched.get(c);if(d!=null&&d!=s)return!1;let m=c.dom,g,v=this.isLocked(m)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=sl&&Wv(n,c.outerDeco));if(!v&&c.update(e,n,i,r))return this.destroyBetween(this.index,l),c.dom!=m&&(this.changed=!0),this.index++,!0;if(!v&&(g=this.recreateWrapper(c,e,n,i,r,a)))return this.destroyBetween(this.index,l),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=Yf,g.updateChildren(r,a+1),g.dirty=Pa),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,i,r,s,a){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Wv(i,e.outerDeco)||!r.eq(e.innerDeco))return null;let l=zc.create(this.top,n,i,r,s,a);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,n,i,r,s){let a=zc.create(this.top,e,n,i,r,s);a.contentDOM&&a.updateChildren(r,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,n,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new PM(this.top,e,n,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof cd;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof px)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ss||zr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new IM(this.top,[],i,null);n!=this.top?n.children.push(r):n.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hB(t,e){let n=e,i=n.children.length,r=t.childCount,s=new Map,a=[];e:for(;r>0;){let l;for(;;)if(i){let d=n.children[i-1];if(d instanceof cd)n=d,i=d.children.length;else{l=d,i--;break}}else{if(n==e)break e;i=n.parent.children.indexOf(n),n=n.parent}let c=l.node;if(c){if(c!=t.child(r-1))break;--r,s.set(l,r),a.push(l)}}return{index:r,matched:s,matches:a.reverse()}}function pB(t,e){return t.type.side-e.type.side}function mB(t,e,n,i){let r=e.locals(t),s=0;if(r.length==0){for(let d=0;d<t.childCount;d++){let m=t.child(d);i(m,r,e.forChild(s,m),d),s+=m.nodeSize}return}let a=0,l=[],c=null;for(let d=0;;){let m,g;for(;a<r.length&&r[a].to==s;){let k=r[a++];k.widget&&(m?(g||(g=[m])).push(k):m=k)}if(m)if(g){g.sort(pB);for(let k=0;k<g.length;k++)n(g[k],d,!!c)}else n(m,d,!!c);let v,x;if(c)x=-1,v=c,c=null;else if(d<t.childCount)x=d,v=t.child(d++);else break;for(let k=0;k<l.length;k++)l[k].to<=s&&l.splice(k--,1);for(;a<r.length&&r[a].from<=s&&r[a].to>s;)l.push(r[a++]);let S=s+v.nodeSize;if(v.isText){let k=S;a<r.length&&r[a].from<k&&(k=r[a].from);for(let A=0;A<l.length;A++)l[A].to<k&&(k=l[A].to);k<S&&(c=v.cut(k-s),v=v.cut(0,k-s),S=k,x=-1)}else for(;a<r.length&&r[a].to<S;)a++;let T=v.isInline&&!v.isLeaf?l.filter(k=>!k.inline):l.slice();i(v,T,e.forChild(s,v),x),s=S}}function gB(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function yB(t,e,n,i){for(let r=0,s=0;r<t.childCount&&s<=i;){let a=t.child(r++),l=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;r<t.childCount;){let d=t.child(r++);if(s+=d.nodeSize,!d.isText)break;c+=d.text}if(s>=n){if(s>=i&&c.slice(i-e.length-l,i-l)==e)return i-e.length;let d=l<i?c.lastIndexOf(e,i-l-1):-1;if(d>=0&&d+e.length+l>=n)return l+d;if(n==i&&c.length>=i+e.length-l&&c.slice(i-l,i-l+e.length)==e)return i}}return-1}function OC(t,e,n,i,r){let s=[];for(let a=0,l=0;a<t.length;a++){let c=t[a],d=l,m=l+=c.size;d>=n||m<=e?s.push(c):(d<e&&s.push(c.slice(0,e-d,i)),r&&(s.push(r),r=void 0),m>n&&s.push(c.slice(n-d,c.size,i)))}return s}function uE(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let r=t.docView.nearestDesc(n.focusNode),s=r&&r.size==0,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let l=i.resolve(a),c,d;if(hx(n)){for(c=a;r&&!r.node;)r=r.parent;let g=r.node;if(r&&g.isAtom&&We.isSelectable(g)&&r.parent&&!(g.isInline&&GL(n.focusNode,n.focusOffset,r.dom))){let v=r.posBefore;d=new We(a==v?l:i.resolve(v))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let g=a,v=a;for(let x=0;x<n.rangeCount;x++){let S=n.getRangeAt(x);g=Math.min(g,t.docView.posFromDOM(S.startContainer,S.startOffset,1)),v=Math.max(v,t.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(g<0)return null;[c,a]=v==t.state.selection.anchor?[v,g]:[g,v],l=i.resolve(a)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let m=i.resolve(c);if(!d){let g=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;d=cE(t,m,l,g)}return d}function GM(t){return t.editable?t.hasFocus():VM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function iu(t,e=!1){let n=t.state.selection;if(qM(t,n),!!GM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zr){let i=t.domSelectionRange(),r=t.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&ud(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)bB(t);else{let{anchor:i,head:r}=n,s,a;L5&&!(n instanceof st)&&(n.$from.parent.inlineContent||(s=B5(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=B5(t,n.to))),t.docView.setSelection(i,r,t,e),L5&&(s&&P5(s),a&&P5(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&vB(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const L5=ss||zr&&RM<63;function B5(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),r=i<n.childNodes.length?n.childNodes[i]:null,s=i?n.childNodes[i-1]:null;if(ss&&r&&r.contentEditable=="false")return J2(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return J2(r);if(s)return J2(s)}}function J2(t){return t.contentEditable="true",ss&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function P5(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function vB(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=i||n.anchorOffset!=r)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!GM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function bB(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,i=n.nodeName=="IMG";i?e.collapse(n.parentNode,yr(n)+1):e.collapse(n,0),!i&&!t.state.selection.visible&&Ls&&Dc<=11&&(n.disabled=!0,n.disabled=!1)}function qM(t,e){if(e instanceof We){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(I5(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else I5(t)}function I5(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function cE(t,e,n,i){return t.someProp("createSelectionBetween",r=>r(t,e,n))||st.between(e,n,i)}function H5(t){return t.editable&&!t.hasFocus()?!1:VM(t)}function VM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xB(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ud(e.node,e.offset,n.anchorNode,n.anchorOffset)}function DC(t,e){let{$anchor:n,$head:i}=t.selection,r=e>0?n.max(i):n.min(i),s=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return s&&Ct.findFrom(s,e)}function bc(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function U5(t,e,n){let i=t.state.selection;if(i instanceof st)if(n.indexOf("s")>-1){let{$head:r}=i,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=t.state.doc.resolve(r.pos+s.nodeSize*(e<0?-1:1));return bc(t,new st(i.$anchor,a))}else if(i.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let r=DC(t.state,e);return r&&r instanceof We?bc(t,r):!1}else if(!(Oa&&n.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,a;if(!s||s.isText)return!1;let l=e<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(a=t.docView.descAt(l))&&!a.contentDOM?We.isSelectable(s)?bc(t,new We(e<0?t.state.doc.resolve(r.pos-s.nodeSize):r)):L0?bc(t,new st(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(i instanceof We&&i.node.isInline)return bc(t,new st(e>0?i.$to:i.$from));{let r=DC(t.state,e);return r?bc(t,r):!1}}}function Jv(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Gg(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Gh(t,e){return e<0?SB(t):CB(t)}function SB(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,s,a=!1;for(Ba&&n.nodeType==1&&i<Jv(n)&&Gg(n.childNodes[i],-1)&&(a=!0);;)if(i>0){if(n.nodeType!=1)break;{let l=n.childNodes[i-1];if(Gg(l,-1))r=n,s=--i;else if(l.nodeType==3)n=l,i=n.nodeValue.length;else break}}else{if(YM(n))break;{let l=n.previousSibling;for(;l&&Gg(l,-1);)r=n.parentNode,s=yr(l),l=l.previousSibling;if(l)n=l,i=Jv(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}a?zC(t,n,i):r&&zC(t,r,s)}function CB(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r=Jv(n),s,a;for(;;)if(i<r){if(n.nodeType!=1)break;let l=n.childNodes[i];if(Gg(l,1))s=n,a=++i;else break}else{if(YM(n))break;{let l=n.nextSibling;for(;l&&Gg(l,1);)s=l.parentNode,a=yr(l)+1,l=l.nextSibling;if(l)n=l,i=0,r=Jv(n);else{if(n=n.parentNode,n==t.dom)break;i=r=0}}}s&&zC(t,s,a)}function YM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function wB(t,e){for(;t&&e==t.childNodes.length&&!j0(t);)e=yr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function EB(t,e){for(;t&&!e&&!j0(t);)e=yr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function zC(t,e,n){if(e.nodeType!=3){let s,a;(a=wB(e,n))?(e=a,n=0):(s=EB(e,n))&&(e=s,n=s.nodeValue.length)}let i=t.domSelection();if(!i)return;if(hx(i)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout(()=>{t.state==r&&iu(t)},50)}function F5(t,e){let n=t.state.doc.resolve(e);if(!(zr||YL)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(s.left-r.left)>1)return s.left<r.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function G5(t,e,n){let i=t.state.selection;if(i instanceof st&&!i.empty||n.indexOf("s")>-1||Oa&&n.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let a=DC(t.state,e);if(a&&a instanceof We)return bc(t,a)}if(!r.parent.inlineContent){let a=e<0?r:s,l=i instanceof Js?Ct.near(a,e):Ct.findFrom(a,e);return l?bc(t,l):!1}return!1}function q5(t,e){if(!(t.state.selection instanceof st))return!0;let{$head:n,$anchor:i,empty:r}=t.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let a=t.state.tr;return e<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),t.dispatch(a),!0}return!1}function V5(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function TB(t){if(!ss||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;V5(t,i,"true"),setTimeout(()=>V5(t,i,"false"),20)}return!1}function _B(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function kB(t,e){let n=e.keyCode,i=_B(e);if(n==8||Oa&&n==72&&i=="c")return q5(t,-1)||Gh(t,-1);if(n==46&&!e.shiftKey||Oa&&n==68&&i=="c")return q5(t,1)||Gh(t,1);if(n==13||n==27)return!0;if(n==37||Oa&&n==66&&i=="c"){let r=n==37?F5(t,t.state.selection.from)=="ltr"?-1:1:-1;return U5(t,r,i)||Gh(t,r)}else if(n==39||Oa&&n==70&&i=="c"){let r=n==39?F5(t,t.state.selection.from)=="ltr"?1:-1:1;return U5(t,r,i)||Gh(t,r)}else{if(n==38||Oa&&n==80&&i=="c")return G5(t,-1,i)||Gh(t,-1);if(n==40||Oa&&n==78&&i=="c")return TB(t)||G5(t,1,i)||Gh(t,1);if(i==(Oa?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function fE(t,e){t.someProp("transformCopied",x=>{e=x(e,t)});let n=[],{content:i,openStart:r,openEnd:s}=e;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let x=i.firstChild;n.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),i=x.content}let a=t.someProp("clipboardSerializer")||yd.fromSchema(t.state.schema),l=ZM(),c=l.createElement("div");c.appendChild(a.serializeFragment(i,{document:l}));let d=c.firstChild,m,g=0;for(;d&&d.nodeType==1&&(m=JM[d.nodeName.toLowerCase()]);){for(let x=m.length-1;x>=0;x--){let S=l.createElement(m[x]);for(;c.firstChild;)S.appendChild(c.firstChild);c.appendChild(S),g++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${r} ${s}${g?` -${g}`:""} ${JSON.stringify(n)}`);let v=t.someProp("clipboardTextSerializer",x=>x(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:v,slice:e}}function KM(t,e,n,i,r){let s=r.parent.type.spec.code,a,l;if(!n&&!e)return null;let c=!!e&&(i||s||!n);if(c){if(t.someProp("transformPastedText",v=>{e=v(e,s||i,t)}),s)return l=new Be(Ee.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",v=>{l=v(l,t,!0)}),l;let g=t.someProp("clipboardTextParser",v=>v(e,r,i,t));if(g)l=g;else{let v=r.marks(),{schema:x}=t.state,S=yd.fromSchema(x);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(T=>{let k=a.appendChild(document.createElement("p"));T&&k.appendChild(S.serializeNode(x.text(T,v)))})}}else t.someProp("transformPastedHTML",g=>{n=g(n,t)}),a=RB(n),L0&&OB(a);let d=a&&a.querySelector("[data-pm-slice]"),m=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let g=+m[3];g>0;g--){let v=a.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;a=v}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Oc.fromSchema(t.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||m),context:r,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!MB.test(v.parentNode.nodeName)?{ignore:!0}:null}})),m)l=DB(Y5(l,+m[1],+m[2]),m[4]);else if(l=Be.maxOpen(AB(l.content,r),!0),l.openStart||l.openEnd){let g=0,v=0;for(let x=l.content.firstChild;g<l.openStart&&!x.type.spec.isolating;g++,x=x.firstChild);for(let x=l.content.lastChild;v<l.openEnd&&!x.type.spec.isolating;v++,x=x.lastChild);l=Y5(l,g,v)}return t.someProp("transformPasted",g=>{l=g(l,t,c)}),l}const MB=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function AB(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),s,a=[];if(t.forEach(l=>{if(!a)return;let c=r.findWrapping(l.type),d;if(!c)return a=null;if(d=a.length&&s.length&&QM(c,s,l,a[a.length-1],0))a[a.length-1]=d;else{a.length&&(a[a.length-1]=WM(a[a.length-1],s.length));let m=XM(l,c);a.push(m),r=r.matchType(m.type),s=c}}),a)return Ee.from(a)}return t}function XM(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,Ee.from(t));return t}function QM(t,e,n,i,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let s=QM(t,e,n,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==t.length-1?n.type:t[r+1]))return i.copy(i.content.append(Ee.from(XM(n,t,r+1))))}}function WM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,WM(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(Ee.empty,!0);return t.copy(n.append(i))}function jC(t,e,n,i,r,s){let a=e<0?t.firstChild:t.lastChild,l=a.content;return t.childCount>1&&(s=0),r<i-1&&(l=jC(l,e,n,i,r+1,s)),r>=n&&(l=e<0?a.contentMatchAt(0).fillBefore(l,s<=r).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(Ee.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(l))}function Y5(t,e,n){return e<t.openStart&&(t=new Be(jC(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Be(jC(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const JM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let K5=null;function ZM(){return K5||(K5=document.implementation.createHTMLDocument("title"))}let Z2=null;function NB(t){let e=window.trustedTypes;return e?(Z2||(Z2=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Z2.createHTML(t)):t}function RB(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=ZM().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t),r;if((r=i&&JM[i[1].toLowerCase()])&&(t=r.map(s=>"<"+s+">").join("")+t+r.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=NB(t),r)for(let s=0;s<r.length;s++)n=n.querySelector(r[s])||n;return n}function OB(t){let e=t.querySelectorAll(zr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}function DB(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return t}let{content:r,openStart:s,openEnd:a}=t;for(let l=i.length-2;l>=0;l-=2){let c=n.nodes[i[l]];if(!c||c.hasRequiredAttrs())break;r=Ee.from(c.create(i[l+1],r)),s++,a++}return new Be(r,s,a)}const as={},ls={},zB={touchstart:!0,touchmove:!0};class jB{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LB(t){for(let e in as){let n=as[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=i=>{PB(t,i)&&!dE(t,i)&&(t.editable||!(i.type in ls))&&n(t,i)},zB[e]?{passive:!0}:void 0)}ss&&t.dom.addEventListener("input",()=>null),LC(t)}function Ac(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function BB(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function LC(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=i=>dE(t,i))})}function dE(t,e){return t.someProp("handleDOMEvents",n=>{let i=n[e.type];return i?i(t,e)||e.defaultPrevented:!1})}function PB(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function IB(t,e){!dE(t,e)&&as[e.type]&&(t.editable||!(e.type in ls))&&as[e.type](t,e)}ls.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!e8(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(tu&&zr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),gp&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let i=Date.now();t.input.lastIOSEnter=i,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==i&&(t.someProp("handleKeyDown",r=>r(t,qf(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",i=>i(t,n))||kB(t,n)?n.preventDefault():Ac(t,"key")};ls.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};ls.keypress=(t,e)=>{let n=e;if(e8(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Oa&&n.metaKey)return;if(t.someProp("handleKeyPress",r=>r(t,n))){n.preventDefault();return}let i=t.state.selection;if(!(i instanceof st)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(r).scrollIntoView();!/[\r\n]/.test(r)&&!t.someProp("handleTextInput",a=>a(t,i.$from.pos,i.$to.pos,r,s))&&t.dispatch(s()),n.preventDefault()}};function mx(t){return{left:t.clientX,top:t.clientY}}function HB(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}function hE(t,e,n,i,r){if(i==-1)return!1;let s=t.state.doc.resolve(i);for(let a=s.depth+1;a>0;a--)if(t.someProp(e,l=>a>s.depth?l(t,n,s.nodeAfter,s.before(a),r,!0):l(t,n,s.node(a),s.before(a),r,!1)))return!0;return!1}function op(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let i=t.state.tr.setSelection(e);i.setMeta("pointer",!0),t.dispatch(i)}function UB(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return i&&i.isAtom&&We.isSelectable(i)?(op(t,new We(n)),!0):!1}function FB(t,e){if(e==-1)return!1;let n=t.state.selection,i,r;n instanceof We&&(i=n.node);let s=t.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let l=a>s.depth?s.nodeAfter:s.node(a);if(We.isSelectable(l)){i&&n.$from.depth>0&&a>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?r=s.before(n.$from.depth):r=s.before(a);break}}return r!=null?(op(t,We.create(t.state.doc,r)),!0):!1}function GB(t,e,n,i,r){return hE(t,"handleClickOn",e,n,i)||t.someProp("handleClick",s=>s(t,e,i))||(r?FB(t,n):UB(t,n))}function qB(t,e,n,i){return hE(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",r=>r(t,e,i))}function VB(t,e,n,i){return hE(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",r=>r(t,e,i))||YB(t,n,i)}function YB(t,e,n){if(n.button!=0)return!1;let i=t.state.doc;if(e==-1)return i.inlineContent?(op(t,st.create(i,0,i.content.size)),!0):!1;let r=i.resolve(e);for(let s=r.depth+1;s>0;s--){let a=s>r.depth?r.nodeAfter:r.node(s),l=r.before(s);if(a.inlineContent)op(t,st.create(i,l+1,l+1+a.content.size));else if(We.isSelectable(a))op(t,We.create(i,l));else continue;return!0}}function pE(t){return Zv(t)}const $M=Oa?"metaKey":"ctrlKey";as.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=pE(t),r=Date.now(),s="singleClick";r-t.input.lastClick.time<500&&HB(n,t.input.lastClick)&&!n[$M]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:s,button:n.button};let a=t.posAtCoords(mx(n));a&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new KB(t,a,n,!!i)):(s=="doubleClick"?qB:VB)(t,a.pos,a.inside,n)?n.preventDefault():Ac(t,"pointer"))};class KB{constructor(e,n,i,r){this.view=e,this.pos=n,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[$M],this.allowDefault=i.shiftKey;let s,a;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),a=n.inside;else{let m=e.state.doc.resolve(n.pos);s=m.parent,a=m.depth?m.before():0}const l=r?null:i.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:d}=e.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof We&&d.from<=a&&d.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ba&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ac(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>iu(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(mx(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ac(this.view,"pointer"):GB(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ss&&this.mightDrag&&!this.mightDrag.node.isAtom||zr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(op(this.view,Ct.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Ac(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ac(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}as.touchstart=t=>{t.input.lastTouch=Date.now(),pE(t),Ac(t,"pointer")};as.touchmove=t=>{t.input.lastTouch=Date.now(),Ac(t,"pointer")};as.contextmenu=t=>pE(t);function e8(t,e){return t.composing?!0:ss&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const XB=tu?5e3:-1;ls.compositionstart=ls.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof st&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Zv(t,!0),t.markCursor=null;else if(Zv(t,!e.selection.empty),Ba&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let i=t.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let a=s<0?r.lastChild:r.childNodes[s-1];if(!a)break;if(a.nodeType==3){let l=t.domSelection();l&&l.collapse(a,a.nodeValue.length);break}else r=a,s=-1}}t.input.composing=!0}t8(t,XB)};ls.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,t8(t,20))};function t8(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Zv(t),e))}function n8(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=WB());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function QB(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=UL(e.focusNode,e.focusOffset),i=FL(e.focusNode,e.focusOffset);if(n&&i&&n!=i){let r=i.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||i==s)return s;if(!r||!r.isText(i.nodeValue))return i;if(t.input.compositionNode==i){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return i}}return n||i}function WB(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Zv(t,e=!1){if(!(tu&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),n8(t),e||t.docView&&t.docView.dirty){let n=uE(t),i=t.state.selection;return n&&!n.eq(i)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function JB(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const p0=Ls&&Dc<15||gp&&KL<604;as.copy=ls.cut=(t,e)=>{let n=e,i=t.state.selection,r=n.type=="cut";if(i.empty)return;let s=p0?null:n.clipboardData,a=i.content(),{dom:l,text:c}=fE(t,a);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):JB(t,l),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZB(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function $B(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?m0(t,i.value,null,r,e):m0(t,i.textContent,i.innerHTML,r,e)},50)}function m0(t,e,n,i,r){let s=KM(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,r,s||Be.empty)))return!0;if(!s)return!1;let a=ZB(s),l=a?t.state.tr.replaceSelectionWith(a,i):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function i8(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ls.paste=(t,e)=>{let n=e;if(t.composing&&!tu)return;let i=p0?null:n.clipboardData,r=t.input.shiftKey&&t.input.lastKeyCode!=45;i&&m0(t,i8(i),i.getData("text/html"),r,n)?n.preventDefault():$B(t,n)};class r8{constructor(e,n,i){this.slice=e,this.move=n,this.node=i}}const eP=Oa?"altKey":"ctrlKey";function s8(t,e){let n=t.someProp("dragCopies",i=>!i(e));return n??!e[eP]}as.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r=t.state.selection,s=r.empty?null:t.posAtCoords(mx(n)),a;if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof We?r.to-1:r.to))){if(i&&i.mightDrag)a=We.create(t.state.doc,i.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let g=t.docView.nearestDesc(n.target,!0);g&&g.node.type.spec.draggable&&g!=t.docView&&(a=We.create(t.state.doc,g.posBefore))}}let l=(a||t.state.selection).content(),{dom:c,text:d,slice:m}=fE(t,l);(!n.dataTransfer.files.length||!zr||RM>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(p0?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",p0||n.dataTransfer.setData("text/plain",d),t.dragging=new r8(m,s8(t,n),a)};as.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};ls.dragover=ls.dragenter=(t,e)=>e.preventDefault();ls.drop=(t,e)=>{let n=e,i=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let r=t.posAtCoords(mx(n));if(!r)return;let s=t.state.doc.resolve(r.pos),a=i&&i.slice;a?t.someProp("transformPasted",S=>{a=S(a,t,!1)}):a=KM(t,i8(n.dataTransfer),p0?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(i&&s8(t,n));if(t.someProp("handleDrop",S=>S(t,n,a||Be.empty,l))){n.preventDefault();return}if(!a)return;n.preventDefault();let c=a?cM(t.state.doc,s.pos,a):s.pos;c==null&&(c=s.pos);let d=t.state.tr;if(l){let{node:S}=i;S?S.replace(d):d.deleteSelection()}let m=d.mapping.map(c),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,v=d.doc;if(g?d.replaceRangeWith(m,m,a.content.firstChild):d.replaceRange(m,m,a),d.doc.eq(v))return;let x=d.doc.resolve(m);if(g&&We.isSelectable(a.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(a.content.firstChild))d.setSelection(new We(x));else{let S=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((T,k,A,O)=>S=O),d.setSelection(cE(t,x,d.doc.resolve(S)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};as.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&iu(t)},20))};as.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};as.beforeinput=(t,e)=>{if(zr&&tu&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:i}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=i||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,qf(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in ls)as[t]=ls[t];function g0(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class $v{constructor(e,n){this.toDOM=e,this.spec=n||td,this.side=this.spec.side||0}map(e,n,i,r){let{pos:s,deleted:a}=e.mapResult(n.from+r,this.side<0?-1:1);return a?null:new rs(s-i,s-i,this)}valid(){return!0}eq(e){return this==e||e instanceof $v&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&g0(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class jc{constructor(e,n){this.attrs=e,this.spec=n||td}map(e,n,i,r){let s=e.map(n.from+r,this.spec.inclusiveStart?-1:1)-i,a=e.map(n.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=a?null:new rs(s,a,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof jc&&g0(this.attrs,e.attrs)&&g0(this.spec,e.spec)}static is(e){return e.type instanceof jc}destroy(){}}class mE{constructor(e,n){this.attrs=e,this.spec=n||td}map(e,n,i,r){let s=e.mapResult(n.from+r,1);if(s.deleted)return null;let a=e.mapResult(n.to+r,-1);return a.deleted||a.pos<=s.pos?null:new rs(s.pos-i,a.pos-i,this)}valid(e,n){let{index:i,offset:r}=e.content.findIndex(n.from),s;return r==n.from&&!(s=e.child(i)).isText&&r+s.nodeSize==n.to}eq(e){return this==e||e instanceof mE&&g0(this.attrs,e.attrs)&&g0(this.spec,e.spec)}destroy(){}}class rs{constructor(e,n,i){this.from=e,this.to=n,this.type=i}copy(e,n){return new rs(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,i){return this.type.map(e,this,n,i)}static widget(e,n,i){return new rs(e,e,new $v(n,i))}static inline(e,n,i,r){return new rs(e,n,new jc(i,r))}static node(e,n,i,r){return new rs(e,n,new mE(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof jc}get widget(){return this.type instanceof $v}}const ep=[],td={};class Kn{constructor(e,n){this.local=e.length?e:ep,this.children=n.length?n:ep}static create(e,n){return n.length?eb(n,e,0,td):Or}find(e,n,i){let r=[];return this.findInner(e??0,n??1e9,r,0,i),r}findInner(e,n,i,r,s){for(let a=0;a<this.local.length;a++){let l=this.local[a];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&i.push(l.copy(l.from+r,l.to+r))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>e){let l=this.children[a]+1;this.children[a+2].findInner(e-l,n-l,i,r+l,s)}}map(e,n,i){return this==Or||e.maps.length==0?this:this.mapInner(e,n,0,0,i||td)}mapInner(e,n,i,r,s){let a;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,i,r);c&&c.type.valid(n,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?tP(this.children,a||[],e,n,i,r,s):a?new Kn(a.sort(nd),ep):Or}add(e,n){return n.length?this==Or?Kn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,i){let r,s=0;e.forEach((l,c)=>{let d=c+i,m;if(m=o8(n,l,d)){for(r||(r=this.children.slice());s<r.length&&r[s]<c;)s+=3;r[s]==c?r[s+2]=r[s+2].addInner(l,m,d+1):r.splice(s,0,c,c+l.nodeSize,eb(m,l,d+1,td)),s+=3}});let a=a8(s?l8(n):n,-i);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||a.splice(l--,1);return new Kn(a.length?this.local.concat(a).sort(nd):this.local,r||this.children)}remove(e){return e.length==0||this==Or?this:this.removeInner(e,0)}removeInner(e,n){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let a,l=i[s]+n,c=i[s+1]+n;for(let m=0,g;m<e.length;m++)(g=e[m])&&g.from>l&&g.to<c&&(e[m]=null,(a||(a=[])).push(g));if(!a)continue;i==this.children&&(i=this.children.slice());let d=i[s+2].removeInner(a,l+1);d!=Or?i[s+2]=d:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let l=0;l<r.length;l++)r[l].eq(a,n)&&(r==this.local&&(r=this.local.slice()),r.splice(l--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new Kn(r,i):Or}forChild(e,n){if(this==Or)return this;if(n.isLeaf)return Kn.empty;let i,r;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(i=this.children[l+2]);break}let s=e+1,a=s+n.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<a&&c.to>s&&c.type instanceof jc){let d=Math.max(s,c.from)-s,m=Math.min(a,c.to)-s;d<m&&(r||(r=[])).push(c.copy(d,m))}}if(r){let l=new Kn(r.sort(nd),ep);return i?new wc([l,i]):l}return i||Or}eq(e){if(this==e)return!0;if(!(e instanceof Kn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return gE(this.localsInner(e))}localsInner(e){if(this==Or)return ep;if(e.inlineContent||!this.local.some(jc.is))return this.local;let n=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof jc||n.push(this.local[i]);return n}forEachSet(e){e(this)}}Kn.empty=new Kn([],[]);Kn.removeOverlap=gE;const Or=Kn.empty;class wc{constructor(e){this.members=e}map(e,n){const i=this.members.map(r=>r.map(e,n,td));return wc.from(i)}forChild(e,n){if(n.isLeaf)return Kn.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(e,n);s!=Or&&(s instanceof wc?i=i.concat(s.members):i.push(s))}return wc.from(i)}eq(e){if(!(e instanceof wc)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(e);if(s.length)if(!n)n=s;else{i&&(n=n.slice(),i=!1);for(let a=0;a<s.length;a++)n.push(s[a])}}return n?gE(i?n:n.sort(nd)):ep}static from(e){switch(e.length){case 0:return Or;case 1:return e[0];default:return new wc(e.every(n=>n instanceof Kn)?e:e.reduce((n,i)=>n.concat(i instanceof Kn?i:i.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function tP(t,e,n,i,r,s,a){let l=t.slice();for(let d=0,m=s;d<n.maps.length;d++){let g=0;n.maps[d].forEach((v,x,S,T)=>{let k=T-S-(x-v);for(let A=0;A<l.length;A+=3){let O=l[A+1];if(O<0||v>O+m-g)continue;let z=l[A]+m-g;x>=z?l[A+1]=v<=z?-2:-1:v>=m&&k&&(l[A]+=k,l[A+1]+=k)}g+=k}),m=n.maps[d].map(m,-1)}let c=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){c=!0,l[d+1]=-1;continue}let m=n.map(t[d]+s),g=m-r;if(g<0||g>=i.content.size){c=!0;continue}let v=n.map(t[d+1]+s,-1),x=v-r,{index:S,offset:T}=i.content.findIndex(g),k=i.maybeChild(S);if(k&&T==g&&T+k.nodeSize==x){let A=l[d+2].mapInner(n,k,m+1,t[d]+s+1,a);A!=Or?(l[d]=g,l[d+1]=x,l[d+2]=A):(l[d+1]=-2,c=!0)}else c=!0}if(c){let d=nP(l,t,e,n,r,s,a),m=eb(d,i,0,a);e=m.local;for(let g=0;g<l.length;g+=3)l[g+1]<0&&(l.splice(g,3),g-=3);for(let g=0,v=0;g<m.children.length;g+=3){let x=m.children[g];for(;v<l.length&&l[v]<x;)v+=3;l.splice(v,0,m.children[g],m.children[g+1],m.children[g+2])}}return new Kn(e.sort(nd),l)}function a8(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let r=t[i];n.push(new rs(r.from+e,r.to+e,r.type))}return n}function nP(t,e,n,i,r,s,a){function l(c,d){for(let m=0;m<c.local.length;m++){let g=c.local[m].map(i,r,d);g?n.push(g):a.onRemove&&a.onRemove(c.local[m].spec)}for(let m=0;m<c.children.length;m+=3)l(c.children[m+2],c.children[m]+d+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+s+1);return n}function o8(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,r=null;for(let s=0,a;s<t.length;s++)(a=t[s])&&a.from>n&&a.to<i&&((r||(r=[])).push(a),t[s]=null);return r}function l8(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function eb(t,e,n,i){let r=[],s=!1;e.forEach((l,c)=>{let d=o8(t,l,c+n);if(d){s=!0;let m=eb(d,l,n+c+1,i);m!=Or&&r.push(c,c+l.nodeSize,m)}});let a=a8(s?l8(t):t,-n).sort(nd);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||(i.onRemove&&i.onRemove(a[l].spec),a.splice(l--,1));return a.length||r.length?new Kn(a,r):Or}function nd(t,e){return t.from-e.from||t.to-e.to}function gE(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let r=n+1;r<e.length;r++){let s=e[r];if(s.from==i.from){s.to!=i.to&&(e==t&&(e=t.slice()),e[r]=s.copy(s.from,i.to),X5(e,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,s.from),X5(e,r,i.copy(s.from,i.to)));break}}}return e}function X5(t,e,n){for(;e<t.length&&nd(n,t[e])>0;)e++;t.splice(e,0,n)}function $2(t){let e=[];return t.someProp("decorations",n=>{let i=n(t.state);i&&i!=Or&&e.push(i)}),t.cursorWrapper&&e.push(Kn.create(t.state.doc,[t.cursorWrapper.deco])),wc.from(e)}const iP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},rP=Ls&&Dc<=11;class sP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class aP{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new sP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Ls&&Dc<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),rP&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,iP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(H5(this.view)){if(this.suppressingSelectionUpdates)return iu(this.view);if(Ls&&Dc<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ud(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,i;for(let s=e.focusNode;s;s=mp(s))n.add(s);for(let s=e.anchorNode;s;s=mp(s))if(n.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let i=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&H5(e)&&!this.ignoreSelectionChange(i),s=-1,a=-1,l=!1,c=[];if(e.editable)for(let m=0;m<n.length;m++){let g=this.registerMutation(n[m],c);g&&(s=s<0?g.from:Math.min(g.from,s),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(l=!0))}if(Ba&&c.length){let m=c.filter(g=>g.nodeName=="BR");if(m.length==2){let[g,v]=m;g.parentNode&&g.parentNode.parentNode==v.parentNode?v.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let v of m){let x=v.parentNode;x&&x.nodeName=="LI"&&(!g||uP(e,g)!=x)&&v.remove()}}}let d=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&hx(i)&&(d=uE(e))&&d.eq(Ct.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,iu(e),this.currentSelection.set(i),e.scrollToSelection()):(s>-1||r)&&(s>-1&&(e.docView.markDirty(s,a),oP(e)),this.handleDOMChange(s,a,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||iu(e),this.currentSelection.set(i))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let g=e.addedNodes[m];n.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,s=e.nextSibling;if(Ls&&Dc<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:g,nextSibling:v}=e.addedNodes[m];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(r=g),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(s=v)}let a=r&&r.parentNode==e.target?yr(r)+1:0,l=i.localPosFromDOM(e.target,a,-1),c=s&&s.parentNode==e.target?yr(s):e.target.childNodes.length,d=i.localPosFromDOM(e.target,c,1);return{from:l,to:d}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Q5=new WeakMap,W5=!1;function oP(t){if(!Q5.has(t)&&(Q5.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ba,W5)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),W5=!0}}function J5(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return ud(a.node,a.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function lP(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return J5(t,r)}let n;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",i,!0),n?J5(t,n):null}function uP(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let i=t.docView.nearestDesc(n,!0);if(i&&i.node.isBlock)return n}return null}function cP(t,e,n){let{node:i,fromOffset:r,toOffset:s,from:a,to:l}=t.docView.parseRange(e,n),c=t.domSelectionRange(),d,m=c.anchorNode;if(m&&t.dom.contains(m.nodeType==1?m:m.parentNode)&&(d=[{node:m,offset:c.anchorOffset}],hx(c)||d.push({node:c.focusNode,offset:c.focusOffset})),zr&&t.input.lastKeyCode===8)for(let k=s;k>r;k--){let A=i.childNodes[k-1],O=A.pmViewDesc;if(A.nodeName=="BR"&&!O){s=k;break}if(!O||O.size)break}let g=t.state.doc,v=t.someProp("domParser")||Oc.fromSchema(t.state.schema),x=g.resolve(a),S=null,T=v.parse(i,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:r,to:s,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:fP,context:x});if(d&&d[0].pos!=null){let k=d[0].pos,A=d[1]&&d[1].pos;A==null&&(A=k),S={anchor:k+a,head:A+a}}return{doc:T,sel:S,from:a,to:l}}function fP(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ss&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ss&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const dP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function hP(t,e,n,i,r){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let B=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,q=uE(t,B);if(q&&!t.state.selection.eq(q)){if(zr&&tu&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",G=>G(t,qf(13,"Enter"))))return;let $=t.state.tr.setSelection(q);B=="pointer"?$.setMeta("pointer",!0):B=="key"&&$.scrollIntoView(),s&&$.setMeta("composition",s),t.dispatch($)}return}let a=t.state.doc.resolve(e),l=a.sharedDepth(n);e=a.before(l+1),n=t.state.doc.resolve(n).after(l+1);let c=t.state.selection,d=cP(t,e,n),m=t.state.doc,g=m.slice(d.from,d.to),v,x;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(v=t.state.selection.to,x="end"):(v=t.state.selection.from,x="start"),t.input.lastKeyCode=null;let S=gP(g.content,d.doc.content,d.from,v,x);if(S&&t.input.domChangeCount++,(gp&&t.input.lastIOSEnter>Date.now()-225||tu)&&r.some(B=>B.nodeType==1&&!dP.test(B.nodeName))&&(!S||S.endA>=S.endB)&&t.someProp("handleKeyDown",B=>B(t,qf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!S)if(i&&c instanceof st&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))S={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let B=Z5(t,t.state.doc,d.sel);if(B&&!B.eq(t.state.selection)){let q=t.state.tr.setSelection(B);s&&q.setMeta("composition",s),t.dispatch(q)}}return}t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof st&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),Ls&&Dc<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>d.from&&d.doc.textBetween(S.start-d.from-1,S.start-d.from+1)==" "&&(S.start--,S.endA--,S.endB--);let T=d.doc.resolveNoCache(S.start-d.from),k=d.doc.resolveNoCache(S.endB-d.from),A=m.resolve(S.start),O=T.sameParent(k)&&T.parent.inlineContent&&A.end()>=S.endA;if((gp&&t.input.lastIOSEnter>Date.now()-225&&(!O||r.some(B=>B.nodeName=="DIV"||B.nodeName=="P"))||!O&&T.pos<d.doc.content.size&&(!T.sameParent(k)||!T.parent.inlineContent)&&T.pos<k.pos&&!/\S/.test(d.doc.textBetween(T.pos,k.pos,"","")))&&t.someProp("handleKeyDown",B=>B(t,qf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>S.start&&mP(m,S.start,S.endA,T,k)&&t.someProp("handleKeyDown",B=>B(t,qf(8,"Backspace")))){tu&&zr&&t.domObserver.suppressSelectionUpdates();return}zr&&S.endB==S.start&&(t.input.lastChromeDelete=Date.now()),tu&&!O&&T.start()!=k.start()&&k.parentOffset==0&&T.depth==k.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==S.endA&&(S.endB-=2,k=d.doc.resolveNoCache(S.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(B){return B(t,qf(13,"Enter"))})},20));let z=S.start,L=S.endA,I=B=>{let q=B||t.state.tr.replace(z,L,d.doc.slice(S.start-d.from,S.endB-d.from));if(d.sel){let $=Z5(t,q.doc,d.sel);$&&!(zr&&t.composing&&$.empty&&(S.start!=S.endB||t.input.lastChromeDelete<Date.now()-100)&&($.head==z||$.head==q.mapping.map(L)-1)||Ls&&$.empty&&$.head==z)&&q.setSelection($)}return s&&q.setMeta("composition",s),q.scrollIntoView()},j;if(O)if(T.pos==k.pos){Ls&&Dc<=11&&T.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>iu(t),20));let B=I(t.state.tr.delete(z,L)),q=m.resolve(S.start).marksAcross(m.resolve(S.endA));q&&B.ensureMarks(q),t.dispatch(B)}else if(S.endA==S.endB&&(j=pP(T.parent.content.cut(T.parentOffset,k.parentOffset),A.parent.content.cut(A.parentOffset,S.endA-A.start())))){let B=I(t.state.tr);j.type=="add"?B.addMark(z,L,j.mark):B.removeMark(z,L,j.mark),t.dispatch(B)}else if(T.parent.child(T.index()).isText&&T.index()==k.index()-(k.textOffset?0:1)){let B=T.parent.textBetween(T.parentOffset,k.parentOffset),q=()=>I(t.state.tr.insertText(B,z,L));t.someProp("handleTextInput",$=>$(t,z,L,B,q))||t.dispatch(q())}else t.dispatch(I());else t.dispatch(I())}function Z5(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:cE(t,e.resolve(n.anchor),e.resolve(n.head))}function pP(t,e){let n=t.firstChild.marks,i=e.firstChild.marks,r=n,s=i,a,l,c;for(let m=0;m<i.length;m++)r=i[m].removeFromSet(r);for(let m=0;m<n.length;m++)s=n[m].removeFromSet(s);if(r.length==1&&s.length==0)l=r[0],a="add",c=m=>m.mark(l.addToSet(m.marks));else if(r.length==0&&s.length==1)l=s[0],a="remove",c=m=>m.mark(l.removeFromSet(m.marks));else return null;let d=[];for(let m=0;m<e.childCount;m++)d.push(c(e.child(m)));if(Ee.from(d).eq(t))return{mark:l,type:a}}function mP(t,e,n,i,r){if(n-e<=r.pos-i.pos||eS(i,!0,!1)<r.pos)return!1;let s=t.resolve(e);if(!i.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=t.resolve(eS(s,!0,!0));return!a.parent.isTextblock||a.pos>n||eS(a,!0,!1)<n?!1:i.parent.content.cut(i.parentOffset).eq(a.parent.content)}function eS(t,e,n){let i=t.depth,r=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n){let s=t.node(i).maybeChild(t.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function gP(t,e,n,i,r){let s=t.findDiffStart(e,n);if(s==null)return null;let{a,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(r=="end"){let c=Math.max(0,s-Math.min(a,l));i-=a+c-s}if(a<s&&t.size<e.size){let c=i<=s&&i>=a?s-i:0;s-=c,s&&s<e.size&&$5(e.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-a),a=s}else if(l<s){let c=i<=s&&i>=l?s-i:0;s-=c,s&&s<t.size&&$5(t.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-l),l=s}return{start:s,endA:a,endB:l}}function $5(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class u8{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new jB,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(rT),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=nT(this),tT(this),this.nodeViews=iT(this),this.docView=z5(this.state.doc,eT(this),$2(this),this.dom,this),this.domObserver=new aP(this,(i,r,s,a)=>hP(this,i,r,s,a)),this.domObserver.start(),LB(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&LC(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(rT),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let i in this._props)n[i]=this._props[i];n.state=this.state;for(let i in e)n[i]=e[i];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var i;let r=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(n8(this),a=!0),this.state=e;let l=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let x=iT(this);vP(x,this.nodeViews)&&(this.nodeViews=x,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&LC(this),this.editable=nT(this),tT(this);let c=$2(this),d=eT(this),m=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,d,c);(g||!e.selection.eq(r.selection))&&(a=!0);let v=m=="preserve"&&a&&this.dom.style.overflowAnchor==null&&WL(this);if(a){this.domObserver.stop();let x=g&&(Ls||zr)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&yP(r.selection,e.selection);if(g){let S=zr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=QB(this)),(s||!this.docView.update(e.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=z5(e.doc,d,c,this.dom,this)),S&&!this.trackWrites&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xB(this))?iu(this,x):(qM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():v&&JL(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof We){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&M5(this,n.getBoundingClientRect(),e)}else M5(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let i=this.state.plugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let i=this.pluginViews[n];i.update&&i.update(this,e)}}updateDraggedNode(e,n){let i=e.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let s=i.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==i.node&&(r=s)}this.dragging=new r8(e.slice,e.move,r<0?void 0:We.create(this.state.doc,r))}someProp(e,n){let i=this._props&&this._props[e],r;if(i!=null&&(r=n?n(i):i))return r;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[e];if(l!=null&&(r=n?n(l):l))return r}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let l=s[a].props[e];if(l!=null&&(r=n?n(l):l))return r}}hasFocus(){if(Ls){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&ZL(this.dom),iu(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return iB(this,e)}coordsAtPos(e,n=1){return LM(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,i=-1){let r=this.docView.posFromDOM(e,n,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,n){return lB(this,n||this.state,e)}pasteHTML(e,n){return m0(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return m0(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return fE(this,e)}destroy(){this.docView&&(BB(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],$2(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,IL())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return IB(this,e)}domSelectionRange(){let e=this.domSelection();return e?ss&&this.root.nodeType===11&&qL(this.dom.ownerDocument)==this.dom&&lP(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}u8.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function eT(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let i in n)i=="class"?e.class+=" "+n[i]:i=="style"?e.style=(e.style?e.style+";":"")+n[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(n[i]))}),e.translate||(e.translate="no"),[rs.node(0,t.state.doc.content.size,e)]}function tT(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:rs.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function nT(t){return!t.someProp("editable",e=>e(t.state)===!1)}function yP(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function iT(t){let e=Object.create(null);function n(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function vP(t,e){let n=0,i=0;for(let r in t){if(t[r]!=e[r])return!0;n++}for(let r in e)i++;return n!=i}function rT(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Lc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},tb={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bP=typeof navigator<"u"&&/Mac/.test(navigator.platform),xP=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vr=0;vr<10;vr++)Lc[48+vr]=Lc[96+vr]=String(vr);for(var vr=1;vr<=24;vr++)Lc[vr+111]="F"+vr;for(var vr=65;vr<=90;vr++)Lc[vr]=String.fromCharCode(vr+32),tb[vr]=String.fromCharCode(vr);for(var tS in Lc)tb.hasOwnProperty(tS)||(tb[tS]=Lc[tS]);function SP(t){var e=bP&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||xP&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?tb:Lc)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const CP=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),wP=typeof navigator<"u"&&/Win/.test(navigator.platform);function EP(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let i,r,s,a;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))CP?a=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(n="Alt-"+n),r&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function TP(t){let e=Object.create(null);for(let n in t)e[EP(n)]=t[n];return e}function nS(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function _P(t){return new Wn({props:{handleKeyDown:c8(t)}})}function c8(t){let e=TP(t);return function(n,i){let r=SP(i),s,a=e[nS(r,i)];if(a&&a(n.state,n.dispatch,n))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let l=e[nS(r,i,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(wP&&i.ctrlKey&&i.altKey)&&(s=Lc[i.keyCode])&&s!=r){let l=e[nS(s,i)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}var kP=Object.defineProperty,yE=(t,e)=>{for(var n in e)kP(t,n,{get:e[n],enumerable:!0})};function gx(t){const{state:e,transaction:n}=t;let{selection:i}=n,{doc:r}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return i},get doc(){return r},get tr(){return i=n.selection,r=n.doc,s=n.storedMarks,n}}}var yx=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:i}=e,{tr:r}=n,s=this.buildProps(r);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...d)=>{const m=l(...d)(s);return!r.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(r),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:i,state:r}=this,{view:s}=i,a=[],l=!!t,c=t||r.tr,d=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(g=>g===!0)),m={...Object.fromEntries(Object.entries(n).map(([g,v])=>[g,(...S)=>{const T=this.buildProps(c,e),k=v(...S)(T);return a.push(k),m}])),run:d};return m}createCan(t){const{rawCommands:e,state:n}=this,i=!1,r=t||n.tr,s=this.buildProps(r,i);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(r,i)}}buildProps(t,e=!0){const{rawCommands:n,editor:i,state:r}=this,{view:s}=i,a={tr:t,editor:i,view:s,state:gx({state:r,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}},f8={};yE(f8,{blur:()=>MP,clearContent:()=>AP,clearNodes:()=>NP,command:()=>RP,createParagraphNear:()=>OP,cut:()=>DP,deleteCurrentNode:()=>zP,deleteNode:()=>jP,deleteRange:()=>LP,deleteSelection:()=>BP,enter:()=>PP,exitCode:()=>IP,extendMarkRange:()=>HP,first:()=>UP,focus:()=>GP,forEach:()=>qP,insertContent:()=>VP,insertContentAt:()=>XP,joinBackward:()=>JP,joinDown:()=>WP,joinForward:()=>ZP,joinItemBackward:()=>$P,joinItemForward:()=>eI,joinTextblockBackward:()=>tI,joinTextblockForward:()=>nI,joinUp:()=>QP,keyboardShortcut:()=>rI,lift:()=>sI,liftEmptyBlock:()=>aI,liftListItem:()=>oI,newlineInCode:()=>lI,resetAttributes:()=>uI,scrollIntoView:()=>cI,selectAll:()=>fI,selectNodeBackward:()=>dI,selectNodeForward:()=>hI,selectParentNode:()=>pI,selectTextblockEnd:()=>mI,selectTextblockStart:()=>gI,setContent:()=>yI,setMark:()=>jI,setMeta:()=>LI,setNode:()=>BI,setNodeSelection:()=>PI,setTextDirection:()=>II,setTextSelection:()=>HI,sinkListItem:()=>UI,splitBlock:()=>FI,splitListItem:()=>GI,toggleList:()=>qI,toggleMark:()=>VI,toggleNode:()=>YI,toggleWrap:()=>KI,undoInputRule:()=>XI,unsetAllMarks:()=>QI,unsetMark:()=>WI,unsetTextDirection:()=>JI,updateAttributes:()=>ZI,wrapIn:()=>$I,wrapInList:()=>eH});var MP=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),AP=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),NP=()=>({state:t,tr:e,dispatch:n})=>{const{selection:i}=e,{ranges:r}=i;return n&&r.forEach(({$from:s,$to:a})=>{t.doc.nodesBetween(s.pos,a.pos,(l,c)=>{if(l.type.isText)return;const{doc:d,mapping:m}=e,g=d.resolve(m.map(c)),v=d.resolve(m.map(c+l.nodeSize)),x=g.blockRange(v);if(!x)return;const S=kp(x);if(l.type.isTextblock){const{defaultType:T}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(x.start,T)}(S||S===0)&&e.lift(x,S)})}),!0},RP=t=>e=>t(e),OP=()=>({state:t,dispatch:e})=>_M(t,e),DP=(t,e)=>({editor:n,tr:i})=>{const{state:r}=n,s=r.doc.slice(t.from,t.to);i.deleteRange(t.from,t.to);const a=i.mapping.map(e);return i.insert(a,s.content),i.setSelection(new st(i.doc.resolve(Math.max(a-1,0)))),!0},zP=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,i=n.$anchor.node();if(i.content.size>0)return!1;const r=t.selection.$anchor;for(let s=r.depth;s>0;s-=1)if(r.node(s).type===i.type){if(e){const l=r.before(s),c=r.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1};function ki(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var jP=t=>({tr:e,state:n,dispatch:i})=>{const r=ki(t,n.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===r){if(i){const c=s.before(a),d=s.after(a);e.delete(c,d).scrollIntoView()}return!0}return!1},LP=t=>({tr:e,dispatch:n})=>{const{from:i,to:r}=t;return n&&e.delete(i,r),!0},BP=()=>({state:t,dispatch:e})=>iE(t,e),PP=()=>({commands:t})=>t.keyboardShortcut("Enter"),IP=()=>({state:t,dispatch:e})=>EL(t,e);function vE(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function nb(t,e,n={strict:!0}){const i=Object.keys(e);return i.length?i.every(r=>n.strict?e[r]===t[r]:vE(e[r])?e[r].test(t[r]):e[r]===t[r]):!0}function d8(t,e,n={}){return t.find(i=>i.type===e&&nb(Object.fromEntries(Object.keys(n).map(r=>[r,i.attrs[r]])),n))}function sT(t,e,n={}){return!!d8(t,e,n)}function bE(t,e,n){var i;if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if((!r.node||!r.node.marks.some(m=>m.type===e))&&(r=t.parent.childBefore(t.parentOffset)),!r.node||!r.node.marks.some(m=>m.type===e)||(n=n||((i=r.node.marks[0])==null?void 0:i.attrs),!d8([...r.node.marks],e,n)))return;let a=r.index,l=t.start()+r.offset,c=a+1,d=l+r.node.nodeSize;for(;a>0&&sT([...t.parent.child(a-1).marks],e,n);)a-=1,l-=t.parent.child(a).nodeSize;for(;c<t.parent.childCount&&sT([...t.parent.child(c).marks],e,n);)d+=t.parent.child(c).nodeSize,c+=1;return{from:l,to:d}}function fu(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var HP=(t,e={})=>({tr:n,state:i,dispatch:r})=>{const s=fu(t,i.schema),{doc:a,selection:l}=n,{$from:c,from:d,to:m}=l;if(r){const g=bE(c,s,e);if(g&&g.from<=d&&g.to>=m){const v=st.create(a,g.from,g.to);n.setSelection(v)}}return!0},UP=t=>e=>{const n=typeof t=="function"?t(e):t;for(let i=0;i<n.length;i+=1)if(n[i](e))return!0;return!1};function h8(t){return t instanceof st}function Xf(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function p8(t,e=null){if(!e)return null;const n=Ct.atStart(t),i=Ct.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return i;const r=n.from,s=i.to;return e==="all"?st.create(t,Xf(0,r,s),Xf(t.content.size,r,s)):st.create(t,Xf(e,r,s),Xf(e,r,s))}function FP(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function xE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var GP=(t=null,e={})=>({editor:n,view:i,tr:r,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(xE()||FP())&&i.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(i.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!h8(n.state.selection))return a(),!0;const l=p8(r.doc,t)||n.state.selection,c=n.state.selection.eq(l);return s&&(c||r.setSelection(l),c&&r.storedMarks&&r.setStoredMarks(r.storedMarks),a()),!0},qP=(t,e)=>n=>t.every((i,r)=>e(i,{...n,index:r})),VP=(t,e)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),m8=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const i=e[n];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?t.removeChild(i):i.nodeType===1&&m8(i)}return t};function Y1(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return m8(n)}function y0(t,e,n){if(t instanceof Rc||t instanceof Ee)return t;n={slice:!0,parseOptions:{},...n};const i=typeof t=="object"&&t!==null,r=typeof t=="string";if(i)try{if(Array.isArray(t)&&t.length>0)return Ee.fromArray(t.map(l=>e.nodeFromJSON(l)));const a=e.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),y0("",e,n)}if(r){if(n.errorOnInvalidContent){let a=!1,l="";const c=new $6({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(a=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Oc.fromSchema(c).parseSlice(Y1(t),n.parseOptions):Oc.fromSchema(c).parse(Y1(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Oc.fromSchema(e);return n.slice?s.parseSlice(Y1(t),n.parseOptions).content:s.parse(Y1(t),n.parseOptions)}return y0("",e,n)}function YP(t,e,n){const i=t.steps.length-1;if(i<e)return;const r=t.steps[i];if(!(r instanceof Wi||r instanceof Ji))return;const s=t.mapping.maps[i];let a=0;s.forEach((l,c,d,m)=>{a===0&&(a=m)}),t.setSelection(Ct.near(t.doc.resolve(a),n))}var KP=t=>!("type"in t),XP=(t,e,n)=>({tr:i,dispatch:r,editor:s})=>{var a;if(r){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const c=k=>{s.emit("contentError",{editor:s,error:k,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{y0(e,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(k){c(k)}try{l=y0(e,s.schema,{parseOptions:d,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:s.options.enableContentCheck})}catch(k){return c(k),!1}let{from:m,to:g}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},v=!0,x=!0;if((KP(l)?l:[l]).forEach(k=>{k.check(),v=v?k.isText&&k.marks.length===0:!1,x=x?k.isBlock:!1}),m===g&&x){const{parent:k}=i.doc.resolve(m);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(m-=1,g+=1)}let T;if(v){if(Array.isArray(e))T=e.map(k=>k.text||"").join("");else if(e instanceof Ee){let k="";e.forEach(A=>{A.text&&(k+=A.text)}),T=k}else typeof e=="object"&&e&&e.text?T=e.text:T=e;i.insertText(T,m,g)}else{T=l;const k=i.doc.resolve(m),A=k.node(),O=k.parentOffset===0,z=A.isText||A.isTextblock,L=A.content.size>0;O&&z&&L&&(m=Math.max(0,m-1)),i.replaceWith(m,g,T)}n.updateSelection&&YP(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:m,text:T}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:m,text:T})}return!0},QP=()=>({state:t,dispatch:e})=>SL(t,e),WP=()=>({state:t,dispatch:e})=>CL(t,e),JP=()=>({state:t,dispatch:e})=>bM(t,e),ZP=()=>({state:t,dispatch:e})=>wM(t,e),$P=()=>({state:t,dispatch:e,tr:n})=>{try{const i=cx(t.doc,t.selection.$from.pos,-1);return i==null?!1:(n.join(i,2),e&&e(n),!0)}catch{return!1}},eI=()=>({state:t,dispatch:e,tr:n})=>{try{const i=cx(t.doc,t.selection.$from.pos,1);return i==null?!1:(n.join(i,2),e&&e(n),!0)}catch{return!1}},tI=()=>({state:t,dispatch:e})=>bL(t,e),nI=()=>({state:t,dispatch:e})=>xL(t,e);function g8(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function iI(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let i,r,s,a;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))xE()||g8()?a=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return i&&(n=`Alt-${n}`),r&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var rI=t=>({editor:e,view:n,tr:i,dispatch:r})=>{const s=iI(t).split(/-(?!$)/),a=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return c?.steps.forEach(d=>{const m=d.map(i.mapping);m&&r&&i.maybeStep(m)}),!0};function Bc(t,e,n={}){const{from:i,to:r,empty:s}=t.selection,a=e?ki(e,t.schema):null,l=[];t.doc.nodesBetween(i,r,(g,v)=>{if(g.isText)return;const x=Math.max(i,v),S=Math.min(r,v+g.nodeSize);l.push({node:g,from:x,to:S})});const c=r-i,d=l.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>nb(g.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((g,v)=>g+v.to-v.from,0)>=c}var sI=(t,e={})=>({state:n,dispatch:i})=>{const r=ki(t,n.schema);return Bc(n,r,e)?wL(n,i):!1},aI=()=>({state:t,dispatch:e})=>kM(t,e),oI=t=>({state:e,dispatch:n})=>{const i=ki(t,e.schema);return jL(i)(e,n)},lI=()=>({state:t,dispatch:e})=>TM(t,e);function vx(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function aT(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((i,r)=>(n.includes(r)||(i[r]=t[r]),i),{})}var uI=(t,e)=>({tr:n,state:i,dispatch:r})=>{let s=null,a=null;const l=vx(typeof t=="string"?t:t.name,i.schema);if(!l)return!1;l==="node"&&(s=ki(t,i.schema)),l==="mark"&&(a=fu(t,i.schema));let c=!1;return n.selection.ranges.forEach(d=>{i.doc.nodesBetween(d.$from.pos,d.$to.pos,(m,g)=>{s&&s===m.type&&(c=!0,r&&n.setNodeMarkup(g,void 0,aT(m.attrs,e))),a&&m.marks.length&&m.marks.forEach(v=>{a===v.type&&(c=!0,r&&n.addMark(g,g+m.nodeSize,a.create(aT(v.attrs,e))))})})}),c},cI=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),fI=()=>({tr:t,dispatch:e})=>{if(e){const n=new Js(t.doc);t.setSelection(n)}return!0},dI=()=>({state:t,dispatch:e})=>SM(t,e),hI=()=>({state:t,dispatch:e})=>EM(t,e),pI=()=>({state:t,dispatch:e})=>kL(t,e),mI=()=>({state:t,dispatch:e})=>NL(t,e),gI=()=>({state:t,dispatch:e})=>AL(t,e);function BC(t,e,n={},i={}){return y0(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:i.errorOnInvalidContent})}var yI=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:i={}}={})=>({editor:r,tr:s,dispatch:a,commands:l})=>{const{doc:c}=s;if(i.preserveWhitespace!=="full"){const d=BC(t,r.schema,i,{errorOnInvalidContent:e??r.options.enableContentCheck});return a&&s.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!n),!0}return a&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:i,errorOnInvalidContent:e??r.options.enableContentCheck})};function y8(t,e){const n=fu(e,t.schema),{from:i,to:r,empty:s}=t.selection,a=[];s?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(i,r,c=>{a.push(...c.marks)});const l=a.find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function v8(t,e){const n=new mM(t);return e.forEach(i=>{i.steps.forEach(r=>{n.step(r)})}),n}function vI(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function bI(t,e,n){const i=[];return t.nodesBetween(e.from,e.to,(r,s)=>{n(r)&&i.push({node:r,pos:s})}),i}function xI(t,e){for(let n=t.depth;n>0;n-=1){const i=t.node(n);if(e(i))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:i}}}function bx(t){return e=>xI(e.$from,t)}function Ke(t,e,n){return t.config[e]===void 0&&t.parent?Ke(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ke(t.parent,e,n):null}):t.config[e]}function SE(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},i=Ke(e,"addExtensions",n);return i?[e,...SE(i())]:e}).flat(10)}function CE(t,e){const n=yd.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function b8(t){return typeof t=="function"}function Xt(t,e=void 0,...n){return b8(t)?e?t.bind(e)(...n):t(...n):t}function SI(t={}){return Object.keys(t).length===0&&t.constructor===Object}function yp(t){const e=t.filter(r=>r.type==="extension"),n=t.filter(r=>r.type==="node"),i=t.filter(r=>r.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:i}}function x8(t){const e=[],{nodeExtensions:n,markExtensions:i}=yp(t),r=[...n,...i],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(a=>{const l={name:a.name,options:a.options,storage:a.storage,extensions:r},c=Ke(a,"addGlobalAttributes",l);if(!c)return;c().forEach(m=>{m.types.forEach(g=>{Object.entries(m.attributes).forEach(([v,x])=>{e.push({type:g,name:v,attribute:{...s,...x}})})})})}),r.forEach(a=>{const l={name:a.name,options:a.options,storage:a.storage},c=Ke(a,"addAttributes",l);if(!c)return;const d=c();Object.entries(d).forEach(([m,g])=>{const v={...s,...g};typeof v?.default=="function"&&(v.default=v.default()),v?.isRequired&&v?.default===void 0&&delete v.default,e.push({type:a.name,name:m,attribute:v})})}),e}function Mi(...t){return t.filter(e=>!!e).reduce((e,n)=>{const i={...e};return Object.entries(n).forEach(([r,s])=>{if(!i[r]){i[r]=s;return}if(r==="class"){const l=s?String(s).split(" "):[],c=i[r]?i[r].split(" "):[],d=l.filter(m=>!c.includes(m));i[r]=[...c,...d].join(" ")}else if(r==="style"){const l=s?s.split(";").map(m=>m.trim()).filter(Boolean):[],c=i[r]?i[r].split(";").map(m=>m.trim()).filter(Boolean):[],d=new Map;c.forEach(m=>{const[g,v]=m.split(":").map(x=>x.trim());d.set(g,v)}),l.forEach(m=>{const[g,v]=m.split(":").map(x=>x.trim());d.set(g,v)}),i[r]=Array.from(d.entries()).map(([m,g])=>`${m}: ${g}`).join("; ")}else i[r]=s}),i},{})}function ib(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,i)=>Mi(n,i),{})}function CI(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function oT(t,e){return"style"in t?t:{...t,getAttrs:n=>{const i=t.getAttrs?t.getAttrs(n):t.attrs;if(i===!1)return!1;const r=e.reduce((s,a)=>{const l=a.attribute.parseHTML?a.attribute.parseHTML(n):CI(n.getAttribute(a.name));return l==null?s:{...s,[a.name]:l}},{});return{...i,...r}}}}function lT(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&SI(n)?!1:n!=null))}function uT(t){var e,n;const i={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(i.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(i.validate=t.attribute.validate),[t.name,i]}function wI(t,e){var n;const i=x8(t),{nodeExtensions:r,markExtensions:s}=yp(t),a=(n=r.find(d=>Ke(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(r.map(d=>{const m=i.filter(A=>A.type===d.name),g={name:d.name,options:d.options,storage:d.storage,editor:e},v=t.reduce((A,O)=>{const z=Ke(O,"extendNodeSchema",g);return{...A,...z?z(d):{}}},{}),x=lT({...v,content:Xt(Ke(d,"content",g)),marks:Xt(Ke(d,"marks",g)),group:Xt(Ke(d,"group",g)),inline:Xt(Ke(d,"inline",g)),atom:Xt(Ke(d,"atom",g)),selectable:Xt(Ke(d,"selectable",g)),draggable:Xt(Ke(d,"draggable",g)),code:Xt(Ke(d,"code",g)),whitespace:Xt(Ke(d,"whitespace",g)),linebreakReplacement:Xt(Ke(d,"linebreakReplacement",g)),defining:Xt(Ke(d,"defining",g)),isolating:Xt(Ke(d,"isolating",g)),attrs:Object.fromEntries(m.map(uT))}),S=Xt(Ke(d,"parseHTML",g));S&&(x.parseDOM=S.map(A=>oT(A,m)));const T=Ke(d,"renderHTML",g);T&&(x.toDOM=A=>T({node:A,HTMLAttributes:ib(A,m)}));const k=Ke(d,"renderText",g);return k&&(x.toText=k),[d.name,x]})),c=Object.fromEntries(s.map(d=>{const m=i.filter(k=>k.type===d.name),g={name:d.name,options:d.options,storage:d.storage,editor:e},v=t.reduce((k,A)=>{const O=Ke(A,"extendMarkSchema",g);return{...k,...O?O(d):{}}},{}),x=lT({...v,inclusive:Xt(Ke(d,"inclusive",g)),excludes:Xt(Ke(d,"excludes",g)),group:Xt(Ke(d,"group",g)),spanning:Xt(Ke(d,"spanning",g)),code:Xt(Ke(d,"code",g)),attrs:Object.fromEntries(m.map(uT))}),S=Xt(Ke(d,"parseHTML",g));S&&(x.parseDOM=S.map(k=>oT(k,m)));const T=Ke(d,"renderHTML",g);return T&&(x.toDOM=k=>T({mark:k,HTMLAttributes:ib(k,m)})),[d.name,x]}));return new $6({topNode:a,nodes:l,marks:c})}function EI(t){const e=t.filter((n,i)=>t.indexOf(n)!==i);return Array.from(new Set(e))}function wE(t){return t.sort((n,i)=>{const r=Ke(n,"priority")||100,s=Ke(i,"priority")||100;return r>s?-1:r<s?1:0})}function S8(t){const e=wE(SE(t)),n=EI(e.map(i=>i.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),e}function C8(t,e,n){const{from:i,to:r}=e,{blockSeparator:s=`

`,textSerializers:a={}}=n||{};let l="";return t.nodesBetween(i,r,(c,d,m,g)=>{var v;c.isBlock&&d>i&&(l+=s);const x=a?.[c.type.name];if(x)return m&&(l+=x({node:c,pos:d,parent:m,index:g,range:e})),!1;c.isText&&(l+=(v=c?.text)==null?void 0:v.slice(Math.max(i,d)-d,r-d))}),l}function TI(t,e){const n={from:0,to:t.content.size};return C8(t,n,e)}function w8(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function _I(t,e){const n=ki(e,t.schema),{from:i,to:r}=t.selection,s=[];t.doc.nodesBetween(i,r,l=>{s.push(l)});const a=s.reverse().find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function E8(t,e){const n=vx(typeof e=="string"?e:e.name,t.schema);return n==="node"?_I(t,e):n==="mark"?y8(t,e):{}}function kI(t,e=JSON.stringify){const n={};return t.filter(i=>{const r=e(i);return Object.prototype.hasOwnProperty.call(n,r)?!1:n[r]=!0})}function MI(t){const e=kI(t);return e.length===1?e:e.filter((n,i)=>!e.filter((s,a)=>a!==i).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function T8(t){const{mapping:e,steps:n}=t,i=[];return e.maps.forEach((r,s)=>{const a=[];if(r.ranges.length)r.forEach((l,c)=>{a.push({from:l,to:c})});else{const{from:l,to:c}=n[s];if(l===void 0||c===void 0)return;a.push({from:l,to:c})}a.forEach(({from:l,to:c})=>{const d=e.slice(s).map(l,-1),m=e.slice(s).map(c),g=e.invert().map(d,-1),v=e.invert().map(m);i.push({oldRange:{from:g,to:v},newRange:{from:d,to:m}})})}),MI(i)}function EE(t,e,n){const i=[];return t===e?n.resolve(t).marks().forEach(r=>{const s=n.resolve(t),a=bE(s,r.type);a&&i.push({mark:r,...a})}):n.nodesBetween(t,e,(r,s)=>{!r||r?.nodeSize===void 0||i.push(...r.marks.map(a=>({from:s,to:s+r.nodeSize,mark:a})))}),i}var AI=(t,e,n,i=20)=>{const r=t.doc.resolve(n);let s=i,a=null;for(;s>0&&a===null;){const l=r.node(s);l?.type.name===e?a=l:s-=1}return[a,s]};function iS(t,e){return e.nodes[t]||e.marks[t]||null}function Mv(t,e,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const r=t.find(s=>s.type===e&&s.name===i);return r?r.attribute.keepOnSplit:!1}))}var NI=(t,e=500)=>{let n="";const i=t.parentOffset;return t.parent.nodesBetween(Math.max(0,i-e),i,(r,s,a,l)=>{var c,d;const m=((d=(c=r.type.spec).toText)==null?void 0:d.call(c,{node:r,pos:s,parent:a,index:l}))||r.textContent||"%leaf%";n+=r.isAtom&&!r.isText?m:m.slice(0,Math.max(0,i-s))}),n};function PC(t,e,n={}){const{empty:i,ranges:r}=t.selection,s=e?fu(e,t.schema):null;if(i)return!!(t.storedMarks||t.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>nb(g.attrs,n,{strict:!1}));let a=0;const l=[];if(r.forEach(({$from:g,$to:v})=>{const x=g.pos,S=v.pos;t.doc.nodesBetween(x,S,(T,k)=>{if(!T.isText&&!T.marks.length)return;const A=Math.max(x,k),O=Math.min(S,k+T.nodeSize),z=O-A;a+=z,l.push(...T.marks.map(L=>({mark:L,from:A,to:O})))})}),a===0)return!1;const c=l.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>nb(g.mark.attrs,n,{strict:!1})).reduce((g,v)=>g+v.to-v.from,0),d=l.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,v)=>g+v.to-v.from,0);return(c>0?c+d:c)>=a}function RI(t,e,n={}){if(!e)return Bc(t,null,n)||PC(t,null,n);const i=vx(e,t.schema);return i==="node"?Bc(t,e,n):i==="mark"?PC(t,e,n):!1}var OI=(t,e)=>{const{$from:n,$to:i,$anchor:r}=t.selection;if(e){const s=bx(l=>l.type.name===e)(t.selection);if(!s)return!1;const a=t.doc.resolve(s.pos+1);return r.pos+1===a.end()}return!(i.parentOffset<i.parent.nodeSize-2||n.pos!==i.pos)},DI=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function cT(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function fT(t,e){const{nodeExtensions:n}=yp(e),i=n.find(a=>a.name===t);if(!i)return!1;const r={name:i.name,options:i.options,storage:i.storage},s=Xt(Ke(i,"group",r));return typeof s!="string"?!1:s.split(" ").includes("list")}function xx(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var i;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((i=t.text)!=null?i:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let r=!0;return t.content.forEach(s=>{r!==!1&&(xx(s,{ignoreWhitespace:n,checkChildren:e})||(r=!1))}),r}return!1}function _8(t){return t instanceof We}function zI(t,e,n){var i;const{selection:r}=e;let s=null;if(h8(r)&&(s=r.$cursor),s){const l=(i=t.storedMarks)!=null?i:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:a}=r;return a.some(({$from:l,$to:c})=>{let d=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,c.pos,(m,g,v)=>{if(d)return!1;if(m.isInline){const x=!v||v.type.allowsMarkType(n),S=!!n.isInSet(m.marks)||!m.marks.some(T=>T.type.excludes(n));d=x&&S}return!d}),d})}var jI=(t,e={})=>({tr:n,state:i,dispatch:r})=>{const{selection:s}=n,{empty:a,ranges:l}=s,c=fu(t,i.schema);if(r)if(a){const d=y8(i,c);n.addStoredMark(c.create({...d,...e}))}else l.forEach(d=>{const m=d.$from.pos,g=d.$to.pos;i.doc.nodesBetween(m,g,(v,x)=>{const S=Math.max(x,m),T=Math.min(x+v.nodeSize,g);v.marks.find(A=>A.type===c)?v.marks.forEach(A=>{c===A.type&&n.addMark(S,T,c.create({...A.attrs,...e}))}):n.addMark(S,T,c.create(e))})});return zI(i,n,c)},LI=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),BI=(t,e={})=>({state:n,dispatch:i,chain:r})=>{const s=ki(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),s.isTextblock?r().command(({commands:l})=>T5(s,{...a,...e})(n)?!0:l.clearNodes()).command(({state:l})=>T5(s,{...a,...e})(l,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},PI=t=>({tr:e,dispatch:n})=>{if(n){const{doc:i}=e,r=Xf(t,0,i.content.size),s=We.create(i,r);e.setSelection(s)}return!0},II=(t,e)=>({tr:n,state:i,dispatch:r})=>{const{selection:s}=i;let a,l;return typeof e=="number"?(a=e,l=e):e&&"from"in e&&"to"in e?(a=e.from,l=e.to):(a=s.from,l=s.to),r&&n.doc.nodesBetween(a,l,(c,d)=>{c.isText||n.setNodeMarkup(d,void 0,{...c.attrs,dir:t})}),!0},HI=t=>({tr:e,dispatch:n})=>{if(n){const{doc:i}=e,{from:r,to:s}=typeof t=="number"?{from:t,to:t}:t,a=st.atStart(i).from,l=st.atEnd(i).to,c=Xf(r,a,l),d=Xf(s,a,l),m=st.create(i,c,d);e.setSelection(m)}return!0},UI=t=>({state:e,dispatch:n})=>{const i=ki(t,e.schema);return PL(i)(e,n)};function dT(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const i=n.filter(r=>e?.includes(r.type.name));t.tr.ensureMarks(i)}}var FI=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:i,editor:r})=>{const{selection:s,doc:a}=e,{$from:l,$to:c}=s,d=r.extensionManager.attributes,m=Mv(d,l.node().type.name,l.node().attrs);if(s instanceof We&&s.node.isBlock)return!l.parentOffset||!nu(a,l.pos)?!1:(i&&(t&&dT(n,r.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const g=c.parentOffset===c.parent.content.size,v=l.depth===0?void 0:vI(l.node(-1).contentMatchAt(l.indexAfter(-1)));let x=g&&v?[{type:v,attrs:m}]:void 0,S=nu(e.doc,e.mapping.map(l.pos),1,x);if(!x&&!S&&nu(e.doc,e.mapping.map(l.pos),1,v?[{type:v}]:void 0)&&(S=!0,x=v?[{type:v,attrs:m}]:void 0),i){if(S&&(s instanceof st&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,x),v&&!g&&!l.parentOffset&&l.parent.type!==v)){const T=e.mapping.map(l.before()),k=e.doc.resolve(T);l.node(-1).canReplaceWith(k.index(),k.index()+1,v)&&e.setNodeMarkup(e.mapping.map(l.before()),v)}t&&dT(n,r.extensionManager.splittableMarks),e.scrollIntoView()}return S},GI=(t,e={})=>({tr:n,state:i,dispatch:r,editor:s})=>{var a;const l=ki(t,i.schema),{$from:c,$to:d}=i.selection,m=i.selection.node;if(m&&m.isBlock||c.depth<2||!c.sameParent(d))return!1;const g=c.node(-1);if(g.type!==l)return!1;const v=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(r){let A=Ee.empty;const O=c.index(-1)?1:c.index(-2)?2:3;for(let q=c.depth-O;q>=c.depth-3;q-=1)A=Ee.from(c.node(q).copy(A));const z=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,L={...Mv(v,c.node().type.name,c.node().attrs),...e},I=((a=l.contentMatch.defaultType)==null?void 0:a.createAndFill(L))||void 0;A=A.append(Ee.from(l.createAndFill(null,I)||void 0));const j=c.before(c.depth-(O-1));n.replace(j,c.after(-z),new Be(A,4-O,0));let B=-1;n.doc.nodesBetween(j,n.doc.content.size,(q,$)=>{if(B>-1)return!1;q.isTextblock&&q.content.size===0&&(B=$+1)}),B>-1&&n.setSelection(st.near(n.doc.resolve(B))),n.scrollIntoView()}return!0}const x=d.pos===c.end()?g.contentMatchAt(0).defaultType:null,S={...Mv(v,g.type.name,g.attrs),...e},T={...Mv(v,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,d.pos);const k=x?[{type:l,attrs:S},{type:x,attrs:T}]:[{type:l,attrs:S}];if(!nu(n.doc,c.pos,2))return!1;if(r){const{selection:A,storedMarks:O}=i,{splittableMarks:z}=s.extensionManager,L=O||A.$to.parentOffset&&A.$from.marks();if(n.split(c.pos,2,k).scrollIntoView(),!L||!r)return!0;const I=L.filter(j=>z.includes(j.type.name));n.ensureMarks(I)}return!0},rS=(t,e)=>{const n=bx(a=>a.type===e)(t.selection);if(!n)return!0;const i=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(i===void 0)return!0;const r=t.doc.nodeAt(i);return n.node.type===r?.type&&Uc(t.doc,n.pos)&&t.join(n.pos),!0},sS=(t,e)=>{const n=bx(a=>a.type===e)(t.selection);if(!n)return!0;const i=t.doc.resolve(n.start).after(n.depth);if(i===void 0)return!0;const r=t.doc.nodeAt(i);return n.node.type===r?.type&&Uc(t.doc,i)&&t.join(i),!0},qI=(t,e,n,i={})=>({editor:r,tr:s,state:a,dispatch:l,chain:c,commands:d,can:m})=>{const{extensions:g,splittableMarks:v}=r.extensionManager,x=ki(t,a.schema),S=ki(e,a.schema),{selection:T,storedMarks:k}=a,{$from:A,$to:O}=T,z=A.blockRange(O),L=k||T.$to.parentOffset&&T.$from.marks();if(!z)return!1;const I=bx(j=>fT(j.type.name,g))(T);if(z.depth>=1&&I&&z.depth-I.depth<=1){if(I.node.type===x)return d.liftListItem(S);if(fT(I.node.type.name,g)&&x.validContent(I.node.content)&&l)return c().command(()=>(s.setNodeMarkup(I.pos,x),!0)).command(()=>rS(s,x)).command(()=>sS(s,x)).run()}return!n||!L||!l?c().command(()=>m().wrapInList(x,i)?!0:d.clearNodes()).wrapInList(x,i).command(()=>rS(s,x)).command(()=>sS(s,x)).run():c().command(()=>{const j=m().wrapInList(x,i),B=L.filter(q=>v.includes(q.type.name));return s.ensureMarks(B),j?!0:d.clearNodes()}).wrapInList(x,i).command(()=>rS(s,x)).command(()=>sS(s,x)).run()},VI=(t,e={},n={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:s=!1}=n,a=fu(t,i.schema);return PC(i,a,e)?r.unsetMark(a,{extendEmptyMarkRange:s}):r.setMark(a,e)},YI=(t,e,n={})=>({state:i,commands:r})=>{const s=ki(t,i.schema),a=ki(e,i.schema),l=Bc(i,s,n);let c;return i.selection.$anchor.sameParent(i.selection.$head)&&(c=i.selection.$anchor.parent.attrs),l?r.setNode(a,c):r.setNode(s,{...c,...n})},KI=(t,e={})=>({state:n,commands:i})=>{const r=ki(t,n.schema);return Bc(n,r,e)?i.lift(r):i.wrapIn(r,e)},XI=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let i=0;i<n.length;i+=1){const r=n[i];let s;if(r.spec.isInputRules&&(s=r.getState(t))){if(e){const a=t.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c-=1)a.step(l.steps[c].invert(l.docs[c]));if(s.text){const c=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,t.schema.text(s.text,c))}else a.delete(s.from,s.to)}return!0}}return!1},QI=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:i,ranges:r}=n;return i||e&&r.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},WI=(t,e={})=>({tr:n,state:i,dispatch:r})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:l}=n,c=fu(t,i.schema),{$from:d,empty:m,ranges:g}=l;if(!r)return!0;if(m&&a){let{from:v,to:x}=l;const S=(s=d.marks().find(k=>k.type===c))==null?void 0:s.attrs,T=bE(d,c,S);T&&(v=T.from,x=T.to),n.removeMark(v,x,c)}else g.forEach(v=>{n.removeMark(v.$from.pos,v.$to.pos,c)});return n.removeStoredMark(c),!0},JI=t=>({tr:e,state:n,dispatch:i})=>{const{selection:r}=n;let s,a;return typeof t=="number"?(s=t,a=t):t&&"from"in t&&"to"in t?(s=t.from,a=t.to):(s=r.from,a=r.to),i&&e.doc.nodesBetween(s,a,(l,c)=>{if(l.isText)return;const d={...l.attrs};delete d.dir,e.setNodeMarkup(c,void 0,d)}),!0},ZI=(t,e={})=>({tr:n,state:i,dispatch:r})=>{let s=null,a=null;const l=vx(typeof t=="string"?t:t.name,i.schema);if(!l)return!1;l==="node"&&(s=ki(t,i.schema)),l==="mark"&&(a=fu(t,i.schema));let c=!1;return n.selection.ranges.forEach(d=>{const m=d.$from.pos,g=d.$to.pos;let v,x,S,T;n.selection.empty?i.doc.nodesBetween(m,g,(k,A)=>{s&&s===k.type&&(c=!0,S=Math.max(A,m),T=Math.min(A+k.nodeSize,g),v=A,x=k)}):i.doc.nodesBetween(m,g,(k,A)=>{A<m&&s&&s===k.type&&(c=!0,S=Math.max(A,m),T=Math.min(A+k.nodeSize,g),v=A,x=k),A>=m&&A<=g&&(s&&s===k.type&&(c=!0,r&&n.setNodeMarkup(A,void 0,{...k.attrs,...e})),a&&k.marks.length&&k.marks.forEach(O=>{if(a===O.type&&(c=!0,r)){const z=Math.max(A,m),L=Math.min(A+k.nodeSize,g);n.addMark(z,L,a.create({...O.attrs,...e}))}}))}),x&&(v!==void 0&&r&&n.setNodeMarkup(v,void 0,{...x.attrs,...e}),a&&x.marks.length&&x.marks.forEach(k=>{a===k.type&&r&&n.addMark(S,T,a.create({...k.attrs,...e}))}))}),c},$I=(t,e={})=>({state:n,dispatch:i})=>{const r=ki(t,n.schema);return RL(r,e)(n,i)},eH=(t,e={})=>({state:n,dispatch:i})=>{const r=ki(t,n.schema);return OL(r,e)(n,i)},tH=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(i=>i.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(i=>i!==e):delete this.callbacks[t]),this}once(t,e){const n=(...i)=>{this.off(t,n),e.apply(this,i)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Sx=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},nH=(t,e)=>{if(vE(e))return e.exec(t);const n=e(t);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=t,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i};function K1(t){var e;const{editor:n,from:i,to:r,text:s,rules:a,plugin:l}=t,{view:c}=n;if(c.composing)return!1;const d=c.state.doc.resolve(i);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let m=!1;const g=NI(d)+s;return a.forEach(v=>{if(m)return;const x=nH(g,v.find);if(!x)return;const S=c.state.tr,T=gx({state:c.state,transaction:S}),k={from:i-(x[0].length-s.length),to:r},{commands:A,chain:O,can:z}=new yx({editor:n,state:T});v.handler({state:T,range:k,match:x,commands:A,chain:O,can:z})===null||!S.steps.length||(v.undoable&&S.setMeta(l,{transform:S,from:i,to:r,text:s}),c.dispatch(S),m=!0)}),m}function iH(t){const{editor:e,rules:n}=t,i=new Wn({state:{init(){return null},apply(r,s,a){const l=r.getMeta(i);if(l)return l;const c=r.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:m}=c;typeof m=="string"?m=m:m=CE(Ee.from(m),a.schema);const{from:g}=c,v=g+m.length;K1({editor:e,from:g,to:v,text:m,rules:n,plugin:i})}),r.selectionSet||r.docChanged?null:s}},props:{handleTextInput(r,s,a,l){return K1({editor:e,from:s,to:a,text:l,rules:n,plugin:i})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:s}=r.state.selection;s&&K1({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(r,s){if(s.key!=="Enter")return!1;const{$cursor:a}=r.state.selection;return a?K1({editor:e,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:i}):!1}},isInputRules:!0});return i}function rH(t){return Object.prototype.toString.call(t).slice(8,-1)}function X1(t){return rH(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function k8(t,e){const n={...t};return X1(t)&&X1(e)&&Object.keys(e).forEach(i=>{X1(e[i])&&X1(t[i])?n[i]=k8(t[i],e[i]):n[i]=e[i]}),n}var TE=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Xt(Ke(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Xt(Ke(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>k8(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},vd=class M8 extends TE{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new M8(n)}static handleExit({editor:e,mark:n}){const{tr:i}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const a=r.marks();if(!!!a.find(d=>d?.type.name===n.name))return!1;const c=a.find(d=>d?.type.name===n.name);return c&&i.removeStoredMark(c),i.insertText(" ",r.pos),e.view.dispatch(i),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function sH(t){return typeof t=="number"}var aH=class{constructor(t){this.find=t.find,this.handler=t.handler}},oH=(t,e,n)=>{if(vE(e))return[...t.matchAll(e)];const i=e(t,n);return i?i.map(r=>{const s=[r.text];return s.index=r.index,s.input=t,s.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(r.replaceWith)),s}):[]};function lH(t){const{editor:e,state:n,from:i,to:r,rule:s,pasteEvent:a,dropEvent:l}=t,{commands:c,chain:d,can:m}=new yx({editor:e,state:n}),g=[];return n.doc.nodesBetween(i,r,(x,S)=>{var T,k,A,O,z;if((k=(T=x.type)==null?void 0:T.spec)!=null&&k.code||!(x.isText||x.isTextblock||x.isInline))return;const L=(z=(O=(A=x.content)==null?void 0:A.size)!=null?O:x.nodeSize)!=null?z:0,I=Math.max(i,S),j=Math.min(r,S+L);if(I>=j)return;const B=x.isText?x.text||"":x.textBetween(I-S,j-S,void 0,"");oH(B,s.find,a).forEach($=>{if($.index===void 0)return;const G=I+$.index+1,X=G+$[0].length,J={from:n.tr.mapping.map(G),to:n.tr.mapping.map(X)},ce=s.handler({state:n,range:J,match:$,commands:c,chain:d,can:m,pasteEvent:a,dropEvent:l});g.push(ce)})}),g.every(x=>x!==null)}var Q1=null,uH=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function cH(t){const{editor:e,rules:n}=t;let i=null,r=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:m,from:g,to:v,rule:x,pasteEvt:S})=>{const T=m.tr,k=gx({state:m,transaction:T});if(!(!lH({editor:e,state:k,from:Math.max(g-1,0),to:v.b-1,rule:x,pasteEvent:S,dropEvent:l})||!T.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,T}};return n.map(m=>new Wn({view(g){const v=S=>{var T;i=(T=g.dom.parentElement)!=null&&T.contains(S.target)?g.dom.parentElement:null,i&&(Q1=e)},x=()=>{Q1&&(Q1=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(g,v)=>{if(s=i===g.dom.parentElement,l=v,!s){const x=Q1;x?.isEditable&&setTimeout(()=>{const S=x.state.selection;S&&x.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(g,v)=>{var x;const S=(x=v.clipboardData)==null?void 0:x.getData("text/html");return a=v,r=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(g,v,x)=>{const S=g[0],T=S.getMeta("uiEvent")==="paste"&&!r,k=S.getMeta("uiEvent")==="drop"&&!s,A=S.getMeta("applyPasteRules"),O=!!A;if(!T&&!k&&!O)return;if(O){let{text:I}=A;typeof I=="string"?I=I:I=CE(Ee.from(I),x.schema);const{from:j}=A,B=j+I.length,q=uH(I);return c({rule:m,state:x,from:j,to:{b:B},pasteEvt:q})}const z=v.doc.content.findDiffStart(x.doc.content),L=v.doc.content.findDiffEnd(x.doc.content);if(!(!sH(z)||!L||z===L.b))return c({rule:m,state:x,from:z,to:L,pasteEvt:a})}}))}var Cx=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=S8(t),this.schema=wI(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:iS(e.name,this.schema)},i=Ke(e,"addCommands",n);return i?{...t,...i()}:t},{})}get plugins(){const{editor:t}=this;return wE([...this.extensions].reverse()).flatMap(i=>{const r={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:iS(i.name,this.schema)},s=[],a=Ke(i,"addKeyboardShortcuts",r);let l={};if(i.type==="mark"&&Ke(i,"exitable",r)&&(l.ArrowRight=()=>vd.handleExit({editor:t,mark:i})),a){const v=Object.fromEntries(Object.entries(a()).map(([x,S])=>[x,()=>S({editor:t})]));l={...l,...v}}const c=_P(l);s.push(c);const d=Ke(i,"addInputRules",r);if(cT(i,t.options.enableInputRules)&&d){const v=d();if(v&&v.length){const x=iH({editor:t,rules:v}),S=Array.isArray(x)?x:[x];s.push(...S)}}const m=Ke(i,"addPasteRules",r);if(cT(i,t.options.enablePasteRules)&&m){const v=m();if(v&&v.length){const x=cH({editor:t,rules:v});s.push(...x)}}const g=Ke(i,"addProseMirrorPlugins",r);if(g){const v=g();s.push(...v)}return s})}get attributes(){return x8(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=yp(this.extensions);return Object.fromEntries(e.filter(n=>!!Ke(n,"addNodeView")).map(n=>{const i=this.attributes.filter(c=>c.type===n.name),r={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ki(n.name,this.schema)},s=Ke(n,"addNodeView",r);if(!s)return[];const a=s();if(!a)return[];const l=(c,d,m,g,v)=>{const x=ib(c,i);return a({node:c,view:d,getPos:m,decorations:g,innerDecorations:v,editor:t,extension:n,HTMLAttributes:x})};return[n.name,l]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=yp(this.extensions);return Object.fromEntries(e.filter(n=>!!Ke(n,"addMarkView")).map(n=>{const i=this.attributes.filter(l=>l.type===n.name),r={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:fu(n.name,this.schema)},s=Ke(n,"addMarkView",r);if(!s)return[];const a=(l,c,d)=>{const m=ib(l,i);return s()({mark:l,view:c,inline:d,editor:t,extension:n,HTMLAttributes:m,updateAttributes:g=>{EH(l,t,g)}})};return[n.name,a]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const i={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:iS(e.name,this.schema)};e.type==="mark"&&((n=Xt(Ke(e,"keepOnSplit",i)))==null||n)&&this.splittableMarks.push(e.name);const r=Ke(e,"onBeforeCreate",i),s=Ke(e,"onCreate",i),a=Ke(e,"onUpdate",i),l=Ke(e,"onSelectionUpdate",i),c=Ke(e,"onTransaction",i),d=Ke(e,"onFocus",i),m=Ke(e,"onBlur",i),g=Ke(e,"onDestroy",i);r&&this.editor.on("beforeCreate",r),s&&this.editor.on("create",s),a&&this.editor.on("update",a),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),m&&this.editor.on("blur",m),g&&this.editor.on("destroy",g)})}};Cx.resolve=S8;Cx.sort=wE;Cx.flatten=SE;var fH={};yE(fH,{ClipboardTextSerializer:()=>N8,Commands:()=>R8,Delete:()=>O8,Drop:()=>D8,Editable:()=>z8,FocusEvents:()=>L8,Keymap:()=>B8,Paste:()=>P8,Tabindex:()=>I8,TextDirection:()=>H8,focusEventsPluginKey:()=>j8});var pi=class A8 extends TE{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new A8(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},N8=pi.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Wn({key:new Ii("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:i,selection:r}=e,{ranges:s}=r,a=Math.min(...s.map(m=>m.$from.pos)),l=Math.max(...s.map(m=>m.$to.pos)),c=w8(n);return C8(i,{from:a,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),R8=pi.create({name:"commands",addCommands(){return{...f8}}}),O8=pi.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,i,r;const s=()=>{var a,l,c,d;if((d=(c=(l=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,t))!=null?d:t.getMeta("y-sync$"))return;const m=v8(t.before,[t,...e]);T8(m).forEach(x=>{m.mapping.mapResult(x.oldRange.from).deletedAfter&&m.mapping.mapResult(x.oldRange.to).deletedBefore&&m.before.nodesBetween(x.oldRange.from,x.oldRange.to,(S,T)=>{const k=T+S.nodeSize-2,A=x.oldRange.from<=T&&k<=x.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:T,to:k,newFrom:m.mapping.map(T),newTo:m.mapping.map(k),deletedRange:x.oldRange,newRange:x.newRange,partial:!A,editor:this.editor,transaction:t,combinedTransform:m})})});const v=m.mapping;m.steps.forEach((x,S)=>{var T,k;if(x instanceof co){const A=v.slice(S).map(x.from,-1),O=v.slice(S).map(x.to),z=v.invert().map(A,-1),L=v.invert().map(O),I=(T=m.doc.nodeAt(A-1))==null?void 0:T.marks.some(B=>B.eq(x.mark)),j=(k=m.doc.nodeAt(O))==null?void 0:k.marks.some(B=>B.eq(x.mark));this.editor.emit("delete",{type:"mark",mark:x.mark,from:x.from,to:x.to,deletedRange:{from:z,to:L},newRange:{from:A,to:O},partial:!!(j||I),editor:this.editor,transaction:t,combinedTransform:m})}})};(r=(i=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:i.async)==null||r?setTimeout(s,0):s()}}),D8=pi.create({name:"drop",addProseMirrorPlugins(){return[new Wn({key:new Ii("tiptapDrop"),props:{handleDrop:(t,e,n,i)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:i})}}})]}}),z8=pi.create({name:"editable",addProseMirrorPlugins(){return[new Wn({key:new Ii("editable"),props:{editable:()=>this.editor.options.editable}})]}}),j8=new Ii("focusEvents"),L8=pi.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Wn({key:j8,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const i=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,n)=>{t.isFocused=!1;const i=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),B8=pi.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:l})=>{const{selection:c,doc:d}=l,{empty:m,$anchor:g}=c,{pos:v,parent:x}=g,S=g.parent.isTextblock&&v>0?l.doc.resolve(v-1):g,T=S.parent.type.spec.isolating,k=g.pos-g.parentOffset,A=T&&S.parent.childCount===1?k===g.pos:Ct.atStart(d).from===v;return!m||!x.type.isTextblock||x.textContent.length||!A||A&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...i},s={...i,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return xE()||g8()?s:r},addProseMirrorPlugins(){return[new Wn({key:new Ii("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(T=>T.getMeta("composition")))return;const i=t.some(T=>T.docChanged)&&!e.doc.eq(n.doc),r=t.some(T=>T.getMeta("preventClearDocument"));if(!i||r)return;const{empty:s,from:a,to:l}=e.selection,c=Ct.atStart(e.doc).from,d=Ct.atEnd(e.doc).to;if(s||!(a===c&&l===d)||!xx(n.doc))return;const v=n.tr,x=gx({state:n,transaction:v}),{commands:S}=new yx({editor:this.editor,state:x});if(S.clearNodes(),!!v.steps.length)return v}})]}}),P8=pi.create({name:"paste",addProseMirrorPlugins(){return[new Wn({key:new Ii("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),I8=pi.create({name:"tabindex",addProseMirrorPlugins(){return[new Wn({key:new Ii("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),H8=pi.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=yp(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Wn({key:new Ii("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),dH=class tp{constructor(e,n,i=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=n,this.currentNode=r}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:n,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new tp(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new tp(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new tp(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,i)=>{const r=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,a=this.pos+i+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!r&&l.depth<=this.depth)return;const c=new tp(l,this.editor,r,r?n:null);r&&(c.actualDepth=this.depth+1),e.push(new tp(l,this.editor,r,r?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let i=null,r=this.parent;for(;r&&!i;){if(r.node.type.name===e)if(Object.keys(n).length>0){const s=r.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(s[c]!==n[c])break}}else i=r;r=r.parent}return i}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},i=!1){let r=[];if(!this.children||this.children.length===0)return r;const s=Object.keys(n);return this.children.forEach(a=>{i&&r.length>0||(a.node.type.name===e&&s.every(c=>n[c]===a.node.attrs[c])&&r.push(a),!(i&&r.length>0)&&(r=r.concat(a.querySelectorAll(e,n,i))))}),r}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},hH=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function pH(t,e,n){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}var mH=class extends tH{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:i})=>{throw i},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:i,slice:r,moved:s})=>this.options.onDrop(i,r,s)),this.on("paste",({event:i,slice:r})=>this.options.onPaste(i,r)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=p8(e,this.options.autofocus);this.editorState=rp.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=pH(hH,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=b8(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(r=>{const s=typeof r=="string"?`${r}$`:r.key;n=n.filter(a=>!a.key.startsWith(s))}),e.length===n.length)return;const i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}createExtensionManager(){var t,e;const i=[...this.options.enableCoreExtensions?[z8,N8.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),R8,L8,B8,I8,D8,P8,O8,H8.configure({direction:this.options.textDirection})].filter(r=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[r.name]!==!1:!0):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r?.type));this.extensionManager=new Cx(i,this)}createCommandManager(){this.commandManager=new yx({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=BC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=BC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new u8(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(d=>{var m;return(m=this.capturedTransaction)==null?void 0:m.step(d)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),i=!this.state.selection.eq(e.selection),r=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!r)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const a=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=a?.getMeta("focus"),c=a?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:a}),c&&this.emit("blur",{editor:this,event:c.event,transaction:a}),!(t.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return E8(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,i=typeof t=="string"?e:t;return RI(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return CE(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return TI(this.state.doc,{blockSeparator:e,textSerializers:{...w8(this.schema),...n}})}get isEmpty(){return xx(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new dH(e,this)}get $doc(){return this.$pos(0)}};function vp(t){return new Sx({find:t.find,handler:({state:e,range:n,match:i})=>{const r=Xt(t.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:s}=e,a=i[i.length-1],l=i[0];if(a){const c=l.search(/\S/),d=n.from+l.indexOf(a),m=d+a.length;if(EE(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(T=>T===t.type&&T!==x.mark.type)).filter(x=>x.to>d).length)return null;m<n.to&&s.delete(m,n.to),d>n.from&&s.delete(n.from+c,d);const v=n.from+c+a.length;s.addMark(n.from+c,v,t.type.create(r||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function gH(t){return new Sx({find:t.find,handler:({state:e,range:n,match:i})=>{const r=Xt(t.getAttributes,void 0,i)||{},{tr:s}=e,a=n.from;let l=n.to;const c=t.type.create(r);if(i[1]){const d=i[0].lastIndexOf(i[1]);let m=a+d;m>l?m=l:l=m+i[1].length;const g=i[0][i[0].length-1];s.insertText(g,a+i[0].length-1),s.replaceWith(m,l,c)}else if(i[0]){const d=t.type.isInline?a:a-1;s.insert(d,t.type.create(r)).delete(s.mapping.map(a),s.mapping.map(l))}s.scrollIntoView()},undoable:t.undoable})}function IC(t){return new Sx({find:t.find,handler:({state:e,range:n,match:i})=>{const r=e.doc.resolve(n.from),s=Xt(t.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function bp(t){return new Sx({find:t.find,handler:({state:e,range:n,match:i,chain:r})=>{const s=Xt(t.getAttributes,void 0,i)||{},a=e.tr.delete(n.from,n.to),c=a.doc.resolve(n.from).blockRange(),d=c&&tE(c,t.type,s);if(!d)return null;if(a.wrap(c,d),t.keepMarks&&t.editor){const{selection:g,storedMarks:v}=e,{splittableMarks:x}=t.editor.extensionManager,S=v||g.$to.parentOffset&&g.$from.marks();if(S){const T=S.filter(k=>x.includes(k.type.name));a.ensureMarks(T)}}if(t.keepAttributes){const g=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(g,s).run()}const m=a.doc.resolve(n.from-1).nodeBefore;m&&m.type===t.type&&Uc(a.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(i,m))&&a.join(n.from-1)},undoable:t.undoable})}function yH(t,e){const{selection:n}=t,{$from:i}=n;if(n instanceof We){const s=i.index();return i.parent.canReplaceWith(s,s+1,e)}let r=i.depth;for(;r>=0;){const s=i.index(r);if(i.node(r).contentMatchAt(s).matchType(e))return!0;r-=1}return!1}var vH={};yE(vH,{createAtomBlockMarkdownSpec:()=>bH,createBlockMarkdownSpec:()=>xH,createInlineMarkdownSpec:()=>wH,parseAttributes:()=>_E,parseIndentedBlocks:()=>HC,renderNestedMarkdownContent:()=>ME,serializeAttributes:()=>kE});function _E(t){if(!t?.trim())return{};const e={},n=[],i=t.replace(/["']([^"']*)["']/g,d=>(n.push(d),`__QUOTED_${n.length-1}__`)),r=i.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(r){const d=r.map(m=>m.trim().slice(1));e.class=d.join(" ")}const s=i.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(i.matchAll(a)).forEach(([,d,m])=>{var g;const v=parseInt(((g=m.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),x=n[v];x&&(e[d]=x.slice(1,-1))});const c=i.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(m=>{m.match(/^[a-zA-Z][\w-]*$/)&&(e[m]=!0)}),e}function kE(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(i=>e.push(`.${i}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,i])=>{n==="class"||n==="id"||(i===!0?e.push(n):i!==!1&&i!=null&&e.push(`${n}="${String(i)}"`))}),e.join(" ")}function bH(t){const{nodeName:e,name:n,parseAttributes:i=_E,serializeAttributes:r=kE,defaultAttributes:s={},requiredAttributes:a=[],allowedAttributes:l}=t,c=n||e,d=m=>{if(!l)return m;const g={};return l.forEach(v=>{v in m&&(g[v]=m[v])}),g};return{parseMarkdown:(m,g)=>{const v={...s,...m.attributes};return g.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(m){var g;const v=new RegExp(`^:::${c}(?:\\s|$)`,"m"),x=(g=m.match(v))==null?void 0:g.index;return x!==void 0?x:-1},tokenize(m,g,v){const x=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),S=m.match(x);if(!S)return;const T=S[1]||"",k=i(T);if(!a.find(O=>!(O in k)))return{type:e,raw:S[0],attributes:k}}},renderMarkdown:m=>{const g=d(m.attrs||{}),v=r(g),x=v?` {${v}}`:"";return`:::${c}${x} :::`}}}function xH(t){const{nodeName:e,name:n,getContent:i,parseAttributes:r=_E,serializeAttributes:s=kE,defaultAttributes:a={},content:l="block",allowedAttributes:c}=t,d=n||e,m=g=>{if(!c)return g;const v={};return c.forEach(x=>{x in g&&(v[x]=g[x])}),v};return{parseMarkdown:(g,v)=>{let x;if(i){const T=i(g);x=typeof T=="string"?[{type:"text",text:T}]:T}else l==="block"?x=v.parseChildren(g.tokens||[]):x=v.parseInline(g.tokens||[]);const S={...a,...g.attributes};return v.createNode(e,S,x)},markdownTokenizer:{name:e,level:"block",start(g){var v;const x=new RegExp(`^:::${d}`,"m"),S=(v=g.match(x))==null?void 0:v.index;return S!==void 0?S:-1},tokenize(g,v,x){var S;const T=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),k=g.match(T);if(!k)return;const[A,O=""]=k,z=r(O);let L=1;const I=A.length;let j="";const B=/^:::([\w-]*)(\s.*)?/gm,q=g.slice(I);for(B.lastIndex=0;;){const $=B.exec(q);if($===null)break;const G=$.index,X=$[1];if(!((S=$[2])!=null&&S.endsWith(":::"))){if(X)L+=1;else if(L-=1,L===0){const J=q.slice(0,G);j=J.trim();const ce=g.slice(0,I+G+$[0].length);let Z=[];if(j)if(l==="block")for(Z=x.blockTokens(J),Z.forEach(te=>{te.text&&(!te.tokens||te.tokens.length===0)&&(te.tokens=x.inlineTokens(te.text))});Z.length>0;){const te=Z[Z.length-1];if(te.type==="paragraph"&&(!te.text||te.text.trim()===""))Z.pop();else break}else Z=x.inlineTokens(j);return{type:e,raw:ce,attributes:z,content:j,tokens:Z}}}}}},renderMarkdown:(g,v)=>{const x=m(g.attrs||{}),S=s(x),T=S?` {${S}}`:"",k=v.renderChildren(g.content||[],`

`);return`:::${d}${T}

${k}

:::`}}}function SH(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let i=n.exec(t);for(;i!==null;){const[,r,s,a]=i;e[r]=s||a,i=n.exec(t)}return e}function CH(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function wH(t){const{nodeName:e,name:n,getContent:i,parseAttributes:r=SH,serializeAttributes:s=CH,defaultAttributes:a={},selfClosing:l=!1,allowedAttributes:c}=t,d=n||e,m=v=>{if(!c)return v;const x={};return c.forEach(S=>{S in v&&(x[S]=v[S])}),x},g=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,x)=>{const S={...a,...v.attributes};if(l)return x.createNode(e,S);const T=i?i(v):v.content||"";return T?x.createNode(e,S,[x.createTextNode(T)]):x.createNode(e,S,[])},markdownTokenizer:{name:e,level:"inline",start(v){const x=l?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),S=v.match(x),T=S?.index;return T!==void 0?T:-1},tokenize(v,x,S){const T=l?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),k=v.match(T);if(!k)return;let A="",O="";if(l){const[,L]=k;O=L}else{const[,L,I]=k;O=L,A=I||""}const z=r(O.trim());return{type:e,raw:k[0],content:A.trim(),attributes:z}}},renderMarkdown:v=>{let x="";i?x=i(v):v.content&&v.content.length>0&&(x=v.content.filter(A=>A.type==="text").map(A=>A.text).join(""));const S=m(v.attrs||{}),T=s(S),k=T?` ${T}`:"";return l?`[${d}${k}]`:`[${d}${k}]${x}[/${d}]`}}}function HC(t,e,n){var i,r,s,a;const l=t.split(`
`),c=[];let d="",m=0;const g=e.baseIndentSize||2;for(;m<l.length;){const v=l[m],x=v.match(e.itemPattern);if(!x){if(c.length>0)break;if(v.trim()===""){m+=1,d=`${d}${v}
`;continue}else return}const S=e.extractItemData(x),{indentLevel:T,mainContent:k}=S;d=`${d}${v}
`;const A=[k];for(m+=1;m<l.length;){const I=l[m];if(I.trim()===""){const B=l.slice(m+1).findIndex(G=>G.trim()!=="");if(B===-1)break;if((((r=(i=l[m+1+B].match(/^(\s*)/))==null?void 0:i[1])==null?void 0:r.length)||0)>T){A.push(I),d=`${d}${I}
`,m+=1;continue}else break}if((((a=(s=I.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:a.length)||0)>T)A.push(I),d=`${d}${I}
`,m+=1;else break}let O;const z=A.slice(1);if(z.length>0){const I=z.map(j=>j.slice(T+g)).join(`
`);I.trim()&&(e.customNestedParser?O=e.customNestedParser(I):O=n.blockTokens(I))}const L=e.createToken(S,O);c.push(L)}if(c.length!==0)return{items:c,raw:d}}function ME(t,e,n,i){if(!t||!Array.isArray(t.content))return"";const r=typeof n=="function"?n(i):n,[s,...a]=t.content,l=e.renderChildren([s]),c=[`${r}${l}`];return a&&a.length>0&&a.forEach(d=>{const m=e.renderChildren([d]);if(m){const g=m.split(`
`).map(v=>v?e.indent(v):"").join(`
`);c.push(g)}}),c.join(`
`)}function EH(t,e,n={}){const{state:i}=e,{doc:r,tr:s}=i,a=t;r.descendants((l,c)=>{const d=s.mapping.map(c),m=s.mapping.map(c)+l.nodeSize;let g=null;if(l.marks.forEach(x=>{if(x!==a)return!1;g=x}),!g)return;let v=!1;if(Object.keys(n).forEach(x=>{n[x]!==g.attrs[x]&&(v=!0)}),v){const x=t.type.create({...t.attrs,...n});s.removeMark(d,m,t.type),s.addMark(d,m,x)}}),s.docChanged&&e.view.dispatch(s)}var ta=class U8 extends TE{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new U8(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function fd(t){return new aH({find:t.find,handler:({state:e,range:n,match:i,pasteEvent:r})=>{const s=Xt(t.getAttributes,void 0,i,r);if(s===!1||s===null)return null;const{tr:a}=e,l=i[i.length-1],c=i[0];let d=n.to;if(l){const m=c.search(/\S/),g=n.from+c.indexOf(l),v=g+l.length;if(EE(n.from,n.to,e.doc).filter(S=>S.mark.type.excluded.find(k=>k===t.type&&k!==S.mark.type)).filter(S=>S.to>g).length)return null;v<n.to&&a.delete(v,n.to),g>n.from&&a.delete(n.from+m,g),d=n.from+m+l.length,a.addMark(n.from+m,d,t.type.create(s||{})),a.removeStoredMark(t.type)}}})}var aS,hT;function TH(){return hT||(hT=1,aS=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(r of e.entries())if(!n.has(r[0]))return!1;for(r of e.entries())if(!t(r[1],n.get(r[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(r of e.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(e[r]!==n[r])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;r--!==0;){var a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}),aS}var _H=TH();const kH=Ep(_H);var oS={exports:{}},lS={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT;function MH(){if(pT)return lS;pT=1;var t=Tp(),e=L6();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,l=t.useMemo,c=t.useDebugValue;return lS.useSyncExternalStoreWithSelector=function(d,m,g,v,x){var S=s(null);if(S.current===null){var T={hasValue:!1,value:null};S.current=T}else T=S.current;S=l(function(){function A(j){if(!O){if(O=!0,z=j,j=v(j),x!==void 0&&T.hasValue){var B=T.value;if(x(B,j))return L=B}return L=j}if(B=L,i(z,j))return B;var q=v(j);return x!==void 0&&x(B,q)?(z=j,B):(z=j,L=q)}var O=!1,z,L,I=g===void 0?null:g;return[function(){return A(m())},I===null?void 0:function(){return A(I())}]},[m,g,v,x]);var k=r(d,S[0],S[1]);return a(function(){T.hasValue=!0,T.value=k},[k]),c(k),k},lS}var mT;function AH(){return mT||(mT=1,oS.exports=MH()),oS.exports}var NH=AH(),RH=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},OH=({contentComponent:t})=>{const e=B6.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return _.jsx(_.Fragment,{children:Object.values(e)})};function DH(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,i){e={...e,[n]:Jk.createPortal(i.reactElement,i.element,n)},t.forEach(r=>r())},removeRenderer(n){const i={...e};delete i[n],e=i,t.forEach(r=>r())}}}var zH=class extends Fe.Component{constructor(t){var e;super(t),this.editorContentRef=Fe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=DH(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return _.jsxs(_.Fragment,{children:[_.jsx("div",{ref:RH(e,this.editorContentRef),...n}),t?.contentComponent&&_.jsx(OH,{contentComponent:t.contentComponent})]})}},jH=N.forwardRef((t,e)=>{const n=Fe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Fe.createElement(zH,{key:n,innerRef:e,...t})}),LH=Fe.memo(jH),BH=typeof window<"u"?N.useLayoutEffect:N.useEffect,PH=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function IH(t){var e;const[n]=N.useState(()=>new PH(t.editor)),i=NH.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:kH);return BH(()=>n.watch(t.editor),[t.editor,n]),N.useDebugValue(i),i}var HH=!1,UC=typeof window>"u",UH=UC||!!(typeof window<"u"&&window.next),FH=class F8{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?UC||UH?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...i)=>{var r,s;return(s=(r=this.options.current).onBeforeCreate)==null?void 0:s.call(r,...i)},onBlur:(...i)=>{var r,s;return(s=(r=this.options.current).onBlur)==null?void 0:s.call(r,...i)},onCreate:(...i)=>{var r,s;return(s=(r=this.options.current).onCreate)==null?void 0:s.call(r,...i)},onDestroy:(...i)=>{var r,s;return(s=(r=this.options.current).onDestroy)==null?void 0:s.call(r,...i)},onFocus:(...i)=>{var r,s;return(s=(r=this.options.current).onFocus)==null?void 0:s.call(r,...i)},onSelectionUpdate:(...i)=>{var r,s;return(s=(r=this.options.current).onSelectionUpdate)==null?void 0:s.call(r,...i)},onTransaction:(...i)=>{var r,s;return(s=(r=this.options.current).onTransaction)==null?void 0:s.call(r,...i)},onUpdate:(...i)=>{var r,s;return(s=(r=this.options.current).onUpdate)==null?void 0:s.call(r,...i)},onContentError:(...i)=>{var r,s;return(s=(r=this.options.current).onContentError)==null?void 0:s.call(r,...i)},onDrop:(...i)=>{var r,s;return(s=(r=this.options.current).onDrop)==null?void 0:s.call(r,...i)},onPaste:(...i)=>{var r,s;return(s=(r=this.options.current).onPaste)==null?void 0:s.call(r,...i)},onDelete:(...i)=>{var r,s;return(s=(r=this.options.current).onDelete)==null?void 0:s.call(r,...i)}};return new mH(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(i=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(i)?!0:i==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((r,s)=>{var a;return r===((a=n.extensions)==null?void 0:a[s])}):e[i]===n[i])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?F8.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((i,r)=>i===e[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function GH(t={},e=[]){const n=N.useRef(t);n.current=t;const[i]=N.useState(()=>new FH(n)),r=B6.useSyncExternalStore(i.subscribe,i.getEditor,i.getServerSnapshot);return N.useDebugValue(r),N.useEffect(i.onRender(e)),IH({editor:r,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),r}var qH=N.createContext({editor:null});qH.Consumer;var VH=N.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),YH=()=>N.useContext(VH);Fe.forwardRef((t,e)=>{const{onDragStart:n}=YH(),i=t.as||"div";return _.jsx(i,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});Fe.createContext({markViewContentRef:()=>{}});var rb=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...i}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,i,n]},KH=/^\s*>\s$/,XH=ta.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return rb("blockquote",{...Mi(this.options.HTMLAttributes,t),children:rb("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",i=[];return t.content.forEach(r=>{const l=e.renderChildren([r]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);i.push(l.join(`
`))}),i.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[bp({find:KH,type:this.type})]}}),QH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,WH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,JH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,ZH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,$H=vd.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return rb("strong",{...Mi(this.options.HTMLAttributes,t),children:rb("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[vp({find:QH,type:this.type}),vp({find:JH,type:this.type})]},addPasteRules(){return[fd({find:WH,type:this.type}),fd({find:ZH,type:this.type})]}}),eU=/(^|[^`])`([^`]+)`(?!`)$/,tU=/(^|[^`])`([^`]+)`(?!`)/g,nU=vd.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[vp({find:eU,type:this.type})]},addPasteRules(){return[fd({find:tU,type:this.type})]}}),uS=4,iU=/^```([a-z]+)?[\s\n]$/,rU=/^~~~([a-z]+)?[\s\n]$/,sU=ta.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:uS,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Mi(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let i="";const r=((n=t.attrs)==null?void 0:n.language)||"";return t.content?i=[`\`\`\`${r}`,e.renderChildren(t.content),"```"].join(`
`):i=`\`\`\`${r}

\`\`\``,i},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:uS,{state:i}=t,{selection:r}=i,{$from:s,empty:a}=r;if(s.parent.type!==this.type)return!1;const l=" ".repeat(n);return a?t.commands.insertContent(l):t.commands.command(({tr:c})=>{const{from:d,to:m}=r,x=i.doc.textBetween(d,m,`
`,`
`).split(`
`).map(S=>l+S).join(`
`);return c.replaceWith(d,m,i.schema.text(x)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:uS,{state:i}=t,{selection:r}=i,{$from:s,empty:a}=r;return s.parent.type!==this.type?!1:a?t.commands.command(({tr:l})=>{var c;const{pos:d}=s,m=s.start(),g=s.end(),x=i.doc.textBetween(m,g,`
`,`
`).split(`
`);let S=0,T=0;const k=d-m;for(let j=0;j<x.length;j+=1){if(T+x[j].length>=k){S=j;break}T+=x[j].length+1}const O=((c=x[S].match(/^ */))==null?void 0:c[0])||"",z=Math.min(O.length,n);if(z===0)return!0;let L=m;for(let j=0;j<S;j+=1)L+=x[j].length+1;return l.delete(L,L+z),d-L<=z&&l.setSelection(st.create(l.doc,L)),!0}):t.commands.command(({tr:l})=>{const{from:c,to:d}=r,v=i.doc.textBetween(c,d,`
`,`
`).split(`
`).map(x=>{var S;const T=((S=x.match(/^ */))==null?void 0:S[0])||"",k=Math.min(T.length,n);return x.slice(k)}).join(`
`);return l.replaceWith(c,d,i.schema.text(v)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:i,empty:r}=n;if(!r||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2,a=i.parent.textContent.endsWith(`

`);return!s||!a?!1:t.chain().command(({tr:l})=>(l.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:i}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const l=r.after();return l===void 0?!1:i.nodeAt(l)?t.commands.command(({tr:d})=>(d.setSelection(Ct.near(i.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[IC({find:iU,type:this.type,getAttributes:t=>({language:t[1]})}),IC({find:rU,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Wn({key:new Ii("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),r=i?JSON.parse(i):void 0,s=r?.mode;if(!n||!s)return!1;const{tr:a,schema:l}=t.state,c=l.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(st.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),t.dispatch(a),!0}}})]}}),aU=ta.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),oU=ta.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Mi(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:i})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:r,storedMarks:s}=n;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:l}=i.extensionManager,c=s||r.$to.parentOffset&&r.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:m})=>{if(m&&c&&a){const g=c.filter(v=>l.includes(v.type.name));d.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),lU=ta.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Mi(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const i=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,r="#".repeat(i);return t.content?`${r} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>IC({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),uU=ta.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Mi(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!yH(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:i}=n,r=t();return _8(n)?r.insertContentAt(i.pos,{type:this.name}):r.insertContent({type:this.name}),r.command(({state:s,tr:a,dispatch:l})=>{if(l){const{$to:c}=a.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?a.setSelection(st.create(a.doc,c.pos+1)):c.nodeAfter.isBlock?a.setSelection(We.create(a.doc,c.pos)):a.setSelection(st.create(a.doc,c.pos));else{const m=s.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,g=m?.create();g&&(a.insert(d,g),a.setSelection(st.create(a.doc,d+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[gH({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),cU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,fU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,dU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,hU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,pU=vd.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Mi(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[vp({find:cU,type:this.type}),vp({find:dU,type:this.type})]},addPasteRules(){return[fd({find:fU,type:this.type}),fd({find:hU,type:this.type})]}});const mU="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",gU="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",FC="numeric",GC="ascii",qC="alpha",qg="asciinumeric",Dg="alphanumeric",VC="domain",G8="emoji",yU="scheme",vU="slashscheme",cS="whitespace";function bU(t,e){return t in e||(e[t]=[]),e[t]}function Qf(t,e,n){e[FC]&&(e[qg]=!0,e[Dg]=!0),e[GC]&&(e[qg]=!0,e[qC]=!0),e[qg]&&(e[Dg]=!0),e[qC]&&(e[Dg]=!0),e[Dg]&&(e[VC]=!0),e[G8]&&(e[VC]=!0);for(const i in e){const r=bU(i,n);r.indexOf(t)<0&&r.push(t)}}function xU(t,e){const n={};for(const i in e)e[i].indexOf(t)>=0&&(n[i]=!0);return n}function js(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}js.groups={};js.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let i=0;i<e.jr.length;i++){const r=e.jr[i][0],s=e.jr[i][1];if(s&&r.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,i){for(let r=0;r<t.length;r++)this.tt(t[r],e,n,i)},tr(t,e,n,i){i=i||js.groups;let r;return e&&e.j?r=e:(r=new js(e),n&&i&&Qf(e,n,i)),this.jr.push([t,r]),r},ts(t,e,n,i){let r=this;const s=t.length;if(!s)return r;for(let a=0;a<s-1;a++)r=r.tt(t[a]);return r.tt(t[s-1],e,n,i)},tt(t,e,n,i){i=i||js.groups;const r=this;if(e&&e.j)return r.j[t]=e,e;const s=e;let a,l=r.go(t);if(l?(a=new js,Object.assign(a.j,l.j),a.jr.push.apply(a.jr,l.jr),a.jd=l.jd,a.t=l.t):a=new js,s){if(i)if(a.t&&typeof a.t=="string"){const c=Object.assign(xU(a.t,i),n);Qf(s,c,i)}else n&&Qf(s,n,i);a.t=s}return r.j[t]=a,a}};const St=(t,e,n,i,r)=>t.ta(e,n,i,r),ai=(t,e,n,i,r)=>t.tr(e,n,i,r),gT=(t,e,n,i,r)=>t.ts(e,n,i,r),Me=(t,e,n,i,r)=>t.tt(e,n,i,r),Jl="WORD",YC="UWORD",q8="ASCIINUMERICAL",V8="ALPHANUMERICAL",v0="LOCALHOST",KC="TLD",XC="UTLD",Av="SCHEME",np="SLASH_SCHEME",AE="NUM",QC="WS",NE="NL",Vg="OPENBRACE",Yg="CLOSEBRACE",sb="OPENBRACKET",ab="CLOSEBRACKET",ob="OPENPAREN",lb="CLOSEPAREN",ub="OPENANGLEBRACKET",cb="CLOSEANGLEBRACKET",fb="FULLWIDTHLEFTPAREN",db="FULLWIDTHRIGHTPAREN",hb="LEFTCORNERBRACKET",pb="RIGHTCORNERBRACKET",mb="LEFTWHITECORNERBRACKET",gb="RIGHTWHITECORNERBRACKET",yb="FULLWIDTHLESSTHAN",vb="FULLWIDTHGREATERTHAN",bb="AMPERSAND",xb="APOSTROPHE",Sb="ASTERISK",xc="AT",Cb="BACKSLASH",wb="BACKTICK",Eb="CARET",Ec="COLON",RE="COMMA",Tb="DOLLAR",Zo="DOT",_b="EQUALS",OE="EXCLAMATION",Na="HYPHEN",Kg="PERCENT",kb="PIPE",Mb="PLUS",Ab="POUND",Xg="QUERY",DE="QUOTE",Y8="FULLWIDTHMIDDLEDOT",zE="SEMI",$o="SLASH",Qg="TILDE",Nb="UNDERSCORE",K8="EMOJI",Rb="SYM";var X8=Object.freeze({__proto__:null,ALPHANUMERICAL:V8,AMPERSAND:bb,APOSTROPHE:xb,ASCIINUMERICAL:q8,ASTERISK:Sb,AT:xc,BACKSLASH:Cb,BACKTICK:wb,CARET:Eb,CLOSEANGLEBRACKET:cb,CLOSEBRACE:Yg,CLOSEBRACKET:ab,CLOSEPAREN:lb,COLON:Ec,COMMA:RE,DOLLAR:Tb,DOT:Zo,EMOJI:K8,EQUALS:_b,EXCLAMATION:OE,FULLWIDTHGREATERTHAN:vb,FULLWIDTHLEFTPAREN:fb,FULLWIDTHLESSTHAN:yb,FULLWIDTHMIDDLEDOT:Y8,FULLWIDTHRIGHTPAREN:db,HYPHEN:Na,LEFTCORNERBRACKET:hb,LEFTWHITECORNERBRACKET:mb,LOCALHOST:v0,NL:NE,NUM:AE,OPENANGLEBRACKET:ub,OPENBRACE:Vg,OPENBRACKET:sb,OPENPAREN:ob,PERCENT:Kg,PIPE:kb,PLUS:Mb,POUND:Ab,QUERY:Xg,QUOTE:DE,RIGHTCORNERBRACKET:pb,RIGHTWHITECORNERBRACKET:gb,SCHEME:Av,SEMI:zE,SLASH:$o,SLASH_SCHEME:np,SYM:Rb,TILDE:Qg,TLD:KC,UNDERSCORE:Nb,UTLD:XC,UWORD:YC,WORD:Jl,WS:QC});const Xl=/[a-z]/,mg=new RegExp("\\p{L}","u"),fS=new RegExp("\\p{Emoji}","u"),Ql=/\d/,dS=/\s/,yT="\r",hS=`
`,SU="",CU="",pS="";let W1=null,J1=null;function wU(t=[]){const e={};js.groups=e;const n=new js;W1==null&&(W1=vT(mU)),J1==null&&(J1=vT(gU)),Me(n,"'",xb),Me(n,"{",Vg),Me(n,"}",Yg),Me(n,"[",sb),Me(n,"]",ab),Me(n,"(",ob),Me(n,")",lb),Me(n,"<",ub),Me(n,">",cb),Me(n,"",fb),Me(n,"",db),Me(n,"",hb),Me(n,"",pb),Me(n,"",mb),Me(n,"",gb),Me(n,"",yb),Me(n,"",vb),Me(n,"&",bb),Me(n,"*",Sb),Me(n,"@",xc),Me(n,"`",wb),Me(n,"^",Eb),Me(n,":",Ec),Me(n,",",RE),Me(n,"$",Tb),Me(n,".",Zo),Me(n,"=",_b),Me(n,"!",OE),Me(n,"-",Na),Me(n,"%",Kg),Me(n,"|",kb),Me(n,"+",Mb),Me(n,"#",Ab),Me(n,"?",Xg),Me(n,'"',DE),Me(n,"/",$o),Me(n,";",zE),Me(n,"~",Qg),Me(n,"_",Nb),Me(n,"\\",Cb),Me(n,"",Y8);const i=ai(n,Ql,AE,{[FC]:!0});ai(i,Ql,i);const r=ai(i,Xl,q8,{[qg]:!0}),s=ai(i,mg,V8,{[Dg]:!0}),a=ai(n,Xl,Jl,{[GC]:!0});ai(a,Ql,r),ai(a,Xl,a),ai(r,Ql,r),ai(r,Xl,r);const l=ai(n,mg,YC,{[qC]:!0});ai(l,Xl),ai(l,Ql,s),ai(l,mg,l),ai(s,Ql,s),ai(s,Xl),ai(s,mg,s);const c=Me(n,hS,NE,{[cS]:!0}),d=Me(n,yT,QC,{[cS]:!0}),m=ai(n,dS,QC,{[cS]:!0});Me(n,pS,m),Me(d,hS,c),Me(d,pS,m),ai(d,dS,m),Me(m,yT),Me(m,hS),ai(m,dS,m),Me(m,pS,m);const g=ai(n,fS,K8,{[G8]:!0});Me(g,"#"),ai(g,fS,g),Me(g,SU,g);const v=Me(g,CU);Me(v,"#"),ai(v,fS,g);const x=[[Xl,a],[Ql,r]],S=[[Xl,null],[mg,l],[Ql,s]];for(let T=0;T<W1.length;T++)fc(n,W1[T],KC,Jl,x);for(let T=0;T<J1.length;T++)fc(n,J1[T],XC,YC,S);Qf(KC,{tld:!0,ascii:!0},e),Qf(XC,{utld:!0,alpha:!0},e),fc(n,"file",Av,Jl,x),fc(n,"mailto",Av,Jl,x),fc(n,"http",np,Jl,x),fc(n,"https",np,Jl,x),fc(n,"ftp",np,Jl,x),fc(n,"ftps",np,Jl,x),Qf(Av,{scheme:!0,ascii:!0},e),Qf(np,{slashscheme:!0,ascii:!0},e),t=t.sort((T,k)=>T[0]>k[0]?1:-1);for(let T=0;T<t.length;T++){const k=t[T][0],O=t[T][1]?{[yU]:!0}:{[vU]:!0};k.indexOf("-")>=0?O[VC]=!0:Xl.test(k)?Ql.test(k)?O[qg]=!0:O[GC]=!0:O[FC]=!0,gT(n,k,k,O)}return gT(n,"localhost",v0,{ascii:!0}),n.jd=new js(Rb),{start:n,tokens:Object.assign({groups:e},X8)}}function Q8(t,e){const n=EU(e.replace(/[A-Z]/g,l=>l.toLowerCase())),i=n.length,r=[];let s=0,a=0;for(;a<i;){let l=t,c=null,d=0,m=null,g=-1,v=-1;for(;a<i&&(c=l.go(n[a]));)l=c,l.accepts()?(g=0,v=0,m=l):g>=0&&(g+=n[a].length,v++),d+=n[a].length,s+=n[a].length,a++;s-=g,a-=v,d-=g,r.push({t:m.t,v:e.slice(s-d,s),s:s-d,e:s})}return r}function EU(t){const e=[],n=t.length;let i=0;for(;i<n;){let r=t.charCodeAt(i),s,a=r<55296||r>56319||i+1===n||(s=t.charCodeAt(i+1))<56320||s>57343?t[i]:t.slice(i,i+2);e.push(a),i+=a.length}return e}function fc(t,e,n,i,r){let s;const a=e.length;for(let l=0;l<a-1;l++){const c=e[l];t.j[c]?s=t.j[c]:(s=new js(i),s.jr=r.slice(),t.j[c]=s),t=s}return s=new js(n),s.jr=r.slice(),t.j[e[a-1]]=s,s}function vT(t){const e=[],n=[];let i=0,r="0123456789";for(;i<t.length;){let s=0;for(;r.indexOf(t[i+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let a=parseInt(t.substring(i,i+s),10);a>0;a--)n.pop();i+=s}else n.push(t[i]),i++}return e}const b0={defaultProtocol:"http",events:null,format:bT,formatHref:bT,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function jE(t,e=null){let n=Object.assign({},b0);t&&(n=Object.assign(n,t instanceof jE?t.o:t));const i=n.ignoreTags,r=[];for(let s=0;s<i.length;s++)r.push(i[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=r}jE.prototype={o:b0,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const i=e!=null;let r=this.o[t];return r&&(typeof r=="object"?(r=n.t in r?r[n.t]:b0[t],typeof r=="function"&&i&&(r=r(e,n))):typeof r=="function"&&i&&(r=r(e,n.t,n)),r)},getObj(t,e,n){let i=this.o[t];return typeof i=="function"&&e!=null&&(i=i(e,n.t,n)),i},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function bT(t){return t}function W8(t,e){this.t="token",this.v=t,this.tk=e}W8.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),i=t.get("format",e,this);return n&&i.length>n?i.substring(0,n)+"":i},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=b0.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),i=t.get("formatHref",n,this),r=t.get("tagName",n,e),s=this.toFormattedString(t),a={},l=t.get("className",n,e),c=t.get("target",n,e),d=t.get("rel",n,e),m=t.getObj("attributes",n,e),g=t.getObj("events",n,e);return a.href=i,l&&(a.class=l),c&&(a.target=c),d&&(a.rel=d),m&&Object.assign(a,m),{tagName:r,attributes:a,content:s,eventListeners:g}}};function wx(t,e){class n extends W8{constructor(r,s){super(r,s),this.t=t}}for(const i in e)n.prototype[i]=e[i];return n.t=t,n}const xT=wx("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ST=wx("text"),TU=wx("nl"),Z1=wx("url",{isLink:!0,toHref(t=b0.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==v0&&t[1].t===Ec}}),Aa=t=>new js(t);function _U({groups:t}){const e=t.domain.concat([bb,Sb,xc,Cb,wb,Eb,Tb,_b,Na,AE,Kg,kb,Mb,Ab,$o,Rb,Qg,Nb]),n=[xb,Ec,RE,Zo,OE,Kg,Xg,DE,zE,ub,cb,Vg,Yg,ab,sb,ob,lb,fb,db,hb,pb,mb,gb,yb,vb],i=[bb,xb,Sb,Cb,wb,Eb,Tb,_b,Na,Vg,Yg,Kg,kb,Mb,Ab,Xg,$o,Rb,Qg,Nb],r=Aa(),s=Me(r,Qg);St(s,i,s),St(s,t.domain,s);const a=Aa(),l=Aa(),c=Aa();St(r,t.domain,a),St(r,t.scheme,l),St(r,t.slashscheme,c),St(a,i,s),St(a,t.domain,a);const d=Me(a,xc);Me(s,xc,d),Me(l,xc,d),Me(c,xc,d);const m=Me(s,Zo);St(m,i,s),St(m,t.domain,s);const g=Aa();St(d,t.domain,g),St(g,t.domain,g);const v=Me(g,Zo);St(v,t.domain,g);const x=Aa(xT);St(v,t.tld,x),St(v,t.utld,x),Me(d,v0,x);const S=Me(g,Na);Me(S,Na,S),St(S,t.domain,g),St(x,t.domain,g),Me(x,Zo,v),Me(x,Na,S);const T=Me(x,Ec);St(T,t.numeric,xT);const k=Me(a,Na),A=Me(a,Zo);Me(k,Na,k),St(k,t.domain,a),St(A,i,s),St(A,t.domain,a);const O=Aa(Z1);St(A,t.tld,O),St(A,t.utld,O),St(O,t.domain,a),St(O,i,s),Me(O,Zo,A),Me(O,Na,k),Me(O,xc,d);const z=Me(O,Ec),L=Aa(Z1);St(z,t.numeric,L);const I=Aa(Z1),j=Aa();St(I,e,I),St(I,n,j),St(j,e,I),St(j,n,j),Me(O,$o,I),Me(L,$o,I);const B=Me(l,Ec),q=Me(c,Ec),$=Me(q,$o),G=Me($,$o);St(l,t.domain,a),Me(l,Zo,A),Me(l,Na,k),St(c,t.domain,a),Me(c,Zo,A),Me(c,Na,k),St(B,t.domain,I),Me(B,$o,I),Me(B,Xg,I),St(G,t.domain,I),St(G,e,I),Me(G,$o,I);const X=[[Vg,Yg],[sb,ab],[ob,lb],[ub,cb],[fb,db],[hb,pb],[mb,gb],[yb,vb]];for(let J=0;J<X.length;J++){const[ce,Z]=X[J],te=Me(I,ce);Me(j,ce,te),Me(te,Z,I);const V=Aa(Z1);St(te,e,V);const ae=Aa();St(te,n),St(V,e,V),St(V,n,ae),St(ae,e,V),St(ae,n,ae),Me(V,Z,I),Me(ae,Z,I)}return Me(r,v0,O),Me(r,NE,TU),{start:r,tokens:X8}}function kU(t,e,n){let i=n.length,r=0,s=[],a=[];for(;r<i;){let l=t,c=null,d=null,m=0,g=null,v=-1;for(;r<i&&!(c=l.go(n[r].t));)a.push(n[r++]);for(;r<i&&(d=c||l.go(n[r].t));)c=null,l=d,l.accepts()?(v=0,g=l):v>=0&&v++,r++,m++;if(v<0)r-=m,r<i&&(a.push(n[r]),r++);else{a.length>0&&(s.push(mS(ST,e,a)),a=[]),r-=v,m-=v;const x=g.t,S=n.slice(r-m,r);s.push(mS(x,e,S))}}return a.length>0&&s.push(mS(ST,e,a)),s}function mS(t,e,n){const i=n[0].s,r=n[n.length-1].e,s=e.slice(i,r);return new t(s,n)}const MU=typeof console<"u"&&console&&console.warn||(()=>{}),AU="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",_n={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function NU(){return js.groups={},_n.scanner=null,_n.parser=null,_n.tokenQueue=[],_n.pluginQueue=[],_n.customSchemes=[],_n.initialized=!1,_n}function CT(t,e=!1){if(_n.initialized&&MU(`linkifyjs: already initialized - will not register custom scheme "${t}" ${AU}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);_n.customSchemes.push([t,e])}function RU(){_n.scanner=wU(_n.customSchemes);for(let t=0;t<_n.tokenQueue.length;t++)_n.tokenQueue[t][1]({scanner:_n.scanner});_n.parser=_U(_n.scanner.tokens);for(let t=0;t<_n.pluginQueue.length;t++)_n.pluginQueue[t][1]({scanner:_n.scanner,parser:_n.parser});return _n.initialized=!0,_n}function LE(t){return _n.initialized||RU(),kU(_n.parser.start,t,Q8(_n.scanner.start,t))}LE.scan=Q8;function J8(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const i=new jE(n),r=LE(t),s=[];for(let a=0;a<r.length;a++){const l=r[a];l.isLink&&(!e||l.t===e)&&i.check(l)&&s.push(l.toFormattedObject(i))}return s}var BE="[\0- -\u2029]",OU=new RegExp(BE),DU=new RegExp(`${BE}$`),zU=new RegExp(BE,"g");function jU(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function LU(t){return new Wn({key:new Ii("autolink"),appendTransaction:(e,n,i)=>{const r=e.some(d=>d.docChanged)&&!n.doc.eq(i.doc),s=e.some(d=>d.getMeta("preventAutolink"));if(!r||s)return;const{tr:a}=i,l=v8(n.doc,[...e]);if(T8(l).forEach(({newRange:d})=>{const m=bI(i.doc,d,x=>x.isTextblock);let g,v;if(m.length>1)g=m[0],v=i.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");else if(m.length){const x=i.doc.textBetween(d.from,d.to," "," ");if(!DU.test(x))return;g=m[0],v=i.doc.textBetween(g.pos,d.to,void 0," ")}if(g&&v){const x=v.split(OU).filter(Boolean);if(x.length<=0)return!1;const S=x[x.length-1],T=g.pos+v.lastIndexOf(S);if(!S)return!1;const k=LE(S).map(A=>A.toObject(t.defaultProtocol));if(!jU(k))return!1;k.filter(A=>A.isLink).map(A=>({...A,from:T+A.start+1,to:T+A.end+1})).filter(A=>i.schema.marks.code?!i.doc.rangeHasMark(A.from,A.to,i.schema.marks.code):!0).filter(A=>t.validate(A.value)).filter(A=>t.shouldAutoLink(A.value)).forEach(A=>{EE(A.from,A.to,i.doc).some(O=>O.mark.type===t.type)||a.addMark(A.from,A.to,t.type.create({href:A.href}))})}}),!!a.steps.length)return a}})}function BU(t){return new Wn({key:new Ii("handleClickLink"),props:{handleClick:(e,n,i)=>{var r,s;if(i.button!==0||!e.editable)return!1;let a=null;if(i.target instanceof HTMLAnchorElement)a=i.target;else{let m=i.target;const g=[];for(;m.nodeName!=="DIV";)g.push(m),m=m.parentNode;a=g.find(v=>v.nodeName==="A")}if(!a)return!1;const l=E8(e.state,t.type.name),c=(r=a?.href)!=null?r:l.href,d=(s=a?.target)!=null?s:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),a&&c?(window.open(c,d),!0):!1}}})}function PU(t){return new Wn({key:new Ii("handlePasteLink"),props:{handlePaste:(e,n,i)=>{const{shouldAutoLink:r}=t,{state:s}=e,{selection:a}=s,{empty:l}=a;if(l)return!1;let c="";i.content.forEach(m=>{c+=m.textContent});const d=J8(c,{defaultProtocol:t.defaultProtocol}).find(m=>m.isLink&&m.value===c);return!c||!d||r!==void 0&&!r(d.href)?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function Hf(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(i=>{const r=typeof i=="string"?i:i.scheme;r&&n.push(r)}),!t||t.replace(zU,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var IU=vd.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){CT(t);return}CT(t.scheme,t.optionalSlashes)})},onDestroy(){NU()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Hf(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Hf(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Hf(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Mi(this.options.HTMLAttributes,t),0]:["a",Mi(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const i=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${i})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:i=>!!Hf(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:i=>!!Hf(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[fd({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:i}=this.options,r=J8(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!Hf(a,n),protocols:n,defaultProtocol:i}));r.length&&r.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(LU({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:i=>this.options.isAllowedUri(i,{defaultValidate:r=>!!Hf(r,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(BU({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(PU({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),HU=Object.defineProperty,UU=(t,e)=>{for(var n in e)HU(t,n,{get:e[n],enumerable:!0})},FU="listItem",wT="textStyle",ET=/^\s*([-+*])\s$/,Z8=ta.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(FU,this.editor.getAttributes(wT)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=bp({find:ET,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=bp({find:ET,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(wT),editor:this.editor})),[t]}}),$8=ta.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(r=>r.type==="paragraph"))n=e.parseChildren(t.tokens);else{const r=t.tokens[0];if(r&&r.type==="text"&&r.tokens&&r.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(r.tokens)}],t.tokens.length>1){const a=t.tokens.slice(1),l=e.parseChildren(a);n.push(...l)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>ME(t,e,i=>i.parentType==="bulletList"?"- ":i.parentType==="orderedList"?`${i.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),GU={};UU(GU,{findListItemPos:()=>P0,getNextListDepth:()=>PE,handleBackspace:()=>WC,handleDelete:()=>JC,hasListBefore:()=>eA,hasListItemAfter:()=>qU,hasListItemBefore:()=>tA,listItemHasSubList:()=>nA,nextListIsDeeper:()=>iA,nextListIsHigher:()=>rA});var P0=(t,e)=>{const{$from:n}=e.selection,i=ki(t,e.schema);let r=null,s=n.depth,a=n.pos,l=null;for(;s>0&&l===null;)r=n.node(s),r.type===i?l=s:(s-=1,a-=1);return l===null?null:{$pos:e.doc.resolve(a),depth:l}},PE=(t,e)=>{const n=P0(t,e);if(!n)return!1;const[,i]=AI(e,t,n.$pos.pos+4);return i},eA=(t,e,n)=>{const{$anchor:i}=t.selection,r=Math.max(0,i.pos-2),s=t.doc.resolve(r).node();return!(!s||!n.includes(s.type.name))},tA=(t,e)=>{var n;const{$anchor:i}=e.selection,r=e.doc.resolve(i.pos-2);return!(r.index()===0||((n=r.nodeBefore)==null?void 0:n.type.name)!==t)},nA=(t,e,n)=>{if(!n)return!1;const i=ki(t,e.schema);let r=!1;return n.descendants(s=>{s.type===i&&(r=!0)}),r},WC=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Bc(t.state,e)&&eA(t.state,e,n)){const{$anchor:l}=t.state.selection,c=t.state.doc.resolve(l.before()-1),d=[];c.node().descendants((v,x)=>{v.type.name===e&&d.push({node:v,pos:x})});const m=d.at(-1);if(!m)return!1;const g=t.state.doc.resolve(c.start()+m.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},g.end()).joinForward().run()}if(!Bc(t.state,e)||!DI(t.state))return!1;const i=P0(e,t.state);if(!i)return!1;const s=t.state.doc.resolve(i.$pos.pos-2).node(i.depth),a=nA(e,t.state,s);return tA(e,t.state)&&!a?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},iA=(t,e)=>{const n=PE(t,e),i=P0(t,e);return!i||!n?!1:n>i.depth},rA=(t,e)=>{const n=PE(t,e),i=P0(t,e);return!i||!n?!1:n<i.depth},JC=(t,e)=>{if(!Bc(t.state,e)||!OI(t.state,e))return!1;const{selection:n}=t.state,{$from:i,$to:r}=n;return!n.empty&&i.sameParent(r)?!1:iA(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():rA(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},qU=(t,e)=>{var n;const{$anchor:i}=e.selection,r=e.doc.resolve(i.pos-i.parentOffset-2);return!(r.index()===r.parent.childCount-1||((n=r.nodeAfter)==null?void 0:n.type.name)!==t)},sA=pi.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&JC(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&JC(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:i})=>{t.state.schema.nodes[n]!==void 0&&WC(t,n,i)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:i})=>{t.state.schema.nodes[n]!==void 0&&WC(t,n,i)&&(e=!0)}),e}}}}),TT=/^(\s*)(\d+)\.\s+(.*)$/,VU=/^\s/;function YU(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n],s=r.match(TT);if(!s)break;const[,a,l,c]=s,d=a.length;let m=c,g=n+1;const v=[r];for(;g<t.length;){const x=t[g];if(x.match(TT))break;if(x.trim()==="")v.push(x),m+=`
`,g+=1;else if(x.match(VU))v.push(x),m+=`
${x.slice(d+2)}`,g+=1;else break}e.push({indent:d,number:parseInt(l,10),content:m.trim(),raw:v.join(`
`)}),i=g,n=g}return[e,i]}function aA(t,e,n){var i;const r=[];let s=0;for(;s<t.length;){const a=t[s];if(a.indent===e){const l=a.content.split(`
`),c=((i=l[0])==null?void 0:i.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const m=l.slice(1).join(`
`).trim();if(m){const x=n.blockTokens(m);d.push(...x)}let g=s+1;const v=[];for(;g<t.length&&t[g].indent>e;)v.push(t[g]),g+=1;if(v.length>0){const x=Math.min(...v.map(T=>T.indent)),S=aA(v,x,n);d.push({type:"list",ordered:!0,start:v[0].number,items:S,raw:v.map(T=>T.raw).join(`
`)})}r.push({type:"list_item",raw:a.raw,tokens:d}),s=g}else s+=1}return r}function KU(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const i=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(r=>{if(r.type==="paragraph"||r.type==="list"||r.type==="blockquote"||r.type==="code")i.push(...e.parseChildren([r]));else if(r.type==="text"&&r.tokens){const s=e.parseChildren([r]);i.push({type:"paragraph",content:s})}else{const s=e.parseChildren([r]);s.length>0&&i.push(...s)}}),{type:"listItem",content:i}})}var XU="listItem",_T="textStyle",kT=/^(\d+)\.\s$/,oA=ta.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Mi(this.options.HTMLAttributes,n),0]:["ol",Mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,i=t.items?KU(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:i}:{type:"orderedList",content:i}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var i;const r=t.split(`
`),[s,a]=YU(r);if(s.length===0)return;const l=aA(s,0,n);return l.length===0?void 0:{type:"list",ordered:!0,start:((i=s[0])==null?void 0:i.number)||1,items:l,raw:r.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(XU,this.editor.getAttributes(_T)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=bp({find:kT,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=bp({find:kT,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(_T)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),QU=/^\s*(\[([( |x])?\])\s$/,WU=ta.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Mi(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const i=e.parseChildren(t.nestedTokens);n.push(...i)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const r=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return ME(t,e,r)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:i})=>{const r=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),d=m=>{var g,v;l.ariaLabel=((v=(g=this.options.a11y)==null?void 0:g.checkboxLabel)==null?void 0:v.call(g,m,l.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};return d(t),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",m=>m.preventDefault()),l.addEventListener("change",m=>{if(!i.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:g}=m.target;i.isEditable&&typeof n=="function"&&i.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const x=n();if(typeof x!="number")return!1;const S=v.doc.nodeAt(x);return v.setNodeMarkup(x,void 0,{...S?.attrs,checked:g}),!0}).run(),!i.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,g)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,g])=>{r.setAttribute(m,g)}),r.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,s.append(l,a),r.append(s,c),Object.entries(e).forEach(([m,g])=>{r.setAttribute(m,g)}),{dom:r,contentDOM:c,update:m=>m.type!==this.type?!1:(r.dataset.checked=m.attrs.checked,l.checked=m.attrs.checked,d(m),!0)}}},addInputRules(){return[bp({find:QU,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),JU=ta.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Mi(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const i=s=>{const a=HC(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:n.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:i},n);return a?[{type:"taskList",raw:a.raw,items:a.items}]:n.blockTokens(s)},r=HC(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,a)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:a}),customNestedParser:i},n);if(r)return{type:"taskList",raw:r.raw,items:r.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});pi.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Z8.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push($8.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(sA.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(oA.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(WU.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(JU.configure(this.options.taskList)),t}});var ZU=ta.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Mi(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),$U=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,eF=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,tF=vd.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[vp({find:$U,type:this.type})]},addPasteRules(){return[fd({find:eF,type:this.type})]}}),nF=ta.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),lA=vd.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Mi(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const r=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!r)return;const s=r[2].trim();return{type:"underline",raw:r[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),iF=lA;function rF(t={}){return new Wn({view(e){return new sF(e,t)}})}class sF{constructor(e,n){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=n.width)!==null&&i!==void 0?i:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let s=a=>{this[r](a)};return e.dom.addEventListener(r,s),{name:r,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,i,r=this.editorView.dom,s=r.getBoundingClientRect(),a=s.width/r.offsetWidth,l=s.height/r.offsetHeight;if(n){let g=e.nodeBefore,v=e.nodeAfter;if(g||v){let x=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(x){let S=x.getBoundingClientRect(),T=g?S.bottom:S.top;g&&v&&(T=(T+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*l;i={left:S.left,right:S.right,top:T-k,bottom:T+k}}}}if(!i){let g=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*a;i={left:g.left-v,right:g.left+v,top:g.top,bottom:g.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,m;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,m=-pageYOffset;else{let g=c.getBoundingClientRect(),v=g.width/c.offsetWidth,x=g.height/c.offsetHeight;d=g.left-c.scrollLeft*v,m=g.top-c.scrollTop*x}this.element.style.left=(i.left-d)/a+"px",this.element.style.top=(i.top-m)/l+"px",this.element.style.width=(i.right-i.left)/a+"px",this.element.style.height=(i.bottom-i.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),r=i&&i.type.spec.disableDropCursor,s=typeof r=="function"?r(this.editorView,n,e):r;if(n&&!s){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=cM(this.editorView.state.doc,a,this.editorView.dragging.slice);l!=null&&(a=l)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class oi extends Ct{constructor(e){super(e,e)}map(e,n){let i=e.resolve(n.map(this.head));return oi.valid(i)?new oi(i):Ct.near(i)}content(){return Be.empty}eq(e){return e instanceof oi&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new oi(e.resolve(n.pos))}getBookmark(){return new IE(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!aF(e)||!oF(e))return!1;let i=n.type.spec.allowGapCursor;if(i!=null)return i;let r=n.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,n,i=!1){e:for(;;){if(!i&&oi.valid(e))return e;let r=e.pos,s=null;for(let a=e.depth;;a--){let l=e.node(a);if(n>0?e.indexAfter(a)<l.childCount:e.index(a)>0){s=l.child(n>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;r+=n;let c=e.doc.resolve(r);if(oi.valid(c))return c}for(;;){let a=n>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!We.isSelectable(s)){e=e.doc.resolve(r+s.nodeSize*n),i=!1;continue e}break}s=a,r+=n;let l=e.doc.resolve(r);if(oi.valid(l))return l}return null}}}oi.prototype.visible=!1;oi.findFrom=oi.findGapCursorFrom;Ct.jsonID("gapcursor",oi);class IE{constructor(e){this.pos=e}map(e){return new IE(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return oi.valid(n)?new oi(n):Ct.near(n)}}function uA(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function aF(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),i=t.node(e);if(n==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(n-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||uA(r.type))return!0;if(r.inlineContent)return!1}}return!0}function oF(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),i=t.node(e);if(n==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(n);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||uA(r.type))return!0;if(r.inlineContent)return!1}}return!0}function lF(){return new Wn({props:{decorations:dF,createSelectionBetween(t,e,n){return e.pos==n.pos&&oi.valid(n)?new oi(n):null},handleClick:cF,handleKeyDown:uF,handleDOMEvents:{beforeinput:fF}}})}const uF=c8({ArrowLeft:$1("horiz",-1),ArrowRight:$1("horiz",1),ArrowUp:$1("vert",-1),ArrowDown:$1("vert",1)});function $1(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,r,s){let a=i.selection,l=e>0?a.$to:a.$from,c=a.empty;if(a instanceof st){if(!s.endOfTextblock(n)||l.depth==0)return!1;c=!1,l=i.doc.resolve(e>0?l.after():l.before())}let d=oi.findGapCursorFrom(l,e,c);return d?(r&&r(i.tr.setSelection(new oi(d))),!0):!1}}function cF(t,e,n){if(!t||!t.editable)return!1;let i=t.state.doc.resolve(e);if(!oi.valid(i))return!1;let r=t.posAtCoords({left:n.clientX,top:n.clientY});return r&&r.inside>-1&&We.isSelectable(t.state.doc.nodeAt(r.inside))?!1:(t.dispatch(t.state.tr.setSelection(new oi(i))),!0)}function fF(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof oi))return!1;let{$from:n}=t.state.selection,i=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!i)return!1;let r=Ee.empty;for(let a=i.length-1;a>=0;a--)r=Ee.from(i[a].createAndFill(null,r));let s=t.state.tr.replace(n.pos,n.pos,new Be(r,0,0));return s.setSelection(st.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function dF(t){if(!(t.selection instanceof oi))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Kn.create(t.doc,[rs.widget(t.selection.head,e,{key:"gapcursor"})])}var Ob=200,Zi=function(){};Zi.prototype.append=function(e){return e.length?(e=Zi.from(e),!this.length&&e||e.length<Ob&&this.leafAppend(e)||this.length<Ob&&e.leafPrepend(this)||this.appendInner(e)):this};Zi.prototype.prepend=function(e){return e.length?Zi.from(e).append(this):this};Zi.prototype.appendInner=function(e){return new hF(this,e)};Zi.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Zi.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Zi.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Zi.prototype.forEach=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length),n<=i?this.forEachInner(e,n,i,0):this.forEachInvertedInner(e,n,i,0)};Zi.prototype.map=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,a){return r.push(e(s,a))},n,i),r};Zi.from=function(e){return e instanceof Zi?e:e&&e.length?new cA(e):Zi.empty};var cA=(function(t){function e(i){t.call(this),this.values=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new e(this.values.slice(r,s))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,s,a,l){for(var c=s;c<a;c++)if(r(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,a,l){for(var c=s-1;c>=a;c--)if(r(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=Ob)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=Ob)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Zi);Zi.empty=new cA([]);var hF=(function(t){function e(n,i){t.call(this),this.left=n,this.right=i,this.length=n.length+i.length,this.depth=Math.max(n.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,s,a){var l=this.left.length;if(r<l&&this.left.forEachInner(i,r,Math.min(s,l),a)===!1||s>l&&this.right.forEachInner(i,Math.max(r-l,0),Math.min(this.length,s)-l,a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,r,s,a){var l=this.left.length;if(r>l&&this.right.forEachInvertedInner(i,r-l,Math.max(s,l)-l,a+l)===!1||s<l&&this.left.forEachInvertedInner(i,Math.min(r,l),s,a)===!1)return!1},e.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e})(Zi);const pF=500;class lo{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;n&&(r=this.remapping(i,this.items.length),s=r.maps.length);let a=e.tr,l,c,d=[],m=[];return this.items.forEach((g,v)=>{if(!g.step){r||(r=this.remapping(i,v+1),s=r.maps.length),s--,m.push(g);return}if(r){m.push(new dc(g.map));let x=g.step.map(r.slice(s)),S;x&&a.maybeStep(x).doc&&(S=a.mapping.maps[a.mapping.maps.length-1],d.push(new dc(S,void 0,void 0,d.length+m.length))),s--,S&&r.appendMap(S,s)}else a.maybeStep(g.step);if(g.selection)return l=r?g.selection.map(r.slice(s)):g.selection,c=new lo(this.items.slice(0,i).append(m.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:l}}addTransform(e,n,i,r){let s=[],a=this.eventCount,l=this.items,c=!r&&l.length?l.get(l.length-1):null;for(let m=0;m<e.steps.length;m++){let g=e.steps[m].invert(e.docs[m]),v=new dc(e.mapping.maps[m],g,n),x;(x=c&&c.merge(v))&&(v=x,m?s.pop():l=l.slice(0,l.length-1)),s.push(v),n&&(a++,n=void 0),r||(c=v)}let d=a-i.depth;return d>gF&&(l=mF(l,d),a-=d),new lo(l.append(s),a)}remapping(e,n){let i=new d0;return this.items.forEach((r,s)=>{let a=r.mirrorOffset!=null&&s-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,a)},e,n),i}addMaps(e){return this.eventCount==0?this:new lo(this.items.append(e.map(n=>new dc(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-n),s=e.mapping,a=e.steps.length,l=this.eventCount;this.items.forEach(v=>{v.selection&&l--},r);let c=n;this.items.forEach(v=>{let x=s.getMirror(--c);if(x==null)return;a=Math.min(a,x);let S=s.maps[x];if(v.step){let T=e.steps[x].invert(e.docs[x]),k=v.selection&&v.selection.map(s.slice(c+1,x));k&&l++,i.push(new dc(S,T,k))}else i.push(new dc(S))},r);let d=[];for(let v=n;v<a;v++)d.push(new dc(s.maps[v]));let m=this.items.slice(0,r).append(d).append(i),g=new lo(m,l);return g.emptyItemCount()>pF&&(g=g.compress(this.items.length-i.length)),g}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),i=n.maps.length,r=[],s=0;return this.items.forEach((a,l)=>{if(l>=e)r.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(n.slice(i)),d=c&&c.getMap();if(i--,d&&n.appendMap(d,i),c){let m=a.selection&&a.selection.map(n.slice(i));m&&s++;let g=new dc(d.invert(),c,m),v,x=r.length-1;(v=r.length&&r[x].merge(g))?r[x]=v:r.push(g)}}else a.map&&i--},this.items.length,0),new lo(Zi.from(r.reverse()),s)}}lo.empty=new lo(Zi.empty,0);function mF(t,e){let n;return t.forEach((i,r)=>{if(i.selection&&e--==0)return n=r,!1}),t.slice(n)}let dc=class fA{constructor(e,n,i,r){this.map=e,this.step=n,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new fA(n.getMap().invert(),n,this.selection)}}};class Sc{constructor(e,n,i,r,s){this.done=e,this.undone=n,this.prevRanges=i,this.prevTime=r,this.prevComposition=s}}const gF=20;function yF(t,e,n,i){let r=n.getMeta(id),s;if(r)return r.historyState;n.getMeta(xF)&&(t=new Sc(t.done,t.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(a&&a.getMeta(id))return a.getMeta(id).redo?new Sc(t.done.addTransform(n,void 0,i,Nv(e)),t.undone,MT(n.mapping.maps),t.prevTime,t.prevComposition):new Sc(t.done,t.undone.addTransform(n,void 0,i,Nv(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),c=t.prevTime==0||!a&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-i.newGroupDelay||!vF(n,t.prevRanges)),d=a?gS(t.prevRanges,n.mapping):MT(n.mapping.maps);return new Sc(t.done.addTransform(n,c?e.selection.getBookmark():void 0,i,Nv(e)),lo.empty,d,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Sc(t.done.rebased(n,s),t.undone.rebased(n,s),gS(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Sc(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),gS(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function vF(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<e.length;s+=2)i<=e[s+1]&&r>=e[s]&&(n=!0)}),n}function MT(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((i,r,s,a)=>e.push(s,a));return e}function gS(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let r=e.map(t[i],1),s=e.map(t[i+1],-1);r<=s&&n.push(r,s)}return n}function bF(t,e,n){let i=Nv(e),r=id.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,i);if(!s)return null;let a=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),r,i),c=new Sc(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(a).setMeta(id,{redo:n,historyState:c})}let yS=!1,AT=null;function Nv(t){let e=t.plugins;if(AT!=e){yS=!1,AT=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){yS=!0;break}}return yS}const id=new Ii("history"),xF=new Ii("closeHistory");function SF(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Wn({key:id,state:{init(){return new Sc(lo.empty,lo.empty,null,0,-1)},apply(e,n,i){return yF(n,i,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let i=n.inputType,r=i=="historyUndo"?hA:i=="historyRedo"?pA:null;return!r||!e.editable?!1:(n.preventDefault(),r(e.state,e.dispatch))}}}})}function dA(t,e){return(n,i)=>{let r=id.getState(n);if(!r||(t?r.undone:r.done).eventCount==0)return!1;if(i){let s=bF(r,n,t);s&&i(e?s.scrollIntoView():s)}return!0}}const hA=dA(!1,!0),pA=dA(!0,!0);pi.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const i=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(i)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Wn({key:new Ii("characterCount"),appendTransaction:(e,n,i)=>{if(t)return;const r=this.options.limit;if(r==null||r===0){t=!0;return}const s=this.storage.characters({node:i.doc});if(s>r){const a=s-r,l=0,c=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${r} characters. Content was automatically trimmed.`);const d=i.tr.deleteRange(l,c);return t=!0,d}t=!0},filterTransaction:(e,n)=>{const i=this.options.limit;if(!e.docChanged||i===0||i===null||i===void 0)return!0;const r=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=i||r>i&&s>i&&s<=r)return!0;if(r>i&&s>i&&s>r||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,c=s-i,d=l-c,m=l;return e.deleteRange(d,m),!(this.storage.characters({node:e.doc})>i)}})]}});var CF=pi.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[rF(this.options)]}});pi.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Wn({key:new Ii("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:i}=this.editor,{anchor:r}=e,s=[];if(!n||!i)return Kn.create(t,[]);let a=0;this.options.mode==="deepest"&&t.descendants((c,d)=>{if(c.isText)return;if(!(r>=d&&r<=d+c.nodeSize-1))return!1;a+=1});let l=0;return t.descendants((c,d)=>{if(c.isText||!(r>=d&&r<=d+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&a-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(rs.node(d,d+c.nodeSize,{class:this.options.className}))}),Kn.create(t,s)}}})]}});var wF=pi.create({name:"gapCursor",addProseMirrorPlugins(){return[lF()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Xt(Ke(t,"allowGapCursor",n)))!=null?e:null}}}),EF=pi.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Wn({key:new Ii("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,r=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((a,l)=>{const c=i>=l&&i<=l+a.nodeSize,d=!a.isLeaf&&xx(a);if((c||!this.options.showOnlyCurrent)&&d){const m=[this.options.emptyNodeClass];s&&m.push(this.options.emptyEditorClass);const g=rs.node(l,l+a.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:c}):this.options.placeholder});r.push(g)}return this.options.includeChildren}),Kn.create(t,r)}}})]}});pi.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Wn({key:new Ii("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||_8(n.selection)||t.view.dragging?null:Kn.create(n.doc,[rs.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function NT({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var TF=pi.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ii(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",i=Object.entries(this.editor.schema.nodes).map(([,r])=>r).filter(r=>(this.options.notAfter||[]).concat(n).includes(r.name));return[new Wn({key:e,appendTransaction:(r,s,a)=>{const{doc:l,tr:c,schema:d}=a,m=e.getState(a),g=l.content.size,v=d.nodes[n];if(m)return c.insert(g,v.create())},state:{init:(r,s)=>{const a=s.tr.doc.lastChild;return!NT({node:a,types:i})},apply:(r,s)=>{if(!r.docChanged||r.getMeta("__uniqueIDTransaction"))return s;const a=r.doc.lastChild;return!NT({node:a,types:i})}}})]}}),_F=pi.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>hA(t,e),redo:()=>({state:t,dispatch:e})=>pA(t,e)}},addProseMirrorPlugins(){return[SF(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),kF=pi.create({name:"starterKit",addExtensions(){var t,e,n,i;const r=[];return this.options.bold!==!1&&r.push($H.configure(this.options.bold)),this.options.blockquote!==!1&&r.push(XH.configure(this.options.blockquote)),this.options.bulletList!==!1&&r.push(Z8.configure(this.options.bulletList)),this.options.code!==!1&&r.push(nU.configure(this.options.code)),this.options.codeBlock!==!1&&r.push(sU.configure(this.options.codeBlock)),this.options.document!==!1&&r.push(aU.configure(this.options.document)),this.options.dropcursor!==!1&&r.push(CF.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&r.push(wF.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&r.push(oU.configure(this.options.hardBreak)),this.options.heading!==!1&&r.push(lU.configure(this.options.heading)),this.options.undoRedo!==!1&&r.push(_F.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&r.push(uU.configure(this.options.horizontalRule)),this.options.italic!==!1&&r.push(pU.configure(this.options.italic)),this.options.listItem!==!1&&r.push($8.configure(this.options.listItem)),this.options.listKeymap!==!1&&r.push(sA.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&r.push(IU.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&r.push(oA.configure(this.options.orderedList)),this.options.paragraph!==!1&&r.push(ZU.configure(this.options.paragraph)),this.options.strike!==!1&&r.push(tF.configure(this.options.strike)),this.options.text!==!1&&r.push(nF.configure(this.options.text)),this.options.underline!==!1&&r.push(lA.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&r.push(TF.configure((i=this.options)==null?void 0:i.trailingNode)),r}}),MF=kF,AF=EF;/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),RT=t=>{const e=RF(t);return e.charAt(0).toUpperCase()+e.slice(1)},mA=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),OF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...l},c)=>N.createElement("svg",{ref:c,...DF,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:mA("lucide",r),...!s&&!OF(l)&&{"aria-hidden":"true"},...l},[...a.map(([d,m])=>N.createElement(d,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=(t,e)=>{const n=N.forwardRef(({className:i,...r},s)=>N.createElement(zF,{ref:s,iconNode:e,className:mA(`lucide-${NF(RT(t))}`,`lucide-${t}`,i),...r}));return n.displayName=RT(t),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],LF=ll("bold",jF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],PF=ll("clock",BF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],HF=ll("folder",IF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],FF=ll("italic",UF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],qF=ll("list-ordered",GF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],YF=ll("list",VF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gA=ll("plus",KF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],QF=ll("quote",XF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],JF=ll("strikethrough",WF);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],$F=ll("underline",ZF);function eG({content:t,onChange:e}){const n=GH({extensions:[MF,iF,AF.configure({placeholder:"Start typing your notes here..."})],content:t,onUpdate:({editor:i})=>{e(i.getHTML())},editorProps:{attributes:{class:"prose dark:prose-invert max-w-none focus:outline-none min-h-[500px]"}}});return n?_.jsxs("div",{className:"flex flex-col h-full",children:[_.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 sticky top-0 z-10",children:[_.jsx("button",{onClick:()=>n.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("bold")?"bg-gray-200 dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,title:"Bold",children:_.jsx(LF,{size:16})}),_.jsx("button",{onClick:()=>n.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("italic")?"bg-gray-200 dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,title:"Italic",children:_.jsx(FF,{size:16})}),_.jsx("button",{onClick:()=>n.chain().focus().toggleUnderline().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("underline")?"bg-gray-200 dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,title:"Underline",children:_.jsx($F,{size:16})}),_.jsx("button",{onClick:()=>n.chain().focus().toggleStrike().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("strike")?"bg-gray-200 dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,title:"Strikethrough",children:_.jsx(JF,{size:16})}),_.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),_.jsx("button",{onClick:()=>n.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("bulletList")?"bg-gray-200 dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,title:"Bullet List",children:_.jsx(YF,{size:16})}),_.jsx("button",{onClick:()=>n.chain().focus().toggleOrderedList().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("orderedList")?"bg-gray-200 dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,title:"Ordered List",children:_.jsx(qF,{size:16})}),_.jsx("button",{onClick:()=>n.chain().focus().toggleBlockquote().run(),className:`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 ${n.isActive("blockquote")?"bg-gray-200 dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,title:"Blockquote",children:_.jsx(QF,{size:16})})]}),_.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:_.jsx(LH,{editor:n})})]}):null}const yA=6048e5,tG=864e5,ev=43200,OT=1440,DT=Symbol.for("constructDateFrom");function au(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&DT in t?t[DT](e):t instanceof Date?new t.constructor(e):new Date(e)}function $i(t,e){return au(e||t,t)}let nG={};function I0(){return nG}function x0(t,e){const n=I0(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=$i(t,e?.in),s=r.getDay(),a=(s<i?7:0)+s-i;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function Db(t,e){return x0(t,{...e,weekStartsOn:1})}function vA(t,e){const n=$i(t,e?.in),i=n.getFullYear(),r=au(n,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const s=Db(r),a=au(n,0);a.setFullYear(i,0,4),a.setHours(0,0,0,0);const l=Db(a);return n.getTime()>=s.getTime()?i+1:n.getTime()>=l.getTime()?i:i-1}function zb(t){const e=$i(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ex(t,...e){const n=au.bind(null,t||e.find(i=>typeof i=="object"));return e.map(n)}function zT(t,e){const n=$i(t,e?.in);return n.setHours(0,0,0,0),n}function iG(t,e,n){const[i,r]=Ex(n?.in,t,e),s=zT(i),a=zT(r),l=+s-zb(s),c=+a-zb(a);return Math.round((l-c)/tG)}function rG(t,e){const n=vA(t,e),i=au(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Db(i)}function Rv(t,e){const n=+$i(t)-+$i(e);return n<0?-1:n>0?1:n}function sG(t){return au(t,Date.now())}function aG(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function oG(t){return!(!aG(t)&&typeof t!="number"||isNaN(+$i(t)))}function lG(t,e,n){const[i,r]=Ex(n?.in,t,e),s=i.getFullYear()-r.getFullYear(),a=i.getMonth()-r.getMonth();return s*12+a}function uG(t){return e=>{const i=(t?Math[t]:Math.trunc)(e);return i===0?0:i}}function cG(t,e){return+$i(t)-+$i(e)}function fG(t,e){const n=$i(t,e?.in);return n.setHours(23,59,59,999),n}function dG(t,e){const n=$i(t,e?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function hG(t,e){const n=$i(t,e?.in);return+fG(n,e)==+dG(n,e)}function pG(t,e,n){const[i,r,s]=Ex(n?.in,t,t,e),a=Rv(r,s),l=Math.abs(lG(r,s));if(l<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*l);let c=Rv(r,s)===-a;hG(i)&&l===1&&Rv(i,s)===1&&(c=!1);const d=a*(l-+c);return d===0?0:d}function mG(t,e,n){const i=cG(t,e)/1e3;return uG(n?.roundingMethod)(i)}function gG(t,e){const n=$i(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const yG={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vG=(t,e,n)=>{let i;const r=yG[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function vS(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const bG={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xG={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},SG={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},CG={date:vS({formats:bG,defaultWidth:"full"}),time:vS({formats:xG,defaultWidth:"full"}),dateTime:vS({formats:SG,defaultWidth:"full"})},wG={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},EG=(t,e,n,i)=>wG[t];function gg(t){return(e,n)=>{const i=n?.context?String(n.context):"standalone";let r;if(i==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,l=n?.width?String(n.width):a;r=t.formattingValues[l]||t.formattingValues[a]}else{const a=t.defaultWidth,l=n?.width?String(n.width):t.defaultWidth;r=t.values[l]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return r[s]}}const TG={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_G={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},MG={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},AG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},NG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RG=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},OG={ordinalNumber:RG,era:gg({values:TG,defaultWidth:"wide"}),quarter:gg({values:_G,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gg({values:kG,defaultWidth:"wide"}),day:gg({values:MG,defaultWidth:"wide"}),dayPeriod:gg({values:AG,defaultWidth:"wide",formattingValues:NG,defaultFormattingWidth:"wide"})};function yg(t){return(e,n={})=>{const i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=e.match(r);if(!s)return null;const a=s[0],l=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?zG(l,g=>g.test(a)):DG(l,g=>g.test(a));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const m=e.slice(a.length);return{value:d,rest:m}}}function DG(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function zG(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function jG(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const r=i[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=e.slice(r.length);return{value:a,rest:l}}}const LG=/^(\d+)(th|st|nd|rd)?/i,BG=/\d+/i,PG={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},IG={any:[/^b/i,/^(a|c)/i]},HG={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},UG={any:[/1/i,/2/i,/3/i,/4/i]},FG={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},GG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qG={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},VG={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},YG={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},KG={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},XG={ordinalNumber:jG({matchPattern:LG,parsePattern:BG,valueCallback:t=>parseInt(t,10)}),era:yg({matchPatterns:PG,defaultMatchWidth:"wide",parsePatterns:IG,defaultParseWidth:"any"}),quarter:yg({matchPatterns:HG,defaultMatchWidth:"wide",parsePatterns:UG,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yg({matchPatterns:FG,defaultMatchWidth:"wide",parsePatterns:GG,defaultParseWidth:"any"}),day:yg({matchPatterns:qG,defaultMatchWidth:"wide",parsePatterns:VG,defaultParseWidth:"any"}),dayPeriod:yg({matchPatterns:YG,defaultMatchWidth:"any",parsePatterns:KG,defaultParseWidth:"any"})},bA={code:"en-US",formatDistance:vG,formatLong:CG,formatRelative:EG,localize:OG,match:XG,options:{weekStartsOn:0,firstWeekContainsDate:1}};function QG(t,e){const n=$i(t,e?.in);return iG(n,gG(n))+1}function WG(t,e){const n=$i(t,e?.in),i=+Db(n)-+rG(n);return Math.round(i/yA)+1}function xA(t,e){const n=$i(t,e?.in),i=n.getFullYear(),r=I0(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=au(e?.in||t,0);a.setFullYear(i+1,0,s),a.setHours(0,0,0,0);const l=x0(a,e),c=au(e?.in||t,0);c.setFullYear(i,0,s),c.setHours(0,0,0,0);const d=x0(c,e);return+n>=+l?i+1:+n>=+d?i:i-1}function JG(t,e){const n=I0(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=xA(t,e),s=au(e?.in||t,0);return s.setFullYear(r,0,i),s.setHours(0,0,0,0),x0(s,e)}function ZG(t,e){const n=$i(t,e?.in),i=+x0(n,e)-+JG(n,e);return Math.round(i/yA)+1}function Qt(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const hc={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return Qt(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Qt(n+1,2)},d(t,e){return Qt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Qt(t.getHours()%12||12,e.length)},H(t,e){return Qt(t.getHours(),e.length)},m(t,e){return Qt(t.getMinutes(),e.length)},s(t,e){return Qt(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),r=Math.trunc(i*Math.pow(10,n-3));return Qt(r,e.length)}},qh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jT={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return hc.y(t,e)},Y:function(t,e,n,i){const r=xA(t,i),s=r>0?r:1-r;if(e==="YY"){const a=s%100;return Qt(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Qt(s,e.length)},R:function(t,e){const n=vA(t);return Qt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Qt(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Qt(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Qt(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return hc.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return Qt(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const r=ZG(t,i);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Qt(r,e.length)},I:function(t,e,n){const i=WG(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):Qt(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):hc.d(t,e)},D:function(t,e,n){const i=QG(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Qt(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const r=t.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Qt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const r=t.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Qt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return Qt(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let r;switch(i===12?r=qh.noon:i===0?r=qh.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let r;switch(i>=17?r=qh.evening:i>=12?r=qh.afternoon:i>=4?r=qh.morning:r=qh.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return hc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):hc.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Qt(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):Qt(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):hc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):hc.s(t,e)},S:function(t,e){return hc.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return BT(i);case"XXXX":case"XX":return Gf(i);case"XXXXX":case"XXX":default:return Gf(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return BT(i);case"xxxx":case"xx":return Gf(i);case"xxxxx":case"xxx":default:return Gf(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+LT(i,":");case"OOOO":default:return"GMT"+Gf(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+LT(i,":");case"zzzz":default:return"GMT"+Gf(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return Qt(i,e.length)},T:function(t,e,n){return Qt(+t,e.length)}};function LT(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),s=i%60;return s===0?n+String(r):n+String(r)+e+Qt(s,2)}function BT(t,e){return t%60===0?(t>0?"-":"+")+Qt(Math.abs(t)/60,2):Gf(t,e)}function Gf(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Qt(Math.trunc(i/60),2),s=Qt(i%60,2);return n+r+e+s}const PT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},SA=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},$G=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return PT(t,e);let s;switch(i){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",PT(i,e)).replace("{{time}}",SA(r,e))},eq={p:SA,P:$G},tq=/^D+$/,nq=/^Y+$/,iq=["D","DD","YY","YYYY"];function rq(t){return tq.test(t)}function sq(t){return nq.test(t)}function aq(t,e,n){const i=oq(t,e,n);if(console.warn(i),iq.includes(t))throw new RangeError(i)}function oq(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cq=/^'([^]*?)'?$/,fq=/''/g,dq=/[a-zA-Z]/;function hq(t,e,n){const i=I0(),r=i.locale??bA,s=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,l=$i(t,n?.in);if(!oG(l))throw new RangeError("Invalid time value");let c=e.match(uq).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=eq[g];return v(m,r.formatLong)}return m}).join("").match(lq).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:pq(m)};if(jT[g])return{isToken:!0,value:m};if(g.match(dq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:a,locale:r};return c.map(m=>{if(!m.isToken)return m.value;const g=m.value;(sq(g)||rq(g))&&aq(g,e,String(t));const v=jT[g[0]];return v(l,g,r.localize,d)}).join("")}function pq(t){const e=t.match(cq);return e?e[1].replace(fq,"'"):t}function mq(t,e,n){const i=I0(),r=n?.locale??i.locale??bA,s=2520,a=Rv(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:a}),[c,d]=Ex(n?.in,...a>0?[e,t]:[t,e]),m=mG(d,c),g=(zb(d)-zb(c))/1e3,v=Math.round((m-g)/60);let x;if(v<2)return n?.includeSeconds?m<5?r.formatDistance("lessThanXSeconds",5,l):m<10?r.formatDistance("lessThanXSeconds",10,l):m<20?r.formatDistance("lessThanXSeconds",20,l):m<40?r.formatDistance("halfAMinute",0,l):m<60?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",1,l):v===0?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",v,l);if(v<45)return r.formatDistance("xMinutes",v,l);if(v<90)return r.formatDistance("aboutXHours",1,l);if(v<OT){const S=Math.round(v/60);return r.formatDistance("aboutXHours",S,l)}else{if(v<s)return r.formatDistance("xDays",1,l);if(v<ev){const S=Math.round(v/OT);return r.formatDistance("xDays",S,l)}else if(v<ev*2)return x=Math.round(v/ev),r.formatDistance("aboutXMonths",x,l)}if(x=pG(d,c),x<12){const S=Math.round(v/ev);return r.formatDistance("xMonths",S,l)}else{const S=x%12,T=Math.trunc(x/12);return S<3?r.formatDistance("aboutXYears",T,l):S<9?r.formatDistance("overXYears",T,l):r.formatDistance("almostXYears",T+1,l)}}function gq(t,e){return mq(t,sG(t),e)}const yq=t=>{const e={},n=[];return t.forEach(i=>{i.tags&&i.tags.length>0?i.tags.forEach(r=>{e[r]||(e[r]=[]),e[r].some(s=>s.id===i.id)||e[r].push(i)}):n.push(i)}),{groups:e,uncategorized:n}},CA=()=>{const[t,e]=N.useState(null),[n,i]=N.useState(!1),[r,s]=N.useState(""),[a,l]=N.useState(""),{data:c=[],isLoading:d}=bj(),{data:m}=xj(t),g=Sj(),v=Cj(),[x,S]=N.useState({});N.useEffect(()=>{m&&(s(m.title),l(m.content))},[m]);const{groups:T,uncategorized:k}=yq(c),A=Object.keys(T).sort(),O=async j=>{const B={title:"Untitled Note",content:"",tags:j?[j]:[],type:0},q=await g.mutateAsync(B);q&&e(q.id)},z=()=>{const j=prompt("Enter folder name:");j&&(O(j),S(B=>({...B,[j]:!0})))};N.useEffect(()=>{if(t&&m&&(r!==m.title||a!==m.content)){const j=setTimeout(()=>{v.mutate({id:t,note:{title:r,content:a}})},1e3);return()=>clearTimeout(j)}},[r,a,t]);const L=j=>{S(B=>({...B,[j]:!B[j]}))},I=()=>v.isPending?"Saving...":v.isError?"Error saving":m?.lastModified?`Saved ${gq(new Date(m.lastModified),{addSuffix:!0})}`:"Saved";return d?_.jsx("div",{className:"p-4",children:"Loading notes..."}):_.jsxs("div",{className:"flex h-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300 overflow-hidden",children:[_.jsxs("div",{className:"w-64 border-r border-gray-200 dark:border-gray-700 flex flex-col bg-gray-50 dark:bg-gray-950 shrink-0 transition-all duration-300",children:[_.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[_.jsx("h2",{className:"font-bold text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Folders"}),_.jsxs("div",{className:"flex gap-1",children:[_.jsx("button",{onClick:()=>z(),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",title:"New Folder",children:_.jsx(HF,{size:14})}),_.jsx("button",{onClick:()=>O(),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",title:"New Note",children:_.jsx(gA,{size:14})})]})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[A.map(j=>_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center gap-2 py-1.5 px-2 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300",onClick:()=>L(j),children:[_.jsx("i",{className:`fa-solid fa-chevron-right text-[10px] w-4 transition-transform ${x[j]?"rotate-90":""}`}),_.jsx("span",{className:"truncate text-sm font-medium",children:j}),_.jsx("span",{className:"ml-auto text-xs text-gray-400",children:T[j].length})]}),x[j]&&_.jsx("div",{className:"ml-4 border-l border-gray-200 dark:border-gray-800 pl-1",children:T[j].map(B=>_.jsx("div",{className:`flex items-center gap-2 py-1.5 px-2 rounded-md cursor-pointer transition-colors ${t===B.id?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,onClick:()=>e(B.id),children:_.jsx("span",{className:"truncate text-sm",children:B.title||"Untitled"})},B.id))})]},j)),k.length>0&&_.jsxs("div",{className:"mt-2",children:[_.jsx("div",{className:"px-2 py-1 text-xs uppercase text-gray-400 font-bold tracking-wider",children:"Uncategorized"}),k.map(j=>_.jsx("div",{className:`flex items-center gap-2 py-1.5 px-2 rounded-md cursor-pointer transition-colors ${t===j.id?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,onClick:()=>e(j.id),children:_.jsx("span",{className:"truncate text-sm",children:j.title||"Untitled"})},j.id))]})]})]}),_.jsx("div",{className:"flex-1 flex flex-col relative h-full",children:t?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"h-12 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 bg-white dark:bg-gray-900 shrink-0",children:[_.jsx("div",{className:"flex items-center gap-2 text-gray-400",children:_.jsxs("span",{className:"text-xs flex items-center gap-1",children:[v.isPending?_.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}):_.jsx("i",{className:"fa-solid fa-check"}),I()]})}),_.jsx("div",{className:"flex items-center gap-2",children:_.jsx("button",{onClick:()=>i(!n),className:`p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 ${n?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400"}`,title:"Citations",children:_.jsx("i",{className:"fa-solid fa-quote-right"})})})]}),_.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[_.jsx("input",{className:"text-3xl font-bold p-8 pb-4 outline-none bg-transparent text-gray-900 dark:text-white border-none w-full",value:r,onChange:j=>s(j.target.value),placeholder:"Note Title"}),_.jsx("div",{className:"flex-1 overflow-hidden relative",children:_.jsx(eG,{content:a,onChange:l},t)})]})]}):_.jsxs("div",{className:"flex-1 flex items-center justify-center text-gray-400 flex-col gap-4",children:[_.jsx("i",{className:"fa-regular fa-note-sticky text-4xl"}),_.jsx("p",{children:"Select a note or create a new one"})]})}),n&&m&&_.jsxs("div",{className:"w-80 border-l border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-950 shrink-0 flex flex-col transition-all duration-300 h-full",children:[_.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[_.jsx("h3",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:"Citations & Sources"}),_.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:_.jsx("i",{className:"fa-solid fa-xmark"})})]}),_.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:_.jsx("div",{className:"text-sm text-gray-500 italic",children:"Citation management coming soon..."})})]})]})};function vq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const Tx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Mp(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function HE(t){return"nodeType"in t}function us(t){var e,n;return t?Mp(t)?t:HE(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function UE(t){const{Document:e}=us(t);return t instanceof e}function H0(t){return Mp(t)?!1:t instanceof us(t).HTMLElement}function wA(t){return t instanceof us(t).SVGElement}function Ap(t){return t?Mp(t)?t.document:HE(t)?UE(t)?t:H0(t)||wA(t)?t.ownerDocument:document:document:document}const ho=Tx?N.useLayoutEffect:N.useEffect;function _x(t){const e=N.useRef(t);return ho(()=>{e.current=t}),N.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function bq(){const t=N.useRef(null),e=N.useCallback((i,r)=>{t.current=setInterval(i,r)},[]),n=N.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function S0(t,e){e===void 0&&(e=[t]);const n=N.useRef(t);return ho(()=>{n.current!==t&&(n.current=t)},e),n}function U0(t,e){const n=N.useRef();return N.useMemo(()=>{const i=t(n.current);return n.current=i,i},[...e])}function jb(t){const e=_x(t),n=N.useRef(null),i=N.useCallback(r=>{r!==n.current&&e?.(r,n.current),n.current=r},[]);return[n,i]}function Lb(t){const e=N.useRef();return N.useEffect(()=>{e.current=t},[t]),e.current}let bS={};function F0(t,e){return N.useMemo(()=>{if(e)return e;const n=bS[t]==null?0:bS[t]+1;return bS[t]=n,t+"-"+n},[t,e])}function EA(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((s,a)=>{const l=Object.entries(a);for(const[c,d]of l){const m=s[c];m!=null&&(s[c]=m+t*d)}return s},{...e})}}const lp=EA(1),C0=EA(-1);function xq(t){return"clientX"in t&&"clientY"in t}function kx(t){if(!t)return!1;const{KeyboardEvent:e}=us(t.target);return e&&t instanceof e}function Sq(t){if(!t)return!1;const{TouchEvent:e}=us(t.target);return e&&t instanceof e}function Bb(t){if(Sq(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return xq(t)?{x:t.clientX,y:t.clientY}:null}const Pc=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Pc.Translate.toString(t),Pc.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:i}=t;return e+" "+n+"ms "+i}}}),IT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Cq(t){return t.matches(IT)?t:t.querySelector(IT)}const wq={display:"none"};function Eq(t){let{id:e,value:n}=t;return Fe.createElement("div",{id:e,style:wq},n)}function Tq(t){let{id:e,announcement:n,ariaLiveType:i="assertive"}=t;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Fe.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},n)}function _q(){const[t,e]=N.useState("");return{announce:N.useCallback(i=>{i!=null&&e(i)},[]),announcement:t}}const TA=N.createContext(null);function kq(t){const e=N.useContext(TA);N.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Mq(){const[t]=N.useState(()=>new Set),e=N.useCallback(i=>(t.add(i),()=>t.delete(i)),[t]);return[N.useCallback(i=>{let{type:r,event:s}=i;t.forEach(a=>{var l;return(l=a[r])==null?void 0:l.call(a,s)})},[t]),e]}const Aq={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Nq={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Rq(t){let{announcements:e=Nq,container:n,hiddenTextDescribedById:i,screenReaderInstructions:r=Aq}=t;const{announce:s,announcement:a}=_q(),l=F0("DndLiveRegion"),[c,d]=N.useState(!1);if(N.useEffect(()=>{d(!0)},[]),kq(N.useMemo(()=>({onDragStart(g){let{active:v}=g;s(e.onDragStart({active:v}))},onDragMove(g){let{active:v,over:x}=g;e.onDragMove&&s(e.onDragMove({active:v,over:x}))},onDragOver(g){let{active:v,over:x}=g;s(e.onDragOver({active:v,over:x}))},onDragEnd(g){let{active:v,over:x}=g;s(e.onDragEnd({active:v,over:x}))},onDragCancel(g){let{active:v,over:x}=g;s(e.onDragCancel({active:v,over:x}))}}),[s,e])),!c)return null;const m=Fe.createElement(Fe.Fragment,null,Fe.createElement(Eq,{id:i,value:r.draggable}),Fe.createElement(Tq,{id:l,announcement:a}));return n?eu.createPortal(m,n):m}var Li;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Li||(Li={}));function Pb(){}function HT(t,e){return N.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Oq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const po=Object.freeze({x:0,y:0});function Dq(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function zq(t,e){const n=Bb(t);if(!n)return"0 0";const i={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function jq(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return n-i}function Lq(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return i-n}function UT(t){let{left:e,top:n,height:i,width:r}=t;return[{x:e,y:n},{x:e+r,y:n},{x:e,y:n+i},{x:e+r,y:n+i}]}function _A(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const kA=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const r=UT(e),s=[];for(const a of i){const{id:l}=a,c=n.get(l);if(c){const d=UT(c),m=r.reduce((v,x,S)=>v+Dq(d[S],x),0),g=Number((m/4).toFixed(4));s.push({id:l,data:{droppableContainer:a,value:g}})}}return s.sort(jq)};function Bq(t,e){const n=Math.max(e.top,t.top),i=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),a=r-i,l=s-n;if(i<r&&n<s){const c=e.width*e.height,d=t.width*t.height,m=a*l,g=m/(c+d-m);return Number(g.toFixed(4))}return 0}const Pq=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const r=[];for(const s of i){const{id:a}=s,l=n.get(a);if(l){const c=Bq(l,e);c>0&&r.push({id:a,data:{droppableContainer:s,value:c}})}}return r.sort(Lq)};function Iq(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function MA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:po}function Hq(t){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return r.reduce((a,l)=>({...a,top:a.top+t*l.y,bottom:a.bottom+t*l.y,left:a.left+t*l.x,right:a.right+t*l.x}),{...n})}}const Uq=Hq(1);function AA(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Fq(t,e,n){const i=AA(e);if(!i)return t;const{scaleX:r,scaleY:s,x:a,y:l}=i,c=t.left-a-(1-r)*parseFloat(n),d=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),m=r?t.width/r:t.width,g=s?t.height/s:t.height;return{width:m,height:g,top:d,right:c+m,bottom:d+g,left:c}}const Gq={ignoreTransform:!1};function Np(t,e){e===void 0&&(e=Gq);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:m}=us(t).getComputedStyle(t);d&&(n=Fq(n,d,m))}const{top:i,left:r,width:s,height:a,bottom:l,right:c}=n;return{top:i,left:r,width:s,height:a,bottom:l,right:c}}function FT(t){return Np(t,{ignoreTransform:!0})}function qq(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Vq(t,e){return e===void 0&&(e=us(t).getComputedStyle(t)),e.position==="fixed"}function Yq(t,e){e===void 0&&(e=us(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const s=e[r];return typeof s=="string"?n.test(s):!1})}function Mx(t,e){const n=[];function i(r){if(e!=null&&n.length>=e||!r)return n;if(UE(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!H0(r)||wA(r)||n.includes(r))return n;const s=us(t).getComputedStyle(r);return r!==t&&Yq(r,s)&&n.push(r),Vq(r,s)?n:i(r.parentNode)}return t?i(t):n}function NA(t){const[e]=Mx(t,1);return e??null}function xS(t){return!Tx||!t?null:Mp(t)?t:HE(t)?UE(t)||t===Ap(t).scrollingElement?window:H0(t)?t:null:null}function RA(t){return Mp(t)?t.scrollX:t.scrollLeft}function OA(t){return Mp(t)?t.scrollY:t.scrollTop}function ZC(t){return{x:RA(t),y:OA(t)}}var Qi;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Qi||(Qi={}));function DA(t){return!Tx||!t?!1:t===document.scrollingElement}function zA(t){const e={x:0,y:0},n=DA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},r=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,a=t.scrollTop>=i.y,l=t.scrollLeft>=i.x;return{isTop:r,isLeft:s,isBottom:a,isRight:l,maxScroll:i,minScroll:e}}const Kq={x:.2,y:.2};function Xq(t,e,n,i,r){let{top:s,left:a,right:l,bottom:c}=n;i===void 0&&(i=10),r===void 0&&(r=Kq);const{isTop:d,isBottom:m,isLeft:g,isRight:v}=zA(t),x={x:0,y:0},S={x:0,y:0},T={height:e.height*r.y,width:e.width*r.x};return!d&&s<=e.top+T.height?(x.y=Qi.Backward,S.y=i*Math.abs((e.top+T.height-s)/T.height)):!m&&c>=e.bottom-T.height&&(x.y=Qi.Forward,S.y=i*Math.abs((e.bottom-T.height-c)/T.height)),!v&&l>=e.right-T.width?(x.x=Qi.Forward,S.x=i*Math.abs((e.right-T.width-l)/T.width)):!g&&a<=e.left+T.width&&(x.x=Qi.Backward,S.x=i*Math.abs((e.left+T.width-a)/T.width)),{direction:x,speed:S}}function Qq(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:e,left:n,right:i,bottom:r}=t.getBoundingClientRect();return{top:e,left:n,right:i,bottom:r,width:t.clientWidth,height:t.clientHeight}}function jA(t){return t.reduce((e,n)=>lp(e,ZC(n)),po)}function Wq(t){return t.reduce((e,n)=>e+RA(n),0)}function Jq(t){return t.reduce((e,n)=>e+OA(n),0)}function LA(t,e){if(e===void 0&&(e=Np),!t)return;const{top:n,left:i,bottom:r,right:s}=e(t);NA(t)&&(r<=0||s<=0||n>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Zq=[["x",["left","right"],Wq],["y",["top","bottom"],Jq]];let FE=class{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Mx(n),r=jA(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,a,l]of Zq)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=l(i),m=r[s]-d;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}};class Wg{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=e}add(e,n,i){var r;(r=this.target)==null||r.addEventListener(e,n,i),this.listeners.push([e,n,i])}}function $q(t){const{EventTarget:e}=us(t);return t instanceof e?t:Ap(t)}function SS(t,e){const n=Math.abs(t.x),i=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+i**2)>e:"x"in e&&"y"in e?n>e.x&&i>e.y:"x"in e?n>e.x:"y"in e?i>e.y:!1}var Da;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Da||(Da={}));function GT(t){t.preventDefault()}function eV(t){t.stopPropagation()}var zt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(zt||(zt={}));const BA={start:[zt.Space,zt.Enter],cancel:[zt.Esc],end:[zt.Space,zt.Enter,zt.Tab]},tV=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case zt.Right:return{...n,x:n.x+25};case zt.Left:return{...n,x:n.x-25};case zt.Down:return{...n,y:n.y+25};case zt.Up:return{...n,y:n.y-25}}};class GE{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Wg(Ap(n)),this.windowListeners=new Wg(us(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Da.Resize,this.handleCancel),this.windowListeners.add(Da.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Da.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,i=e.node.current;i&&LA(i),n(po)}handleKeyDown(e){if(kx(e)){const{active:n,context:i,options:r}=this.props,{keyboardCodes:s=BA,coordinateGetter:a=tV,scrollBehavior:l="smooth"}=r,{code:c}=e;if(s.end.includes(c)){this.handleEnd(e);return}if(s.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=i.current,m=d?{x:d.left,y:d.top}:po;this.referenceCoordinates||(this.referenceCoordinates=m);const g=a(e,{active:n,context:i.current,currentCoordinates:m});if(g){const v=C0(g,m),x={x:0,y:0},{scrollableAncestors:S}=i.current;for(const T of S){const k=e.code,{isTop:A,isRight:O,isLeft:z,isBottom:L,maxScroll:I,minScroll:j}=zA(T),B=Qq(T),q={x:Math.min(k===zt.Right?B.right-B.width/2:B.right,Math.max(k===zt.Right?B.left:B.left+B.width/2,g.x)),y:Math.min(k===zt.Down?B.bottom-B.height/2:B.bottom,Math.max(k===zt.Down?B.top:B.top+B.height/2,g.y))},$=k===zt.Right&&!O||k===zt.Left&&!z,G=k===zt.Down&&!L||k===zt.Up&&!A;if($&&q.x!==g.x){const X=T.scrollLeft+v.x,J=k===zt.Right&&X<=I.x||k===zt.Left&&X>=j.x;if(J&&!v.y){T.scrollTo({left:X,behavior:l});return}J?x.x=T.scrollLeft-X:x.x=k===zt.Right?T.scrollLeft-I.x:T.scrollLeft-j.x,x.x&&T.scrollBy({left:-x.x,behavior:l});break}else if(G&&q.y!==g.y){const X=T.scrollTop+v.y,J=k===zt.Down&&X<=I.y||k===zt.Up&&X>=j.y;if(J&&!v.x){T.scrollTo({top:X,behavior:l});return}J?x.y=T.scrollTop-X:x.y=k===zt.Down?T.scrollTop-I.y:T.scrollTop-j.y,x.y&&T.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(e,lp(C0(g,this.referenceCoordinates),x))}}}handleMove(e,n){const{onMove:i}=this.props;e.preventDefault(),i(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}GE.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:i=BA,onActivation:r}=e,{active:s}=n;const{code:a}=t.nativeEvent;if(i.start.includes(a)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),r?.({event:t.nativeEvent}),!0)}return!1}}];function qT(t){return!!(t&&"distance"in t)}function VT(t){return!!(t&&"delay"in t)}class qE{constructor(e,n,i){var r;i===void 0&&(i=$q(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:a}=s;this.props=e,this.events=n,this.document=Ap(a),this.documentListeners=new Wg(this.document),this.listeners=new Wg(i),this.windowListeners=new Wg(us(a)),this.initialCoordinates=(r=Bb(s))!=null?r:po,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Da.Resize,this.handleCancel),this.windowListeners.add(Da.DragStart,GT),this.windowListeners.add(Da.VisibilityChange,this.handleCancel),this.windowListeners.add(Da.ContextMenu,GT),this.documentListeners.add(Da.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(VT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(qT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Da.Click,eV,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Da.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:i,initialCoordinates:r,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!r)return;const c=(n=Bb(e))!=null?n:po,d=C0(r,c);if(!i&&l){if(qT(l)){if(l.tolerance!=null&&SS(d,l.tolerance))return this.handleCancel();if(SS(d,l.distance))return this.handleStart()}if(VT(l)&&SS(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),a(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===zt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const nV={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class VE extends qE{constructor(e){const{event:n}=e,i=Ap(n.target);super(e,nV,i)}}VE.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return!n.isPrimary||n.button!==0?!1:(i?.({event:n}),!0)}}];const iV={move:{name:"mousemove"},end:{name:"mouseup"}};var $C;(function(t){t[t.RightClick=2]="RightClick"})($C||($C={}));class rV extends qE{constructor(e){super(e,iV,Ap(e.event.target))}}rV.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return n.button===$C.RightClick?!1:(i?.({event:n}),!0)}}];const CS={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class sV extends qE{constructor(e){super(e,CS)}static setup(){return window.addEventListener(CS.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(CS.move.name,e)};function e(){}}}sV.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;const{touches:r}=n;return r.length>1?!1:(i?.({event:n}),!0)}}];var Jg;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Jg||(Jg={}));var Ib;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ib||(Ib={}));function aV(t){let{acceleration:e,activator:n=Jg.Pointer,canScroll:i,draggingRect:r,enabled:s,interval:a=5,order:l=Ib.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:m,delta:g,threshold:v}=t;const x=lV({delta:g,disabled:!s}),[S,T]=bq(),k=N.useRef({x:0,y:0}),A=N.useRef({x:0,y:0}),O=N.useMemo(()=>{switch(n){case Jg.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Jg.DraggableRect:return r}},[n,r,c]),z=N.useRef(null),L=N.useCallback(()=>{const j=z.current;if(!j)return;const B=k.current.x*A.current.x,q=k.current.y*A.current.y;j.scrollBy(B,q)},[]),I=N.useMemo(()=>l===Ib.TreeOrder?[...d].reverse():d,[l,d]);N.useEffect(()=>{if(!s||!d.length||!O){T();return}for(const j of I){if(i?.(j)===!1)continue;const B=d.indexOf(j),q=m[B];if(!q)continue;const{direction:$,speed:G}=Xq(j,q,O,e,v);for(const X of["x","y"])x[X][$[X]]||(G[X]=0,$[X]=0);if(G.x>0||G.y>0){T(),z.current=j,S(L,a),k.current=G,A.current=$;return}}k.current={x:0,y:0},A.current={x:0,y:0},T()},[e,L,i,T,s,a,JSON.stringify(O),JSON.stringify(x),S,d,I,m,JSON.stringify(v)])}const oV={x:{[Qi.Backward]:!1,[Qi.Forward]:!1},y:{[Qi.Backward]:!1,[Qi.Forward]:!1}};function lV(t){let{delta:e,disabled:n}=t;const i=Lb(e);return U0(r=>{if(n||!i||!r)return oV;const s={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Qi.Backward]:r.x[Qi.Backward]||s.x===-1,[Qi.Forward]:r.x[Qi.Forward]||s.x===1},y:{[Qi.Backward]:r.y[Qi.Backward]||s.y===-1,[Qi.Forward]:r.y[Qi.Forward]||s.y===1}}},[n,e,i])}function uV(t,e){const n=e!=null?t.get(e):void 0,i=n?n.node.current:null;return U0(r=>{var s;return e==null?null:(s=i??r)!=null?s:null},[i,e])}function cV(t,e){return N.useMemo(()=>t.reduce((n,i)=>{const{sensor:r}=i,s=r.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,i)}));return[...n,...s]},[]),[t,e])}var w0;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(w0||(w0={}));var ew;(function(t){t.Optimized="optimized"})(ew||(ew={}));const YT=new Map;function fV(t,e){let{dragging:n,dependencies:i,config:r}=e;const[s,a]=N.useState(null),{frequency:l,measure:c,strategy:d}=r,m=N.useRef(t),g=k(),v=S0(g),x=N.useCallback(function(A){A===void 0&&(A=[]),!v.current&&a(O=>O===null?A:O.concat(A.filter(z=>!O.includes(z))))},[v]),S=N.useRef(null),T=U0(A=>{if(g&&!n)return YT;if(!A||A===YT||m.current!==t||s!=null){const O=new Map;for(let z of t){if(!z)continue;if(s&&s.length>0&&!s.includes(z.id)&&z.rect.current){O.set(z.id,z.rect.current);continue}const L=z.node.current,I=L?new FE(c(L),L):null;z.rect.current=I,I&&O.set(z.id,I)}return O}return A},[t,s,n,g,c]);return N.useEffect(()=>{m.current=t},[t]),N.useEffect(()=>{g||x()},[n,g]),N.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),N.useEffect(()=>{g||typeof l!="number"||S.current!==null||(S.current=setTimeout(()=>{x(),S.current=null},l))},[l,g,x,...i]),{droppableRects:T,measureDroppableContainers:x,measuringScheduled:s!=null};function k(){switch(d){case w0.Always:return!1;case w0.BeforeDragging:return n;default:return!n}}}function YE(t,e){return U0(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function dV(t,e){return YE(t,e)}function hV(t){let{callback:e,disabled:n}=t;const i=_x(e),r=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(i)},[i,n]);return N.useEffect(()=>()=>r?.disconnect(),[r]),r}function Ax(t){let{callback:e,disabled:n}=t;const i=_x(e),r=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(i)},[n]);return N.useEffect(()=>()=>r?.disconnect(),[r]),r}function pV(t){return new FE(Np(t),t)}function KT(t,e,n){e===void 0&&(e=pV);const[i,r]=N.useState(null);function s(){r(c=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=c??n)!=null?d:null}const m=e(t);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const a=hV({callback(c){if(t)for(const d of c){const{type:m,target:g}=d;if(m==="childList"&&g instanceof HTMLElement&&g.contains(t)){s();break}}}}),l=Ax({callback:s});return ho(()=>{s(),t?(l?.observe(t),a?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),a?.disconnect())},[t]),i}function mV(t){const e=YE(t);return MA(t,e)}const XT=[];function gV(t){const e=N.useRef(t),n=U0(i=>t?i&&i!==XT&&t&&e.current&&t.parentNode===e.current.parentNode?i:Mx(t):XT,[t]);return N.useEffect(()=>{e.current=t},[t]),n}function yV(t){const[e,n]=N.useState(null),i=N.useRef(t),r=N.useCallback(s=>{const a=xS(s.target);a&&n(l=>l?(l.set(a,ZC(a)),new Map(l)):null)},[]);return N.useEffect(()=>{const s=i.current;if(t!==s){a(s);const l=t.map(c=>{const d=xS(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,ZC(d)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),i.current=t}return()=>{a(t),a(s)};function a(l){l.forEach(c=>{const d=xS(c);d?.removeEventListener("scroll",r)})}},[r,t]),N.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,a)=>lp(s,a),po):jA(t):po,[t,e])}function QT(t,e){e===void 0&&(e=[]);const n=N.useRef(null);return N.useEffect(()=>{n.current=null},e),N.useEffect(()=>{const i=t!==po;i&&!n.current&&(n.current=t),!i&&n.current&&(n.current=null)},[t]),n.current?C0(t,n.current):po}function vV(t){N.useEffect(()=>{if(!Tx)return;const e=t.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function bV(t,e){return N.useMemo(()=>t.reduce((n,i)=>{let{eventName:r,handler:s}=i;return n[r]=a=>{s(a,e)},n},{}),[t,e])}function PA(t){return N.useMemo(()=>t?qq(t):null,[t])}const WT=[];function xV(t,e){e===void 0&&(e=Np);const[n]=t,i=PA(n?us(n):null),[r,s]=N.useState(WT);function a(){s(()=>t.length?t.map(c=>DA(c)?i:new FE(e(c),c)):WT)}const l=Ax({callback:a});return ho(()=>{l?.disconnect(),a(),t.forEach(c=>l?.observe(c))},[t]),r}function IA(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return H0(e)?e:t}function SV(t){let{measure:e}=t;const[n,i]=N.useState(null),r=N.useCallback(d=>{for(const{target:m}of d)if(H0(m)){i(g=>{const v=e(m);return g?{...g,width:v.width,height:v.height}:v});break}},[e]),s=Ax({callback:r}),a=N.useCallback(d=>{const m=IA(d);s?.disconnect(),m&&s?.observe(m),i(m?e(m):null)},[e,s]),[l,c]=jb(a);return N.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const CV=[{sensor:VE,options:{}},{sensor:GE,options:{}}],wV={current:{}},Ov={draggable:{measure:FT},droppable:{measure:FT,strategy:w0.WhileDragging,frequency:ew.Optimized},dragOverlay:{measure:Np}};class Zg extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,i;return(n=(i=this.get(e))==null?void 0:i.node.current)!=null?n:void 0}}const EV={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Zg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pb},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ov,measureDroppableContainers:Pb,windowRect:null,measuringScheduled:!1},HA={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pb,draggableNodes:new Map,over:null,measureDroppableContainers:Pb},G0=N.createContext(HA),UA=N.createContext(EV);function TV(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Zg}}}function _V(t,e){switch(e.type){case Li.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Li.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Li.DragEnd:case Li.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Li.RegisterDroppable:{const{element:n}=e,{id:i}=n,r=new Zg(t.droppable.containers);return r.set(i,n),{...t,droppable:{...t.droppable,containers:r}}}case Li.SetDroppableDisabled:{const{id:n,key:i,disabled:r}=e,s=t.droppable.containers.get(n);if(!s||i!==s.key)return t;const a=new Zg(t.droppable.containers);return a.set(n,{...s,disabled:r}),{...t,droppable:{...t.droppable,containers:a}}}case Li.UnregisterDroppable:{const{id:n,key:i}=e,r=t.droppable.containers.get(n);if(!r||i!==r.key)return t;const s=new Zg(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function kV(t){let{disabled:e}=t;const{active:n,activatorEvent:i,draggableNodes:r}=N.useContext(G0),s=Lb(i),a=Lb(n?.id);return N.useEffect(()=>{if(!e&&!i&&s&&a!=null){if(!kx(s)||document.activeElement===s.target)return;const l=r.get(a);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const m of[c.current,d.current]){if(!m)continue;const g=Cq(m);if(g){g.focus();break}}})}},[i,e,r,a,s]),null}function FA(t,e){let{transform:n,...i}=e;return t!=null&&t.length?t.reduce((r,s)=>s({transform:r,...i}),n):n}function MV(t){return N.useMemo(()=>({draggable:{...Ov.draggable,...t?.draggable},droppable:{...Ov.droppable,...t?.droppable},dragOverlay:{...Ov.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function AV(t){let{activeNode:e,measure:n,initialRect:i,config:r=!0}=t;const s=N.useRef(!1),{x:a,y:l}=typeof r=="boolean"?{x:r,y:r}:r;ho(()=>{if(!a&&!l||!e){s.current=!1;return}if(s.current||!i)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const m=n(d),g=MA(m,i);if(a||(g.x=0),l||(g.y=0),s.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const v=NA(d);v&&v.scrollBy({top:g.y,left:g.x})}},[e,a,l,i,n])}const Nx=N.createContext({...po,scaleX:1,scaleY:1});var Cc;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Cc||(Cc={}));const NV=N.memo(function(e){var n,i,r,s;let{id:a,accessibility:l,autoScroll:c=!0,children:d,sensors:m=CV,collisionDetection:g=Pq,measuring:v,modifiers:x,...S}=e;const T=N.useReducer(_V,void 0,TV),[k,A]=T,[O,z]=Mq(),[L,I]=N.useState(Cc.Uninitialized),j=L===Cc.Initialized,{draggable:{active:B,nodes:q,translate:$},droppable:{containers:G}}=k,X=B!=null?q.get(B):null,J=N.useRef({initial:null,translated:null}),ce=N.useMemo(()=>{var on;return B!=null?{id:B,data:(on=X?.data)!=null?on:wV,rect:J}:null},[B,X]),Z=N.useRef(null),[te,V]=N.useState(null),[ae,oe]=N.useState(null),he=S0(S,Object.values(S)),F=F0("DndDescribedBy",a),Y=N.useMemo(()=>G.getEnabled(),[G]),se=MV(v),{droppableRects:U,measureDroppableContainers:ke,measuringScheduled:Pe}=fV(Y,{dragging:j,dependencies:[$.x,$.y],config:se.droppable}),ze=uV(q,B),Ie=N.useMemo(()=>ae?Bb(ae):null,[ae]),ot=bo(),et=dV(ze,se.draggable.measure);AV({activeNode:B!=null?q.get(B):null,config:ot.layoutShiftCompensation,initialRect:et,measure:se.draggable.measure});const rt=KT(ze,se.draggable.measure,et),mi=KT(ze?ze.parentElement:null),gn=N.useRef({activatorEvent:null,active:null,activeNode:ze,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:G,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Mn=G.getNodeFor((n=gn.current.over)==null?void 0:n.id),In=SV({measure:se.dragOverlay.measure}),Ai=(i=In.nodeRef.current)!=null?i:ze,Zn=j?(r=In.rect)!=null?r:rt:null,er=!!(In.nodeRef.current&&In.rect),Ha=mV(er?null:rt),fs=PA(Ai?us(Ai):null),$n=gV(j?Mn??ze:null),Pr=xV($n),br=FA(x,{transform:{x:$.x-Ha.x,y:$.y-Ha.y,scaleX:1,scaleY:1},activatorEvent:ae,active:ce,activeNodeRect:rt,containerNodeRect:mi,draggingNodeRect:Zn,over:gn.current.over,overlayNodeRect:In.rect,scrollableAncestors:$n,scrollableAncestorRects:Pr,windowRect:fs}),An=Ie?lp(Ie,$):null,Hn=yV($n),gu=QT(Hn),ye=QT(Hn,[rt]),_e=lp(br,gu),Ge=Zn?Uq(Zn,br):null,Xe=ce&&Ge?g({active:ce,collisionRect:Ge,droppableRects:U,droppableContainers:Y,pointerCoordinates:An}):null,vt=_A(Xe,"id"),[yn,Ir]=N.useState(null),gi=er?br:lp(br,ye),Nn=Iq(gi,(s=yn?.rect)!=null?s:null,rt),li=N.useRef(null),It=N.useCallback((on,Rn)=>{let{sensor:Un,options:tr}=Rn;if(Z.current==null)return;const nr=q.get(Z.current);if(!nr)return;const On=on.nativeEvent,ir=new Un({active:Z.current,activeNode:nr,event:On,options:tr,context:gn,onAbort(Dn){if(!q.get(Dn))return;const{onDragAbort:Ui}=he.current,Ur={id:Dn};Ui?.(Ur),O({type:"onDragAbort",event:Ur})},onPending(Dn,rr,Ui,Ur){if(!q.get(Dn))return;const{onDragPending:ps}=he.current,Fr={id:Dn,constraint:rr,initialCoordinates:Ui,offset:Ur};ps?.(Fr),O({type:"onDragPending",event:Fr})},onStart(Dn){const rr=Z.current;if(rr==null)return;const Ui=q.get(rr);if(!Ui)return;const{onDragStart:Ur}=he.current,hs={activatorEvent:On,active:{id:rr,data:Ui.data,rect:J}};eu.unstable_batchedUpdates(()=>{Ur?.(hs),I(Cc.Initializing),A({type:Li.DragStart,initialCoordinates:Dn,active:rr}),O({type:"onDragStart",event:hs}),V(li.current),oe(On)})},onMove(Dn){A({type:Li.DragMove,coordinates:Dn})},onEnd:Hr(Li.DragEnd),onCancel:Hr(Li.DragCancel)});li.current=ir;function Hr(Dn){return async function(){const{active:Ui,collisions:Ur,over:hs,scrollAdjustedTranslate:ps}=gn.current;let Fr=null;if(Ui&&ps){const{cancelDrop:Sr}=he.current;Fr={activatorEvent:On,active:Ui,collisions:Ur,delta:ps,over:hs},Dn===Li.DragEnd&&typeof Sr=="function"&&await Promise.resolve(Sr(Fr))&&(Dn=Li.DragCancel)}Z.current=null,eu.unstable_batchedUpdates(()=>{A({type:Dn}),I(Cc.Uninitialized),Ir(null),V(null),oe(null),li.current=null;const Sr=Dn===Li.DragEnd?"onDragEnd":"onDragCancel";if(Fr){const Gr=he.current[Sr];Gr?.(Fr),O({type:Sr,event:Fr})}})}}},[q]),ds=N.useCallback((on,Rn)=>(Un,tr)=>{const nr=Un.nativeEvent,On=q.get(tr);if(Z.current!==null||!On||nr.dndKit||nr.defaultPrevented)return;const ir={active:On};on(Un,Rn.options,ir)===!0&&(nr.dndKit={capturedBy:Rn.sensor},Z.current=tr,It(Un,Rn))},[q,It]),xr=cV(m,ds);vV(m),ho(()=>{rt&&L===Cc.Initializing&&I(Cc.Initialized)},[rt,L]),N.useEffect(()=>{const{onDragMove:on}=he.current,{active:Rn,activatorEvent:Un,collisions:tr,over:nr}=gn.current;if(!Rn||!Un)return;const On={active:Rn,activatorEvent:Un,collisions:tr,delta:{x:_e.x,y:_e.y},over:nr};eu.unstable_batchedUpdates(()=>{on?.(On),O({type:"onDragMove",event:On})})},[_e.x,_e.y]),N.useEffect(()=>{const{active:on,activatorEvent:Rn,collisions:Un,droppableContainers:tr,scrollAdjustedTranslate:nr}=gn.current;if(!on||Z.current==null||!Rn||!nr)return;const{onDragOver:On}=he.current,ir=tr.get(vt),Hr=ir&&ir.rect.current?{id:ir.id,rect:ir.rect.current,data:ir.data,disabled:ir.disabled}:null,Dn={active:on,activatorEvent:Rn,collisions:Un,delta:{x:nr.x,y:nr.y},over:Hr};eu.unstable_batchedUpdates(()=>{Ir(Hr),On?.(Dn),O({type:"onDragOver",event:Dn})})},[vt]),ho(()=>{gn.current={activatorEvent:ae,active:ce,activeNode:ze,collisionRect:Ge,collisions:Xe,droppableRects:U,draggableNodes:q,draggingNode:Ai,draggingNodeRect:Zn,droppableContainers:G,over:yn,scrollableAncestors:$n,scrollAdjustedTranslate:_e},J.current={initial:Zn,translated:Ge}},[ce,ze,Xe,Ge,q,Ai,Zn,U,G,yn,$n,_e]),aV({...ot,delta:$,draggingRect:Ge,pointerCoordinates:An,scrollableAncestors:$n,scrollableAncestorRects:Pr});const kd=N.useMemo(()=>({active:ce,activeNode:ze,activeNodeRect:rt,activatorEvent:ae,collisions:Xe,containerNodeRect:mi,dragOverlay:In,draggableNodes:q,droppableContainers:G,droppableRects:U,over:yn,measureDroppableContainers:ke,scrollableAncestors:$n,scrollableAncestorRects:Pr,measuringConfiguration:se,measuringScheduled:Pe,windowRect:fs}),[ce,ze,rt,ae,Xe,mi,In,q,G,U,yn,ke,$n,Pr,se,Pe,fs]),yu=N.useMemo(()=>({activatorEvent:ae,activators:xr,active:ce,activeNodeRect:rt,ariaDescribedById:{draggable:F},dispatch:A,draggableNodes:q,over:yn,measureDroppableContainers:ke}),[ae,xr,ce,rt,A,F,q,yn,ke]);return Fe.createElement(TA.Provider,{value:z},Fe.createElement(G0.Provider,{value:yu},Fe.createElement(UA.Provider,{value:kd},Fe.createElement(Nx.Provider,{value:Nn},d)),Fe.createElement(kV,{disabled:l?.restoreFocus===!1})),Fe.createElement(Rq,{...l,hiddenTextDescribedById:F}));function bo(){const on=te?.autoScrollEnabled===!1,Rn=typeof c=="object"?c.enabled===!1:c===!1,Un=j&&!on&&!Rn;return typeof c=="object"?{...c,enabled:Un}:{enabled:Un}}}),RV=N.createContext(null),JT="button",OV="Draggable";function DV(t){let{id:e,data:n,disabled:i=!1,attributes:r}=t;const s=F0(OV),{activators:a,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:m,draggableNodes:g,over:v}=N.useContext(G0),{role:x=JT,roleDescription:S="draggable",tabIndex:T=0}=r??{},k=c?.id===e,A=N.useContext(k?Nx:RV),[O,z]=jb(),[L,I]=jb(),j=bV(a,e),B=S0(n);ho(()=>(g.set(e,{id:e,key:s,node:O,activatorNode:L,data:B}),()=>{const $=g.get(e);$&&$.key===s&&g.delete(e)}),[g,e]);const q=N.useMemo(()=>({role:x,tabIndex:T,"aria-disabled":i,"aria-pressed":k&&x===JT?!0:void 0,"aria-roledescription":S,"aria-describedby":m.draggable}),[i,x,T,k,S,m.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:q,isDragging:k,listeners:i?void 0:j,node:O,over:v,setNodeRef:z,setActivatorNodeRef:I,transform:A}}function GA(){return N.useContext(UA)}const zV="Droppable",jV={timeout:25};function qA(t){let{data:e,disabled:n=!1,id:i,resizeObserverConfig:r}=t;const s=F0(zV),{active:a,dispatch:l,over:c,measureDroppableContainers:d}=N.useContext(G0),m=N.useRef({disabled:n}),g=N.useRef(!1),v=N.useRef(null),x=N.useRef(null),{disabled:S,updateMeasurementsFor:T,timeout:k}={...jV,...r},A=S0(T??i),O=N.useCallback(()=>{if(!g.current){g.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(A.current)?A.current:[A.current]),x.current=null},k)},[k]),z=Ax({callback:O,disabled:S||!a}),L=N.useCallback((q,$)=>{z&&($&&(z.unobserve($),g.current=!1),q&&z.observe(q))},[z]),[I,j]=jb(L),B=S0(e);return N.useEffect(()=>{!z||!I.current||(z.disconnect(),g.current=!1,z.observe(I.current))},[I,z]),N.useEffect(()=>(l({type:Li.RegisterDroppable,element:{id:i,key:s,disabled:n,node:I,rect:v,data:B}}),()=>l({type:Li.UnregisterDroppable,key:s,id:i})),[i]),N.useEffect(()=>{n!==m.current.disabled&&(l({type:Li.SetDroppableDisabled,id:i,key:s,disabled:n}),m.current.disabled=n)},[i,s,n,l]),{active:a,rect:v,isOver:c?.id===i,node:I,over:c,setNodeRef:j}}function LV(t){let{animation:e,children:n}=t;const[i,r]=N.useState(null),[s,a]=N.useState(null),l=Lb(n);return!n&&!i&&l&&r(l),ho(()=>{if(!s)return;const c=i?.key,d=i?.props.id;if(c==null||d==null){r(null);return}Promise.resolve(e(d,s)).then(()=>{r(null)})},[e,i,s]),Fe.createElement(Fe.Fragment,null,n,i?N.cloneElement(i,{ref:a}):null)}const BV={x:0,y:0,scaleX:1,scaleY:1};function PV(t){let{children:e}=t;return Fe.createElement(G0.Provider,{value:HA},Fe.createElement(Nx.Provider,{value:BV},e))}const IV={position:"fixed",touchAction:"none"},HV=t=>kx(t)?"transform 250ms ease":void 0,UV=N.forwardRef((t,e)=>{let{as:n,activatorEvent:i,adjustScale:r,children:s,className:a,rect:l,style:c,transform:d,transition:m=HV}=t;if(!l)return null;const g=r?d:{...d,scaleX:1,scaleY:1},v={...IV,width:l.width,height:l.height,top:l.top,left:l.left,transform:Pc.Transform.toString(g),transformOrigin:r&&i?zq(i,l):void 0,transition:typeof m=="function"?m(i):m,...c};return Fe.createElement(n,{className:a,style:v,ref:e},s)}),FV=t=>e=>{let{active:n,dragOverlay:i}=e;const r={},{styles:s,className:a}=t;if(s!=null&&s.active)for(const[l,c]of Object.entries(s.active))c!==void 0&&(r[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(s!=null&&s.dragOverlay)for(const[l,c]of Object.entries(s.dragOverlay))c!==void 0&&i.node.style.setProperty(l,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&i.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(r))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},GV=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Pc.Transform.toString(e)},{transform:Pc.Transform.toString(n)}]},qV={duration:250,easing:"ease",keyframes:GV,sideEffects:FV({styles:{active:{opacity:"0"}}})};function VV(t){let{config:e,draggableNodes:n,droppableContainers:i,measuringConfiguration:r}=t;return _x((s,a)=>{if(e===null)return;const l=n.get(s);if(!l)return;const c=l.node.current;if(!c)return;const d=IA(a);if(!d)return;const{transform:m}=us(a).getComputedStyle(a),g=AA(m);if(!g)return;const v=typeof e=="function"?e:YV(e);return LA(c,r.draggable.measure),v({active:{id:s,data:l.data,node:c,rect:r.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:r.dragOverlay.measure(d)},droppableContainers:i,measuringConfiguration:r,transform:g})})}function YV(t){const{duration:e,easing:n,sideEffects:i,keyframes:r}={...qV,...t};return s=>{let{active:a,dragOverlay:l,transform:c,...d}=s;if(!e)return;const m={x:l.rect.left-a.rect.left,y:l.rect.top-a.rect.top},g={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/l.rect.height:1},v={x:c.x-m.x,y:c.y-m.y,...g},x=r({...d,active:a,dragOverlay:l,transform:{initial:c,final:v}}),[S]=x,T=x[x.length-1];if(JSON.stringify(S)===JSON.stringify(T))return;const k=i?.({active:a,dragOverlay:l,...d}),A=l.node.animate(x,{duration:e,easing:n,fill:"forwards"});return new Promise(O=>{A.onfinish=()=>{k?.(),O()}})}}let ZT=0;function KV(t){return N.useMemo(()=>{if(t!=null)return ZT++,ZT},[t])}const XV=Fe.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:i,style:r,transition:s,modifiers:a,wrapperElement:l="div",className:c,zIndex:d=999}=t;const{activatorEvent:m,active:g,activeNodeRect:v,containerNodeRect:x,draggableNodes:S,droppableContainers:T,dragOverlay:k,over:A,measuringConfiguration:O,scrollableAncestors:z,scrollableAncestorRects:L,windowRect:I}=GA(),j=N.useContext(Nx),B=KV(g?.id),q=FA(a,{activatorEvent:m,active:g,activeNodeRect:v,containerNodeRect:x,draggingNodeRect:k.rect,over:A,overlayNodeRect:k.rect,scrollableAncestors:z,scrollableAncestorRects:L,transform:j,windowRect:I}),$=YE(v),G=VV({config:i,draggableNodes:S,droppableContainers:T,measuringConfiguration:O}),X=$?k.setRef:void 0;return Fe.createElement(PV,null,Fe.createElement(LV,{animation:G},g&&B?Fe.createElement(UV,{key:B,id:g.id,ref:X,as:l,activatorEvent:m,adjustScale:e,className:c,transition:s,rect:$,style:{zIndex:d,...r},transform:q},n):null))});function VA(t,e,n){const i=t.slice();return i.splice(n<0?i.length+n:n,0,i.splice(e,1)[0]),i}function QV(t,e){return t.reduce((n,i,r)=>{const s=e.get(i);return s&&(n[r]=s),n},Array(t.length))}function tv(t){return t!==null&&t>=0}function WV(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function JV(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const YA=t=>{let{rects:e,activeIndex:n,overIndex:i,index:r}=t;const s=VA(e,i,n),a=e[r],l=s[r];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},nv={scaleX:1,scaleY:1},ZV=t=>{var e;let{activeIndex:n,activeNodeRect:i,index:r,rects:s,overIndex:a}=t;const l=(e=s[n])!=null?e:i;if(!l)return null;if(r===n){const d=s[a];return d?{x:0,y:n<a?d.top+d.height-(l.top+l.height):d.top-l.top,...nv}:null}const c=$V(s,r,n);return r>n&&r<=a?{x:0,y:-l.height-c,...nv}:r<n&&r>=a?{x:0,y:l.height+c,...nv}:{x:0,y:0,...nv}};function $V(t,e,n){const i=t[e],r=t[e-1],s=t[e+1];return i?n<e?r?i.top-(r.top+r.height):s?s.top-(i.top+i.height):0:s?s.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const KA="Sortable",XA=Fe.createContext({activeIndex:-1,containerId:KA,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:YA,disabled:{draggable:!1,droppable:!1}});function eY(t){let{children:e,id:n,items:i,strategy:r=YA,disabled:s=!1}=t;const{active:a,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:m}=GA(),g=F0(KA,n),v=l.rect!==null,x=N.useMemo(()=>i.map(j=>typeof j=="object"&&"id"in j?j.id:j),[i]),S=a!=null,T=a?x.indexOf(a.id):-1,k=d?x.indexOf(d.id):-1,A=N.useRef(x),O=!WV(x,A.current),z=k!==-1&&T===-1||O,L=JV(s);ho(()=>{O&&S&&m(x)},[O,x,S,m]),N.useEffect(()=>{A.current=x},[x]);const I=N.useMemo(()=>({activeIndex:T,containerId:g,disabled:L,disableTransforms:z,items:x,overIndex:k,useDragOverlay:v,sortedRects:QV(x,c),strategy:r}),[T,g,L.draggable,L.droppable,z,x,k,c,v,r]);return Fe.createElement(XA.Provider,{value:I},e)}const tY=t=>{let{id:e,items:n,activeIndex:i,overIndex:r}=t;return VA(n,i,r).indexOf(e)},nY=t=>{let{containerId:e,isSorting:n,wasDragging:i,index:r,items:s,newIndex:a,previousItems:l,previousContainerId:c,transition:d}=t;return!d||!i||l!==s&&r===a?!1:n?!0:a!==r&&e===c},iY={duration:200,easing:"ease"},QA="transform",rY=Pc.Transition.toString({property:QA,duration:0,easing:"linear"}),sY={roleDescription:"sortable"};function aY(t){let{disabled:e,index:n,node:i,rect:r}=t;const[s,a]=N.useState(null),l=N.useRef(n);return ho(()=>{if(!e&&n!==l.current&&i.current){const c=r.current;if(c){const d=Np(i.current,{ignoreTransform:!0}),m={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(m.x||m.y)&&a(m)}}n!==l.current&&(l.current=n)},[e,n,i,r]),N.useEffect(()=>{s&&a(null)},[s]),s}function oY(t){let{animateLayoutChanges:e=nY,attributes:n,disabled:i,data:r,getNewIndex:s=tY,id:a,strategy:l,resizeObserverConfig:c,transition:d=iY}=t;const{items:m,containerId:g,activeIndex:v,disabled:x,disableTransforms:S,sortedRects:T,overIndex:k,useDragOverlay:A,strategy:O}=N.useContext(XA),z=lY(i,x),L=m.indexOf(a),I=N.useMemo(()=>({sortable:{containerId:g,index:L,items:m},...r}),[g,r,L,m]),j=N.useMemo(()=>m.slice(m.indexOf(a)),[m,a]),{rect:B,node:q,isOver:$,setNodeRef:G}=qA({id:a,data:I,disabled:z.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...c}}),{active:X,activatorEvent:J,activeNodeRect:ce,attributes:Z,setNodeRef:te,listeners:V,isDragging:ae,over:oe,setActivatorNodeRef:he,transform:F}=DV({id:a,data:I,attributes:{...sY,...n},disabled:z.draggable}),Y=vq(G,te),se=!!X,U=se&&!S&&tv(v)&&tv(k),ke=!A&&ae,Pe=ke&&U?F:null,Ie=U?Pe??(l??O)({rects:T,activeNodeRect:ce,activeIndex:v,overIndex:k,index:L}):null,ot=tv(v)&&tv(k)?s({id:a,items:m,activeIndex:v,overIndex:k}):L,et=X?.id,rt=N.useRef({activeId:et,items:m,newIndex:ot,containerId:g}),mi=m!==rt.current.items,gn=e({active:X,containerId:g,isDragging:ae,isSorting:se,id:a,index:L,items:m,newIndex:rt.current.newIndex,previousItems:rt.current.items,previousContainerId:rt.current.containerId,transition:d,wasDragging:rt.current.activeId!=null}),Mn=aY({disabled:!gn,index:L,node:q,rect:B});return N.useEffect(()=>{se&&rt.current.newIndex!==ot&&(rt.current.newIndex=ot),g!==rt.current.containerId&&(rt.current.containerId=g),m!==rt.current.items&&(rt.current.items=m)},[se,ot,g,m]),N.useEffect(()=>{if(et===rt.current.activeId)return;if(et!=null&&rt.current.activeId==null){rt.current.activeId=et;return}const Ai=setTimeout(()=>{rt.current.activeId=et},50);return()=>clearTimeout(Ai)},[et]),{active:X,activeIndex:v,attributes:Z,data:I,rect:B,index:L,newIndex:ot,items:m,isOver:$,isSorting:se,isDragging:ae,listeners:V,node:q,overIndex:k,over:oe,setNodeRef:Y,setActivatorNodeRef:he,setDroppableNodeRef:G,setDraggableNodeRef:te,transform:Mn??Ie,transition:In()};function In(){if(Mn||mi&&rt.current.newIndex===L)return rY;if(!(ke&&!kx(J)||!d)&&(se||gn))return Pc.Transition.toString({...d,property:QA})}}function lY(t,e){var n,i;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(i=t?.droppable)!=null?i:e.droppable}}function Hb(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const uY=[zt.Down,zt.Right,zt.Up,zt.Left],cY=(t,e)=>{let{context:{active:n,collisionRect:i,droppableRects:r,droppableContainers:s,over:a,scrollableAncestors:l}}=e;if(uY.includes(t.code)){if(t.preventDefault(),!n||!i)return;const c=[];s.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const v=r.get(g.id);if(v)switch(t.code){case zt.Down:i.top<v.top&&c.push(g);break;case zt.Up:i.top>v.top&&c.push(g);break;case zt.Left:i.left>v.left&&c.push(g);break;case zt.Right:i.left<v.left&&c.push(g);break}});const d=kA({collisionRect:i,droppableRects:r,droppableContainers:c});let m=_A(d,"id");if(m===a?.id&&d.length>1&&(m=d[1].id),m!=null){const g=s.get(n.id),v=s.get(m),x=v?r.get(v.id):null,S=v?.node.current;if(S&&x&&g&&v){const k=Mx(S).some((j,B)=>l[B]!==j),A=WA(g,v),O=fY(g,v),z=k||!A?{x:0,y:0}:{x:O?i.width-x.width:0,y:O?i.height-x.height:0},L={x:x.left,y:x.top};return z.x&&z.y?L:C0(L,z)}}}};function WA(t,e){return!Hb(t)||!Hb(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function fY(t,e){return!Hb(t)||!Hb(e)||!WA(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}var dY=Qk[" useId ".trim().toString()]||(()=>{}),hY=0;function Dv(t){const[e,n]=N.useState(dY());return su(()=>{n(i=>i??String(hY++))},[t]),t||(e?`radix-${e}`:"")}var wS="focusScope.autoFocusOnMount",ES="focusScope.autoFocusOnUnmount",$T={bubbles:!1,cancelable:!0},pY="FocusScope",KE=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...a}=t,[l,c]=N.useState(null),d=Bs(r),m=Bs(s),g=N.useRef(null),v=Pi(e,T=>c(T)),x=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(i){let T=function(z){if(x.paused||!l)return;const L=z.target;l.contains(L)?g.current=L:gc(g.current,{select:!0})},k=function(z){if(x.paused||!l)return;const L=z.relatedTarget;L!==null&&(l.contains(L)||gc(g.current,{select:!0}))},A=function(z){if(document.activeElement===document.body)for(const I of z)I.removedNodes.length>0&&gc(l)};document.addEventListener("focusin",T),document.addEventListener("focusout",k);const O=new MutationObserver(A);return l&&O.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",T),document.removeEventListener("focusout",k),O.disconnect()}}},[i,l,x.paused]),N.useEffect(()=>{if(l){t_.add(x);const T=document.activeElement;if(!l.contains(T)){const A=new CustomEvent(wS,$T);l.addEventListener(wS,d),l.dispatchEvent(A),A.defaultPrevented||(mY(xY(JA(l)),{select:!0}),document.activeElement===T&&gc(l))}return()=>{l.removeEventListener(wS,d),setTimeout(()=>{const A=new CustomEvent(ES,$T);l.addEventListener(ES,m),l.dispatchEvent(A),A.defaultPrevented||gc(T??document.body,{select:!0}),l.removeEventListener(ES,m),t_.remove(x)},0)}}},[l,d,m,x]);const S=N.useCallback(T=>{if(!n&&!i||x.paused)return;const k=T.key==="Tab"&&!T.altKey&&!T.ctrlKey&&!T.metaKey,A=document.activeElement;if(k&&A){const O=T.currentTarget,[z,L]=gY(O);z&&L?!T.shiftKey&&A===L?(T.preventDefault(),n&&gc(z,{select:!0})):T.shiftKey&&A===z&&(T.preventDefault(),n&&gc(L,{select:!0})):A===O&&T.preventDefault()}},[n,i,x.paused]);return _.jsx(sn.div,{tabIndex:-1,...a,ref:v,onKeyDown:S})});KE.displayName=pY;function mY(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(gc(i,{select:e}),document.activeElement!==n)return}function gY(t){const e=JA(t),n=e_(e,t),i=e_(e.reverse(),t);return[n,i]}function JA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function e_(t,e){for(const n of t)if(!yY(n,{upTo:e}))return n}function yY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function vY(t){return t instanceof HTMLInputElement&&"select"in t}function gc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&vY(t)&&e&&t.select()}}var t_=bY();function bY(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=n_(t,e),t.unshift(e)},remove(e){t=n_(t,e),t[0]?.resume()}}}function n_(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function xY(t){return t.filter(e=>e.tagName!=="A")}var TS=0;function ZA(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??i_()),document.body.insertAdjacentElement("beforeend",t[1]??i_()),TS++,()=>{TS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),TS--}},[])}function i_(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var tl=function(){return tl=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tl.apply(this,arguments)};function $A(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function SY(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var zv="right-scroll-bar-position",jv="width-before-scroll-bar",CY="with-scroll-bars-hidden",wY="--removed-body-scroll-bar-size";function _S(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function EY(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var TY=typeof window<"u"?N.useLayoutEffect:N.useEffect,r_=new WeakMap;function _Y(t,e){var n=EY(null,function(i){return t.forEach(function(r){return _S(r,i)})});return TY(function(){var i=r_.get(n);if(i){var r=new Set(i),s=new Set(t),a=n.current;r.forEach(function(l){s.has(l)||_S(l,null)}),s.forEach(function(l){r.has(l)||_S(l,a)})}r_.set(n,t)},[t]),n}function kY(t){return t}function MY(t,e){e===void 0&&(e=kY);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var a=e(s,i);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(s){for(i=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){i=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(s),a=n}var c=function(){var m=a;a=[],m.forEach(s)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(m){a.push(m),d()},filter:function(m){return a=a.filter(m),n}}}};return r}function AY(t){t===void 0&&(t={});var e=MY(null);return e.options=tl({async:!0,ssr:!1},t),e}var eN=function(t){var e=t.sideCar,n=$A(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return N.createElement(i,tl({},n))};eN.isSideCarExport=!0;function NY(t,e){return t.useMedium(e),eN}var tN=AY(),kS=function(){},Rx=N.forwardRef(function(t,e){var n=N.useRef(null),i=N.useState({onScrollCapture:kS,onWheelCapture:kS,onTouchMoveCapture:kS}),r=i[0],s=i[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,m=t.enabled,g=t.shards,v=t.sideCar,x=t.noRelative,S=t.noIsolation,T=t.inert,k=t.allowPinchZoom,A=t.as,O=A===void 0?"div":A,z=t.gapMode,L=$A(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=v,j=_Y([n,e]),B=tl(tl({},L),r);return N.createElement(N.Fragment,null,m&&N.createElement(I,{sideCar:tN,removeScrollBar:d,shards:g,noRelative:x,noIsolation:S,inert:T,setCallbacks:s,allowPinchZoom:!!k,lockRef:n,gapMode:z}),a?N.cloneElement(N.Children.only(l),tl(tl({},B),{ref:j})):N.createElement(O,tl({},B,{className:c,ref:j}),l))});Rx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rx.classNames={fullWidth:jv,zeroRight:zv};var RY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function OY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=RY();return e&&t.setAttribute("nonce",e),t}function DY(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function zY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var jY=function(){var t=0,e=null;return{add:function(n){t==0&&(e=OY())&&(DY(e,n),zY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LY=function(){var t=jY();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},nN=function(){var t=LY(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},BY={left:0,top:0,right:0,gap:0},MS=function(t){return parseInt(t||"",10)||0},PY=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[MS(n),MS(i),MS(r)]},IY=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return BY;var e=PY(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},HY=nN(),up="data-scroll-locked",UY=function(t,e,n,i){var r=t.left,s=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(CY,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(l,"px ").concat(i,`;
  }
  body[`).concat(up,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(i,";")].filter(Boolean).join(""),`
  }

  .`).concat(zv,` {
    right: `).concat(l,"px ").concat(i,`;
  }

  .`).concat(jv,` {
    margin-right: `).concat(l,"px ").concat(i,`;
  }

  .`).concat(zv," .").concat(zv,` {
    right: 0 `).concat(i,`;
  }

  .`).concat(jv," .").concat(jv,` {
    margin-right: 0 `).concat(i,`;
  }

  body[`).concat(up,`] {
    `).concat(wY,": ").concat(l,`px;
  }
`)},s_=function(){var t=parseInt(document.body.getAttribute(up)||"0",10);return isFinite(t)?t:0},FY=function(){N.useEffect(function(){return document.body.setAttribute(up,(s_()+1).toString()),function(){var t=s_()-1;t<=0?document.body.removeAttribute(up):document.body.setAttribute(up,t.toString())}},[])},GY=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;FY();var s=N.useMemo(function(){return IY(r)},[r]);return N.createElement(HY,{styles:UY(s,!e,r,n?"":"!important")})},tw=!1;if(typeof window<"u")try{var iv=Object.defineProperty({},"passive",{get:function(){return tw=!0,!0}});window.addEventListener("test",iv,iv),window.removeEventListener("test",iv,iv)}catch{tw=!1}var Vh=tw?{passive:!1}:!1,qY=function(t){return t.tagName==="TEXTAREA"},iN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!qY(t)&&n[e]==="visible")},VY=function(t){return iN(t,"overflowY")},YY=function(t){return iN(t,"overflowX")},a_=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=rN(t,i);if(r){var s=sN(t,i),a=s[1],l=s[2];if(a>l)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},KY=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},XY=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},rN=function(t,e){return t==="v"?VY(e):YY(e)},sN=function(t,e){return t==="v"?KY(e):XY(e)},QY=function(t,e){return t==="h"&&e==="rtl"?-1:1},WY=function(t,e,n,i,r){var s=QY(t,window.getComputedStyle(e).direction),a=s*i,l=n.target,c=e.contains(l),d=!1,m=a>0,g=0,v=0;do{if(!l)break;var x=sN(t,l),S=x[0],T=x[1],k=x[2],A=T-k-s*S;(S||A)&&rN(t,l)&&(g+=A,v+=S);var O=l.parentNode;l=O&&O.nodeType===Node.DOCUMENT_FRAGMENT_NODE?O.host:O}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(m&&Math.abs(g)<1||!m&&Math.abs(v)<1)&&(d=!0),d},rv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},o_=function(t){return[t.deltaX,t.deltaY]},l_=function(t){return t&&"current"in t?t.current:t},JY=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ZY=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$Y=0,Yh=[];function eK(t){var e=N.useRef([]),n=N.useRef([0,0]),i=N.useRef(),r=N.useState($Y++)[0],s=N.useState(nN)[0],a=N.useRef(t);N.useEffect(function(){a.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var T=SY([t.lockRef.current],(t.shards||[]).map(l_),!0).filter(Boolean);return T.forEach(function(k){return k.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),T.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(T,k){if("touches"in T&&T.touches.length===2||T.type==="wheel"&&T.ctrlKey)return!a.current.allowPinchZoom;var A=rv(T),O=n.current,z="deltaX"in T?T.deltaX:O[0]-A[0],L="deltaY"in T?T.deltaY:O[1]-A[1],I,j=T.target,B=Math.abs(z)>Math.abs(L)?"h":"v";if("touches"in T&&B==="h"&&j.type==="range")return!1;var q=a_(B,j);if(!q)return!0;if(q?I=B:(I=B==="v"?"h":"v",q=a_(B,j)),!q)return!1;if(!i.current&&"changedTouches"in T&&(z||L)&&(i.current=I),!I)return!0;var $=i.current||I;return WY($,k,T,$==="h"?z:L)},[]),c=N.useCallback(function(T){var k=T;if(!(!Yh.length||Yh[Yh.length-1]!==s)){var A="deltaY"in k?o_(k):rv(k),O=e.current.filter(function(I){return I.name===k.type&&(I.target===k.target||k.target===I.shadowParent)&&JY(I.delta,A)})[0];if(O&&O.should){k.cancelable&&k.preventDefault();return}if(!O){var z=(a.current.shards||[]).map(l_).filter(Boolean).filter(function(I){return I.contains(k.target)}),L=z.length>0?l(k,z[0]):!a.current.noIsolation;L&&k.cancelable&&k.preventDefault()}}},[]),d=N.useCallback(function(T,k,A,O){var z={name:T,delta:k,target:A,should:O,shadowParent:tK(A)};e.current.push(z),setTimeout(function(){e.current=e.current.filter(function(L){return L!==z})},1)},[]),m=N.useCallback(function(T){n.current=rv(T),i.current=void 0},[]),g=N.useCallback(function(T){d(T.type,o_(T),T.target,l(T,t.lockRef.current))},[]),v=N.useCallback(function(T){d(T.type,rv(T),T.target,l(T,t.lockRef.current))},[]);N.useEffect(function(){return Yh.push(s),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",c,Vh),document.addEventListener("touchmove",c,Vh),document.addEventListener("touchstart",m,Vh),function(){Yh=Yh.filter(function(T){return T!==s}),document.removeEventListener("wheel",c,Vh),document.removeEventListener("touchmove",c,Vh),document.removeEventListener("touchstart",m,Vh)}},[]);var x=t.removeScrollBar,S=t.inert;return N.createElement(N.Fragment,null,S?N.createElement(s,{styles:ZY(r)}):null,x?N.createElement(GY,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function tK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const nK=NY(tN,eK);var XE=N.forwardRef(function(t,e){return N.createElement(Rx,tl({},t,{ref:e,sideCar:nK}))});XE.classNames=Rx.classNames;var iK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Kh=new WeakMap,sv=new WeakMap,av={},AS=0,aN=function(t){return t&&(t.host||aN(t.parentNode))},rK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=aN(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},sK=function(t,e,n,i){var r=rK(e,Array.isArray(t)?t:[t]);av[n]||(av[n]=new WeakMap);var s=av[n],a=[],l=new Set,c=new Set(r),d=function(g){!g||l.has(g)||(l.add(g),d(g.parentNode))};r.forEach(d);var m=function(g){!g||c.has(g)||Array.prototype.forEach.call(g.children,function(v){if(l.has(v))m(v);else try{var x=v.getAttribute(i),S=x!==null&&x!=="false",T=(Kh.get(v)||0)+1,k=(s.get(v)||0)+1;Kh.set(v,T),s.set(v,k),a.push(v),T===1&&S&&sv.set(v,!0),k===1&&v.setAttribute(n,"true"),S||v.setAttribute(i,"true")}catch(A){console.error("aria-hidden: cannot operate on ",v,A)}})};return m(e),l.clear(),AS++,function(){a.forEach(function(g){var v=Kh.get(g)-1,x=s.get(g)-1;Kh.set(g,v),s.set(g,x),v||(sv.has(g)||g.removeAttribute(i),sv.delete(g)),x||g.removeAttribute(n)}),AS--,AS||(Kh=new WeakMap,Kh=new WeakMap,sv=new WeakMap,av={})}},oN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=iK(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),sK(i,r,n,"aria-hidden")):function(){return null}},Ox="Dialog",[lN]=md(Ox),[aK,yo]=lN(Ox),uN=t=>{const{__scopeDialog:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:a=!0}=t,l=N.useRef(null),c=N.useRef(null),[d,m]=Bw({prop:i,defaultProp:r??!1,onChange:s,caller:Ox});return _.jsx(aK,{scope:e,triggerRef:l,contentRef:c,contentId:Dv(),titleId:Dv(),descriptionId:Dv(),open:d,onOpenChange:m,onOpenToggle:N.useCallback(()=>m(g=>!g),[m]),modal:a,children:n})};uN.displayName=Ox;var cN="DialogTrigger",oK=N.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=yo(cN,n),s=Pi(e,r.triggerRef);return _.jsx(sn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":JE(r.open),...i,ref:s,onClick:nt(t.onClick,r.onOpenToggle)})});oK.displayName=cN;var QE="DialogPortal",[lK,fN]=lN(QE,{forceMount:void 0}),dN=t=>{const{__scopeDialog:e,forceMount:n,children:i,container:r}=t,s=yo(QE,e);return _.jsx(lK,{scope:e,forceMount:n,children:N.Children.map(i,a=>_.jsx(cu,{present:n||s.open,children:_.jsx(nx,{asChild:!0,container:r,children:a})}))})};dN.displayName=QE;var Ub="DialogOverlay",hN=N.forwardRef((t,e)=>{const n=fN(Ub,t.__scopeDialog),{forceMount:i=n.forceMount,...r}=t,s=yo(Ub,t.__scopeDialog);return s.modal?_.jsx(cu,{present:i||s.open,children:_.jsx(cK,{...r,ref:e})}):null});hN.displayName=Ub;var uK=a0("DialogOverlay.RemoveScroll"),cK=N.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=yo(Ub,n);return _.jsx(XE,{as:uK,allowPinchZoom:!0,shards:[r.contentRef],children:_.jsx(sn.div,{"data-state":JE(r.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),dd="DialogContent",pN=N.forwardRef((t,e)=>{const n=fN(dd,t.__scopeDialog),{forceMount:i=n.forceMount,...r}=t,s=yo(dd,t.__scopeDialog);return _.jsx(cu,{present:i||s.open,children:s.modal?_.jsx(fK,{...r,ref:e}):_.jsx(dK,{...r,ref:e})})});pN.displayName=dd;var fK=N.forwardRef((t,e)=>{const n=yo(dd,t.__scopeDialog),i=N.useRef(null),r=Pi(e,n.contentRef,i);return N.useEffect(()=>{const s=i.current;if(s)return oN(s)},[]),_.jsx(mN,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nt(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:nt(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&s.preventDefault()}),onFocusOutside:nt(t.onFocusOutside,s=>s.preventDefault())})}),dK=N.forwardRef((t,e)=>{const n=yo(dd,t.__scopeDialog),i=N.useRef(!1),r=N.useRef(!1);return _.jsx(mN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(i.current||n.triggerRef.current?.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=s.target;n.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),mN=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,...a}=t,l=yo(dd,n),c=N.useRef(null),d=Pi(e,c);return ZA(),_.jsxs(_.Fragment,{children:[_.jsx(KE,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:_.jsx(tx,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":JE(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(hK,{titleId:l.titleId}),_.jsx(mK,{contentRef:c,descriptionId:l.descriptionId})]})]})}),WE="DialogTitle",gN=N.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=yo(WE,n);return _.jsx(sn.h2,{id:r.titleId,...i,ref:e})});gN.displayName=WE;var yN="DialogDescription",vN=N.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=yo(yN,n);return _.jsx(sn.p,{id:r.descriptionId,...i,ref:e})});vN.displayName=yN;var bN="DialogClose",xN=N.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,r=yo(bN,n);return _.jsx(sn.button,{type:"button",...i,ref:e,onClick:nt(t.onClick,()=>r.onOpenChange(!1))})});xN.displayName=bN;function JE(t){return t?"open":"closed"}var SN="DialogTitleWarning",[Fle,CN]=I7(SN,{contentName:dd,titleName:WE,docsSlug:"dialog"}),hK=({titleId:t})=>{const e=CN(SN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},pK="DialogDescriptionWarning",mK=({contentRef:t,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${CN(pK).contentName}}.`;return N.useEffect(()=>{const r=t.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(i))},[i,t,e]),null},gK=uN,wN=dN,EN=hN,TN=pN,_N=gN,kN=vN,yK=xN;const vK=gK,MN=t=>_.jsx(wN,{...t});MN.displayName=wN.displayName;const AN=Fe.forwardRef(({className:t,...e},n)=>_.jsx(EN,{ref:n,className:Pt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));AN.displayName=EN.displayName;const NN=Fe.forwardRef(({className:t,children:e,...n},i)=>_.jsxs(MN,{children:[_.jsx(AN,{}),_.jsxs(TN,{ref:i,className:Pt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-800 bg-surface-100 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,_.jsxs(yK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[_.jsx("path",{d:"M18 6 6 18"}),_.jsx("path",{d:"m6 6 12 12"})]}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));NN.displayName=TN.displayName;const RN=({className:t,...e})=>_.jsx("div",{className:Pt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});RN.displayName="DialogHeader";const ON=({className:t,...e})=>_.jsx("div",{className:Pt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ON.displayName="DialogFooter";const DN=Fe.forwardRef(({className:t,...e},n)=>_.jsx(_N,{ref:n,className:Pt("text-lg font-semibold leading-none tracking-tight",t),...e}));DN.displayName=_N.displayName;const bK=Fe.forwardRef(({className:t,...e},n)=>_.jsx(kN,{ref:n,className:Pt("text-sm text-muted-foreground",t),...e}));bK.displayName=kN.displayName;function xK(t){return Zw({queryKey:["tasks",{completed:t}],queryFn:()=>lx.getTasks(t)})}function SK(){const t=gd();return z0({mutationFn:e=>lx.createTask(e),onSuccess:()=>{t.invalidateQueries({queryKey:["tasks"]})}})}function CK(){const t=gd();return z0({mutationFn:({id:e,task:n})=>lx.updateTask(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["tasks"]})}})}function wK(){const t=gd();return z0({mutationFn:e=>lx.deleteTask(e),onSuccess:()=>{t.invalidateQueries({queryKey:["tasks"]})}})}const EK=({task:t,onClick:e})=>{const{attributes:n,listeners:i,setNodeRef:r,transform:s,transition:a}=oY({id:t.id}),l={transform:Pc.Transform.toString(s),transition:a};return _.jsxs("div",{ref:r,style:l,...n,...i,className:"relative pl-6 mb-4 group cursor-grab active:cursor-grabbing",onClick:e,children:[_.jsx("div",{className:"absolute left-[5px] top-3 bottom-[-16px] w-0.5 bg-gray-200 dark:bg-gray-700 group-last:hidden"}),_.jsx("div",{className:`absolute left-0 top-3 w-3 h-3 rounded-full border-2 border-white dark:border-gray-900 z-10 shadow-sm ${t.isCompleted?"bg-green-500":"bg-blue-500"}`}),_.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[_.jsx("div",{className:"flex justify-between items-start mb-1",children:t.dueDate&&_.jsxs("span",{className:"text-xs font-mono text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded flex items-center gap-1",children:[_.jsx(PF,{size:10}),hq(new Date(t.dueDate),"h:mm a")]})}),_.jsx("div",{className:`font-medium text-gray-800 dark:text-gray-200 ${t.isCompleted?"line-through text-gray-500":""}`,children:t.title}),t.tags&&t.tags.length>0&&_.jsx("div",{className:"flex gap-1 mt-2 flex-wrap",children:t.tags.filter(c=>!["Focus","Social","Health","Admin"].includes(c)).map(c=>_.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300 border border-blue-100 dark:border-blue-800",children:["#",c]},c))})]})]})},u_=({id:t,title:e,color:n,tasks:i,onAddTask:r,onTaskClick:s})=>{const{setNodeRef:a}=qA({id:t});return _.jsxs("div",{ref:a,className:"flex-1 min-w-[280px] flex flex-col h-full bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[_.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2 bg-white dark:bg-gray-800/50",children:[_.jsx("div",{className:`w-3 h-3 rounded-full ${n}`}),_.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-200",children:e}),_.jsx("span",{className:"ml-auto text-xs font-medium bg-gray-200 dark:bg-gray-800 px-2 py-0.5 rounded-full text-gray-600 dark:text-gray-400",children:i.length})]}),_.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[_.jsx(eY,{items:i.map(l=>l.id),strategy:ZV,children:i.map(l=>_.jsx(EK,{task:l,onClick:()=>s(l)},l.id))}),i.length===0&&_.jsx("div",{className:"text-center py-8 text-gray-400 dark:text-gray-600 text-sm italic",children:"No tasks yet"})]}),_.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50",children:_.jsxs("button",{onClick:()=>r(t),className:"w-full py-2 rounded-lg border border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:text-blue-600 hover:border-blue-400 dark:text-gray-400 dark:hover:text-blue-400 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[_.jsx(gA,{size:14})," Add Task"]})})]})},zN=()=>{const{data:t=[],isLoading:e}=xK(),n=SK(),i=CK(),r=wK(),[s,a]=N.useState(null),[l,c]=N.useState("Focus"),[d,m]=N.useState(!1),[g,v]=N.useState(null),x=Oq(HT(VE,{activationConstraint:{distance:5}}),HT(GE,{coordinateGetter:cY})),S=[{id:"Focus",title:"Focus",color:"bg-blue-500"},{id:"Social",title:"Social",color:"bg-pink-500"},{id:"Health",title:"Health",color:"bg-green-500"},{id:"Admin",title:"Admin",color:"bg-gray-500"}],T=j=>t.filter(B=>B.tags&&B.tags.includes(j)),k=j=>{a(j.active.id)},A=j=>{const{active:B,over:q}=j,$=B.id,G=q?.id;if(!G){a(null);return}let X=S.find(J=>J.id===G)?.id;if(!X){const J=t.find(ce=>ce.id===G);J&&(X=S.find(ce=>J.tags?.includes(ce.id))?.id)}if(X){const J=t.find(ce=>ce.id===$);if(J){const ce=S.map(te=>te.id),Z=(J.tags||[]).filter(te=>!ce.includes(te));Z.push(X),J.tags?.includes(X)||i.mutate({id:J.id,task:{...J,tags:Z}})}}a(null)},O=j=>{v({title:"",description:"",tags:[j],dueDate:new Date().toISOString(),isCompleted:!1}),m(!0)},z=j=>{v({...j}),m(!0)},L=async()=>{g&&(g.id?await i.mutateAsync({id:g.id,task:g}):await n.mutateAsync(g),m(!1),v(null))},I=async()=>{g?.id&&confirm("Are you sure you want to delete this task?")&&(await r.mutateAsync(g.id),m(!1),v(null))};return e?_.jsx("div",{className:"p-8",children:"Loading tasks..."}):_.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-gray-900 transition-colors duration-300",children:[_.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0",children:[_.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Daily Lanes"}),_.jsx("div",{className:"flex gap-2"})]}),_.jsx("div",{className:"md:hidden flex border-b border-gray-200 dark:border-gray-700 overflow-x-auto no-scrollbar shrink-0",children:S.map(j=>_.jsx("button",{onClick:()=>c(j.id),className:`flex-1 py-3 px-4 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${l===j.id?`border-${j.color.replace("bg-","")} text-gray-900 dark:text-white`:"border-transparent text-gray-500 dark:text-gray-400"}`,children:j.title},j.id))}),_.jsxs(NV,{sensors:x,collisionDetection:kA,onDragStart:k,onDragEnd:A,children:[_.jsxs("div",{className:"flex-1 overflow-hidden p-4",children:[_.jsx("div",{className:"hidden md:flex gap-4 h-full overflow-x-auto pb-2",children:S.map(j=>_.jsx(u_,{...j,tasks:T(j.id),onAddTask:O,onTaskClick:z},j.id))}),_.jsx("div",{className:"md:hidden h-full",children:S.filter(j=>j.id===l).map(j=>_.jsx(u_,{...j,tasks:T(j.id),onAddTask:O,onTaskClick:z},j.id))})]}),_.jsx(XV,{children:s?_.jsx("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 opacity-90 rotate-2 cursor-grabbing w-[280px]",children:_.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Moving Task..."})}):null})]}),_.jsx(vK,{open:d,onOpenChange:m,children:_.jsxs(NN,{className:"sm:max-w-[500px]",children:[_.jsx(RN,{children:_.jsx(DN,{children:g?.id?"Edit Task":"New Task"})}),_.jsxs("div",{className:"grid gap-4 py-4",children:[_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("label",{className:"text-sm font-medium",children:"Title"}),_.jsx("input",{className:"w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-700",value:g?.title||"",onChange:j=>v(B=>({...B,title:j.target.value})),placeholder:"Task title"})]}),_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("label",{className:"text-sm font-medium",children:"Description"}),_.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 min-h-[100px]",value:g?.description||"",onChange:j=>v(B=>({...B,description:j.target.value})),placeholder:"Description..."})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),_.jsx("input",{type:"datetime-local",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-700",value:g?.dueDate?new Date(g.dueDate).toISOString().slice(0,16):"",onChange:j=>v(B=>({...B,dueDate:new Date(j.target.value).toISOString()}))})]}),_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("label",{className:"text-sm font-medium",children:"Status"}),_.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[_.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:g?.isCompleted||!1,onChange:j=>v(B=>({...B,isCompleted:j.target.checked}))}),_.jsx("span",{className:"text-sm",children:"Completed"})]})]})]}),_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("label",{className:"text-sm font-medium",children:"Tags (comma separated)"}),_.jsx("input",{className:"w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-700",value:g?.tags?.join(", ")||"",onChange:j=>v(B=>({...B,tags:j.target.value.split(",").map(q=>q.trim()).filter(Boolean)})),placeholder:"e.g. Focus, Urgent"})]})]}),_.jsxs(ON,{className:"gap-2 sm:gap-0",children:[g?.id&&_.jsx("button",{onClick:I,className:"mr-auto text-red-500 hover:text-red-700 text-sm font-medium px-4 py-2",children:"Delete"}),_.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"Cancel"}),_.jsx("button",{onClick:L,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save"})]})]})})]})},TK=[{id:"1",sender:"Prof. Dumbledore",subject:"End of Term Feast",preview:"Please ensure all students are present...",time:"10:30 AM",isRead:!1,folder:"inbox",body:"Please ensure all students are present in the Great Hall by 6 PM for the End of Term Feast. House points will be awarded."},{id:"2",sender:"Hagrid",subject:"Urgent: Dragon Egg",preview:"Can you come down to the hut?",time:"Yesterday",isRead:!0,folder:"inbox",body:"Can you come down to the hut? I think it is hatching soon. Don't tell anyone!"},{id:"3",sender:"Ministry of Magic",subject:"Internship Application",preview:"We have received your application...",time:"Mon",isRead:!0,folder:"sent",body:"We have received your application for the Department of Mysteries internship. We will be in touch."}],_K=()=>{const[t,e]=N.useState("inbox"),[n,i]=N.useState(null),[r,s]=N.useState(TK),[a,l]=N.useState(!1),[c,d]=N.useState(""),[m,g]=N.useState(""),[v,x]=N.useState(""),S=r.filter(A=>A.folder===t),T=r.find(A=>A.id===n),k=()=>{const A={id:Date.now().toString(),sender:"Me",subject:m,preview:v.substring(0,30)+"...",time:"Just now",isRead:!0,folder:"sent",body:v};s(O=>[A,...O]),l(!1),d(""),g(""),x(""),e("sent"),i(A.id)};return _.jsxs("div",{className:"flex-1 flex overflow-hidden bg-white h-full relative",children:[_.jsxs("div",{className:"w-16 md:w-48 border-r border-border bg-gray-50 flex flex-col shrink-0",children:[_.jsx("div",{className:"p-4",children:_.jsxs("button",{onClick:()=>l(!0),className:"w-full bg-accent-blue text-white rounded-lg py-3 px-2 flex items-center justify-center gap-2 hover:bg-blue-600 transition-colors shadow-sm",children:[_.jsx("i",{className:"fa-solid fa-pen-to-square"})," ",_.jsx("span",{className:"hidden md:inline font-bold text-sm",children:"Compose"})]})}),_.jsxs("div",{className:"flex-1 overflow-y-auto px-2 space-y-1",children:[_.jsxs("button",{onClick:()=>e("inbox"),className:Pt("w-full text-left px-3 py-2 rounded-lg flex items-center gap-3 text-sm font-medium",t==="inbox"?"bg-white text-ink shadow-sm ring-1 ring-black/5":"text-gray-500 hover:bg-gray-100"),children:[_.jsx("i",{className:"fa-solid fa-inbox w-4"})," ",_.jsx("span",{className:"hidden md:inline",children:"Inbox"}),r.filter(A=>A.folder==="inbox"&&!A.isRead).length>0&&_.jsx("span",{className:"hidden md:flex ml-auto bg-accent-blue text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:r.filter(A=>A.folder==="inbox"&&!A.isRead).length})]}),_.jsxs("button",{onClick:()=>e("sent"),className:Pt("w-full text-left px-3 py-2 rounded-lg flex items-center gap-3 text-sm font-medium",t==="sent"?"bg-white text-ink shadow-sm ring-1 ring-black/5":"text-gray-500 hover:bg-gray-100"),children:[_.jsx("i",{className:"fa-solid fa-paper-plane w-4"})," ",_.jsx("span",{className:"hidden md:inline",children:"Sent"})]}),_.jsxs("button",{onClick:()=>e("trash"),className:Pt("w-full text-left px-3 py-2 rounded-lg flex items-center gap-3 text-sm font-medium",t==="trash"?"bg-white text-ink shadow-sm ring-1 ring-black/5":"text-gray-500 hover:bg-gray-100"),children:[_.jsx("i",{className:"fa-solid fa-trash w-4"})," ",_.jsx("span",{className:"hidden md:inline",children:"Trash"})]})]})]}),_.jsxs("div",{className:Pt("w-full md:w-80 border-r border-border bg-white flex flex-col transition-all duration-300",n?"hidden md:flex":"flex"),children:[_.jsx("div",{className:"p-4 border-b border-border",children:_.jsx("h2",{className:"font-bold text-lg capitalize",children:t})}),_.jsx("div",{className:"flex-1 overflow-y-auto",children:S.length===0?_.jsx("div",{className:"p-8 text-center text-gray-400 text-sm",children:"Folder is empty"}):S.map(A=>_.jsxs("div",{onClick:()=>i(A.id),className:Pt("p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors",n===A.id?"bg-blue-50/50":"",!A.isRead&&"bg-white"),children:[_.jsxs("div",{className:"flex justify-between mb-1",children:[_.jsx("span",{className:Pt("text-sm text-ink truncate max-w-[70%]",!A.isRead&&"font-bold"),children:A.sender}),_.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap ml-2",children:A.time})]}),_.jsx("div",{className:Pt("text-xs mb-1 truncate",A.isRead?"text-gray-700":"font-bold text-ink"),children:A.subject}),_.jsx("div",{className:"text-xs text-gray-400 line-clamp-2",children:A.preview})]},A.id))})]}),_.jsx("div",{className:Pt("flex-1 bg-gray-50 flex flex-col transition-all duration-300",n?"flex absolute md:relative inset-0 z-20":"hidden md:flex items-center justify-center"),children:T?_.jsxs("div",{className:"flex flex-col h-full bg-white md:bg-transparent",children:[_.jsxs("div",{className:"md:hidden h-14 border-b border-gray-200 flex items-center px-4 bg-white shrink-0",children:[_.jsx("button",{onClick:()=>i(null),className:"text-gray-500 mr-4",children:_.jsx("i",{className:"fa-solid fa-arrow-left"})}),_.jsx("span",{className:"font-bold text-sm",children:"Read"})]}),_.jsxs("div",{className:"p-6 md:p-8 overflow-y-auto flex-1 bg-white md:m-4 md:rounded-xl md:shadow-sm md:border md:border-gray-200",children:[_.jsxs("div",{className:"flex justify-between items-start mb-6",children:[_.jsx("h1",{className:"text-2xl font-bold text-ink",children:T.subject}),_.jsx("div",{className:"text-xs text-gray-400",children:T.time})]}),_.jsxs("div",{className:"flex items-center gap-3 mb-8 pb-6 border-b border-gray-100",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white font-bold",children:T.sender[0]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-sm font-bold text-ink",children:T.sender}),_.jsx("div",{className:"text-xs text-gray-500",children:"to me"})]})]}),_.jsx("div",{className:"prose prose-sm max-w-none text-ink leading-relaxed whitespace-pre-wrap",children:T.body})]})]}):_.jsxs("div",{className:"text-center text-gray-400",children:[_.jsx("i",{className:"fa-regular fa-envelope-open text-4xl mb-4 opacity-50"}),_.jsx("p",{children:"Select an email to read"})]})}),a&&_.jsx("div",{className:"absolute inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-2xl flex flex-col max-h-[90%] border border-gray-200 animate-in fade-in zoom-in duration-200",children:[_.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[_.jsx("h3",{className:"font-bold text-ink",children:"New Message"}),_.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-red-500",children:_.jsx("i",{className:"fa-solid fa-xmark"})})]}),_.jsxs("div",{className:"p-4 flex flex-col gap-4 flex-1 overflow-y-auto",children:[_.jsx("input",{type:"text",placeholder:"To",value:c,onChange:A=>d(A.target.value),className:"w-full px-0 py-2 border-b border-gray-200 outline-none text-sm font-medium placeholder-gray-400 focus:border-accent-blue transition-colors"}),_.jsx("input",{type:"text",placeholder:"Subject",value:m,onChange:A=>g(A.target.value),className:"w-full px-0 py-2 border-b border-gray-200 outline-none text-sm font-medium placeholder-gray-400 focus:border-accent-blue transition-colors"}),_.jsx("textarea",{placeholder:"Write something...",value:v,onChange:A=>x(A.target.value),className:"w-full flex-1 resize-none outline-none text-sm leading-relaxed placeholder-gray-300 min-h-[200px]"})]}),_.jsxs("div",{className:"p-4 border-t border-gray-100 flex justify-end gap-2 bg-gray-50 rounded-b-xl",children:[_.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-sm font-bold text-gray-500 hover:bg-gray-200 rounded-lg transition-colors",children:"Discard"}),_.jsx("button",{onClick:k,disabled:!c||!m,className:"px-6 py-2 text-sm font-bold bg-accent-blue text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:"Send"})]})]})})]})},kK=Math.PI/180;function MK(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Wf=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},je={_global:Wf,version:"10.0.12",isBrowser:MK(),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle(t){return je.angleDeg?t*kK:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return je.DD.isDragging},isTransforming(){var t,e;return(e=(t=je.Transformer)===null||t===void 0?void 0:t.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!je.DD.node},releaseCanvasOnDestroy:!0,document:Wf.document,_injectGlobal(t){typeof Wf.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Wf.Konva=t}},Jn=t=>{je[t.prototype.getClassName()]=t};je._injectGlobal(je);const AK=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,c_=()=>{if(typeof document>"u")throw new Error(AK)};class Qs{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Qs(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.m[0]*n+this.m[2]*i,s=this.m[1]*n+this.m[3]*i,a=this.m[0]*-i+this.m[2]*n,l=this.m[1]*-i+this.m[3]*n;return this.m[0]=r,this.m[1]=s,this.m[2]=a,this.m[3]=l,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){const i=this.m[0]+this.m[2]*n,r=this.m[1]+this.m[3]*n,s=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=r,this.m[2]=s,this.m[3]=a,this}multiply(e){const n=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],l=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=l,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,i=-this.m[1]*e,r=-this.m[2]*e,s=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),l=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=l,this}getMatrix(){return this.m}decompose(){const e=this.m[0],n=this.m[1],i=this.m[2],r=this.m[3],s=this.m[4],a=this.m[5],l=e*r-n*i,c={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){const d=Math.sqrt(e*e+n*n);c.rotation=n>0?Math.acos(e/d):-Math.acos(e/d),c.scaleX=d,c.scaleY=l/d,c.skewX=(e*i+n*r)/l,c.skewY=0}else if(i!=0||r!=0){const d=Math.sqrt(i*i+r*r);c.rotation=Math.PI/2-(r>0?Math.acos(-i/d):-Math.acos(i/d)),c.scaleX=l/d,c.scaleY=d,c.skewX=0,c.skewY=(e*i+n*r)/l}return c.rotation=re._getRotation(c.rotation),c}}const NK="[object Array]",RK="[object Number]",OK="[object String]",DK="[object Boolean]",zK=Math.PI/180,jK=180/Math.PI,vg="#",LK="",BK="0",PK="Konva warning: ",f_="Konva error: ",IK="rgb(",NS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},HK=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let ov=[],bg=null;const UK=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},re={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===NK},_isNumber(t){return Object.prototype.toString.call(t)===RK&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===OK},_isBoolean(t){return Object.prototype.toString.call(t)===DK},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;const e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){ov.push(t),ov.length===1&&UK(function(){const e=ov;ov=[],e.forEach(function(n){n()})})},createCanvasElement(){c_();const t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return c_(),document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){const n=re.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(t){t=t.replace(vg,LK);const e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let t=(Math.random()*16777215<<0).toString(16);for(;t.length<6;)t=BK+t;return vg+t},isCanvasFarblingActive(){if(bg!==null)return bg;if(typeof document>"u")return bg=!1,!1;const t=this.createCanvasElement();t.width=10,t.height=10;const e=t.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const n=e.getImageData(0,0,10,10).data;let i=!1;for(let r=0;r<100;r++)if(n[r*4]!==40||n[r*4+1]!==40||n[r*4+2]!==40||n[r*4+3]!==255){i=!0;break}return bg=i,this.releaseCanvas(t),bg},getHitColor(){const t=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(t):t},getHitColorKey(t,e,n){return this.isCanvasFarblingActive()&&(t=Math.round(t/5)*5,e=Math.round(e/5)*5,n=Math.round(n/5)*5),vg+this._rgbToHex(t,e,n)},getSnappedHexColor(t){const e=this._hexToRgb(t);return vg+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(t){let e;return t in NS?(e=NS[t],{r:e[0],g:e[1],b:e[2]}):t[0]===vg?this._hexToRgb(t.substring(1)):t.substr(0,4)===IK?(e=HK.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",re._namedColorToRBA(t)||re._hex3ColorToRGBA(t)||re._hex4ColorToRGBA(t)||re._hex6ColorToRGBA(t)||re._hex8ColorToRGBA(t)||re._rgbColorToRGBA(t)||re._rgbaColorToRGBA(t)||re._hslColorToRGBA(t)},_namedColorToRBA(t){const e=NS[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];const e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];const e=t.split(/ *, */).map((n,i)=>n.slice(-1)==="%"?i===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if(t[0]==="#"&&t.length===9)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if(t[0]==="#"&&t.length===5)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),i=Number(n[0])/360,r=Number(n[1])/100,s=Number(n[2])/100;let a,l,c;if(r===0)return c=s*255,{r:Math.round(c),g:Math.round(c),b:Math.round(c),a:1};s<.5?a=s*(1+r):a=s+r-s*r;const d=2*s-a,m=[0,0,0];for(let g=0;g<3;g++)l=i+1/3*-(g-1),l<0&&l++,l>1&&l--,6*l<1?c=d+(a-d)*6*l:2*l<1?c=a:3*l<2?c=d+(a-d)*(2/3-l)*6:c=d,m[g]=c*255;return{r:Math.round(m[0]),g:Math.round(m[1]),b:Math.round(m[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){const e={};for(const n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*zK},radToDeg(t){return t*jK},_degToRad(t){return re.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),re.degToRad(t)},_radToDeg(t){return re.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),re.radToDeg(t)},_getRotation(t){return je.angleDeg?re.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(f_+t)},error(t){console.error(f_+t)},warn(t){je.showWarnings&&console.warn(PK+t)},each(t,e){for(const n in t)e(n,t[n])},_inRange(t,e,n){return e<=t&&t<n},_getProjectionToSegment(t,e,n,i,r,s){let a,l,c;const d=(t-n)*(t-n)+(e-i)*(e-i);if(d==0)a=t,l=e,c=(r-n)*(r-n)+(s-i)*(s-i);else{const m=((r-t)*(n-t)+(s-e)*(i-e))/d;m<0?(a=t,l=e,c=(t-r)*(t-r)+(e-s)*(e-s)):m>1?(a=n,l=i,c=(n-r)*(n-r)+(i-s)*(i-s)):(a=t+m*(n-t),l=e+m*(i-e),c=(a-r)*(a-r)+(l-s)*(l-s))}return[a,l,c]},_getProjectionToLine(t,e,n){const i=re.cloneObject(t);let r=Number.MAX_VALUE;return e.forEach(function(s,a){if(!n&&a===e.length-1)return;const l=e[(a+1)%e.length],c=re._getProjectionToSegment(s.x,s.y,l.x,l.y,t.x,t.y),d=c[0],m=c[1],g=c[2];g<r&&(i.x=d,i.y=m,r=g)}),i},_prepareArrayForTween(t,e,n){const i=[],r=[];if(t.length>e.length){const a=e;e=t,t=a}for(let a=0;a<t.length;a+=2)i.push({x:t[a],y:t[a+1]});for(let a=0;a<e.length;a+=2)r.push({x:e[a],y:e[a+1]});const s=[];return r.forEach(function(a){const l=re._getProjectionToLine(a,i,n);s.push(l.x),s.push(l.y)}),s},_prepareToStringify(t){let e;t.visitedByCircularReferenceRemoval=!0;for(const n in t)if(t.hasOwnProperty(n)&&t[n]&&typeof t[n]=="object"){if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||re._isElement(t[n]))if(e.configurable)delete t[n];else return null;else if(re._prepareToStringify(t[n])===null)if(e.configurable)delete t[n];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(const n in e)t[n]=e[n];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){je.releaseCanvasOnDestroy&&t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(t,e,n,i){let r=e<0?e:0,s=n<0?n:0;e=Math.abs(e),n=Math.abs(n);let a=0,l=0,c=0,d=0;typeof i=="number"?a=l=c=d=Math.min(i,e/2,n/2):(a=Math.min(i[0]||0,e/2,n/2),l=Math.min(i[1]||0,e/2,n/2),d=Math.min(i[2]||0,e/2,n/2),c=Math.min(i[3]||0,e/2,n/2)),t.moveTo(r+a,s),t.lineTo(r+e-l,s),t.arc(r+e-l,s+l,l,Math.PI*3/2,0,!1),t.lineTo(r+e,s+n-d),t.arc(r+e-d,s+n-d,d,0,Math.PI/2,!1),t.lineTo(r+c,s+n),t.arc(r+c,s+n-c,c,Math.PI/2,Math.PI,!1),t.lineTo(r,s+a),t.arc(r+a,s+a,a,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(t,e,n,i,r){i=Math.abs(i);for(let s=0;s<n;s++){const a=e[(s-1+n)%n],l=e[s],c=e[(s+1)%n],d={x:l.x-a.x,y:l.y-a.y},m={x:c.x-l.x,y:c.y-l.y},g=Math.hypot(d.x,d.y),v=Math.hypot(m.x,m.y);let x;typeof r=="number"?x=r:x=s<r.length?r[s]:0,x=i*Math.cos(Math.PI/n)*Math.min(1,x/i*2);const T={x:d.x/g,y:d.y/g},k={x:m.x/v,y:m.y/v},A={x:l.x-T.x*x,y:l.y-T.y*x},O={x:l.x+k.x*x,y:l.y+k.y*x};s===0?t.moveTo(A.x,A.y):t.lineTo(A.x,A.y),t.arcTo(l.x,l.y,O.x,O.y,x)}}};function FK(t){const e=[],n=t.length,i=re;for(let r=0;r<n;r++){let s=t[r];i._isNumber(s)?s=Math.round(s*1e3)/1e3:i._isString(s)||(s=s+""),e.push(s)}return e}const d_=",",GK="(",qK=")",VK="([",YK="])",KK=";",XK="()",QK="=",h_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],WK=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],JK=100;let lv=null;function p_(){if(lv!==null)return lv;try{const e=re.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(lv=!1,!1)}catch{return lv=!1,!1}}class Dx{constructor(e){this.canvas=e,je.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let i=this.traceArr,r=i.length,s="",a,l,c,d;for(a=0;a<r;a++)l=i[a],c=l.method,c?(d=l.args,s+=c,e?s+=XK:re._isArray(d[0])?s+=VK+d.join(d_)+YK:(n&&(d=d.map(m=>typeof m=="number"?Math.floor(m):m)),s+=GK+d.join(d_)+qK)):(s+=l.property,e||(s+=QK+l.val)),s+=KK;return s}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,i;n.push(e),i=n.length,i>=JK&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}_applyMiterLimit(e){const n=e.attrs.miterLimit;n!=null&&this.setAttr("miterLimit",n)}setAttr(e,n){this._context[e]=n}arc(e,n,i,r,s,a){this._context.arc(e,n,i,r,s,a)}arcTo(e,n,i,r,s){this._context.arcTo(e,n,i,r,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,i,r,s,a){this._context.bezierCurveTo(e,n,i,r,s,a)}clearRect(e,n,i,r){this._context.clearRect(e,n,i,r)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const i=arguments;if(i.length===2)return this._context.createImageData(e,n);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,i,r){return this._context.createLinearGradient(e,n,i,r)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,i,r,s,a){return this._context.createRadialGradient(e,n,i,r,s,a)}drawImage(e,n,i,r,s,a,l,c,d){const m=arguments,g=this._context;m.length===3?g.drawImage(e,n,i):m.length===5?g.drawImage(e,n,i,r,s):m.length===9&&g.drawImage(e,n,i,r,s,a,l,c,d)}ellipse(e,n,i,r,s,a,l,c){this._context.ellipse(e,n,i,r,s,a,l,c)}isPointInPath(e,n,i,r){return i?this._context.isPointInPath(i,e,n,r):this._context.isPointInPath(e,n,r)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,i,r){this._context.fillRect(e,n,i,r)}strokeRect(e,n,i,r){this._context.strokeRect(e,n,i,r)}fillText(e,n,i,r){r?this._context.fillText(e,n,i,r):this._context.fillText(e,n,i)}measureText(e){return this._context.measureText(e)}getImageData(e,n,i,r){return this._context.getImageData(e,n,i,r)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,i,r){this._context.rect(e,n,i,r)}roundRect(e,n,i,r,s){this._context.roundRect(e,n,i,r,s)}putImageData(e,n,i){this._context.putImageData(e,n,i)}quadraticCurveTo(e,n,i,r){this._context.quadraticCurveTo(e,n,i,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,i,r,s,a){this._context.setTransform(e,n,i,r,s,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,i,r){this._context.strokeText(e,n,i,r)}transform(e,n,i,r,s,a){this._context.transform(e,n,i,r,s,a)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=h_.length,i=this.setAttr,r,s;const a=function(l){let c=e[l],d;e[l]=function(){return s=FK(Array.prototype.slice.call(arguments,0)),d=c.apply(e,arguments),e._trace({method:l,args:s}),d}};for(r=0;r<n;r++)a(h_[r]);e.setAttr=function(){i.apply(e,arguments);const l=arguments[0];let c=arguments[1];(l==="shadowOffsetX"||l==="shadowOffsetY"||l==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),e._trace({property:l,val:c})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}WK.forEach(function(t){Object.defineProperty(Dx.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class ZK extends Dx{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),i=e.getFillPriority();if(n&&i==="color"){this._fillColor(e);return}const r=e.getFillPatternImage();if(r&&i==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&i==="linear-gradient"){this._fillLinearGradient(e);return}const a=e.getFillRadialGradientColorStops();if(a&&i==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):r?this._fillPattern(e):s?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,i.x,i.y);if(r){for(let a=0;a<r.length;a+=2)s.addColorStop(r[a],r[a+1]);this.setAttr("strokeStyle",s)}}_stroke(e){const n=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var n,i,r;const s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",a=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,l=(r=e.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},c=e.getAbsoluteScale(),d=this.canvas.getPixelRatio(),m=c.x*d,g=c.y*d;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(m),Math.abs(g))),this.setAttr("shadowOffsetX",l.x*m),this.setAttr("shadowOffsetY",l.y*g)}}class $K extends Dx{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);const i=e.hitStrokeWidth(),r=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}let uv;function eX(){if(uv)return uv;const t=re.createCanvasElement(),e=t.getContext("2d");return uv=(function(){const n=je._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i})(),re.releaseCanvas(t),uv}class ZE{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(e||{}).pixelRatio||je.pixelRatio||eX();this.pixelRatio=i,this._canvas=re.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return re.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Tc extends ZE{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new ZK(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class $E extends ZE{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new $K(this),this.setSize(e.width,e.height)}}const Vt={get isDragging(){let t=!1;return Vt._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){let t;return Vt._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];Vt._dragElements.forEach((n,i)=>{const{node:r}=n,s=r.getStage();s.setPointersPositions(t),n.pointerId===void 0&&(n.pointerId=re._getFirstPointerId(t));const a=s._changedPointerPositions.find(l=>l.id===n.pointerId);if(a){if(n.dragStatus!=="dragging"){const l=r.dragDistance();if(Math.max(Math.abs(a.x-n.startPointerPos.x),Math.abs(a.y-n.startPointerPos.y))<l||(r.startDrag({evt:t}),!r.isDragging()))return}r._setDragPosition(t,n),e.push(r)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)})},_endDragBefore(t){const e=[];Vt._dragElements.forEach(n=>{const{node:i}=n,r=i.getStage();if(t&&r.setPointersPositions(t),!r._changedPointerPositions.find(l=>l.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(Vt.justDragged=!0,je._mouseListenClick=!1,je._touchListenClick=!1,je._pointerListenClick=!1,n.dragStatus="stopped");const a=n.node.getLayer()||n.node instanceof je.Stage&&n.node;a&&e.indexOf(a)===-1&&e.push(a)}),e.forEach(n=>{n.draw()})},_endDragAfter(t){Vt._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&Vt._dragElements.delete(n)})}};je.isBrowser&&(window.addEventListener("mouseup",Vt._endDragBefore,!0),window.addEventListener("touchend",Vt._endDragBefore,!0),window.addEventListener("touchcancel",Vt._endDragBefore,!0),window.addEventListener("mousemove",Vt._drag),window.addEventListener("touchmove",Vt._drag),window.addEventListener("mouseup",Vt._endDragAfter,!1),window.addEventListener("touchend",Vt._endDragAfter,!1),window.addEventListener("touchcancel",Vt._endDragAfter,!1));function Gc(t){return re._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||re._isBoolean(t)?t:Object.prototype.toString.call(t)}function jN(t){return t>255?255:t<0?0:Math.round(t)}function Oe(){if(je.isUnminified)return function(t,e){return re._isNumber(t)||re.warn(Gc(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function zx(t){if(je.isUnminified)return function(e,n){let i=re._isNumber(e),r=re._isArray(e)&&e.length==t;return!i&&!r&&re.warn(Gc(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function e3(){if(je.isUnminified)return function(t,e){return re._isNumber(t)||t==="auto"||re.warn(Gc(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function bd(){if(je.isUnminified)return function(t,e){return re._isString(t)||re.warn(Gc(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function LN(){if(je.isUnminified)return function(t,e){const n=re._isString(t),i=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||i||re.warn(Gc(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function tX(){if(je.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(re._isArray(t)?t.forEach(function(i){re._isNumber(i)||re.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):re.warn(Gc(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function vo(){if(je.isUnminified)return function(t,e){return t===!0||t===!1||re.warn(Gc(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function nX(t){if(je.isUnminified)return function(e,n){return e==null||re.isObject(e)||re.warn(Gc(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}const xg="get",Sg="set",K={addGetterSetter(t,e,n,i,r){K.addGetter(t,e,n),K.addSetter(t,e,i,r),K.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){const i=xg+re._capitalize(e);t.prototype[i]=t.prototype[i]||function(){const r=this.attrs[e];return r===void 0?n:r}},addSetter(t,e,n,i){const r=Sg+re._capitalize(e);t.prototype[r]||K.overWriteSetter(t,e,n,i)},overWriteSetter(t,e,n,i){const r=Sg+re._capitalize(e);t.prototype[r]=function(s){return n&&s!==void 0&&s!==null&&(s=n.call(this,s,e)),this._setAttr(e,s),i&&i.call(this),this}},addComponentsGetterSetter(t,e,n,i,r){const s=n.length,a=re._capitalize,l=xg+a(e),c=Sg+a(e);t.prototype[l]=function(){const m={};for(let g=0;g<s;g++){const v=n[g];m[v]=this.getAttr(e+a(v))}return m};const d=nX(n);t.prototype[c]=function(m){const g=this.attrs[e];i&&(m=i.call(this,m,e)),d&&d.call(this,m,e);for(const v in m)m.hasOwnProperty(v)&&this._setAttr(e+a(v),m[v]);return m||n.forEach(v=>{this._setAttr(e+a(v),void 0)}),this._fireChangeEvent(e,g,m),r&&r.call(this),this},K.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){const n=re._capitalize(e),i=Sg+n,r=xg+n;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(t,e,n,i){re.error("Adding deprecated "+e);const r=xg+re._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[r]=function(){re.error(s);const a=this.attrs[e];return a===void 0?n:a},K.addSetter(t,e,i,function(){re.error(s)}),K.addOverloadedGetterSetter(t,e)},backCompat(t,e){re.each(e,function(n,i){const r=t.prototype[i],s=xg+re._capitalize(n),a=Sg+re._capitalize(n);function l(){r.apply(this,arguments),re.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}t.prototype[n]=l,t.prototype[s]=l,t.prototype[a]=l})},afterSetFilter(){this._filterUpToDate=!1}};function iX(t){const e=/(\w+)\(([^)]+)\)/g;let n;for(;(n=e.exec(t))!==null;){const[,i,r]=n;switch(i){case"blur":{const s=parseFloat(r.replace("px",""));return function(a){this.blurRadius(s*.5);const l=je.Filters;l&&l.Blur&&l.Blur.call(this,a)}}case"brightness":{const s=r.includes("%")?parseFloat(r)/100:parseFloat(r);return function(a){this.brightness(s);const l=je.Filters;l&&l.Brightness&&l.Brightness.call(this,a)}}case"contrast":{const s=parseFloat(r);return function(a){const l=100*(Math.sqrt(s)-1);this.contrast(l);const c=je.Filters;c&&c.Contrast&&c.Contrast.call(this,a)}}case"grayscale":return function(s){const a=je.Filters;a&&a.Grayscale&&a.Grayscale.call(this,s)};case"sepia":return function(s){const a=je.Filters;a&&a.Sepia&&a.Sepia.call(this,s)};case"invert":return function(s){const a=je.Filters;a&&a.Invert&&a.Invert.call(this,s)};default:re.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Lv="absoluteOpacity",cv="allEventListeners",Zl="absoluteTransform",m_="absoluteScale",Uf="canvas",rX="Change",sX="children",aX="konva",nw="listening",oX="mouseenter",lX="mouseleave",uX="pointerenter",cX="pointerleave",fX="touchenter",dX="touchleave",g_="set",y_="Shape",Bv=" ",v_="stage",yc="transform",hX="Stage",iw="visible",pX=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Bv);let mX=1,De=class rw{constructor(e){this._id=mX++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===yc||e===Zl)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let i=this._cache.get(e);return(i===void 0||(e===yc||e===Zl)&&i.dirty===!0)&&(i=n.call(this),this._cache.set(e,i)),i}_calculate(e,n,i){if(!this._attachedDepsListeners.get(e)){const r=n.map(s=>s+"Change.konva").join(Bv);this.on(r,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(Uf)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Zl&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Uf)){const{scene:e,filter:n,hit:i,buffer:r}=this._cache.get(Uf);re.releaseCanvas(e,n,i,r),this._cache.delete(Uf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(n.width||i.width),s=Math.ceil(n.height||i.height),a=n.pixelRatio,l=n.x===void 0?Math.floor(i.x):n.x,c=n.y===void 0?Math.floor(i.y):n.y,d=n.offset||0,m=n.drawBorder||!1,g=n.hitCanvasPixelRatio||1;if(!r||!s){re.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const v=Math.abs(Math.round(i.x)-l)>.5?1:0,x=Math.abs(Math.round(i.y)-c)>.5?1:0;r+=d*2+v,s+=d*2+x,l-=d,c-=d;const S=new Tc({pixelRatio:a,width:r,height:s}),T=new Tc({pixelRatio:a,width:0,height:0,willReadFrequently:!0}),k=new $E({pixelRatio:g,width:r,height:s}),A=S.getContext(),O=k.getContext(),z=new Tc({width:S.width/S.pixelRatio+Math.abs(l),height:S.height/S.pixelRatio+Math.abs(c),pixelRatio:S.pixelRatio}),L=z.getContext();return k.isCache=!0,S.isCache=!0,this._cache.delete(Uf),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(S.getContext()._context.imageSmoothingEnabled=!1,T.getContext()._context.imageSmoothingEnabled=!1),A.save(),O.save(),L.save(),A.translate(-l,-c),O.translate(-l,-c),L.translate(-l,-c),z.x=l,z.y=c,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Lv),this._clearSelfAndDescendantCache(m_),this.drawScene(S,this,z),this.drawHit(k,this),this._isUnderCache=!1,A.restore(),O.restore(),m&&(A.save(),A.beginPath(),A.rect(0,0,r,s),A.closePath(),A.setAttr("strokeStyle","red"),A.setAttr("lineWidth",5),A.stroke(),A.restore()),this._cache.set(Uf,{scene:S,filter:T,hit:k,buffer:z,x:l,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(Uf)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let r=1/0,s=1/0,a=-1/0,l=-1/0;const c=this.getAbsoluteTransform(n);return i.forEach(function(d){const m=c.point(d);r===void 0&&(r=a=m.x,s=l=m.y),r=Math.min(r,m.x),s=Math.min(s,m.y),a=Math.max(a,m.x),l=Math.max(l,m.y)}),{x:r,y:s,width:a-r,height:l-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const i=this._getCachedSceneCanvas(),r=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/r,i.height/r),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),i=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),i=n.scene,r=n.filter,s=r.getContext(),a,l,c,d;if(!e||e.length===0)return i;if(this._filterUpToDate)return r;let m=!0;for(let v=0;v<e.length;v++)if(typeof e[v]=="string"&&p_(),typeof e[v]!="string"||!p_()){m=!1;break}const g=i.pixelRatio;if(r.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),m){const v=e.join(" ");return s.save(),s.setAttr("filter",v),s.drawImage(i._canvas,0,0,i.getWidth()/g,i.getHeight()/g),s.restore(),this._filterUpToDate=!0,r}try{for(a=e.length,s.clear(),s.drawImage(i._canvas,0,0,i.getWidth()/g,i.getHeight()/g),l=s.getImageData(0,0,r.getWidth(),r.getHeight()),c=0;c<a;c++)d=e[c],typeof d=="string"&&(d=iX(d)),d.call(this,l),s.putImageData(l,0,0)}catch(v){re.error("Unable to apply filter. "+v.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,r}on(e,n){if(this._cache&&this._cache.delete(cv),arguments.length===3)return this._delegate.apply(this,arguments);const i=e.split(Bv);for(let r=0;r<i.length;r++){const a=i[r].split("."),l=a[0],c=a[1]||"";this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:n})}return this}off(e,n){let i=(e||"").split(Bv),r=i.length,s,a,l,c,d,m;if(this._cache&&this._cache.delete(cv),!e)for(a in this.eventListeners)this._off(a);for(s=0;s<r;s++)if(l=i[s],c=l.split("."),d=c[0],m=c[1],d)this.eventListeners[d]&&this._off(d,m,n);else for(a in this.eventListeners)this._off(a,m,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(i){n.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,i){const r=this;this.on(e,function(s){const a=s.target.findAncestors(n,!0,r);for(let l=0;l<a.length;l++)s=re.cloneObject(s),s.currentTarget=a[l],i.call(a[l],s)})}remove(){return this.isDragging()&&this.stopDrag(),Vt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Zl),this._clearSelfAndDescendantCache(Lv),this._clearSelfAndDescendantCache(m_),this._clearSelfAndDescendantCache(v_),this._clearSelfAndDescendantCache(iw),this._clearSelfAndDescendantCache(nw)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+re._capitalize(e);return re._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,i;if(!e)return this;for(n in e)n!==sX&&(i=g_+re._capitalize(n),re._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(nw,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(iw,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const i=this.getLayer();let r=!1;Vt._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===i)&&(r=!0)});const s=!n&&!je.hitOnDragEnabled&&(r||je.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,i=0,r,s,a,l;function c(m){for(r=[],s=m.length,a=0;a<s;a++)l=m[a],i++,l.nodeType!==y_&&(r=r.concat(l.getChildren().slice())),l._id===n._id&&(a=s);r.length>0&&r[0].getDepth()<=e&&c(r)}const d=this.getStage();return n.nodeType!==hX&&d&&c(d.getChildren()),i}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(yc),this._clearSelfAndDescendantCache(Zl)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(n)}getAbsolutePosition(e){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);const r=this.getAbsoluteTransform(e).getMatrix(),s=new Qs,a=this.offset();return s.m=r.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(e){const{x:n,y:i,...r}=this._clearTransform();this.attrs.x=n,this.attrs.y=i,this._clearCache(yc);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(r),this.setPosition({x:e.x,y:e.y}),this._clearCache(yc),this._clearSelfAndDescendantCache(Zl),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,i=e.y,r=this.x(),s=this.y();return n!==void 0&&(r+=n),i!==void 0&&(s+=i),this.setPosition({x:r,y:s}),this}_eachAncestorReverse(e,n){let i=[],r=this.getParent(),s,a;if(!(n&&n._id===this._id)){for(i.unshift(this);r&&(!n||r._id!==n._id);)i.unshift(r),r=r.parent;for(s=i.length,a=0;a<s;a++)e(i[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return re.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return re.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return re.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return re.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return re.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&re.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Lv,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,i,r,s,a;const l={attrs:{},className:this.getClassName()};for(n in e)i=e[n],a=re.isObject(i)&&!re._isPlainObject(i)&&!re._isArray(i),!a&&(r=typeof this[n]=="function"&&this[n],delete e[n],s=r?r.call(this):null,e[n]=i,s!==i&&(l.attrs[n]=i));return re._prepareToStringify(l)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,i){const r=[];n&&this._isMatch(e)&&r.push(this);let s=this.parent;for(;s;){if(s===i)return r;s._isMatch(e)&&r.push(s),s=s.parent}return r}isAncestorOf(e){return!1}findAncestor(e,n,i){return this.findAncestors(e,n,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),i=n.length,r,s;for(r=0;r<i;r++)if(s=n[r],re.isValidSelector(s)||(re.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),re.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),re.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(v_,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},i){return n.target=n.target||this,i?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Zl,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new Qs,this._eachAncestorReverse(function(i){const r=i.transformsEnabled();r==="all"?n.multiply(i.getTransform()):r==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),n;{n=this._cache.get(Zl)||new Qs,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const r=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,l=this.attrs.offsetY||0;n.translate(r-a,s-l)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(yc,this._getTransform)}_getTransform(){var e,n;const i=this._cache.get(yc)||new Qs;i.reset();const r=this.x(),s=this.y(),a=je.getAngle(this.rotation()),l=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,d=this.attrs.skewX||0,m=this.attrs.skewY||0,g=this.attrs.offsetX||0,v=this.attrs.offsetY||0;return(r!==0||s!==0)&&i.translate(r,s),a!==0&&i.rotate(a),(d!==0||m!==0)&&i.skew(d,m),(l!==1||c!==1)&&i.scale(l,c),(g!==0||v!==0)&&i.translate(-1*g,-1*v),i.dirty=!1,i}clone(e){let n=re.cloneObject(this.attrs),i,r,s,a,l;for(i in e)n[i]=e[i];const c=new this.constructor(n);for(i in this.eventListeners)for(r=this.eventListeners[i],s=r.length,a=0;a<s;a++)l=r[a],l.name.indexOf(aX)<0&&(c.eventListeners[i]||(c.eventListeners[i]=[]),c.eventListeners[i].push(l));return c}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),i=this.getStage(),r=e.x!==void 0?e.x:Math.floor(n.x),s=e.y!==void 0?e.y:Math.floor(n.y),a=e.pixelRatio||1,l=new Tc({width:e.width||Math.ceil(n.width)||(i?i.width():0),height:e.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:a}),c=l.getContext(),d=new Tc({width:l.width/l.pixelRatio+Math.abs(r),height:l.height/l.pixelRatio+Math.abs(s),pixelRatio:l.pixelRatio});return e.imageSmoothingEnabled===!1&&(c._context.imageSmoothingEnabled=!1),c.save(),(r||s)&&c.translate(-1*r,-1*s),this.drawScene(l,void 0,d),c.restore(),l}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,i=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(n,i);return e.callback&&e.callback(r),r}toImage(e){return new Promise((n,i)=>{try{const r=e?.callback;r&&delete e.callback,re._urlToImage(this.toDataURL(e),function(s){n(s),r?.(s)})}catch(r){i(r)}})}toBlob(e){return new Promise((n,i)=>{try{const r=e?.callback;r&&delete e.callback,this.toCanvas(e).toBlob(s=>{n(s),r?.(s)},e?.mimeType,e?.quality)}catch(r){i(r)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():je.dragDistance}_off(e,n,i){let r=this.eventListeners[e],s,a,l;for(s=0;s<r.length;s++)if(a=r[s].name,l=r[s].handler,(a!=="konva"||n==="konva")&&(!n||a===n)&&(!i||i===l)){if(r.splice(s,1),r.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,i){this._fire(e+rX,{oldVal:n,newVal:i})}addName(e){if(!this.hasName(e)){const n=this.name(),i=n?n+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(e,n){const i=this[g_+re._capitalize(e)];return re._isFunction(i)?i.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(je.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){const i=this.attrs[e];i===n&&!re.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,n),this._requestDraw())}_setComponentAttr(e,n,i){let r;i!==void 0&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=i,this._fireChangeEvent(e,r,i))}_fireAndBubble(e,n,i){n&&this.nodeType===y_&&(n.target=this);const r=[oX,lX,uX,cX,fX,dX];if(!(r.indexOf(e)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(e,n);const a=r.indexOf(e)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!a&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,n,i):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,i,r;const s=(n=this._cache.get(cv))!==null&&n!==void 0?n:{};let a=s?.[e];if(a===void 0){a=[];let l=Object.getPrototypeOf(this);for(;l;){const c=(r=(i=l.eventListeners)===null||i===void 0?void 0:i[e])!==null&&r!==void 0?r:[];a.push(...c),l=Object.getPrototypeOf(l)}s[e]=a,this._cache.set(cv,s)}return a}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const i=this._getProtoListeners(e);if(i)for(let s=0;s<i.length;s++)i[s].handler.call(this,n);const r=this.eventListeners[e];if(r)for(let s=0;s<r.length;s++)r[s].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,i=this.getStage(),r=this.getAbsolutePosition();if(!i)return;const s=i._getPointerById(n)||i._changedPointerPositions[0]||r;Vt._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-r.x,y:s.y-r.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){Vt._dragElements.has(this._id)||this._createDragElement(e);const i=Vt._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const i=this.getStage()._getPointerById(n.pointerId);if(!i)return;let r={x:i.x-n.offset.x,y:i.y-n.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,r,e);a?r=a:re.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==r.x||this._lastPos.y!==r.y)&&(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(e){const n=Vt._dragElements.get(this._id);n&&(n.dragStatus="stopped"),Vt._endDragBefore(e),Vt._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Vt._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||je.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let r=!1;Vt._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(r=!0)}),r||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=Vt._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",r=n&&n.dragStatus==="ready";i?this.stopDrag():r&&Vt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return re.haveIntersection(i,this.getClientRect())}static create(e,n){return re._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let i=rw.prototype.getClassName.call(e),r=e.children,s,a,l;n&&(e.attrs.container=n),je[i]||(re.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const c=je[i];if(s=new c(e.attrs),r)for(a=r.length,l=0;l<a;l++)s.add(rw._createNode(r[l]));return s}};De.prototype.nodeType="Node";De.prototype._attrsAffectingSize=[];De.prototype.eventListeners={};De.prototype.on.call(De.prototype,pX,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(yc),this._clearSelfAndDescendantCache(Zl)});De.prototype.on.call(De.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(iw)});De.prototype.on.call(De.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(nw)});De.prototype.on.call(De.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Lv)});const an=K.addGetterSetter;an(De,"zIndex");an(De,"absolutePosition");an(De,"position");an(De,"x",0,Oe());an(De,"y",0,Oe());an(De,"globalCompositeOperation","source-over",bd());an(De,"opacity",1,Oe());an(De,"name","",bd());an(De,"id","",bd());an(De,"rotation",0,Oe());K.addComponentsGetterSetter(De,"scale",["x","y"]);an(De,"scaleX",1,Oe());an(De,"scaleY",1,Oe());K.addComponentsGetterSetter(De,"skew",["x","y"]);an(De,"skewX",0,Oe());an(De,"skewY",0,Oe());K.addComponentsGetterSetter(De,"offset",["x","y"]);an(De,"offsetX",0,Oe());an(De,"offsetY",0,Oe());an(De,"dragDistance",void 0,Oe());an(De,"width",0,Oe());an(De,"height",0,Oe());an(De,"listening",!0,vo());an(De,"preventDefault",!0,vo());an(De,"filters",void 0,function(t){return this._filterUpToDate=!1,t});an(De,"visible",!0,vo());an(De,"transformsEnabled","all",bd());an(De,"size");an(De,"dragBoundFunc");an(De,"draggable",!1,vo());K.backCompat(De,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Zs extends De{constructor(){super(...arguments),this.children=[]}getChildren(e){const n=this.children||[];return e?n.filter(e):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let i=0;i<e.length;i++)this.add(e[i]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const i=[];return this._descendants(r=>{const s=r._isMatch(e);return s&&i.push(r),!!(s&&n)}),i}_descendants(e){let n=!1;const i=this.getChildren();for(const r of i){if(n=e(r),n)return!0;if(r.hasChildren()&&(n=r._descendants(e),n))return!0}return!1}toObject(){const e=De.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=De.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&n.push(i)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(e,n,i){const r=this.getLayer(),s=e||r&&r.getCanvas(),a=s&&s.getContext(),l=this._getCanvasCache(),c=l&&l.scene,d=s&&s.isCache;if(!this.isVisible()&&!d)return this;if(c){a.save();const m=this.getAbsoluteTransform(n).getMatrix();a.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(a),a.restore()}else this._drawChildren("drawScene",s,n,i);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const i=this.getLayer(),r=e||i&&i.hitCanvas,s=r&&r.getContext(),a=this._getCanvasCache();if(a&&a.hit){s.save();const c=this.getAbsoluteTransform(n).getMatrix();s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",r,n);return this}_drawChildren(e,n,i,r){var s;const a=n&&n.getContext(),l=this.clipWidth(),c=this.clipHeight(),d=this.clipFunc(),m=typeof l=="number"&&typeof c=="number"||d,g=i===this;if(m){a.save();const x=this.getAbsoluteTransform(i);let S=x.getMatrix();a.transform(S[0],S[1],S[2],S[3],S[4],S[5]),a.beginPath();let T;if(d)T=d.call(this,a,this);else{const k=this.clipX(),A=this.clipY();a.rect(k||0,A||0,l,c)}a.clip.apply(a,T),S=x.copy().invert().getMatrix(),a.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const v=!g&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(a.save(),a._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(x){x[e](n,i,r)}),v&&a.restore(),m&&a.restore()}getClientRect(e={}){var n;const i=e.skipTransform,r=e.relativeTo;let s,a,l,c,d={x:1/0,y:1/0,width:0,height:0};const m=this;(n=this.children)===null||n===void 0||n.forEach(function(x){if(!x.visible())return;const S=x.getClientRect({relativeTo:m,skipShadow:e.skipShadow,skipStroke:e.skipStroke});S.width===0&&S.height===0||(s===void 0?(s=S.x,a=S.y,l=S.x+S.width,c=S.y+S.height):(s=Math.min(s,S.x),a=Math.min(a,S.y),l=Math.max(l,S.x+S.width),c=Math.max(c,S.y+S.height)))});const g=this.find("Shape");let v=!1;for(let x=0;x<g.length;x++)if(g[x]._isVisible(this)){v=!0;break}return v&&s!==void 0?d={x:s,y:a,width:l-s,height:c-a}:d={x:0,y:0,width:0,height:0},i?d:this._transformedRect(d,r)}}K.addComponentsGetterSetter(Zs,"clip",["x","y","width","height"]);K.addGetterSetter(Zs,"clipX",void 0,Oe());K.addGetterSetter(Zs,"clipY",void 0,Oe());K.addGetterSetter(Zs,"clipWidth",void 0,Oe());K.addGetterSetter(Zs,"clipHeight",void 0,Oe());K.addGetterSetter(Zs,"clipFunc");const E0=new Map,BN=je._global.PointerEvent!==void 0;function RS(t){return E0.get(t)}function t3(t){return{evt:t,pointerId:t.pointerId}}function PN(t,e){return E0.get(t)===e}function IN(t,e){$g(t),e.getStage()&&(E0.set(t,e),BN&&e._fire("gotpointercapture",t3(new PointerEvent("gotpointercapture"))))}function $g(t,e){const n=E0.get(t);if(!n)return;const i=n.getStage();i&&i.content,E0.delete(t),BN&&n._fire("lostpointercapture",t3(new PointerEvent("lostpointercapture")))}const gX="Stage",yX="string",b_="px",vX="mouseout",HN="mouseleave",UN="mouseover",FN="mouseenter",GN="mousemove",qN="mousedown",VN="mouseup",zg="pointermove",jg="pointerdown",sp="pointerup",Lg="pointercancel",bX="lostpointercapture",fv="pointerout",Bg="pointerleave",dv="pointerover",hv="pointerenter",sw="contextmenu",YN="touchstart",KN="touchend",XN="touchmove",QN="touchcancel",aw="wheel",xX=5,SX=[[FN,"_pointerenter"],[qN,"_pointerdown"],[GN,"_pointermove"],[VN,"_pointerup"],[HN,"_pointerleave"],[YN,"_pointerdown"],[XN,"_pointermove"],[KN,"_pointerup"],[QN,"_pointercancel"],[UN,"_pointerover"],[aw,"_wheel"],[sw,"_contextmenu"],[jg,"_pointerdown"],[zg,"_pointermove"],[sp,"_pointerup"],[Lg,"_pointercancel"],[Bg,"_pointerleave"],[bX,"_lostpointercapture"]],OS={mouse:{[fv]:vX,[Bg]:HN,[dv]:UN,[hv]:FN,[zg]:GN,[jg]:qN,[sp]:VN,[Lg]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[fv]:"touchout",[Bg]:"touchleave",[dv]:"touchover",[hv]:"touchenter",[zg]:XN,[jg]:YN,[sp]:KN,[Lg]:QN,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[fv]:fv,[Bg]:Bg,[dv]:dv,[hv]:hv,[zg]:zg,[jg]:jg,[sp]:sp,[Lg]:Lg,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Pg=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",Xh=t=>{const e=Pg(t);if(e==="pointer")return je.pointerEventsEnabled&&OS.pointer;if(e==="touch")return OS.touch;if(e==="mouse")return OS.mouse};function x_(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&re.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const CX="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",e0=[];let jx=class extends Zs{constructor(e){super(x_(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e0.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{x_(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",i=e.getType()==="FastLayer";n||i||re.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===yX){let n;if(e.charAt(0)==="."){const i=e.slice(1);e=document.getElementsByClassName(i)[0]}else e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n);if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,n=e.length;for(let i=0;i<n;i++)e[i].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Zs.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&re._isInDocument(e)&&this.container().removeChild(e);const n=e0.indexOf(this);return n>-1&&e0.splice(n,1),re.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(re.warn(CX),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const n=new Tc({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=n.getContext()._context,r=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),r.forEach(function(s){if(!s.isVisible())return;const a=s._toKonvaCanvas(e);i.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}),n}getIntersection(e){if(!e)return null;const n=this.children,i=n.length,r=i-1;for(let s=r;s>=0;s--){const a=n[s].getIntersection(e);if(a)return a}return null}_resizeDOM(){const e=this.width(),n=this.height();this.content&&(this.content.style.width=e+b_,this.content.style.height=n+b_),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(i=>{i.setSize({width:e,height:n}),i.draw()})}add(e,...n){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);const i=this.children.length;return i>xX&&re.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),je.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return PN(e,this)}setPointerCapture(e){IN(e,this)}releaseCapture(e){$g(e)}getLayers(){return this.children}_bindContentEvents(){je.isBrowser&&SX.forEach(([e,n])=>{this.content.addEventListener(e,i=>{this[n](i)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const n=Xh(e.type);n&&this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=Xh(e.type);n&&this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=Xh(e.type),i=Pg(e.type);if(!n)return;this.setPointersPositions(e);const r=this._getTargetShape(i),s=!(je.isDragging()||je.isTransforming())||je.hitOnDragEnabled;r&&s?(r._fireAndBubble(n.pointerout,{evt:e}),r._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):s&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const n=Xh(e.type),i=Pg(e.type);if(!n)return;this.setPointersPositions(e);let r=!1;this._changedPointerPositions.forEach(s=>{const a=this.getIntersection(s);if(Vt.justDragged=!1,je["_"+i+"ListenClick"]=!0,!a||!a.isListening()){this[i+"ClickStartShape"]=void 0;return}je.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[i+"ClickStartShape"]=a,a._fireAndBubble(n.pointerdown,{evt:e,pointerId:s.id}),r=!0;const l=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),r||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const n=Xh(e.type),i=Pg(e.type);if(!n)return;const r=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(je.isDragging()&&Vt.node.preventDefault()&&e.cancelable&&r&&e.preventDefault(),this.setPointersPositions(e),!(!(je.isDragging()||je.isTransforming())||je.hitOnDragEnabled))return;const a={};let l=!1;const c=this._getTargetShape(i);this._changedPointerPositions.forEach(d=>{const m=RS(d.id)||this.getIntersection(d),g=d.id,v={evt:e,pointerId:g},x=c!==m;if(x&&c&&(c._fireAndBubble(n.pointerout,{...v},m),c._fireAndBubble(n.pointerleave,{...v},m)),m){if(a[m._id])return;a[m._id]=!0}m&&m.isListening()?(l=!0,x&&(m._fireAndBubble(n.pointerover,{...v},c),m._fireAndBubble(n.pointerenter,{...v},c),this[i+"targetShape"]=m),m._fireAndBubble(n.pointermove,{...v})):c&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:g}),this[i+"targetShape"]=null)}),l||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=Xh(e.type),i=Pg(e.type);if(!n)return;this.setPointersPositions(e);const r=this[i+"ClickStartShape"],s=this[i+"ClickEndShape"],a={};let l=!1;this._changedPointerPositions.forEach(c=>{const d=RS(c.id)||this.getIntersection(c);if(d){if(d.releaseCapture(c.id),a[d._id])return;a[d._id]=!0}const m=c.id,g={evt:e,pointerId:m};let v=!1;je["_"+i+"InDblClickWindow"]?(v=!0,clearTimeout(this[i+"DblTimeout"])):Vt.justDragged||(je["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){je["_"+i+"InDblClickWindow"]=!1},je.dblClickWindow),d&&d.isListening()?(l=!0,this[i+"ClickEndShape"]=d,d._fireAndBubble(n.pointerup,{...g}),je["_"+i+"ListenClick"]&&r&&r===d&&(d._fireAndBubble(n.pointerclick,{...g}),v&&s&&s===d&&d._fireAndBubble(n.pointerdblclick,{...g}))):(this[i+"ClickEndShape"]=null,l||(this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),l=!0),je["_"+i+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:m}),v&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:m}))}),l||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),je["_"+i+"ListenClick"]=!1,e.cancelable&&i!=="touch"&&i!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(sw,{evt:e}):this._fire(sw,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(aw,{evt:e}):this._fire(aw,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=RS(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(sp,t3(e)),$g(e.pointerId)}_lostpointercapture(e){$g(e.pointerId)}setPointersPositions(e){const n=this._getContentPosition();let i=null,r=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})})):(i=(e.clientX-n.left)/n.scaleX,r=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:i,y:r},this._pointerPositions=[{x:i,y:r,id:re._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:r,id:re._getFirstPointerId(e)}])}_setPointerPosition(e){re.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Tc({width:this.width(),height:this.height()}),this.bufferHitCanvas=new $E({pixelRatio:1,width:this.width(),height:this.height()}),!je.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return re.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};jx.prototype.nodeType=gX;Jn(jx);K.addGetterSetter(jx,"container");je.isBrowser&&document.addEventListener("visibilitychange",()=>{e0.forEach(t=>{t.batchDraw()})});const WN="hasShadow",JN="shadowRGBA",ZN="patternImage",$N="linearGradient",eR="radialGradient";let pv;function DS(){return pv||(pv=re.createCanvasElement().getContext("2d"),pv)}const t0={};function wX(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()}function EX(t){t.stroke()}function TX(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()}function _X(t){t.stroke()}function kX(){this._clearCache(WN)}function MX(){this._clearCache(JN)}function AX(){this._clearCache(ZN)}function NX(){this._clearCache($N)}function RX(){this._clearCache(eR)}class Te extends De{constructor(e){super(e);let n,i=0;for(;n=re.getHitColor(),!(n&&!(n in t0));)if(i++,i>=1e4){re.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),n=re.getRandomColor();break}this.colorKey=n,t0[n]=this}getContext(){return re.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return re.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(WN,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(ZN,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=DS().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const i=new Qs;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(je.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const r=i.getMatrix(),s=typeof DOMMatrix>"u"?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);n.setTransform(s)}return n}}_getLinearGradient(){return this._getCache($N,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const n=DS(),i=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),s=n.createLinearGradient(i.x,i.y,r.x,r.y);for(let a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}_getRadialGradient(){return this._getCache(eR,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const n=DS(),i=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),s=n.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius());for(let a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}getShadowRGBA(){return this._getCache(JN,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=re.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const n=this.getStage();if(!n)return!1;const i=n.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return De.prototype.destroy.call(this),delete t0[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const r=e||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(r&&s&&a)return!0;const l=this.hasShadow(),c=this.shadowForStrokeEnabled();return!!(r&&s&&l&&c)}setStrokeHitEnabled(e){re.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let n=!1,i=this.getParent();for(;i;){if(i.isCached()){n=!0;break}i=i.getParent()}const r=e.skipTransform,s=e.relativeTo||n&&this.getStage()||void 0,a=this.getSelfRect(),c=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,d=a.width+c,m=a.height+c,g=!e.skipShadow&&this.hasShadow(),v=g?this.shadowOffsetX():0,x=g?this.shadowOffsetY():0,S=d+Math.abs(v),T=m+Math.abs(x),k=g&&this.shadowBlur()||0,A=S+k*2,O=T+k*2,z={width:A,height:O,x:-(c/2+k)+Math.min(v,0)+a.x,y:-(c/2+k)+Math.min(x,0)+a.y};return r?z:this._transformedRect(z,s)}drawScene(e,n,i){const r=this.getLayer(),s=e||r.getCanvas(),a=s.getContext(),l=this._getCanvasCache(),c=this.getSceneFunc(),d=this.hasShadow();let m;const g=n===this;if(!this.isVisible()&&!g)return this;if(l){a.save();const v=this.getAbsoluteTransform(n).getMatrix();return a.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(a),a.restore(),this}if(!c)return this;if(a.save(),this._useBufferCanvas()){m=this.getStage();const v=i||m.bufferCanvas,x=v.getContext();x.clear(),x.save(),x._applyLineJoin(this),x._applyMiterLimit(this);const S=this.getAbsoluteTransform(n).getMatrix();x.transform(S[0],S[1],S[2],S[3],S[4],S[5]),c.call(this,x,this),x.restore();const T=v.pixelRatio;d&&a._applyShadow(this),g||(a._applyOpacity(this),a._applyGlobalCompositeOperation(this)),a.drawImage(v._canvas,v.x||0,v.y||0,v.width/T,v.height/T)}else{if(a._applyLineJoin(this),a._applyMiterLimit(this),!g){const v=this.getAbsoluteTransform(n).getMatrix();a.transform(v[0],v[1],v[2],v[3],v[4],v[5]),a._applyOpacity(this),a._applyGlobalCompositeOperation(this)}d&&a._applyShadow(this),c.call(this,a,this)}return a.restore(),this}drawHit(e,n,i=!1){if(!this.shouldDrawHit(n,i))return this;const r=this.getLayer(),s=e||r.hitCanvas,a=s&&s.getContext(),l=this.hitFunc()||this.sceneFunc(),c=this._getCanvasCache(),d=c&&c.hit;if(this.colorKey||re.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),d){a.save();const g=this.getAbsoluteTransform(n).getMatrix();return a.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!l)return this;if(a.save(),a._applyLineJoin(this),a._applyMiterLimit(this),!(this===n)){const g=this.getAbsoluteTransform(n).getMatrix();a.transform(g[0],g[1],g[2],g[3],g[4],g[5])}return l.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){const n=this._getCanvasCache(),i=this._getCachedSceneCanvas(),r=n.hit,s=r.getContext(),a=r.getWidth(),l=r.getHeight();s.clear(),s.drawImage(i._canvas,0,0,a,l);try{const c=s.getImageData(0,0,a,l),d=c.data,m=d.length,g=re._hexToRgb(this.colorKey);for(let v=0;v<m;v+=4)d[v+3]>e?(d[v]=g.r,d[v+1]=g.g,d[v+2]=g.b,d[v+3]=255):d[v+3]=0;s.putImageData(c,0,0)}catch(c){re.error("Unable to draw hit graph from cached scene canvas. "+c.message)}return this}hasPointerCapture(e){return PN(e,this)}setPointerCapture(e){IN(e,this)}releaseCapture(e){$g(e)}}Te.prototype._fillFunc=wX;Te.prototype._strokeFunc=EX;Te.prototype._fillFuncHit=TX;Te.prototype._strokeFuncHit=_X;Te.prototype._centroid=!1;Te.prototype.nodeType="Shape";Jn(Te);Te.prototype.eventListeners={};Te.prototype.on.call(Te.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",kX);Te.prototype.on.call(Te.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",MX);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",AX);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",NX);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",RX);K.addGetterSetter(Te,"stroke",void 0,LN());K.addGetterSetter(Te,"strokeWidth",2,Oe());K.addGetterSetter(Te,"fillAfterStrokeEnabled",!1);K.addGetterSetter(Te,"hitStrokeWidth","auto",e3());K.addGetterSetter(Te,"strokeHitEnabled",!0,vo());K.addGetterSetter(Te,"perfectDrawEnabled",!0,vo());K.addGetterSetter(Te,"shadowForStrokeEnabled",!0,vo());K.addGetterSetter(Te,"lineJoin");K.addGetterSetter(Te,"lineCap");K.addGetterSetter(Te,"miterLimit");K.addGetterSetter(Te,"sceneFunc");K.addGetterSetter(Te,"hitFunc");K.addGetterSetter(Te,"dash");K.addGetterSetter(Te,"dashOffset",0,Oe());K.addGetterSetter(Te,"shadowColor",void 0,bd());K.addGetterSetter(Te,"shadowBlur",0,Oe());K.addGetterSetter(Te,"shadowOpacity",1,Oe());K.addComponentsGetterSetter(Te,"shadowOffset",["x","y"]);K.addGetterSetter(Te,"shadowOffsetX",0,Oe());K.addGetterSetter(Te,"shadowOffsetY",0,Oe());K.addGetterSetter(Te,"fillPatternImage");K.addGetterSetter(Te,"fill",void 0,LN());K.addGetterSetter(Te,"fillPatternX",0,Oe());K.addGetterSetter(Te,"fillPatternY",0,Oe());K.addGetterSetter(Te,"fillLinearGradientColorStops");K.addGetterSetter(Te,"strokeLinearGradientColorStops");K.addGetterSetter(Te,"fillRadialGradientStartRadius",0);K.addGetterSetter(Te,"fillRadialGradientEndRadius",0);K.addGetterSetter(Te,"fillRadialGradientColorStops");K.addGetterSetter(Te,"fillPatternRepeat","repeat");K.addGetterSetter(Te,"fillEnabled",!0);K.addGetterSetter(Te,"strokeEnabled",!0);K.addGetterSetter(Te,"shadowEnabled",!0);K.addGetterSetter(Te,"dashEnabled",!0);K.addGetterSetter(Te,"strokeScaleEnabled",!0);K.addGetterSetter(Te,"fillPriority","color");K.addComponentsGetterSetter(Te,"fillPatternOffset",["x","y"]);K.addGetterSetter(Te,"fillPatternOffsetX",0,Oe());K.addGetterSetter(Te,"fillPatternOffsetY",0,Oe());K.addComponentsGetterSetter(Te,"fillPatternScale",["x","y"]);K.addGetterSetter(Te,"fillPatternScaleX",1,Oe());K.addGetterSetter(Te,"fillPatternScaleY",1,Oe());K.addComponentsGetterSetter(Te,"fillLinearGradientStartPoint",["x","y"]);K.addComponentsGetterSetter(Te,"strokeLinearGradientStartPoint",["x","y"]);K.addGetterSetter(Te,"fillLinearGradientStartPointX",0);K.addGetterSetter(Te,"strokeLinearGradientStartPointX",0);K.addGetterSetter(Te,"fillLinearGradientStartPointY",0);K.addGetterSetter(Te,"strokeLinearGradientStartPointY",0);K.addComponentsGetterSetter(Te,"fillLinearGradientEndPoint",["x","y"]);K.addComponentsGetterSetter(Te,"strokeLinearGradientEndPoint",["x","y"]);K.addGetterSetter(Te,"fillLinearGradientEndPointX",0);K.addGetterSetter(Te,"strokeLinearGradientEndPointX",0);K.addGetterSetter(Te,"fillLinearGradientEndPointY",0);K.addGetterSetter(Te,"strokeLinearGradientEndPointY",0);K.addComponentsGetterSetter(Te,"fillRadialGradientStartPoint",["x","y"]);K.addGetterSetter(Te,"fillRadialGradientStartPointX",0);K.addGetterSetter(Te,"fillRadialGradientStartPointY",0);K.addComponentsGetterSetter(Te,"fillRadialGradientEndPoint",["x","y"]);K.addGetterSetter(Te,"fillRadialGradientEndPointX",0);K.addGetterSetter(Te,"fillRadialGradientEndPointY",0);K.addGetterSetter(Te,"fillPatternRotation",0);K.addGetterSetter(Te,"fillRule",void 0,bd());K.backCompat(Te,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const OX="beforeDraw",DX="draw",tR=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],zX=tR.length;let xd=class extends Zs{constructor(e){super(e),this.canvas=new Tc,this.hitCanvas=new $E({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){De.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!De.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(De.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(De.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return De.prototype.remove.call(this),e&&e.parentNode&&re._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&re.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),De.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){re.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){re.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,re.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,i=!1;for(;;){for(let r=0;r<zX;r++){const s=tR[r],a=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),l=a.shape;if(l)return l;if(i=!!a.antialiased,!a.antialiased)break}if(i)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,r=i[3];if(r===255){const s=re.getHitColorKey(i[0],i[1],i[2]),a=t0[s];return a?{shape:a}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(e,n,i){const r=this.getLayer(),s=e||r&&r.getCanvas();return this._fire(OX,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),Zs.prototype.drawScene.call(this,s,n,i),this._fire(DX,{node:this}),this}drawHit(e,n){const i=this.getLayer(),r=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Zs.prototype.drawHit.call(this,r,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){re.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return re.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return re.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};xd.prototype.nodeType="Layer";Jn(xd);K.addGetterSetter(xd,"imageSmoothingEnabled",!0);K.addGetterSetter(xd,"clearBeforeDraw",!0);K.addGetterSetter(xd,"hitGraphEnabled",!0,vo());class n3 extends xd{constructor(e){super(e),this.listening(!1),re.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}n3.prototype.nodeType="FastLayer";Jn(n3);let xp=class extends Zs{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&re.throw("You may only add groups and shapes to groups.")}};xp.prototype.nodeType="Group";Jn(xp);const zS=(function(){return Wf.performance&&Wf.performance.now?function(){return Wf.performance.now()}:function(){return new Date().getTime()}})();class La{constructor(e,n){this.id=La.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:zS(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,i=n.length;for(let r=0;r<i;r++)if(n[r]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=La.animations,i=n.length;for(let r=0;r<i;r++)if(n[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=zS(),La._addAnimation(this),this}stop(){return La._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,i=this.animations,r=i.length;for(let s=0;s<r;s++)if(i[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){const e={},n=this.animations;for(let i=0;i<n.length;i++){const r=n[i],s=r.layers,a=r.func;r._updateFrameObject(zS());const l=s.length;let c;if(a?c=a.call(r,r.frame)!==!1:c=!0,!!c)for(let d=0;d<l;d++){const m=s[d];m._id!==void 0&&(e[m._id]=m)}}for(const i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=La;e.animations.length?(e._runFrames(),re.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,re.requestAnimFrame(this._animationLoop))}}La.animations=[];La.animIdCounter=0;La.animRunning=!1;const jX={node:1,duration:1,easing:1,onFinish:1,yoyo:1},LX=1,S_=2,C_=3,w_=["fill","stroke","shadowColor"];let BX=0;class PX{constructor(e,n,i,r,s,a,l){this.prop=e,this.propFunc=n,this.begin=r,this._pos=r,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=l,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=s-this.begin,this.pause()}fire(e){const n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=S_,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=C_,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===S_?this.setTime(e):this.state===C_&&this.setTime(this.duration-e)}pause(){this.state=LX,this.fire("onPause")}getTimer(){return new Date().getTime()}}class hn{constructor(e){const n=this,i=e.node,r=i._id,s=e.easing||n0.Linear,a=!!e.yoyo;let l,c;typeof e.duration>"u"?l=.3:e.duration===0?l=.001:l=e.duration,this.node=i,this._id=BX++;const d=i.getLayer()||(i instanceof je.Stage?i.getLayers():null);d||re.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new La(function(){n.tween.onEnterFrame()},d),this.tween=new PX(c,function(m){n._tweenFunc(m)},s,0,1,l*1e3,a),this._addListeners(),hn.attrs[r]||(hn.attrs[r]={}),hn.attrs[r][this._id]||(hn.attrs[r][this._id]={}),hn.tweens[r]||(hn.tweens[r]={});for(c in e)jX[c]===void 0&&this._addAttr(c,e[c]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){const i=this.node,r=i._id;let s,a,l,c,d;const m=hn.tweens[r][e];m&&delete hn.attrs[r][m][e];let g=i.getAttr(e);if(re._isArray(n))if(s=[],a=Math.max(n.length,g.length),e==="points"&&n.length!==g.length&&(n.length>g.length?(c=g,g=re._prepareArrayForTween(g,n,i.closed())):(l=n,n=re._prepareArrayForTween(n,g,i.closed()))),e.indexOf("fill")===0)for(let v=0;v<a;v++)if(v%2===0)s.push(n[v]-g[v]);else{const x=re.colorToRGBA(g[v]);d=re.colorToRGBA(n[v]),g[v]=x,s.push({r:d.r-x.r,g:d.g-x.g,b:d.b-x.b,a:d.a-x.a})}else for(let v=0;v<a;v++)s.push(n[v]-g[v]);else w_.indexOf(e)!==-1?(g=re.colorToRGBA(g),d=re.colorToRGBA(n),s={r:d.r-g.r,g:d.g-g.g,b:d.b-g.b,a:d.a-g.a}):s=n-g;hn.attrs[r][this._id][e]={start:g,diff:s,end:n,trueEnd:l,trueStart:c},hn.tweens[r][e]=this._id}_tweenFunc(e){const n=this.node,i=hn.attrs[n._id][this._id];let r,s,a,l,c,d,m,g;for(r in i){if(s=i[r],a=s.start,l=s.diff,g=s.end,re._isArray(a))if(c=[],m=Math.max(a.length,g.length),r.indexOf("fill")===0)for(d=0;d<m;d++)d%2===0?c.push((a[d]||0)+l[d]*e):c.push("rgba("+Math.round(a[d].r+l[d].r*e)+","+Math.round(a[d].g+l[d].g*e)+","+Math.round(a[d].b+l[d].b*e)+","+(a[d].a+l[d].a*e)+")");else for(d=0;d<m;d++)c.push((a[d]||0)+l[d]*e);else w_.indexOf(r)!==-1?c="rgba("+Math.round(a.r+l.r*e)+","+Math.round(a.g+l.g*e)+","+Math.round(a.b+l.b*e)+","+(a.a+l.a*e)+")":c=a+l*e;n.setAttr(r,c)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,n=hn.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,n=hn.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,n=this._id,i=hn.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const r in i)delete hn.tweens[e][r];delete hn.attrs[e][n],hn.tweens[e]&&(Object.keys(hn.tweens[e]).length===0&&delete hn.tweens[e],Object.keys(hn.attrs[e]).length===0&&delete hn.attrs[e])}}hn.attrs={};hn.tweens={};De.prototype.to=function(t){const e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new hn(t).play()};const n0={BackEaseIn(t,e,n,i){return n*(t/=i)*t*((1.70158+1)*t-1.70158)+e},BackEaseOut(t,e,n,i){return n*((t=t/i-1)*t*((1.70158+1)*t+1.70158)+1)+e},BackEaseInOut(t,e,n,i){let r=1.70158;return(t/=i/2)<1?n/2*(t*t*(((r*=1.525)+1)*t-r))+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},ElasticEaseIn(t,e,n,i,r,s){let a=0;return t===0?e:(t/=i)===1?e+n:(s||(s=i*.3),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,n,i,r,s){let a=0;return t===0?e:(t/=i)===1?e+n:(s||(s=i*.3),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/s)+n+e)},ElasticEaseInOut(t,e,n,i,r,s){let a=0;return t===0?e:(t/=i/2)===2?e+n:(s||(s=i*(.3*1.5)),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),t<1?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/s))+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/s)*.5+n+e)},BounceEaseOut(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,n,i){return n-n0.BounceEaseOut(i-t,0,n,i)+e},BounceEaseInOut(t,e,n,i){return t<i/2?n0.BounceEaseIn(t*2,0,n,i)*.5+e:n0.BounceEaseOut(t*2-i,0,n,i)*.5+n*.5+e},EaseIn(t,e,n,i){return n*(t/=i)*t+e},EaseOut(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,n,i){return n*t/i+e}},Sp=re._assign(je,{Util:re,Transform:Qs,Node:De,Container:Zs,Stage:jx,stages:e0,Layer:xd,FastLayer:n3,Group:xp,DD:Vt,Shape:Te,shapes:t0,Animation:La,Tween:hn,Easings:n0,Context:Dx,Canvas:ZE});class du extends Te{_sceneFunc(e){const n=je.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,i),e.arc(0,0,this.innerRadius(),n,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),r=je.getAngle(i?360-this.angle():this.angle()),s=Math.cos(Math.min(r,Math.PI)),a=1,l=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),c=Math.sin(Math.min(r,Math.PI/2)),d=s*(s>0?e:n),m=a*n,g=l*(l>0?e:n),v=c*(c>0?n:e);return{x:d,y:i?-1*v:g,width:m-d,height:v-g}}}du.prototype._centroid=!0;du.prototype.className="Arc";du.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Jn(du);K.addGetterSetter(du,"innerRadius",0,Oe());K.addGetterSetter(du,"outerRadius",0,Oe());K.addGetterSetter(du,"angle",0,Oe());K.addGetterSetter(du,"clockwise",!1,vo());function ow(t,e,n,i,r,s,a){const l=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),c=Math.sqrt(Math.pow(r-n,2)+Math.pow(s-i,2)),d=a*l/(l+c),m=a*c/(l+c),g=n-d*(r-t),v=i-d*(s-e),x=n+m*(r-t),S=i+m*(s-e);return[g,v,x,S]}function E_(t,e){const n=t.length,i=[];for(let r=2;r<n-2;r+=2){const s=ow(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],e);isNaN(s[0])||(i.push(s[0]),i.push(s[1]),i.push(t[r]),i.push(t[r+1]),i.push(s[2]),i.push(s[3]))}return i}let hu=class extends Te{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const n=this.points(),i=n.length,r=this.tension(),s=this.closed(),a=this.bezier();if(!i)return;let l=0;if(e.beginPath(),e.moveTo(n[0],n[1]),r!==0&&i>4){const c=this.getTensionPoints(),d=c.length;for(l=s?0:4,s||e.quadraticCurveTo(c[0],c[1],c[2],c[3]);l<d-2;)e.bezierCurveTo(c[l++],c[l++],c[l++],c[l++],c[l++],c[l++]);s||e.quadraticCurveTo(c[d-2],c[d-1],n[i-2],n[i-1])}else if(a)for(l=2;l<i;)e.bezierCurveTo(n[l++],n[l++],n[l++],n[l++],n[l++],n[l++]);else for(l=2;l<i;l+=2)e.lineTo(n[l],n[l+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():E_(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,i=this.tension(),r=ow(e[n-2],e[n-1],e[0],e[1],e[2],e[3],i),s=ow(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],i),a=E_(e,i);return[r[2],r[3]].concat(a).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],r[0],r[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],i=e[0],r=e[1],s=e[1],a,l;for(let c=0;c<e.length/2;c++)a=e[c*2],l=e[c*2+1],n=Math.min(n,a),i=Math.max(i,a),r=Math.min(r,l),s=Math.max(s,l);return{x:n,y:r,width:i-n,height:s-r}}};hu.prototype.className="Line";hu.prototype._attrsAffectingSize=["points","bezier","tension"];Jn(hu);K.addGetterSetter(hu,"closed",!1);K.addGetterSetter(hu,"bezier",!1);K.addGetterSetter(hu,"tension",0,Oe());K.addGetterSetter(hu,"points",[],tX());const IX=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],HX=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],UX=[[1],[1,1],[1,2,1],[1,3,3,1]],T_=(t,e,n)=>{let i,r;const a=n/2;i=0;for(let l=0;l<20;l++)r=a*IX[20][l]+a,i+=HX[20][l]*FX(t,e,r);return a*i},__=(t,e,n)=>{n===void 0&&(n=1);const i=t[0]-2*t[1]+t[2],r=e[0]-2*e[1]+e[2],s=2*t[1]-2*t[0],a=2*e[1]-2*e[0],l=4*(i*i+r*r),c=4*(i*s+r*a),d=s*s+a*a;if(l===0)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));const m=c/(2*l),g=d/l,v=n+m,x=g-m*m,S=v*v+x>0?Math.sqrt(v*v+x):0,T=m*m+x>0?Math.sqrt(m*m+x):0,k=m+Math.sqrt(m*m+x)!==0?x*Math.log(Math.abs((v+S)/(m+T))):0;return Math.sqrt(l)/2*(v*S-m*T+k)};function FX(t,e,n){const i=lw(1,n,t),r=lw(1,n,e),s=i*i+r*r;return Math.sqrt(s)}const lw=(t,e,n)=>{const i=n.length-1;let r,s;if(i===0)return 0;if(t===0){s=0;for(let a=0;a<=i;a++)s+=UX[i][a]*Math.pow(1-e,i-a)*Math.pow(e,a)*n[a];return s}else{r=new Array(i);for(let a=0;a<i;a++)r[a]=i*(n[a+1]-n[a]);return lw(t-1,e,r)}},k_=(t,e,n)=>{let i=1,r=t/e,s=(t-n(r))/e,a=0;for(;i>.001;){const l=n(r+s),c=Math.abs(t-l)/e;if(c<i)i=c,r+=s;else{const d=n(r-s),m=Math.abs(t-d)/e;m<i?(i=m,r-=s):s/=2}if(a++,a>500)break}return r};class mn extends Te{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=mn.parsePathData(this.data()),this.pathLength=mn.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let i=!1;for(let r=0;r<n.length;r++){const s=n[r].command,a=n[r].points;switch(s){case"L":e.lineTo(a[0],a[1]);break;case"M":e.moveTo(a[0],a[1]);break;case"C":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":e.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":const l=a[0],c=a[1],d=a[2],m=a[3],g=a[4],v=a[5],x=a[6],S=a[7],T=d>m?d:m,k=d>m?1:d/m,A=d>m?m/d:1;e.translate(l,c),e.rotate(x),e.scale(k,A),e.arc(0,0,T,g,g+v,1-S),e.scale(1/k,1/A),e.rotate(-x),e.translate(-l,-c);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(c){if(c.command==="A"){const d=c.points[4],m=c.points[5],g=c.points[4]+m;let v=Math.PI/180;if(Math.abs(d-g)<v&&(v=Math.abs(d-g)),m<0)for(let x=d-v;x>g;x-=v){const S=mn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],x,0);e.push(S.x,S.y)}else for(let x=d+v;x<g;x+=v){const S=mn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],x,0);e.push(S.x,S.y)}}else if(c.command==="C")for(let d=0;d<=1;d+=.01){const m=mn.getPointOnCubicBezier(d,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(m.x,m.y)}else e=e.concat(c.points)});let n=e[0],i=e[0],r=e[1],s=e[1],a,l;for(let c=0;c<e.length/2;c++)a=e[c*2],l=e[c*2+1],isNaN(a)||(n=Math.min(n,a),i=Math.max(i,a)),isNaN(l)||(r=Math.min(r,l),s=Math.max(s,l));return{x:n,y:r,width:i-n,height:s-r}}getLength(){return this.pathLength}getPointAtLength(e){return mn.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,i,r){return Math.sqrt((i-e)*(i-e)+(r-n)*(r-n))}static getPathLength(e){let n=0;for(let i=0;i<e.length;++i)n+=e[i].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let i,r=0,s=n.length;if(!s)return null;for(;r<s&&e>n[r].pathLength;)e-=n[r].pathLength,++r;if(r===s)return i=n[r-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return n[r].command==="M"?(i=n[r].points.slice(0,2),{x:i[0],y:i[1]}):{x:n[r].start.x,y:n[r].start.y};const a=n[r],l=a.points;switch(a.command){case"L":return mn.getPointOnLine(e,a.start.x,a.start.y,l[0],l[1]);case"C":return mn.getPointOnCubicBezier(k_(e,mn.getPathLength(n),T=>T_([a.start.x,l[0],l[2],l[4]],[a.start.y,l[1],l[3],l[5]],T)),a.start.x,a.start.y,l[0],l[1],l[2],l[3],l[4],l[5]);case"Q":return mn.getPointOnQuadraticBezier(k_(e,mn.getPathLength(n),T=>__([a.start.x,l[0],l[2]],[a.start.y,l[1],l[3]],T)),a.start.x,a.start.y,l[0],l[1],l[2],l[3]);case"A":const c=l[0],d=l[1],m=l[2],g=l[3],v=l[5],x=l[6];let S=l[4];return S+=v*e/a.pathLength,mn.getPointOnEllipticalArc(c,d,m,g,S,x)}return null}static getPointOnLine(e,n,i,r,s,a,l){a=a??n,l=l??i;const c=this.getLineLength(n,i,r,s);if(c<1e-10)return{x:n,y:i};if(r===n)return{x:a,y:l+(s>i?e:-e)};const d=(s-i)/(r-n),m=Math.sqrt(e*e/(1+d*d))*(r<n?-1:1),g=d*m;if(Math.abs(l-i-d*(a-n))<1e-10)return{x:a+m,y:l+g};const v=((a-n)*(r-n)+(l-i)*(s-i))/(c*c),x=n+v*(r-n),S=i+v*(s-i),T=this.getLineLength(a,l,x,S),k=Math.sqrt(e*e-T*T),A=Math.sqrt(k*k/(1+d*d))*(r<n?-1:1),O=d*A;return{x:x+A,y:S+O}}static getPointOnCubicBezier(e,n,i,r,s,a,l,c,d){function m(k){return k*k*k}function g(k){return 3*k*k*(1-k)}function v(k){return 3*k*(1-k)*(1-k)}function x(k){return(1-k)*(1-k)*(1-k)}const S=c*m(e)+a*g(e)+r*v(e)+n*x(e),T=d*m(e)+l*g(e)+s*v(e)+i*x(e);return{x:S,y:T}}static getPointOnQuadraticBezier(e,n,i,r,s,a,l){function c(x){return x*x}function d(x){return 2*x*(1-x)}function m(x){return(1-x)*(1-x)}const g=a*c(e)+r*d(e)+n*m(e),v=l*c(e)+s*d(e)+i*m(e);return{x:g,y:v}}static getPointOnEllipticalArc(e,n,i,r,s,a){const l=Math.cos(a),c=Math.sin(a),d={x:i*Math.cos(s),y:r*Math.sin(s)};return{x:e+(d.x*l-d.y*c),y:n+(d.x*c+d.y*l)}}static parsePathData(e){if(!e)return[];let n=e;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let g=0;g<i.length;g++)n=n.replace(new RegExp(i[g],"g"),"|"+i[g]);const r=n.split("|"),s=[],a=[];let l=0,c=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let m;for(let g=1;g<r.length;g++){let v=r[g],x=v.charAt(0);for(v=v.slice(1),a.length=0;m=d.exec(v);)a.push(m[0]);let S=[],T=x==="A"||x==="a"?0:-1;for(let k=0,A=a.length;k<A;k++){const O=a[k];if(O==="00"){S.push(0,0),T>=0&&(T+=2,T>=7&&(T-=7));continue}if(T>=0){if(T===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(O)){S.push(parseInt(O[0],10)),S.push(parseInt(O[1],10)),S.push(parseFloat(O.slice(2))),T+=3,T>=7&&(T-=7);continue}if(O==="11"||O==="10"||O==="01"){S.push(parseInt(O[0],10)),S.push(parseInt(O[1],10)),T+=2,T>=7&&(T-=7);continue}if(O==="0"||O==="1"){S.push(parseInt(O,10)),T+=1,T>=7&&(T-=7);continue}}else if(T===4){if(/^[01]\d+(?:\.\d+)?$/.test(O)){S.push(parseInt(O[0],10)),S.push(parseFloat(O.slice(1))),T+=2,T>=7&&(T-=7);continue}if(O==="0"||O==="1"){S.push(parseInt(O,10)),T+=1,T>=7&&(T-=7);continue}}const z=parseFloat(O);isNaN(z)?S.push(0):S.push(z),T+=1,T>=7&&(T-=7)}else{const z=parseFloat(O);isNaN(z)?S.push(0):S.push(z)}}for(;S.length>0&&!isNaN(S[0]);){let k="",A=[];const O=l,z=c;let L,I,j,B,q,$,G,X,J,ce;switch(x){case"l":l+=S.shift(),c+=S.shift(),k="L",A.push(l,c);break;case"L":l=S.shift(),c=S.shift(),A.push(l,c);break;case"m":const Z=S.shift(),te=S.shift();if(l+=Z,c+=te,k="M",s.length>2&&s[s.length-1].command==="z"){for(let V=s.length-2;V>=0;V--)if(s[V].command==="M"){l=s[V].points[0]+Z,c=s[V].points[1]+te;break}}A.push(l,c),x="l";break;case"M":l=S.shift(),c=S.shift(),k="M",A.push(l,c),x="L";break;case"h":l+=S.shift(),k="L",A.push(l,c);break;case"H":l=S.shift(),k="L",A.push(l,c);break;case"v":c+=S.shift(),k="L",A.push(l,c);break;case"V":c=S.shift(),k="L",A.push(l,c);break;case"C":A.push(S.shift(),S.shift(),S.shift(),S.shift()),l=S.shift(),c=S.shift(),A.push(l,c);break;case"c":A.push(l+S.shift(),c+S.shift(),l+S.shift(),c+S.shift()),l+=S.shift(),c+=S.shift(),k="C",A.push(l,c);break;case"S":I=l,j=c,L=s[s.length-1],L.command==="C"&&(I=l+(l-L.points[2]),j=c+(c-L.points[3])),A.push(I,j,S.shift(),S.shift()),l=S.shift(),c=S.shift(),k="C",A.push(l,c);break;case"s":I=l,j=c,L=s[s.length-1],L.command==="C"&&(I=l+(l-L.points[2]),j=c+(c-L.points[3])),A.push(I,j,l+S.shift(),c+S.shift()),l+=S.shift(),c+=S.shift(),k="C",A.push(l,c);break;case"Q":A.push(S.shift(),S.shift()),l=S.shift(),c=S.shift(),A.push(l,c);break;case"q":A.push(l+S.shift(),c+S.shift()),l+=S.shift(),c+=S.shift(),k="Q",A.push(l,c);break;case"T":I=l,j=c,L=s[s.length-1],L.command==="Q"&&(I=l+(l-L.points[0]),j=c+(c-L.points[1])),l=S.shift(),c=S.shift(),k="Q",A.push(I,j,l,c);break;case"t":I=l,j=c,L=s[s.length-1],L.command==="Q"&&(I=l+(l-L.points[0]),j=c+(c-L.points[1])),l+=S.shift(),c+=S.shift(),k="Q",A.push(I,j,l,c);break;case"A":B=S.shift(),q=S.shift(),$=S.shift(),G=S.shift(),X=S.shift(),J=l,ce=c,l=S.shift(),c=S.shift(),k="A",A=this.convertEndpointToCenterParameterization(J,ce,l,c,G,X,B,q,$);break;case"a":B=S.shift(),q=S.shift(),$=S.shift(),G=S.shift(),X=S.shift(),J=l,ce=c,l+=S.shift(),c+=S.shift(),k="A",A=this.convertEndpointToCenterParameterization(J,ce,l,c,G,X,B,q,$);break}s.push({command:k||x,points:A,start:{x:O,y:z},pathLength:this.calcLength(O,z,k||x,A)})}(x==="z"||x==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,n,i,r){let s,a,l,c;const d=mn;switch(i){case"L":return d.getLineLength(e,n,r[0],r[1]);case"C":return T_([e,r[0],r[2],r[4]],[n,r[1],r[3],r[5]],1);case"Q":return __([e,r[0],r[2]],[n,r[1],r[3]],1);case"A":s=0;const m=r[4],g=r[5],v=r[4]+g;let x=Math.PI/180;if(Math.abs(m-v)<x&&(x=Math.abs(m-v)),a=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],m,0),g<0)for(c=m-x;c>v;c-=x)l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),s+=d.getLineLength(a.x,a.y,l.x,l.y),a=l;else for(c=m+x;c<v;c+=x)l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),s+=d.getLineLength(a.x,a.y,l.x,l.y),a=l;return l=d.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],v,0),s+=d.getLineLength(a.x,a.y,l.x,l.y),s}return 0}static convertEndpointToCenterParameterization(e,n,i,r,s,a,l,c,d){const m=d*(Math.PI/180),g=Math.cos(m)*(e-i)/2+Math.sin(m)*(n-r)/2,v=-1*Math.sin(m)*(e-i)/2+Math.cos(m)*(n-r)/2,x=g*g/(l*l)+v*v/(c*c);x>1&&(l*=Math.sqrt(x),c*=Math.sqrt(x));let S=Math.sqrt((l*l*(c*c)-l*l*(v*v)-c*c*(g*g))/(l*l*(v*v)+c*c*(g*g)));s===a&&(S*=-1),isNaN(S)&&(S=0);const T=S*l*v/c,k=S*-c*g/l,A=(e+i)/2+Math.cos(m)*T-Math.sin(m)*k,O=(n+r)/2+Math.sin(m)*T+Math.cos(m)*k,z=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},L=function(G,X){return(G[0]*X[0]+G[1]*X[1])/(z(G)*z(X))},I=function(G,X){return(G[0]*X[1]<G[1]*X[0]?-1:1)*Math.acos(L(G,X))},j=I([1,0],[(g-T)/l,(v-k)/c]),B=[(g-T)/l,(v-k)/c],q=[(-1*g-T)/l,(-1*v-k)/c];let $=I(B,q);return L(B,q)<=-1&&($=Math.PI),L(B,q)>=1&&($=0),a===0&&$>0&&($=$-2*Math.PI),a===1&&$<0&&($=$+2*Math.PI),[A,O,l,c,j,$,m,a]}}mn.prototype.className="Path";mn.prototype._attrsAffectingSize=["data"];Jn(mn);K.addGetterSetter(mn,"data");let Sd=class extends hu{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,i=this.points();let r=i;const s=this.tension()!==0&&i.length>4;s&&(r=this.getTensionPoints());const a=this.pointerLength(),l=i.length;let c,d;if(s){const v=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],i[l-2],i[l-1]],x=mn.calcLength(r[r.length-4],r[r.length-3],"C",v),S=mn.getPointOnQuadraticBezier(Math.min(1,1-a/x),v[0],v[1],v[2],v[3],v[4],v[5]);c=i[l-2]-S.x,d=i[l-1]-S.y}else c=i[l-2]-i[l-4],d=i[l-1]-i[l-3];const m=(Math.atan2(d,c)+n)%n,g=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[l-2],i[l-1]),e.rotate(m),e.moveTo(0,0),e.lineTo(-a,g/2),e.lineTo(-a,-g/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),s?(c=(r[0]+r[2])/2-i[0],d=(r[1]+r[3])/2-i[1]):(c=i[2]-i[0],d=i[3]-i[1]),e.rotate((Math.atan2(-d,-c)+n)%n),e.moveTo(0,0),e.lineTo(-a,g/2),e.lineTo(-a,-g/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x,y:e.y-n,width:e.width,height:e.height+n*2}}};Sd.prototype.className="Arrow";Jn(Sd);K.addGetterSetter(Sd,"pointerLength",10,Oe());K.addGetterSetter(Sd,"pointerWidth",10,Oe());K.addGetterSetter(Sd,"pointerAtBeginning",!1);K.addGetterSetter(Sd,"pointerAtEnding",!0);let Rp=class extends Te{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};Rp.prototype._centroid=!0;Rp.prototype.className="Circle";Rp.prototype._attrsAffectingSize=["radius"];Jn(Rp);K.addGetterSetter(Rp,"radius",0,Oe());class qc extends Te{_sceneFunc(e){const n=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),n!==i&&e.scale(1,i/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}qc.prototype.className="Ellipse";qc.prototype._centroid=!0;qc.prototype._attrsAffectingSize=["radiusX","radiusY"];Jn(qc);K.addComponentsGetterSetter(qc,"radius",["x","y"]);K.addGetterSetter(qc,"radiusX",0,Oe());K.addGetterSetter(qc,"radiusY",0,Oe());class na extends Te{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),i=this.getHeight(),r=this.cornerRadius(),s=this.attrs.image;let a;if(s){const l=this.attrs.cropWidth,c=this.attrs.cropHeight;l&&c?a=[s,this.cropX(),this.cropY(),l,c,0,0,n,i]:a=[s,0,0,n,i]}(this.hasFill()||this.hasStroke()||r)&&(e.beginPath(),r?re.drawRoundedRectPath(e,n,i,r):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)),s&&(r&&e.clip(),e.drawImage.apply(e,a))}_hitFunc(e){const n=this.width(),i=this.height(),r=this.cornerRadius();e.beginPath(),r?re.drawRoundedRectPath(e,n,i,r):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n,i;return(i=(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width)!==null&&i!==void 0?i:0}getHeight(){var e,n,i;return(i=(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height)!==null&&i!==void 0?i:0}static fromURL(e,n,i=null){const r=re.createImageElement();r.onload=function(){const s=new na({image:r});n(s)},r.onerror=i,r.crossOrigin="Anonymous",r.src=e}}na.prototype.className="Image";na.prototype._attrsAffectingSize=["image"];Jn(na);K.addGetterSetter(na,"cornerRadius",0,zx(4));K.addGetterSetter(na,"image");K.addComponentsGetterSetter(na,"crop",["x","y","width","height"]);K.addGetterSetter(na,"cropX",0,Oe());K.addGetterSetter(na,"cropY",0,Oe());K.addGetterSetter(na,"cropWidth",0,Oe());K.addGetterSetter(na,"cropHeight",0,Oe());const nR=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],GX="Change.konva",qX="none",uw="up",cw="right",fw="down",dw="left",VX=nR.length;let i3=class extends xp{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,i;const r=function(){n._sync()};for(i=0;i<VX;i++)e.on(nR[i]+GX,r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),i,r,s,a,l,c,d;if(e&&n){switch(i=e.width(),r=e.height(),s=n.pointerDirection(),a=n.pointerWidth(),d=n.pointerHeight(),l=0,c=0,s){case uw:l=i/2,c=-1*d;break;case cw:l=i+a,c=r/2;break;case fw:l=i/2,c=r+d;break;case dw:l=-1*a,c=r/2;break}n.setAttrs({x:-1*l,y:-1*c,width:i,height:r}),e.setAttrs({x:-1*l,y:-1*c})}}};i3.prototype.className="Label";Jn(i3);class Cd extends Te{_sceneFunc(e){const n=this.width(),i=this.height(),r=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),l=this.cornerRadius();let c=0,d=0,m=0,g=0;typeof l=="number"?c=d=m=g=Math.min(l,n/2,i/2):(c=Math.min(l[0]||0,n/2,i/2),d=Math.min(l[1]||0,n/2,i/2),g=Math.min(l[2]||0,n/2,i/2),m=Math.min(l[3]||0,n/2,i/2)),e.beginPath(),e.moveTo(c,0),r===uw&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*a),e.lineTo((n+s)/2,0)),e.lineTo(n-d,0),e.arc(n-d,d,d,Math.PI*3/2,0,!1),r===cw&&(e.lineTo(n,(i-a)/2),e.lineTo(n+s,i/2),e.lineTo(n,(i+a)/2)),e.lineTo(n,i-g),e.arc(n-g,i-g,g,0,Math.PI/2,!1),r===fw&&(e.lineTo((n+s)/2,i),e.lineTo(n/2,i+a),e.lineTo((n-s)/2,i)),e.lineTo(m,i),e.arc(m,i-m,m,Math.PI/2,Math.PI,!1),r===dw&&(e.lineTo(0,(i+a)/2),e.lineTo(-1*s,i/2),e.lineTo(0,(i-a)/2)),e.lineTo(0,c),e.arc(c,c,c,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,i=this.pointerWidth(),r=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),l=this.height();return s===uw?(n-=r,l+=r):s===fw?l+=r:s===dw?(e-=i*1.5,a+=i):s===cw&&(a+=i*1.5),{x:e,y:n,width:a,height:l}}}Cd.prototype.className="Tag";Jn(Cd);K.addGetterSetter(Cd,"pointerDirection",qX);K.addGetterSetter(Cd,"pointerWidth",0,Oe());K.addGetterSetter(Cd,"pointerHeight",0,Oe());K.addGetterSetter(Cd,"cornerRadius",0,zx(4));let q0=class extends Te{_sceneFunc(e){const n=this.cornerRadius(),i=this.width(),r=this.height();e.beginPath(),n?re.drawRoundedRectPath(e,i,r,n):e.rect(0,0,i,r),e.closePath(),e.fillStrokeShape(this)}};q0.prototype.className="Rect";Jn(q0);K.addGetterSetter(q0,"cornerRadius",0,zx(4));class Vc extends Te{_sceneFunc(e){const n=this._getPoints(),i=this.radius(),r=this.sides(),s=this.cornerRadius();if(e.beginPath(),s)re.drawRoundedPolygonPath(e,n,r,i,s);else{e.moveTo(n[0].x,n[0].y);for(let a=1;a<n.length;a++)e.lineTo(n[a].x,n[a].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,i=[];for(let r=0;r<e;r++)i.push({x:n*Math.sin(r*2*Math.PI/e),y:-1*n*Math.cos(r*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();let n=e[0].x,i=e[0].x,r=e[0].y,s=e[0].y;return e.forEach(a=>{n=Math.min(n,a.x),i=Math.max(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.y)}),{x:n,y:r,width:i-n,height:s-r}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Vc.prototype.className="RegularPolygon";Vc.prototype._centroid=!0;Vc.prototype._attrsAffectingSize=["radius"];Jn(Vc);K.addGetterSetter(Vc,"radius",0,Oe());K.addGetterSetter(Vc,"sides",0,Oe());K.addGetterSetter(Vc,"cornerRadius",0,zx(4));const M_=Math.PI*2;class wd extends Te{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,M_,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),M_,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}wd.prototype.className="Ring";wd.prototype._centroid=!0;wd.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Jn(wd);K.addGetterSetter(wd,"innerRadius",0,Oe());K.addGetterSetter(wd,"outerRadius",0,Oe());class ul extends Te{constructor(e){super(e),this._updated=!0,this.anim=new La(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),i=this.frameIndex(),r=i*4,s=this.animations()[n],a=this.frameOffsets(),l=s[r+0],c=s[r+1],d=s[r+2],m=s[r+3],g=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,d,m),e.closePath(),e.fillStrokeShape(this)),g)if(a){const v=a[n],x=i*2;e.drawImage(g,l,c,d,m,v[x+0],v[x+1],d,m)}else e.drawImage(g,l,c,d,m,0,0,d,m)}_hitFunc(e){const n=this.animation(),i=this.frameIndex(),r=i*4,s=this.animations()[n],a=this.frameOffsets(),l=s[r+2],c=s[r+3];if(e.beginPath(),a){const d=a[n],m=i*2;e.rect(d[m+0],d[m+1],l,c)}else e.rect(0,0,l,c);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),i=this.animations(),r=i[n],s=r.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}ul.prototype.className="Sprite";Jn(ul);K.addGetterSetter(ul,"animation");K.addGetterSetter(ul,"animations");K.addGetterSetter(ul,"frameOffsets");K.addGetterSetter(ul,"image");K.addGetterSetter(ul,"frameIndex",0,Oe());K.addGetterSetter(ul,"frameRate",17,Oe());K.backCompat(ul,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Yc extends Te{_sceneFunc(e){const n=this.innerRadius(),i=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(let s=1;s<r*2;s++){const a=s%2===0?i:n,l=a*Math.sin(s*Math.PI/r),c=-1*a*Math.cos(s*Math.PI/r);e.lineTo(l,c)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Yc.prototype.className="Star";Yc.prototype._centroid=!0;Yc.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Jn(Yc);K.addGetterSetter(Yc,"numPoints",5,Oe());K.addGetterSetter(Yc,"innerRadius",0,Oe());K.addGetterSetter(Yc,"outerRadius",0,Oe());function vc(t){return[...t].reduce((e,n,i,r)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const s=r[i+1];s&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(s)?(e.push(n+s),r[i+1]=""):e.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(r[i+1]||""))?e.push(n+r[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?e[e.length-1]+=n:n&&e.push(n);return e},[])}const Qh="auto",YX="center",iR="inherit",Cg="justify",KX="Change.konva",XX="2d",A_="-",rR="left",QX="text",WX="Text",JX="top",ZX="bottom",N_="middle",sR="normal",$X="px ",mv=" ",eQ="right",R_="rtl",tQ="word",nQ="char",O_="none",jS="",aR=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],iQ=aR.length;function rQ(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!i&&(e=`"${e}"`),e}).join(", ")}let gv;function LS(){return gv||(gv=re.createCanvasElement().getContext(XX),gv)}function sQ(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function aQ(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function oQ(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class kn extends Te{constructor(e){super(oQ(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<iQ;n++)this.on(aR[n]+KX,this._setTextData);this._setTextData()}_sceneFunc(e){var n,i;const r=this.textArr,s=r.length;if(!this.text())return;let a=this.padding(),l=this.fontSize(),c=this.lineHeight()*l,d=this.verticalAlign(),m=this.direction(),g=0,v=this.align(),x=this.getWidth(),S=this.letterSpacing(),T=this.charRenderFunc(),k=this.fill(),A=this.textDecoration(),O=A.indexOf("underline")!==-1,z=A.indexOf("line-through")!==-1,L;m=m===iR?e.direction:m;let I=c/2,j=N_;if(!je.legacyTextRendering){const B=this.measureSize("M");j="alphabetic";const q=(n=B.fontBoundingBoxAscent)!==null&&n!==void 0?n:B.actualBoundingBoxAscent,$=(i=B.fontBoundingBoxDescent)!==null&&i!==void 0?i:B.actualBoundingBoxDescent;I=(q-$)/2+c/2}for(m===R_&&e.setAttr("direction",m),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",j),e.setAttr("textAlign",rR),d===N_?g=(this.getHeight()-s*c-a*2)/2:d===ZX&&(g=this.getHeight()-s*c-a*2),e.translate(a,g+a),L=0;L<s;L++){let B=0,q=0;const $=r[L],G=$.text,X=$.width,J=$.lastInParagraph;if(e.save(),v===eQ?B+=x-X-a*2:v===YX&&(B+=(x-X-a*2)/2),O){e.save(),e.beginPath();const Z=je.legacyTextRendering?Math.round(l/2):Math.round(l/4),te=B,V=I+q+Z;e.moveTo(te,V);const ae=v===Cg&&!J?x-a*2:X;e.lineTo(te+Math.round(ae),V),e.lineWidth=l/15;const oe=this._getLinearGradient();e.strokeStyle=oe||k,e.stroke(),e.restore()}const ce=B;if(m!==R_&&(S!==0||v===Cg||T)){const Z=G.split(" ").length-1,te=vc(G);for(let V=0;V<te.length;V++){const ae=te[V];if(ae===" "&&!J&&v===Cg&&(B+=(x-a*2-X)/Z),this._partialTextX=B,this._partialTextY=I+q,this._partialText=ae,T){e.save();const he=r.slice(0,L).reduce((Y,se)=>Y+vc(se.text).length,0),F=V+he;T({char:ae,index:F,x:B,y:I+q,lineIndex:L,column:V,isLastInLine:J,width:this.measureSize(ae).width,context:e})}e.fillStrokeShape(this),T&&e.restore(),B+=this.measureSize(ae).width+S}}else S!==0&&e.setAttr("letterSpacing",`${S}px`),this._partialTextX=B,this._partialTextY=I+q,this._partialText=G,e.fillStrokeShape(this);if(z){e.save(),e.beginPath();const Z=je.legacyTextRendering?0:-Math.round(l/4),te=ce;e.moveTo(te,I+q+Z);const V=v===Cg&&!J?x-a*2:X;e.lineTo(te+Math.round(V),I+q+Z),e.lineWidth=l/15;const ae=this._getLinearGradient();e.strokeStyle=ae||k,e.stroke(),e.restore()}e.restore(),s>1&&(I+=c)}}_hitFunc(e){const n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=re._isString(e)?e:e==null?"":e+"";return this._setAttr(QX,n),this}getWidth(){return this.attrs.width===Qh||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Qh||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return re.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,i,r,s,a,l,c,d,m,g,v;let x=LS(),S=this.fontSize(),T;x.save(),x.font=this._getContextFont(),T=x.measureText(e),x.restore();const k=S/100;return{actualBoundingBoxAscent:(n=T.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*k,actualBoundingBoxDescent:(i=T.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(r=T.actualBoundingBoxLeft)!==null&&r!==void 0?r:-7.421875*k,actualBoundingBoxRight:(s=T.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*k,alphabeticBaseline:(a=T.alphabeticBaseline)!==null&&a!==void 0?a:0,emHeightAscent:(l=T.emHeightAscent)!==null&&l!==void 0?l:100*k,emHeightDescent:(c=T.emHeightDescent)!==null&&c!==void 0?c:-20*k,fontBoundingBoxAscent:(d=T.fontBoundingBoxAscent)!==null&&d!==void 0?d:91*k,fontBoundingBoxDescent:(m=T.fontBoundingBoxDescent)!==null&&m!==void 0?m:21*k,hangingBaseline:(g=T.hangingBaseline)!==null&&g!==void 0?g:72.80000305175781*k,ideographicBaseline:(v=T.ideographicBaseline)!==null&&v!==void 0?v:-21*k,width:T.width,height:S}}_getContextFont(){return this.fontStyle()+mv+this.fontVariant()+mv+(this.fontSize()+$X)+rQ(this.fontFamily())}_addTextLine(e){this.align()===Cg&&(e=e.trim());const i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),i=e.length;return LS().measureText(e).width+n*i}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),i=0,r=this.lineHeight()*n,s=this.attrs.width,a=this.attrs.height,l=s!==Qh&&s!==void 0,c=a!==Qh&&a!==void 0,d=this.padding(),m=s-d*2,g=a-d*2,v=0,x=this.wrap(),S=x!==O_,T=x!==nQ&&S,k=this.ellipsis();this.textArr=[],LS().font=this._getContextFont();const A=k?this._getTextWidth(jS):0;for(let O=0,z=e.length;O<z;++O){let L=e[O],I=this._getTextWidth(L);if(l&&I>m)for(;L.length>0;){let j=0,B=vc(L).length,q="",$=0;for(;j<B;){const G=j+B>>>1,X=vc(L),J=X.slice(0,G+1).join(""),ce=this._getTextWidth(J);(k&&c&&v+r>g?ce+A:ce)<=m?(j=G+1,q=J,$=ce):B=G}if(q){if(T){const J=vc(L),ce=vc(q),Z=J[ce.length],te=Z===mv||Z===A_;let V;if(te&&$<=m)V=ce.length;else{const ae=ce.lastIndexOf(mv),oe=ce.lastIndexOf(A_);V=Math.max(ae,oe)+1}V>0&&(j=V,q=J.slice(0,j).join(""),$=this._getTextWidth(q))}if(q=q.trimRight(),this._addTextLine(q),i=Math.max(i,$),v+=r,this._shouldHandleEllipsis(v)){this._tryToAddEllipsisToLastLine();break}if(L=vc(L).slice(j).join("").trimLeft(),L.length>0&&(I=this._getTextWidth(L),I<=m)){this._addTextLine(L),v+=r,i=Math.max(i,I);break}}else break}else this._addTextLine(L),v+=r,i=Math.max(i,I),this._shouldHandleEllipsis(v)&&O<z-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),c&&v+r>g)break}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(e){const n=+this.fontSize(),i=this.lineHeight()*n,r=this.attrs.height,s=r!==Qh&&r!==void 0,a=this.padding(),l=r-a*2;return!(this.wrap()!==O_)||s&&e+i>l}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==Qh&&e!==void 0,i=this.padding(),r=e-i*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];!a||!s||(n&&(this._getTextWidth(a.text+jS)<r||(a.text=a.text.slice(0,a.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+jS))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}kn.prototype._fillFunc=sQ;kn.prototype._strokeFunc=aQ;kn.prototype.className=WX;kn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Jn(kn);K.overWriteSetter(kn,"width",e3());K.overWriteSetter(kn,"height",e3());K.addGetterSetter(kn,"direction",iR);K.addGetterSetter(kn,"fontFamily","Arial");K.addGetterSetter(kn,"fontSize",12,Oe());K.addGetterSetter(kn,"fontStyle",sR);K.addGetterSetter(kn,"fontVariant",sR);K.addGetterSetter(kn,"padding",0,Oe());K.addGetterSetter(kn,"align",rR);K.addGetterSetter(kn,"verticalAlign",JX);K.addGetterSetter(kn,"lineHeight",1,Oe());K.addGetterSetter(kn,"wrap",tQ);K.addGetterSetter(kn,"ellipsis",!1,vo());K.addGetterSetter(kn,"letterSpacing",0,Oe());K.addGetterSetter(kn,"text","",bd());K.addGetterSetter(kn,"textDecoration","");K.addGetterSetter(kn,"charRenderFunc",void 0);const lQ="",oR="normal";function lR(t){t.fillText(this.partialText,0,0)}function uR(t){t.strokeText(this.partialText,0,0)}class Hi extends Te{constructor(e){super(e),this.dummyCanvas=re.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return mn.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e>n?null:mn.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=mn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),i=this.fill(),r=this.fontSize(),s=this.glyphInfo,a=n.indexOf("underline")!==-1,l=n.indexOf("line-through")!==-1;a&&e.beginPath();for(let c=0;c<s.length;c++){e.save();const d=s[c].p0;e.translate(d.x,d.y),e.rotate(s[c].rotation),this.partialText=s[c].text,e.fillStrokeShape(this),a&&(c===0&&e.moveTo(0,r/2+1),e.lineTo(s[c].width,r/2+1)),e.restore()}if(a&&(e.strokeStyle=i,e.lineWidth=r/20,e.stroke()),l){e.beginPath();for(let c=0;c<s.length;c++){e.save();const d=s[c].p0;e.translate(d.x,d.y),e.rotate(s[c].rotation),c===0&&e.moveTo(0,0),e.lineTo(s[c].width,0),e.restore()}e.strokeStyle=i,e.lineWidth=r/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const i=n[0].p0;e.moveTo(i.x,i.y)}for(let i=0;i<n.length;i++){const r=n[i].p1;e.lineTo(r.x,r.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return re.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return kn.prototype.setText.call(this,e)}_getContextFont(){return kn.prototype._getContextFont.call(this)}_getTextSize(e){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const r=i.measureText(e);return i.restore(),{width:r.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=vc(this.text()),n=[];let i=0;for(let g=0;g<e.length;g++)n.push({char:e[g],width:this._getTextSize(e[g]).width}),i+=n[g].width;const{height:r}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;const s=this.letterSpacing(),a=this.align(),l=this.kerningFunc(),c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*s,0);let d=0;a==="center"&&(d=Math.max(0,this.pathLength/2-c/2)),a==="right"&&(d=Math.max(0,this.pathLength-c));let m=d;for(let g=0;g<n.length;g++){const v=this._getPointAtLength(m);if(!v)return;const x=n[g].char;let S=n[g].width+s;if(x===" "&&a==="justify"){const L=this.text().split(" ").length-1;S+=(this.pathLength-c)/L}const T=this._getPointAtLength(m+S);if(!T)return;const k=mn.getLineLength(v.x,v.y,T.x,T.y);let A=0;if(l)try{A=l(n[g-1].char,x)*this.fontSize()}catch{A=0}v.x+=A,T.x+=A,this.textWidth+=A;const O=mn.getPointOnLine(A+k/2,v.x,v.y,T.x,T.y),z=Math.atan2(T.y-v.y,T.x-v.x);this.glyphInfo.push({transposeX:O.x,transposeY:O.y,text:e[g],rotation:z,p0:v,p1:T,width:k}),m+=S}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(d){e.push(d.p0.x),e.push(d.p0.y),e.push(d.p1.x),e.push(d.p1.y)});let n=e[0]||0,i=e[0]||0,r=e[1]||0,s=e[1]||0,a,l;for(let d=0;d<e.length/2;d++)a=e[d*2],l=e[d*2+1],n=Math.min(n,a),i=Math.max(i,a),r=Math.min(r,l),s=Math.max(s,l);const c=this.fontSize();return{x:n-c/2,y:r-c/2,width:i-n+c,height:s-r+c}}destroy(){return re.releaseCanvas(this.dummyCanvas),super.destroy()}}Hi.prototype._fillFunc=lR;Hi.prototype._strokeFunc=uR;Hi.prototype._fillFuncHit=lR;Hi.prototype._strokeFuncHit=uR;Hi.prototype.className="TextPath";Hi.prototype._attrsAffectingSize=["text","fontSize","data"];Jn(Hi);K.addGetterSetter(Hi,"data");K.addGetterSetter(Hi,"fontFamily","Arial");K.addGetterSetter(Hi,"fontSize",12,Oe());K.addGetterSetter(Hi,"fontStyle",oR);K.addGetterSetter(Hi,"align","left");K.addGetterSetter(Hi,"letterSpacing",0,Oe());K.addGetterSetter(Hi,"textBaseline","middle");K.addGetterSetter(Hi,"fontVariant",oR);K.addGetterSetter(Hi,"text",lQ);K.addGetterSetter(Hi,"textDecoration","");K.addGetterSetter(Hi,"kerningFunc",void 0);const cR="tr-konva",uQ=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${cR}`).join(" "),D_="nodesRect",cQ=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],fQ={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},dQ="ontouchstart"in je._global;function hQ(t,e,n){if(t==="rotater")return n;e+=re.degToRad(fQ[t]||0);const i=(re.radToDeg(e)%360+360)%360;return re._inRange(i,315+22.5,360)||re._inRange(i,0,22.5)?"ns-resize":re._inRange(i,45-22.5,45+22.5)?"nesw-resize":re._inRange(i,90-22.5,90+22.5)?"ew-resize":re._inRange(i,135-22.5,135+22.5)?"nwse-resize":re._inRange(i,180-22.5,180+22.5)?"ns-resize":re._inRange(i,225-22.5,225+22.5)?"nesw-resize":re._inRange(i,270-22.5,270+22.5)?"ew-resize":re._inRange(i,315-22.5,315+22.5)?"nwse-resize":(re.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const Fb=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function pQ(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function fR(t,e,n){const i=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),r=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:i,y:r}}function mQ(t,e){const n=pQ(t);return fR(t,e,n)}function gQ(t,e,n){let i=e;for(let r=0;r<t.length;r++){const s=je.getAngle(t[r]),a=Math.abs(s-e)%(Math.PI*2);Math.min(a,Math.PI*2-a)<n&&(i=s)}return i}let hw=0;class jt extends xp{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(uQ,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return re.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return cR+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(r=>r.isAncestorOf(this)?(re.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(r._attrsAffectingSize.length){const a=r._attrsAffectingSize.map(l=>l+"Change."+this._getEventNamespace()).join(" ");r.on(a,s)}r.on(cQ.map(a=>a+`.${this._getEventNamespace()}`).join(" "),s),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(r)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,i=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const r=e.getAbsolutePosition(),s=r.x-n.x,a=r.y-n.y;this.nodes().forEach(l=>{if(l===e||l.isDragging())return;const c=l.getAbsolutePosition();l.setAbsolutePosition({x:c.x+s,y:c.y+a}),l.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(D_),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(D_,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),i){const r=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(i),a=e.getAbsolutePosition(i),l=r.x*s.x-e.offsetX()*s.x,c=r.y*s.y-e.offsetY()*s.y,d=(je.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:a.x+l*Math.cos(d)+c*Math.sin(-d),y:a.y+c*Math.cos(d)+l*Math.sin(d),width:r.width*s.x,height:r.height*s.y,rotation:d};return fR(m,-je.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(d=>{const m=d.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),g=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],v=d.getAbsoluteTransform();g.forEach(function(x){const S=v.point(x);n.push(S)})});const i=new Qs;i.rotate(-je.getAngle(this.rotation()));let r=1/0,s=1/0,a=-1/0,l=-1/0;n.forEach(function(d){const m=i.point(d);r===void 0&&(r=a=m.x,s=l=m.y),r=Math.min(r,m.x),s=Math.min(s,m.y),a=Math.max(a,m.x),l=Math.max(l,m.y)}),i.invert();const c=i.point({x:r,y:s});return{x:c.x,y:c.y,width:a-r,height:l-s,rotation:je.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Fb.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new q0({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:dQ?10:"auto"}),i=this;n.on("mousedown touchstart",function(r){i._handleMouseDown(r)}),n.on("dragstart",r=>{n.stopDrag(),r.cancelBubble=!0}),n.on("dragend",r=>{r.cancelBubble=!0}),n.on("mouseenter",()=>{const r=je.getAngle(this.rotation()),s=this.rotateAnchorCursor(),a=hQ(e,r,s);n.getStage().content&&(n.getStage().content.style.cursor=a),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new Te({name:"back",width:0,height:0,sceneFunc(n,i){const r=i.getParent(),s=r.padding();n.beginPath(),n.rect(-s,-s,i.width()+s*2,i.height()+s*2),n.moveTo(i.width()/2,-s),r.rotateEnabled()&&r.rotateLineVisible()&&n.lineTo(i.width()/2,-r.rotateAnchorOffset()*re._sign(i.height())-s),n.fillStrokeShape(i)},hitFunc:(n,i)=>{if(!this.shouldOverdrawWholeArea())return;const r=this.padding();n.beginPath(),n.rect(-r,-r,i.width()+r*2,i.height()+r*2),n.fillStrokeShape(i)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),i=n.width,r=n.height,s=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));this.sin=Math.abs(r/s),this.cos=Math.abs(i/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const a=e.target.getAbsolutePosition(),l=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:l.x-a.x,y:l.y-a.y},hw++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:e.evt,target:c})})}_handleMouseMove(e){let n,i,r;const s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(e);const l=a.getPointerPosition();let c={x:l.x-this._anchorDragOffset.x,y:l.y-this._anchorDragOffset.y};const d=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(d,c,e)),s.setAbsolutePosition(c);const m=s.getAbsolutePosition();if(d.x===m.x&&d.y===m.y)return;if(this._movingAnchorName==="rotater"){const O=this._getNodeRect();n=s.x()-O.width/2,i=-s.y()+O.height/2;let z=Math.atan2(-i,n)+Math.PI/2;O.height<0&&(z-=Math.PI);const I=je.getAngle(this.rotation())+z,j=je.getAngle(this.rotationSnapTolerance()),q=gQ(this.rotationSnaps(),I,j)-O.rotation,$=mQ(O,q);this._fitNodesInto($,e);return}const g=this.shiftBehavior();let v;g==="inverted"?v=this.keepRatio()&&!e.shiftKey:g==="none"?v=this.keepRatio():v=this.keepRatio()||e.shiftKey;let x=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(v){const O=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(O.x-s.x(),2)+Math.pow(O.y-s.y(),2));const z=this.findOne(".top-left").x()>O.x?-1:1,L=this.findOne(".top-left").y()>O.y?-1:1;n=r*this.cos*z,i=r*this.sin*L,this.findOne(".top-left").x(O.x-n),this.findOne(".top-left").y(O.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(v){const O=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(s.x()-O.x,2)+Math.pow(O.y-s.y(),2));const z=this.findOne(".top-right").x()<O.x?-1:1,L=this.findOne(".top-right").y()>O.y?-1:1;n=r*this.cos*z,i=r*this.sin*L,this.findOne(".top-right").x(O.x+n),this.findOne(".top-right").y(O.y-i)}var S=s.position();this.findOne(".top-left").y(S.y),this.findOne(".bottom-right").x(S.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(v){const O=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(O.x-s.x(),2)+Math.pow(s.y()-O.y,2));const z=O.x<s.x()?-1:1,L=s.y()<O.y?-1:1;n=r*this.cos*z,i=r*this.sin*L,s.x(O.x-n),s.y(O.y+i)}S=s.position(),this.findOne(".top-left").x(S.x),this.findOne(".bottom-right").y(S.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(v){const O=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(s.x()-O.x,2)+Math.pow(s.y()-O.y,2));const z=this.findOne(".bottom-right").x()<O.x?-1:1,L=this.findOne(".bottom-right").y()<O.y?-1:1;n=r*this.cos*z,i=r*this.sin*L,this.findOne(".bottom-right").x(O.x+n),this.findOne(".bottom-right").y(O.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(x=this.centeredScaling()||e.altKey,x){const O=this.findOne(".top-left"),z=this.findOne(".bottom-right"),L=O.x(),I=O.y(),j=this.getWidth()-z.x(),B=this.getHeight()-z.y();z.move({x:-L,y:-I}),O.move({x:j,y:B})}const T=this.findOne(".top-left").getAbsolutePosition();n=T.x,i=T.y;const k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),A=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:k,height:A,rotation:je.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();hw--,this._fire("transformend",{evt:e,target:i}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),i&&this._nodes.forEach(r=>{var s;r._fire("transformend",{evt:e,target:r}),(s=r.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const i=this._getNodeRect(),r=1;if(re._inRange(e.width,-this.padding()*2-r,r)){this.update();return}if(re._inRange(e.height,-this.padding()*2-r,r)){this.update();return}const s=new Qs;if(s.rotate(je.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const v=s.point({x:-this.padding()*2,y:0});e.x+=v.x,e.y+=v.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const v=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const v=s.point({x:0,y:-this.padding()*2});e.x+=v.x,e.y+=v.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const v=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const v=this.boundBoxFunc()(i,e);v?e=v:re.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,l=new Qs;l.translate(i.x,i.y),l.rotate(i.rotation),l.scale(i.width/a,i.height/a);const c=new Qs,d=e.width/a,m=e.height/a;this.flipEnabled()===!1?(c.translate(e.x,e.y),c.rotate(e.rotation),c.translate(e.width<0?e.width:0,e.height<0?e.height:0),c.scale(Math.abs(d),Math.abs(m))):(c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(d,m));const g=c.multiply(l.invert());this._nodes.forEach(v=>{var x;if(!v.getStage())return;const S=v.getParent().getAbsoluteTransform(),T=v.getTransform().copy();T.translate(v.offsetX(),v.offsetY());const k=new Qs;k.multiply(S.copy().invert()).multiply(g).multiply(S).multiply(T);const A=k.decompose();v.setAttrs(A),(x=v.getLayer())===null||x===void 0||x.batchDraw()}),this.rotation(re._getRotation(e.rotation)),this._nodes.forEach(v=>{this._fire("transform",{evt:n,target:v}),v._fire("transform",{evt:n,target:v})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(re._getRotation(n.rotation));const i=n.width,r=n.height,s=this.enabledAnchors(),a=this.resizeEnabled(),l=this.padding(),c=this.anchorSize(),d=this.find("._anchor");d.forEach(g=>{g.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+l,offsetY:c/2+l,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:c/2+l,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:c/2-l,offsetY:c/2+l,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:c/2+l,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:r/2,offsetX:c/2-l,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:c/2+l,offsetY:c/2-l,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:r,offsetY:c/2-l,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:r,offsetX:c/2-l,offsetY:c/2-l,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*re._sign(r)-l,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(g=>g.draggable()),x:0,y:0});const m=this.anchorStyleFunc();m&&d.forEach(g=>{m(g)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),xp.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return De.prototype.toObject.call(this)}clone(e){return De.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}jt.isTransforming=()=>hw>0;function yQ(t){return t instanceof Array||re.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Fb.indexOf(e)===-1&&re.warn("Unknown anchor name: "+e+". Available names are: "+Fb.join(", "))}),t||[]}jt.prototype.className="Transformer";Jn(jt);K.addGetterSetter(jt,"enabledAnchors",Fb,yQ);K.addGetterSetter(jt,"flipEnabled",!0,vo());K.addGetterSetter(jt,"resizeEnabled",!0);K.addGetterSetter(jt,"anchorSize",10,Oe());K.addGetterSetter(jt,"rotateEnabled",!0);K.addGetterSetter(jt,"rotateLineVisible",!0);K.addGetterSetter(jt,"rotationSnaps",[]);K.addGetterSetter(jt,"rotateAnchorOffset",50,Oe());K.addGetterSetter(jt,"rotateAnchorCursor","crosshair");K.addGetterSetter(jt,"rotationSnapTolerance",5,Oe());K.addGetterSetter(jt,"borderEnabled",!0);K.addGetterSetter(jt,"anchorStroke","rgb(0, 161, 255)");K.addGetterSetter(jt,"anchorStrokeWidth",1,Oe());K.addGetterSetter(jt,"anchorFill","white");K.addGetterSetter(jt,"anchorCornerRadius",0,Oe());K.addGetterSetter(jt,"borderStroke","rgb(0, 161, 255)");K.addGetterSetter(jt,"borderStrokeWidth",1,Oe());K.addGetterSetter(jt,"borderDash");K.addGetterSetter(jt,"keepRatio",!0);K.addGetterSetter(jt,"shiftBehavior","default");K.addGetterSetter(jt,"centeredScaling",!1);K.addGetterSetter(jt,"ignoreStroke",!1);K.addGetterSetter(jt,"padding",0,Oe());K.addGetterSetter(jt,"nodes");K.addGetterSetter(jt,"node");K.addGetterSetter(jt,"boundBoxFunc");K.addGetterSetter(jt,"anchorDragBoundFunc");K.addGetterSetter(jt,"anchorStyleFunc");K.addGetterSetter(jt,"shouldOverdrawWholeArea",!1);K.addGetterSetter(jt,"useSingleNodeRotation",!0);K.backCompat(jt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class pu extends Te{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,je.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}pu.prototype.className="Wedge";pu.prototype._centroid=!0;pu.prototype._attrsAffectingSize=["radius"];Jn(pu);K.addGetterSetter(pu,"radius",0,Oe());K.addGetterSetter(pu,"angle",0,Oe());K.addGetterSetter(pu,"clockwise",!1);K.backCompat(pu,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function z_(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const vQ=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],bQ=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function xQ(t,e){const n=t.data,i=t.width,r=t.height;let s,a,l,c,d,m,g,v,x,S,T,k,A,O,z,L,I,j,B,q;const $=e+e+1,G=i-1,X=r-1,J=e+1,ce=J*(J+1)/2,Z=new z_,te=vQ[e],V=bQ[e];let ae=null,oe=Z,he=null,F=null;for(let Y=1;Y<$;Y++)oe=oe.next=new z_,Y===J&&(ae=oe);oe.next=Z,l=a=0;for(let Y=0;Y<r;Y++){k=A=O=z=c=d=m=g=0,v=J*(L=n[a]),x=J*(I=n[a+1]),S=J*(j=n[a+2]),T=J*(B=n[a+3]),c+=ce*L,d+=ce*I,m+=ce*j,g+=ce*B,oe=Z;for(let se=0;se<J;se++)oe.r=L,oe.g=I,oe.b=j,oe.a=B,oe=oe.next;for(let se=1;se<J;se++)s=a+((G<se?G:se)<<2),c+=(oe.r=L=n[s])*(q=J-se),d+=(oe.g=I=n[s+1])*q,m+=(oe.b=j=n[s+2])*q,g+=(oe.a=B=n[s+3])*q,k+=L,A+=I,O+=j,z+=B,oe=oe.next;he=Z,F=ae;for(let se=0;se<i;se++)n[a+3]=B=g*te>>V,B!==0?(B=255/B,n[a]=(c*te>>V)*B,n[a+1]=(d*te>>V)*B,n[a+2]=(m*te>>V)*B):n[a]=n[a+1]=n[a+2]=0,c-=v,d-=x,m-=S,g-=T,v-=he.r,x-=he.g,S-=he.b,T-=he.a,s=l+((s=se+e+1)<G?s:G)<<2,k+=he.r=n[s],A+=he.g=n[s+1],O+=he.b=n[s+2],z+=he.a=n[s+3],c+=k,d+=A,m+=O,g+=z,he=he.next,v+=L=F.r,x+=I=F.g,S+=j=F.b,T+=B=F.a,k-=L,A-=I,O-=j,z-=B,F=F.next,a+=4;l+=i}for(let Y=0;Y<i;Y++){A=O=z=k=d=m=g=c=0,a=Y<<2,v=J*(L=n[a]),x=J*(I=n[a+1]),S=J*(j=n[a+2]),T=J*(B=n[a+3]),c+=ce*L,d+=ce*I,m+=ce*j,g+=ce*B,oe=Z;for(let U=0;U<J;U++)oe.r=L,oe.g=I,oe.b=j,oe.a=B,oe=oe.next;let se=i;for(let U=1;U<=e;U++)a=se+Y<<2,c+=(oe.r=L=n[a])*(q=J-U),d+=(oe.g=I=n[a+1])*q,m+=(oe.b=j=n[a+2])*q,g+=(oe.a=B=n[a+3])*q,k+=L,A+=I,O+=j,z+=B,oe=oe.next,U<X&&(se+=i);a=Y,he=Z,F=ae;for(let U=0;U<r;U++)s=a<<2,n[s+3]=B=g*te>>V,B>0?(B=255/B,n[s]=(c*te>>V)*B,n[s+1]=(d*te>>V)*B,n[s+2]=(m*te>>V)*B):n[s]=n[s+1]=n[s+2]=0,c-=v,d-=x,m-=S,g-=T,v-=he.r,x-=he.g,S-=he.b,T-=he.a,s=Y+((s=U+J)<X?s:X)*i<<2,c+=k+=he.r=n[s],d+=A+=he.g=n[s+1],m+=O+=he.b=n[s+2],g+=z+=he.a=n[s+3],he=he.next,v+=L=F.r,x+=I=F.g,S+=j=F.b,T+=B=F.a,k-=L,A-=I,O-=j,z-=B,F=F.next,a+=i}}const SQ=function(e){const n=Math.round(this.blurRadius());n>0&&xQ(e,n)};K.addGetterSetter(De,"blurRadius",0,Oe(),K.afterSetFilter);const CQ=function(t){const e=this.brightness()*255,n=t.data,i=n.length;for(let r=0;r<i;r+=4)n[r]+=e,n[r+1]+=e,n[r+2]+=e};K.addGetterSetter(De,"brightness",0,Oe(),K.afterSetFilter);const wQ=function(t){const e=this.brightness(),n=t.data,i=n.length;for(let r=0;r<i;r+=4)n[r]=Math.min(255,n[r]*e),n[r+1]=Math.min(255,n[r+1]*e),n[r+2]=Math.min(255,n[r+2]*e)},EQ=function(t){const e=Math.pow((this.contrast()+100)/100,2),n=t.data,i=n.length;let r=150,s=150,a=150;for(let l=0;l<i;l+=4)r=n[l],s=n[l+1],a=n[l+2],r/=255,r-=.5,r*=e,r+=.5,r*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,r=r<0?0:r>255?255:r,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,n[l]=r,n[l+1]=s,n[l+2]=a};K.addGetterSetter(De,"contrast",0,Oe(),K.afterSetFilter);const TQ=function(t){var e,n,i,r,s,a,l,c,d;const m=t.data,g=t.width,v=t.height,x=Math.min(1,Math.max(0,(n=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:.5)),S=Math.min(1,Math.max(0,(r=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&r!==void 0?r:.5)),k=(l={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(a=(s=this.embossDirection)===null||s===void 0?void 0:s.call(this))!==null&&a!==void 0?a:"top-left"])!==null&&l!==void 0?l:315,A=!!((d=(c=this.embossBlend)===null||c===void 0?void 0:c.call(this))!==null&&d!==void 0&&d),O=x*10,z=S*255,L=k*Math.PI/180,I=Math.cos(L),j=Math.sin(L),B=128/1020*O,q=new Uint8ClampedArray(m),$=new Float32Array(g*v);for(let Z=0,te=0;te<m.length;te+=4,Z++)$[Z]=.2126*q[te]+.7152*q[te+1]+.0722*q[te+2];const G=[-1,0,1,-2,0,2,-1,0,1],X=[-1,-2,-1,0,0,0,1,2,1],J=[-g-1,-g,-g+1,-1,0,1,g-1,g,g+1],ce=Z=>Z<0?0:Z>255?255:Z;for(let Z=1;Z<v-1;Z++)for(let te=1;te<g-1;te++){const V=Z*g+te;let ae=0,oe=0;ae+=$[V+J[0]]*G[0],oe+=$[V+J[0]]*X[0],ae+=$[V+J[1]]*G[1],oe+=$[V+J[1]]*X[1],ae+=$[V+J[2]]*G[2],oe+=$[V+J[2]]*X[2],ae+=$[V+J[3]]*G[3],oe+=$[V+J[3]]*X[3],ae+=$[V+J[5]]*G[5],oe+=$[V+J[5]]*X[5],ae+=$[V+J[6]]*G[6],oe+=$[V+J[6]]*X[6],ae+=$[V+J[7]]*G[7],oe+=$[V+J[7]]*X[7],ae+=$[V+J[8]]*G[8],oe+=$[V+J[8]]*X[8];const he=I*ae+j*oe,F=ce(z+he*B),Y=V*4;if(A){const se=F-z;m[Y]=ce(q[Y]+se),m[Y+1]=ce(q[Y+1]+se),m[Y+2]=ce(q[Y+2]+se),m[Y+3]=q[Y+3]}else m[Y]=m[Y+1]=m[Y+2]=F,m[Y+3]=q[Y+3]}for(let Z=0;Z<g;Z++){let te=Z*4,V=((v-1)*g+Z)*4;m[te]=q[te],m[te+1]=q[te+1],m[te+2]=q[te+2],m[te+3]=q[te+3],m[V]=q[V],m[V+1]=q[V+1],m[V+2]=q[V+2],m[V+3]=q[V+3]}for(let Z=1;Z<v-1;Z++){let te=Z*g*4,V=(Z*g+(g-1))*4;m[te]=q[te],m[te+1]=q[te+1],m[te+2]=q[te+2],m[te+3]=q[te+3],m[V]=q[V],m[V+1]=q[V+1],m[V+2]=q[V+2],m[V+3]=q[V+3]}return t};K.addGetterSetter(De,"embossStrength",.5,Oe(),K.afterSetFilter);K.addGetterSetter(De,"embossWhiteLevel",.5,Oe(),K.afterSetFilter);K.addGetterSetter(De,"embossDirection","top-left",void 0,K.afterSetFilter);K.addGetterSetter(De,"embossBlend",!1,void 0,K.afterSetFilter);function BS(t,e,n,i,r){const s=n-e,a=r-i;if(s===0)return i+a/2;if(a===0)return i;let l=(t-e)/s;return l=a*l+i,l}const _Q=function(t){const e=t.data,n=e.length;let i=e[0],r=i,s,a=e[1],l=a,c,d=e[2],m=d,g;const v=this.enhance();if(v===0)return;for(let z=0;z<n;z+=4)s=e[z+0],s<i?i=s:s>r&&(r=s),c=e[z+1],c<a?a=c:c>l&&(l=c),g=e[z+2],g<d?d=g:g>m&&(m=g);r===i&&(r=255,i=0),l===a&&(l=255,a=0),m===d&&(m=255,d=0);let x,S,T,k,A,O;if(v>0)x=r+v*(255-r),S=i-v*(i-0),T=l+v*(255-l),k=a-v*(a-0),A=m+v*(255-m),O=d-v*(d-0);else{const z=(r+i)*.5;x=r+v*(r-z),S=i+v*(i-z);const L=(l+a)*.5;T=l+v*(l-L),k=a+v*(a-L);const I=(m+d)*.5;A=m+v*(m-I),O=d+v*(d-I)}for(let z=0;z<n;z+=4)e[z+0]=BS(e[z+0],i,r,S,x),e[z+1]=BS(e[z+1],a,l,k,T),e[z+2]=BS(e[z+2],d,m,O,A)};K.addGetterSetter(De,"enhance",0,Oe(),K.afterSetFilter);const kQ=function(t){const e=t.data,n=e.length;for(let i=0;i<n;i+=4){const r=.34*e[i]+.5*e[i+1]+.16*e[i+2];e[i]=r,e[i+1]=r,e[i+2]=r}};K.addGetterSetter(De,"hue",0,Oe(),K.afterSetFilter);K.addGetterSetter(De,"saturation",0,Oe(),K.afterSetFilter);K.addGetterSetter(De,"luminance",0,Oe(),K.afterSetFilter);const MQ=function(t){const e=t.data,n=e.length,i=1,r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,l=i*r*Math.cos(s*Math.PI/180),c=i*r*Math.sin(s*Math.PI/180),d=.299*i+.701*l+.167*c,m=.587*i-.587*l+.33*c,g=.114*i-.114*l-.497*c,v=.299*i-.299*l-.328*c,x=.587*i+.413*l+.035*c,S=.114*i-.114*l+.293*c,T=.299*i-.3*l+1.25*c,k=.587*i-.586*l-1.05*c,A=.114*i+.886*l-.2*c;let O,z,L,I;for(let j=0;j<n;j+=4)O=e[j+0],z=e[j+1],L=e[j+2],I=e[j+3],e[j+0]=d*O+m*z+g*L+a,e[j+1]=v*O+x*z+S*L+a,e[j+2]=T*O+k*z+A*L+a,e[j+3]=I},AQ=function(t){const e=t.data,n=e.length,i=Math.pow(2,this.value()),r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=i*r*Math.cos(s*Math.PI/180),l=i*r*Math.sin(s*Math.PI/180),c=.299*i+.701*a+.167*l,d=.587*i-.587*a+.33*l,m=.114*i-.114*a-.497*l,g=.299*i-.299*a-.328*l,v=.587*i+.413*a+.035*l,x=.114*i-.114*a+.293*l,S=.299*i-.3*a+1.25*l,T=.587*i-.586*a-1.05*l,k=.114*i+.886*a-.2*l;for(let A=0;A<n;A+=4){const O=e[A+0],z=e[A+1],L=e[A+2],I=e[A+3];e[A+0]=c*O+d*z+m*L,e[A+1]=g*O+v*z+x*L,e[A+2]=S*O+T*z+k*L,e[A+3]=I}};K.addGetterSetter(De,"hue",0,Oe(),K.afterSetFilter);K.addGetterSetter(De,"saturation",0,Oe(),K.afterSetFilter);K.addGetterSetter(De,"value",0,Oe(),K.afterSetFilter);const NQ=function(t){const e=t.data,n=e.length;for(let i=0;i<n;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]},RQ=function(t,e,n){const i=t.data,r=e.data,s=t.width,a=t.height,l=n.polarCenterX||s/2,c=n.polarCenterY||a/2;let d=Math.sqrt(l*l+c*c),m=s-l,g=a-c;const v=Math.sqrt(m*m+g*g);d=v>d?v:d;const x=a,S=s,T=360/S*Math.PI/180;for(let k=0;k<S;k+=1){const A=Math.sin(k*T),O=Math.cos(k*T);for(let z=0;z<x;z+=1){m=Math.floor(l+d*z/x*O),g=Math.floor(c+d*z/x*A);let L=(g*s+m)*4;const I=i[L+0],j=i[L+1],B=i[L+2],q=i[L+3];L=(k+z*s)*4,r[L+0]=I,r[L+1]=j,r[L+2]=B,r[L+3]=q}}},OQ=function(t,e,n){const i=t.data,r=e.data,s=t.width,a=t.height,l=n.polarCenterX||s/2,c=n.polarCenterY||a/2;let d=Math.sqrt(l*l+c*c),m=s-l,g=a-c;const v=Math.sqrt(m*m+g*g);d=v>d?v:d;const x=a,S=s,T=0;let k,A;for(m=0;m<s;m+=1)for(g=0;g<a;g+=1){const O=m-l,z=g-c,L=Math.sqrt(O*O+z*z)*x/d;let I=(Math.atan2(z,O)*180/Math.PI+360+T)%360;I=I*S/360,k=Math.floor(I),A=Math.floor(L);let j=(A*s+k)*4;const B=i[j+0],q=i[j+1],$=i[j+2],G=i[j+3];j=(g*s+m)*4,r[j+0]=B,r[j+1]=q,r[j+2]=$,r[j+3]=G}},DQ=function(t){const e=t.width,n=t.height;let i,r,s,a,l,c,d,m,g,v,x=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),T=Math.floor(e*(S%360)/360);if(x<1)return;const k=re.createCanvasElement();k.width=e,k.height=n;const A=k.getContext("2d").getImageData(0,0,e,n);re.releaseCanvas(k),RQ(t,A,{polarCenterX:e/2,polarCenterY:n/2});let O=e/Math.pow(2,x);for(;O<=8;)O=O*2,x-=1;O=Math.ceil(O);let z=O,L=0,I=z,j=1;for(T+O>e&&(L=z,I=0,j=-1),r=0;r<n;r+=1)for(i=L;i!==I;i+=j)s=Math.round(i+T)%e,g=(e*r+s)*4,l=A.data[g+0],c=A.data[g+1],d=A.data[g+2],m=A.data[g+3],v=(e*r+i)*4,A.data[v+0]=l,A.data[v+1]=c,A.data[v+2]=d,A.data[v+3]=m;for(r=0;r<n;r+=1)for(z=Math.floor(O),a=0;a<x;a+=1){for(i=0;i<z+1;i+=1)g=(e*r+i)*4,l=A.data[g+0],c=A.data[g+1],d=A.data[g+2],m=A.data[g+3],v=(e*r+z*2-i-1)*4,A.data[v+0]=l,A.data[v+1]=c,A.data[v+2]=d,A.data[v+3]=m;z*=2}OQ(A,t,{})};K.addGetterSetter(De,"kaleidoscopePower",2,Oe(),K.afterSetFilter);K.addGetterSetter(De,"kaleidoscopeAngle",0,Oe(),K.afterSetFilter);function yv(t,e,n){let i=(n*t.width+e)*4;const r=[];return r.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),r}function wg(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function zQ(t){const e=[0,0,0];for(let n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function jQ(t,e){const n=yv(t,0,0),i=yv(t,t.width-1,0),r=yv(t,0,t.height-1),s=yv(t,t.width-1,t.height-1),a=e||10;if(wg(n,i)<a&&wg(i,s)<a&&wg(s,r)<a&&wg(r,n)<a){const l=zQ([i,n,s,r]),c=[];for(let d=0;d<t.width*t.height;d++){const m=wg(l,[t.data[d*4],t.data[d*4+1],t.data[d*4+2]]);c[d]=m<a?0:255}return c}}function LQ(t,e){for(let n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function BQ(t,e,n){const i=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[];for(let l=0;l<n;l++)for(let c=0;c<e;c++){const d=l*e+c;let m=0;for(let g=0;g<r;g++)for(let v=0;v<r;v++){const x=l+g-s,S=c+v-s;if(x>=0&&x<n&&S>=0&&S<e){const T=x*e+S,k=i[g*r+v];m+=t[T]*k}}a[d]=m===2040?255:0}return a}function PQ(t,e,n){const i=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[];for(let l=0;l<n;l++)for(let c=0;c<e;c++){const d=l*e+c;let m=0;for(let g=0;g<r;g++)for(let v=0;v<r;v++){const x=l+g-s,S=c+v-s;if(x>=0&&x<n&&S>=0&&S<e){const T=x*e+S,k=i[g*r+v];m+=t[T]*k}}a[d]=m>=1020?255:0}return a}function IQ(t,e,n){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[];for(let l=0;l<n;l++)for(let c=0;c<e;c++){const d=l*e+c;let m=0;for(let g=0;g<r;g++)for(let v=0;v<r;v++){const x=l+g-s,S=c+v-s;if(x>=0&&x<n&&S>=0&&S<e){const T=x*e+S,k=i[g*r+v];m+=t[T]*k}}a[d]=m}return a}const HQ=function(t){const e=this.threshold();let n=jQ(t,e);return n&&(n=BQ(n,t.width,t.height),n=PQ(n,t.width,t.height),n=IQ(n,t.width,t.height),LQ(t,n)),t};K.addGetterSetter(De,"threshold",0,Oe(),K.afterSetFilter);const UQ=function(t){const e=this.noise()*255,n=t.data,i=n.length,r=e/2;for(let s=0;s<i;s+=4)n[s+0]+=r-2*r*Math.random(),n[s+1]+=r-2*r*Math.random(),n[s+2]+=r-2*r*Math.random()};K.addGetterSetter(De,"noise",.2,Oe(),K.afterSetFilter);const FQ=function(t){let e=Math.ceil(this.pixelSize()),n=t.width,i=t.height,r=Math.ceil(n/e),s=Math.ceil(i/e),a=t.data;if(e<=0){re.error("pixelSize value can not be <= 0");return}for(let l=0;l<r;l+=1)for(let c=0;c<s;c+=1){let d=0,m=0,g=0,v=0;const x=l*e,S=x+e,T=c*e,k=T+e;let A=0;for(let O=x;O<S;O+=1)if(!(O>=n))for(let z=T;z<k;z+=1){if(z>=i)continue;const L=(n*z+O)*4;d+=a[L+0],m+=a[L+1],g+=a[L+2],v+=a[L+3],A+=1}d=d/A,m=m/A,g=g/A,v=v/A;for(let O=x;O<S;O+=1)if(!(O>=n))for(let z=T;z<k;z+=1){if(z>=i)continue;const L=(n*z+O)*4;a[L+0]=d,a[L+1]=m,a[L+2]=g,a[L+3]=v}}};K.addGetterSetter(De,"pixelSize",8,Oe(),K.afterSetFilter);const GQ=function(t){const e=Math.round(this.levels()*254)+1,n=t.data,i=n.length,r=255/e;for(let s=0;s<i;s+=1)n[s]=Math.floor(n[s]/r)*r};K.addGetterSetter(De,"levels",.5,Oe(),K.afterSetFilter);const qQ=function(t){const e=t.data,n=e.length,i=this.red(),r=this.green(),s=this.blue();for(let a=0;a<n;a+=4){const l=(.34*e[a]+.5*e[a+1]+.16*e[a+2])/255;e[a]=l*i,e[a+1]=l*r,e[a+2]=l*s,e[a+3]=e[a+3]}};K.addGetterSetter(De,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});K.addGetterSetter(De,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});K.addGetterSetter(De,"blue",0,jN,K.afterSetFilter);const VQ=function(t){const e=t.data,n=e.length,i=this.red(),r=this.green(),s=this.blue(),a=this.alpha();for(let l=0;l<n;l+=4){const c=1-a;e[l]=i*a+e[l]*c,e[l+1]=r*a+e[l+1]*c,e[l+2]=s*a+e[l+2]*c}};K.addGetterSetter(De,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});K.addGetterSetter(De,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});K.addGetterSetter(De,"blue",0,jN,K.afterSetFilter);K.addGetterSetter(De,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});const YQ=function(t){const e=t.data,n=e.length;for(let i=0;i<n;i+=4){const r=e[i+0],s=e[i+1],a=e[i+2];e[i+0]=Math.min(255,r*.393+s*.769+a*.189),e[i+1]=Math.min(255,r*.349+s*.686+a*.168),e[i+2]=Math.min(255,r*.272+s*.534+a*.131)}},KQ=function(t){const n=t.data;for(let i=0;i<n.length;i+=4){const r=n[i],s=n[i+1],a=n[i+2];.2126*r+.7152*s+.0722*a>=128&&(n[i]=255-r,n[i+1]=255-s,n[i+2]=255-a)}return t},XQ=function(t){const e=this.threshold()*255,n=t.data,i=n.length;for(let r=0;r<i;r+=1)n[r]=n[r]<e?0:255};K.addGetterSetter(De,"threshold",.5,Oe(),K.afterSetFilter);Sp.Util._assign(Sp,{Arc:du,Arrow:Sd,Circle:Rp,Ellipse:qc,Image:na,Label:i3,Tag:Cd,Line:hu,Path:mn,Rect:q0,RegularPolygon:Vc,Ring:wd,Sprite:ul,Star:Yc,Text:kn,TextPath:Hi,Transformer:jt,Wedge:pu,Filters:{Blur:SQ,Brightness:wQ,Brighten:CQ,Contrast:EQ,Emboss:TQ,Enhance:_Q,Grayscale:kQ,HSL:MQ,HSV:AQ,Invert:NQ,Kaleidoscope:DQ,Mask:HQ,Noise:UQ,Pixelate:FQ,Posterize:GQ,RGB:qQ,RGBA:VQ,Sepia:YQ,Solarize:KQ,Threshold:XQ}});var PS={exports:{}},IS={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function QQ(){return j_||(j_=1,(function(t){t.exports=function(e){function n(f,h,b,C){return new dm(f,h,b,C)}function i(){}function r(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(f){var h=f,b=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,(h.flags&4098)!==0&&(b=h.return),f=h.return;while(f)}return h.tag===3?b:null}function a(f){if(s(f)!==f)throw Error(r(188))}function l(f){var h=f.alternate;if(!h){if(h=s(f),h===null)throw Error(r(188));return h!==f?null:f}for(var b=f,C=h;;){var M=b.return;if(M===null)break;var R=M.alternate;if(R===null){if(C=M.return,C!==null){b=C;continue}break}if(M.child===R.child){for(R=M.child;R;){if(R===b)return a(M),f;if(R===C)return a(M),h;R=R.sibling}throw Error(r(188))}if(b.return!==C.return)b=M,C=R;else{for(var P=!1,W=M.child;W;){if(W===b){P=!0,b=M,C=R;break}if(W===C){P=!0,C=M,b=R;break}W=W.sibling}if(!P){for(W=R.child;W;){if(W===b){P=!0,b=R,C=M;break}if(W===C){P=!0,C=R,b=M;break}W=W.sibling}if(!P)throw Error(r(189))}}if(b.alternate!==C)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?f:h}function c(f){var h=f.tag;if(h===5||h===26||h===27||h===6)return f;for(f=f.child;f!==null;){if(h=c(f),h!==null)return h;f=f.sibling}return null}function d(f){var h=f.tag;if(h===5||h===26||h===27||h===6)return f;for(f=f.child;f!==null;){if(f.tag!==4&&(h=d(f),h!==null))return h;f=f.sibling}return null}function m(f){return f===null||typeof f!="object"?null:(f=Za&&f[Za]||f["@@iterator"],typeof f=="function"?f:null)}function g(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===Lo?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case Al:return"Fragment";case Rl:return"Profiler";case Nl:return"StrictMode";case ch:return"Suspense";case Ja:return"SuspenseList";case Sf:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case Ml:return"Portal";case Cs:return f.displayName||"Context";case xf:return(f._context.displayName||"Context")+".Consumer";case Uu:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case fh:return h=f.displayName||null,h!==null?h:g(f.type)||"Memo";case lr:h=f._payload,f=f._init;try{return g(f(h))}catch{}}return null}function v(f){return{current:f}}function x(f){0>Ll||(f.current=Eh[Ll],Eh[Ll]=null,Ll--)}function S(f,h){Ll++,Eh[Ll]=f.current,f.current=h}function T(f){return f>>>=0,f===0?32:31-(Th(f)/v1|0)|0}function k(f){var h=f&42;if(h!==0)return h;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function A(f,h,b){var C=f.pendingLanes;if(C===0)return 0;var M=0,R=f.suspendedLanes,P=f.pingedLanes;f=f.warmLanes;var W=C&134217727;return W!==0?(C=W&~R,C!==0?M=k(C):(P&=W,P!==0?M=k(P):b||(b=W&~f,b!==0&&(M=k(b))))):(W=C&~R,W!==0?M=k(W):P!==0?M=k(P):b||(b=C&~f,b!==0&&(M=k(b)))),M===0?0:h!==0&&h!==M&&(h&R)===0&&(R=M&-M,b=h&-h,R>=b||R===32&&(b&4194048)!==0)?h:M}function O(f,h){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&h)===0}function z(f,h){switch(f){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L(){var f=Xu;return Xu<<=1,(Xu&62914560)===0&&(Xu=4194304),f}function I(f){for(var h=[],b=0;31>b;b++)h.push(f);return h}function j(f,h){f.pendingLanes|=h,h!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function B(f,h,b,C,M,R){var P=f.pendingLanes;f.pendingLanes=b,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=b,f.entangledLanes&=b,f.errorRecoveryDisabledLanes&=b,f.shellSuspendCounter=0;var W=f.entanglements,me=f.expirationTimes,Ce=f.hiddenUpdates;for(b=P&~b;0<b;){var Re=31-kr(b),we=1<<Re;W[Re]=0,me[Re]=-1;var Le=Ce[Re];if(Le!==null)for(Ce[Re]=null,Re=0;Re<Le.length;Re++){var at=Le[Re];at!==null&&(at.lane&=-536870913)}b&=~we}C!==0&&q(f,C,0),R!==0&&M===0&&f.tag!==0&&(f.suspendedLanes|=R&~(P&~h))}function q(f,h,b){f.pendingLanes|=h,f.suspendedLanes&=~h;var C=31-kr(h);f.entangledLanes|=h,f.entanglements[C]=f.entanglements[C]|1073741824|b&261930}function $(f,h){var b=f.entangledLanes|=h;for(f=f.entanglements;b;){var C=31-kr(b),M=1<<C;M&h|f[C]&h&&(f[C]|=h),b&=~M}}function G(f,h){var b=h&-h;return b=(b&42)!==0?1:X(b),(b&(f.suspendedLanes|h))!==0?0:b}function X(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function J(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function ce(f){if(typeof Jm=="function"&&S1(f),Mr&&typeof Mr.setStrictMode=="function")try{Mr.setStrictMode(Pl,f)}catch{}}function Z(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}function te(f){if(Rh===void 0)try{throw Error()}catch(b){var h=b.stack.trim().match(/\n( *(at )?)/);Rh=h&&h[1]||"",ba=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rh+f+ba}function V(f,h){if(!f||Nf)return"";Nf=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(h){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(at){var Le=at}Reflect.construct(f,[],we)}else{try{we.call()}catch(at){Le=at}f.call(we.prototype)}}else{try{throw Error()}catch(at){Le=at}(we=f())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(at){if(at&&Le&&typeof at.stack=="string")return[at.stack,Le.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=C.DetermineComponentFrameRoot(),P=R[0],W=R[1];if(P&&W){var me=P.split(`
`),Ce=W.split(`
`);for(M=C=0;C<me.length&&!me[C].includes("DetermineComponentFrameRoot");)C++;for(;M<Ce.length&&!Ce[M].includes("DetermineComponentFrameRoot");)M++;if(C===me.length||M===Ce.length)for(C=me.length-1,M=Ce.length-1;1<=C&&0<=M&&me[C]!==Ce[M];)M--;for(;1<=C&&0<=M;C--,M--)if(me[C]!==Ce[M]){if(C!==1||M!==1)do if(C--,M--,0>M||me[C]!==Ce[M]){var Re=`
`+me[C].replace(" at new "," at ");return f.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",f.displayName)),Re}while(1<=C&&0<=M);break}}}finally{Nf=!1,Error.prepareStackTrace=b}return(b=f?f.displayName||f.name:"")?te(b):""}function ae(f,h){switch(f.tag){case 26:case 27:case 5:return te(f.type);case 16:return te("Lazy");case 13:return f.child!==h&&h!==null?te("Suspense Fallback"):te("Suspense");case 19:return te("SuspenseList");case 0:case 15:return V(f.type,!1);case 11:return V(f.type.render,!1);case 1:return V(f.type,!0);case 31:return te("Activity");default:return""}}function oe(f){try{var h="",b=null;do h+=ae(f,b),b=f,f=f.return;while(f);return h}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}function he(f,h){if(typeof f=="object"&&f!==null){var b=Zm.get(f);return b!==void 0?b:(h={value:f,source:h,stack:oe(h)},Zm.set(f,h),h)}return{value:f,source:h,stack:oe(h)}}function F(f,h){to[xa++]=Rf,to[xa++]=Kt,Kt=f,Rf=h}function Y(f,h,b){Ts[Jr++]=Ri,Ts[Jr++]=Us,Ts[Jr++]=_s,_s=f;var C=Ri;f=Us;var M=32-kr(C)-1;C&=~(1<<M),b+=1;var R=32-kr(h)+M;if(30<R){var P=M-M%5;R=(C&(1<<P)-1).toString(32),C>>=P,M-=P,Ri=1<<32-kr(h)+M|b<<M|C,Us=R+f}else Ri=1<<R|b<<M|C,Us=f}function se(f){f.return!==null&&(F(f,1),Y(f,1,0))}function U(f){for(;f===Kt;)Kt=to[--xa],to[xa]=null,Rf=to[--xa],to[xa]=null;for(;f===_s;)_s=Ts[--Jr],Ts[Jr]=null,Us=Ts[--Jr],Ts[Jr]=null,Ri=Ts[--Jr],Ts[Jr]=null}function ke(f,h){Ts[Jr++]=Ri,Ts[Jr++]=Us,Ts[Jr++]=_s,Ri=h.id,Us=h.overflow,_s=f}function Pe(f,h){S(Oi,h),S(no,f),S(xi,null),f=zy(h),x(xi),S(xi,f)}function ze(){x(xi),x(no),x(Oi)}function Ie(f){f.memoizedState!==null&&S(Of,f);var h=xi.current,b=qu(h,f.type);h!==b&&(S(no,f),S(xi,b))}function ot(f){no.current===f&&(x(xi),x(no)),Of.current===f&&(x(Of),Fn?zl._currentValue=Dl:zl._currentValue2=Dl)}function et(f){var h=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ai(he(h,f)),Oh}function rt(f,h){if(!cn)throw Error(r(175));a1(f.stateNode,f.type,f.memoizedProps,h,f)||et(f,!0)}function mi(f){for(fi=f.return;fi;)switch(fi.tag){case 5:case 31:case 13:cr=!1;return;case 27:case 3:cr=!0;return;default:fi=fi.return}}function gn(f){if(!cn||f!==fi)return!1;if(!Et)return mi(f),Et=!0,!1;var h=f.tag;if(ci?h!==3&&h!==27&&(h!==5||Ku(f.type)&&!ur(f.type,f.memoizedProps))&&fn&&et(f):h!==3&&(h!==5||Ku(f.type)&&!ur(f.type,f.memoizedProps))&&fn&&et(f),mi(f),h===13){if(!cn)throw Error(r(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));fn=Hm(f)}else if(h===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));fn=l1(f)}else fn=ci&&h===27?Zy(f.type,fn):fi?Jy(f.stateNode):null;return!0}function Mn(){cn&&(fn=fi=null,Et=!1)}function In(){var f=Sa;return f!==null&&(Nr===null?Nr=f:Nr.push.apply(Nr,f),Sa=null),f}function Ai(f){Sa===null?Sa=[f]:Sa.push(f)}function Zn(f,h,b){Fn?(S(ks,h._currentValue),h._currentValue=b):(S(ks,h._currentValue2),h._currentValue2=b)}function er(f){var h=ks.current;Fn?f._currentValue=h:f._currentValue2=h,x(ks)}function Ha(f,h,b){for(;f!==null;){var C=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,C!==null&&(C.childLanes|=h)):C!==null&&(C.childLanes&h)!==h&&(C.childLanes|=h),f===b)break;f=f.return}}function fs(f,h,b,C){var M=f.child;for(M!==null&&(M.return=f);M!==null;){var R=M.dependencies;if(R!==null){var P=M.child;R=R.firstContext;e:for(;R!==null;){var W=R;R=M;for(var me=0;me<h.length;me++)if(W.context===h[me]){R.lanes|=b,W=R.alternate,W!==null&&(W.lanes|=b),Ha(R.return,b,f),C||(P=null);break e}R=W.next}}else if(M.tag===18){if(P=M.return,P===null)throw Error(r(341));P.lanes|=b,R=P.alternate,R!==null&&(R.lanes|=b),Ha(P,b,f),P=null}else P=M.child;if(P!==null)P.return=M;else for(P=M;P!==null;){if(P===f){P=null;break}if(M=P.sibling,M!==null){M.return=P.return,P=M;break}P=P.return}M=P}}function $n(f,h,b,C){f=null;for(var M=h,R=!1;M!==null;){if(!R){if((M.flags&524288)!==0)R=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var P=M.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var W=M.type;qn(M.pendingProps.value,P.value)||(f!==null?f.push(W):f=[W])}}else if(M===Of.current){if(P=M.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(f!==null?f.push(zl):f=[zl])}M=M.return}f!==null&&fs(h,f,b,C),h.flags|=262144}function Pr(f){for(f=f.firstContext;f!==null;){var h=f.context;if(!qn(Fn?h._currentValue:h._currentValue2,f.memoizedValue))return!0;f=f.next}return!1}function br(f){Zt=f,Fs=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function An(f){return gu(Zt,f)}function Hn(f,h){return Zt===null&&br(f),gu(f,h)}function gu(f,h){var b=Fn?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:b,next:null},Fs===null){if(f===null)throw Error(r(308));Fs=h,f.dependencies={lanes:0,firstContext:h},f.flags|=524288}else Fs=Fs.next=h;return b}function ye(){return{controller:new C1,data:new Map,refCount:0}}function _e(f){f.refCount--,f.refCount===0&&Si(l2,function(){f.controller.abort()})}function Ge(){}function Xe(f){f!==Ft&&f.next===null&&(Ft===null?Df=Ft=f:Ft=Ft.next=f),Ms=!0,Ki||(Ki=!0,It())}function vt(f,h){if(!Dh&&Ms){Dh=!0;do for(var b=!1,C=Df;C!==null;){if(f!==0){var M=C.pendingLanes;if(M===0)var R=0;else{var P=C.suspendedLanes,W=C.pingedLanes;R=(1<<31-kr(42|f)+1)-1,R&=M&~(P&~W),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(b=!0,li(C,R))}else R=Tt,R=A(C,C===mt?R:0,C.cancelPendingCommit!==null||C.timeoutHandle!==_r),(R&3)===0||O(C,R)||(b=!0,li(C,R));C=C.next}while(b);Dh=!1}}function yn(){Ir()}function Ir(){Ms=Ki=!1;var f=0;Uo!==0&&Ol()&&(f=Uo);for(var h=Yi(),b=null,C=Df;C!==null;){var M=C.next,R=gi(C,h);R===0?(C.next=null,b===null?Df=M:b.next=M,M===null&&(Ft=b)):(b=C,(f!==0||(R&3)!==0)&&(Ms=!0)),C=M}si!==0&&si!==5||vt(f),Uo!==0&&(Uo=0)}function gi(f,h){for(var b=f.suspendedLanes,C=f.pingedLanes,M=f.expirationTimes,R=f.pendingLanes&-62914561;0<R;){var P=31-kr(R),W=1<<P,me=M[P];me===-1?((W&b)===0||(W&C)!==0)&&(M[P]=z(W,h)):me<=h&&(f.expiredLanes|=W),R&=~W}if(h=mt,b=Tt,b=A(f,f===h?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==_r),C=f.callbackNode,b===0||f===h&&(qt===2||qt===9)||f.cancelPendingCommit!==null)return C!==null&&C!==null&&kh(C),f.callbackNode=null,f.callbackPriority=0;if((b&3)===0||O(f,b)){if(h=b&-b,h===f.callbackPriority)return h;switch(C!==null&&kh(C),J(b)){case 2:case 8:b=x1;break;case 32:b=Af;break;case 268435456:b=Ah;break;default:b=Af}return C=Nn.bind(null,f),b=Mf(b,C),f.callbackPriority=h,f.callbackNode=b,h}return C!==null&&C!==null&&kh(C),f.callbackPriority=2,f.callbackNode=null,2}function Nn(f,h){if(si!==0&&si!==5)return f.callbackNode=null,f.callbackPriority=0,null;var b=f.callbackNode;if(ga()&&f.callbackNode!==b)return null;var C=Tt;return C=A(f,f===mt?C:0,f.cancelPendingCommit!==null||f.timeoutHandle!==_r),C===0?null:(Hs(f,C,h),gi(f,Yi()),f.callbackNode!=null&&f.callbackNode===b?Nn.bind(null,f):null)}function li(f,h){if(ga())return null;Hs(f,h,!0)}function It(){Em?Tm(function(){(bt&6)!==0?Mf(Mh,yn):Ir()}):Mf(Mh,yn)}function ds(){if(Uo===0){var f=io;f===0&&(f=_h,_h<<=1,(_h&261888)===0&&(_h=256)),Uo=f}return Uo}function xr(f,h){if(Qu===null){var b=Qu=[];$m=0,io=ds(),di={status:"pending",value:void 0,then:function(C){b.push(C)}}}return $m++,h.then(kd,kd),h}function kd(){if(--$m===0&&Qu!==null){di!==null&&(di.status="fulfilled");var f=Qu;Qu=null,io=0,di=null;for(var h=0;h<f.length;h++)(0,f[h])()}}function yu(f,h){var b=[],C={status:"pending",value:null,reason:null,then:function(M){b.push(M)}};return f.then(function(){C.status="fulfilled",C.value=h;for(var M=0;M<b.length;M++)(0,b[M])(h)},function(M){for(C.status="rejected",C.reason=M,M=0;M<b.length;M++)(0,b[M])(void 0)}),C}function bo(){var f=Fo.current;return f!==null?f:mt.pooledCache}function on(f,h){h===null?S(Fo,Fo.current):S(Fo,h.pool)}function Rn(){var f=bo();return f===null?null:{parent:Fn?dn._currentValue:dn._currentValue2,pool:f}}function Un(f,h){if(qn(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var b=Object.keys(f),C=Object.keys(h);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var M=b[C];if(!o2.call(h,M)||!qn(f[M],h[M]))return!1}return!0}function tr(f){return f=f.status,f==="fulfilled"||f==="rejected"}function nr(f,h,b){switch(b=f[b],b===void 0?f.push(h):b!==h&&(h.then(Ge,Ge),h=b),h.status){case"fulfilled":return h.value;case"rejected":throw f=h.reason,Hr(f),f;default:if(typeof h.status=="string")h.then(Ge,Ge);else{if(f=mt,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=h,f.status="pending",f.then(function(C){if(h.status==="pending"){var M=h;M.status="fulfilled",M.value=C}},function(C){if(h.status==="pending"){var M=h;M.status="rejected",M.reason=C}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw f=h.reason,Hr(f),f}throw fr=h,hi}}function On(f){try{var h=f._init;return h(f._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(fr=b,hi):b}}function ir(){if(fr===null)throw Error(r(459));var f=fr;return fr=null,f}function Hr(f){if(f===hi||f===Ns)throw Error(r(483))}function Dn(f){var h=Il;return Il+=1,Go===null&&(Go=[]),nr(Go,f,h)}function rr(f,h){h=h.props.ref,f.ref=h!==void 0?h:null}function Ui(f,h){throw h.$$typeof===kl?Error(r(525)):(f=Object.prototype.toString.call(h),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f)))}function Ur(f){function h(fe,ie){if(f){var pe=fe.deletions;pe===null?(fe.deletions=[ie],fe.flags|=16):pe.push(ie)}}function b(fe,ie){if(!f)return null;for(;ie!==null;)h(fe,ie),ie=ie.sibling;return null}function C(fe){for(var ie=new Map;fe!==null;)fe.key!==null?ie.set(fe.key,fe):ie.set(fe.index,fe),fe=fe.sibling;return ie}function M(fe,ie){return fe=Qr(fe,ie),fe.index=0,fe.sibling=null,fe}function R(fe,ie,pe){return fe.index=pe,f?(pe=fe.alternate,pe!==null?(pe=pe.index,pe<ie?(fe.flags|=67108866,ie):pe):(fe.flags|=67108866,ie)):(fe.flags|=1048576,ie)}function P(fe){return f&&fe.alternate===null&&(fe.flags|=67108866),fe}function W(fe,ie,pe,Ae){return ie===null||ie.tag!==6?(ie=hm(pe,fe.mode,Ae),ie.return=fe,ie):(ie=M(ie,pe),ie.return=fe,ie)}function me(fe,ie,pe,Ae){var Qe=pe.type;return Qe===Al?Re(fe,ie,pe.props.children,Ae,pe.key):ie!==null&&(ie.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===lr&&On(Qe)===ie.type)?(ie=M(ie,pe.props),rr(ie,pe),ie.return=fe,ie):(ie=Wa(pe.type,pe.key,pe.props,null,fe.mode,Ae),rr(ie,pe),ie.return=fe,ie)}function Ce(fe,ie,pe,Ae){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==pe.containerInfo||ie.stateNode.implementation!==pe.implementation?(ie=mm(pe,fe.mode,Ae),ie.return=fe,ie):(ie=M(ie,pe.children||[]),ie.return=fe,ie)}function Re(fe,ie,pe,Ae,Qe){return ie===null||ie.tag!==7?(ie=Ss(pe,fe.mode,Ae,Qe),ie.return=fe,ie):(ie=M(ie,pe),ie.return=fe,ie)}function we(fe,ie,pe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=hm(""+ie,fe.mode,pe),ie.return=fe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case ya:return pe=Wa(ie.type,ie.key,ie.props,null,fe.mode,pe),rr(pe,ie),pe.return=fe,pe;case Ml:return ie=mm(ie,fe.mode,pe),ie.return=fe,ie;case lr:return ie=On(ie),we(fe,ie,pe)}if(Bo(ie)||m(ie))return ie=Ss(ie,fe.mode,pe,null),ie.return=fe,ie;if(typeof ie.then=="function")return we(fe,Dn(ie),pe);if(ie.$$typeof===Cs)return we(fe,Hn(fe,ie),pe);Ui(fe,ie)}return null}function Le(fe,ie,pe,Ae){var Qe=ie!==null?ie.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Qe!==null?null:W(fe,ie,""+pe,Ae);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case ya:return pe.key===Qe?me(fe,ie,pe,Ae):null;case Ml:return pe.key===Qe?Ce(fe,ie,pe,Ae):null;case lr:return pe=On(pe),Le(fe,ie,pe,Ae)}if(Bo(pe)||m(pe))return Qe!==null?null:Re(fe,ie,pe,Ae,null);if(typeof pe.then=="function")return Le(fe,ie,Dn(pe),Ae);if(pe.$$typeof===Cs)return Le(fe,ie,Hn(fe,pe),Ae);Ui(fe,pe)}return null}function at(fe,ie,pe,Ae,Qe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return fe=fe.get(pe)||null,W(ie,fe,""+Ae,Qe);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case ya:return fe=fe.get(Ae.key===null?pe:Ae.key)||null,me(ie,fe,Ae,Qe);case Ml:return fe=fe.get(Ae.key===null?pe:Ae.key)||null,Ce(ie,fe,Ae,Qe);case lr:return Ae=On(Ae),at(fe,ie,pe,Ae,Qe)}if(Bo(Ae)||m(Ae))return fe=fe.get(pe)||null,Re(ie,fe,Ae,Qe,null);if(typeof Ae.then=="function")return at(fe,ie,pe,Dn(Ae),Qe);if(Ae.$$typeof===Cs)return at(fe,ie,pe,Hn(ie,Ae),Qe);Ui(ie,Ae)}return null}function Ci(fe,ie,pe,Ae){for(var Qe=null,Tn=null,Je=ie,Rt=ie=0,wi=null;Je!==null&&Rt<pe.length;Rt++){Je.index>Rt?(wi=Je,Je=null):wi=Je.sibling;var Lt=Le(fe,Je,pe[Rt],Ae);if(Lt===null){Je===null&&(Je=wi);break}f&&Je&&Lt.alternate===null&&h(fe,Je),ie=R(Lt,ie,Rt),Tn===null?Qe=Lt:Tn.sibling=Lt,Tn=Lt,Je=wi}if(Rt===pe.length)return b(fe,Je),Et&&F(fe,Rt),Qe;if(Je===null){for(;Rt<pe.length;Rt++)Je=we(fe,pe[Rt],Ae),Je!==null&&(ie=R(Je,ie,Rt),Tn===null?Qe=Je:Tn.sibling=Je,Tn=Je);return Et&&F(fe,Rt),Qe}for(Je=C(Je);Rt<pe.length;Rt++)wi=at(Je,fe,Rt,pe[Rt],Ae),wi!==null&&(f&&wi.alternate!==null&&Je.delete(wi.key===null?Rt:wi.key),ie=R(wi,ie,Rt),Tn===null?Qe=wi:Tn.sibling=wi,Tn=wi);return f&&Je.forEach(function(Ds){return h(fe,Ds)}),Et&&F(fe,Rt),Qe}function ic(fe,ie,pe,Ae){if(pe==null)throw Error(r(151));for(var Qe=null,Tn=null,Je=ie,Rt=ie=0,wi=null,Lt=pe.next();Je!==null&&!Lt.done;Rt++,Lt=pe.next()){Je.index>Rt?(wi=Je,Je=null):wi=Je.sibling;var Ds=Le(fe,Je,Lt.value,Ae);if(Ds===null){Je===null&&(Je=wi);break}f&&Je&&Ds.alternate===null&&h(fe,Je),ie=R(Ds,ie,Rt),Tn===null?Qe=Ds:Tn.sibling=Ds,Tn=Ds,Je=wi}if(Lt.done)return b(fe,Je),Et&&F(fe,Rt),Qe;if(Je===null){for(;!Lt.done;Rt++,Lt=pe.next())Lt=we(fe,Lt.value,Ae),Lt!==null&&(ie=R(Lt,ie,Rt),Tn===null?Qe=Lt:Tn.sibling=Lt,Tn=Lt);return Et&&F(fe,Rt),Qe}for(Je=C(Je);!Lt.done;Rt++,Lt=pe.next())Lt=at(Je,fe,Rt,Lt.value,Ae),Lt!==null&&(f&&Lt.alternate!==null&&Je.delete(Lt.key===null?Rt:Lt.key),ie=R(Lt,ie,Rt),Tn===null?Qe=Lt:Tn.sibling=Lt,Tn=Lt);return f&&Je.forEach(function(u2){return h(fe,u2)}),Et&&F(fe,Rt),Qe}function Jo(fe,ie,pe,Ae){if(typeof pe=="object"&&pe!==null&&pe.type===Al&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case ya:e:{for(var Qe=pe.key;ie!==null;){if(ie.key===Qe){if(Qe=pe.type,Qe===Al){if(ie.tag===7){b(fe,ie.sibling),Ae=M(ie,pe.props.children),Ae.return=fe,fe=Ae;break e}}else if(ie.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===lr&&On(Qe)===ie.type){b(fe,ie.sibling),Ae=M(ie,pe.props),rr(Ae,pe),Ae.return=fe,fe=Ae;break e}b(fe,ie);break}else h(fe,ie);ie=ie.sibling}pe.type===Al?(Ae=Ss(pe.props.children,fe.mode,Ae,pe.key),Ae.return=fe,fe=Ae):(Ae=Wa(pe.type,pe.key,pe.props,null,fe.mode,Ae),rr(Ae,pe),Ae.return=fe,fe=Ae)}return P(fe);case Ml:e:{for(Qe=pe.key;ie!==null;){if(ie.key===Qe)if(ie.tag===4&&ie.stateNode.containerInfo===pe.containerInfo&&ie.stateNode.implementation===pe.implementation){b(fe,ie.sibling),Ae=M(ie,pe.children||[]),Ae.return=fe,fe=Ae;break e}else{b(fe,ie);break}else h(fe,ie);ie=ie.sibling}Ae=mm(pe,fe.mode,Ae),Ae.return=fe,fe=Ae}return P(fe);case lr:return pe=On(pe),Jo(fe,ie,pe,Ae)}if(Bo(pe))return Ci(fe,ie,pe,Ae);if(m(pe)){if(Qe=m(pe),typeof Qe!="function")throw Error(r(150));return pe=Qe.call(pe),ic(fe,ie,pe,Ae)}if(typeof pe.then=="function")return Jo(fe,ie,Dn(pe),Ae);if(pe.$$typeof===Cs)return Jo(fe,ie,Hn(fe,pe),Ae);Ui(fe,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,ie!==null&&ie.tag===6?(b(fe,ie.sibling),Ae=M(ie,pe),Ae.return=fe,fe=Ae):(b(fe,ie),Ae=hm(pe,fe.mode,Ae),Ae.return=fe,fe=Ae),P(fe)):b(fe,ie)}return function(fe,ie,pe,Ae){try{Il=0;var Qe=Jo(fe,ie,pe,Ae);return Go=null,Qe}catch(Je){if(Je===hi||Je===Ns)throw Je;var Tn=n(29,Je,null,fe.mode);return Tn.lanes=Ae,Tn.return=fe,Tn}finally{}}}function hs(){for(var f=wa,h=Hl=wa=0;h<f;){var b=zi[h];zi[h++]=null;var C=zi[h];zi[h++]=null;var M=zi[h];zi[h++]=null;var R=zi[h];if(zi[h++]=null,C!==null&&M!==null){var P=C.pending;P===null?M.next=M:(M.next=P.next,P.next=M),C.pending=M}R!==0&&Gr(b,M,R)}}function ps(f,h,b,C){zi[wa++]=f,zi[wa++]=h,zi[wa++]=b,zi[wa++]=C,Hl|=C,f.lanes|=C,f=f.alternate,f!==null&&(f.lanes|=C)}function Fr(f,h,b,C){return ps(f,h,b,C),ei(f)}function Sr(f,h){return ps(f,null,null,h),ei(f)}function Gr(f,h,b){f.lanes|=b;var C=f.alternate;C!==null&&(C.lanes|=b);for(var M=!1,R=f.return;R!==null;)R.childLanes|=b,C=R.alternate,C!==null&&(C.childLanes|=b),R.tag===22&&(f=R.stateNode,f===null||f._visibility&1||(M=!0)),f=R,R=R.return;return f.tag===3?(R=f.stateNode,M&&h!==null&&(M=31-kr(b),f=R.hiddenUpdates,C=f[M],C===null?f[M]=[h]:C.push(h),h.lane=b|536870912),R):null}function ei(f){if(50<Dt)throw Dt=0,If=null,Error(r(185));for(var h=f.return;h!==null;)f=h,h=f.return;return f.tag===3?f.stateNode:null}function Fi(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xo(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function ia(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function So(f,h,b){var C=f.updateQueue;if(C===null)return null;if(C=C.shared,(bt&2)!==0){var M=C.pending;return M===null?h.next=h:(h.next=M.next,M.next=h),C.pending=h,h=ei(f),Gr(f,null,b),h}return ps(f,C,h,b),ei(f)}function Wc(f,h,b){if(h=h.updateQueue,h!==null&&(h=h.shared,(b&4194048)!==0)){var C=h.lanes;C&=f.pendingLanes,b|=C,h.lanes=b,$(f,b)}}function Md(f,h){var b=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var M=null,R=null;if(b=b.firstBaseUpdate,b!==null){do{var P={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};R===null?M=R=P:R=R.next=P,b=b.next}while(b!==null);R===null?M=R=h:R=R.next=h}else M=R=h;b={baseState:C.baseState,firstBaseUpdate:M,lastBaseUpdate:R,shared:C.shared,callbacks:C.callbacks},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=h:f.next=h,b.lastBaseUpdate=h}function Ua(){if(jh){var f=di;if(f!==null)throw f}}function pl(f,h,b,C){jh=!1;var M=f.updateQueue;Zr=!1;var R=M.firstBaseUpdate,P=M.lastBaseUpdate,W=M.shared.pending;if(W!==null){M.shared.pending=null;var me=W,Ce=me.next;me.next=null,P===null?R=Ce:P.next=Ce,P=me;var Re=f.alternate;Re!==null&&(Re=Re.updateQueue,W=Re.lastBaseUpdate,W!==P&&(W===null?Re.firstBaseUpdate=Ce:W.next=Ce,Re.lastBaseUpdate=me))}if(R!==null){var we=M.baseState;P=0,Re=Ce=me=null,W=R;do{var Le=W.lane&-536870913,at=Le!==W.lane;if(at?(Tt&Le)===Le:(C&Le)===Le){Le!==0&&Le===io&&(jh=!0),Re!==null&&(Re=Re.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var Ci=f,ic=W;Le=h;var Jo=b;switch(ic.tag){case 1:if(Ci=ic.payload,typeof Ci=="function"){we=Ci.call(Jo,we,Le);break e}we=Ci;break e;case 3:Ci.flags=Ci.flags&-65537|128;case 0:if(Ci=ic.payload,Le=typeof Ci=="function"?Ci.call(Jo,we,Le):Ci,Le==null)break e;we=uh({},we,Le);break e;case 2:Zr=!0}}Le=W.callback,Le!==null&&(f.flags|=64,at&&(f.flags|=8192),at=M.callbacks,at===null?M.callbacks=[Le]:at.push(Le))}else at={lane:Le,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Re===null?(Ce=Re=at,me=we):Re=Re.next=at,P|=Le;if(W=W.next,W===null){if(W=M.shared.pending,W===null)break;at=W,W=at.next,at.next=null,M.lastBaseUpdate=at,M.shared.pending=null}}while(!0);Re===null&&(me=we),M.baseState=me,M.firstBaseUpdate=Ce,M.lastBaseUpdate=Re,R===null&&(M.shared.lanes=0),so|=P,f.lanes=P,f.memoizedState=we}}function ml(f,h){if(typeof f!="function")throw Error(r(191,f));f.call(h)}function gl(f,h){var b=f.callbacks;if(b!==null)for(f.callbacks=null,f=0;f<b.length;f++)ml(b[f],h)}function vu(f,h){f=Ta,S(qo,f),S(Ul,h),Ta=f|h.baseLanes}function Co(){S(qo,Ta),S(Ul,Ul.current)}function ti(){Ta=qo.current,x(Ul),x(qo)}function Fa(f){var h=f.alternate;S(jn,jn.current&1),S(Ar,f),dr===null&&(h===null||Ul.current!==null||h.memoizedState!==null)&&(dr=f)}function Ad(f){S(jn,jn.current),S(Ar,f),dr===null&&(dr=f)}function wo(f){f.tag===22?(S(jn,jn.current),S(Ar,f),dr===null&&(dr=f)):qr()}function qr(){S(jn,jn.current),S(Ar,Ar.current)}function Vr(f){x(Ar),dr===f&&(dr=null),x(jn)}function Jc(f){for(var h=f;h!==null;){if(h.tag===13){var b=h.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||Io(b)||yh(b)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function vn(){throw Error(r(321))}function Pp(f,h){if(h===null)return!1;for(var b=0;b<h.length&&b<f.length;b++)if(!qn(f[b],h[b]))return!1;return!0}function bu(f,h,b,C,M,R){return ro=R,ut=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ve.H=f===null||f.memoizedState===null?Cn:Ea,Mt=!1,R=b(C,M),Mt=!1,ft&&(R=ra(h,b,C,M)),Zc(f),R}function Zc(f){Ve.H=$r;var h=qe!==null&&qe.next!==null;if(ro=0,it=qe=ut=null,pt=!1,Rs=0,Gs=null,h)throw Error(r(300));f===null||tn||(f=f.dependencies,f!==null&&Pr(f)&&(tn=!0))}function ra(f,h,b,C){ut=f;var M=0;do{if(ft&&(Gs=null),Rs=0,ft=!1,25<=M)throw Error(r(301));if(M+=1,it=qe=null,f.updateQueue!=null){var R=f.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}Ve.H=Vo,R=h(b,C)}while(ft);return R}function ms(){var f=Ve.H,h=f.useState()[0];return h=typeof h.then=="function"?qi(h):h,f=f.useState()[0],(qe!==null?qe.memoizedState:null)!==f&&(ut.flags|=1024),h}function Nd(){var f=Xi!==0;return Xi=0,f}function Ip(f,h,b){h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~b}function $c(f){if(pt){for(f=f.memoizedState;f!==null;){var h=f.queue;h!==null&&(h.pending=null),f=f.next}pt=!1}ro=0,it=qe=ut=null,ft=!1,Rs=Xi=0,Gs=null}function Gi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ut.memoizedState=it=f:it=it.next=f,it}function ln(){if(qe===null){var f=ut.alternate;f=f!==null?f.memoizedState:null}else f=qe.next;var h=it===null?ut.memoizedState:it.next;if(h!==null)it=h,qe=f;else{if(f===null)throw ut.alternate===null?Error(r(467)):Error(r(310));qe=f,f={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},it===null?ut.memoizedState=it=f:it=it.next=f}return it}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qi(f){var h=Rs;return Rs+=1,Gs===null&&(Gs=[]),f=nr(Gs,f,h),h=ut,(it===null?h.memoizedState:it.next)===null&&(h=h.alternate,Ve.H=h===null||h.memoizedState===null?Cn:Ea),f}function xu(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return qi(f);if(f.$$typeof===Cs)return An(f)}throw Error(r(438,String(f)))}function Od(f){var h=null,b=ut.updateQueue;if(b!==null&&(h=b.memoCache),h==null){var C=ut.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(h={data:C.data.map(function(M){return M.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),b===null&&(b=Rd(),ut.updateQueue=b),b.memoCache=h,b=h.data[h.index],b===void 0)for(b=h.data[h.index]=Array(f),C=0;C<f;C++)b[C]=ym;return h.index++,b}function Is(f,h){return typeof h=="function"?h(f):h}function Ga(f){var h=ln();return Dd(h,qe,f)}function Dd(f,h,b){var C=f.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=b;var M=f.baseQueue,R=C.pending;if(R!==null){if(M!==null){var P=M.next;M.next=R.next,R.next=P}h.baseQueue=M=R,C.pending=null}if(R=f.baseState,M===null)f.memoizedState=R;else{h=M.next;var W=P=null,me=null,Ce=h,Re=!1;do{var we=Ce.lane&-536870913;if(we!==Ce.lane?(Tt&we)===we:(ro&we)===we){var Le=Ce.revertLane;if(Le===0)me!==null&&(me=me.next={lane:0,revertLane:0,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),we===io&&(Re=!0);else if((ro&Le)===Le){Ce=Ce.next,Le===io&&(Re=!0);continue}else we={lane:0,revertLane:Ce.revertLane,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},me===null?(W=me=we,P=R):me=me.next=we,ut.lanes|=Le,so|=Le;we=Ce.action,Mt&&b(R,we),R=Ce.hasEagerState?Ce.eagerState:b(R,we)}else Le={lane:we,revertLane:Ce.revertLane,gesture:Ce.gesture,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},me===null?(W=me=Le,P=R):me=me.next=Le,ut.lanes|=we,so|=we;Ce=Ce.next}while(Ce!==null&&Ce!==h);if(me===null?P=R:me.next=W,!qn(R,f.memoizedState)&&(tn=!0,Re&&(b=di,b!==null)))throw b;f.memoizedState=R,f.baseState=P,f.baseQueue=me,C.lastRenderedState=R}return M===null&&(C.lanes=0),[f.memoizedState,C.dispatch]}function zd(f){var h=ln(),b=h.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=f;var C=b.dispatch,M=b.pending,R=h.memoizedState;if(M!==null){b.pending=null;var P=M=M.next;do R=f(R,P.action),P=P.next;while(P!==M);qn(R,h.memoizedState)||(tn=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),b.lastRenderedState=R}return[R,C]}function yl(f,h,b){var C=ut,M=ln(),R=Et;if(R){if(b===void 0)throw Error(r(407));b=b()}else b=h();var P=!qn((qe||M).memoizedState,b);if(P&&(M.memoizedState=b,tn=!0),M=M.queue,wu(Up.bind(null,C,M,f),[f]),M.getSnapshot!==h||P||it!==null&&it.memoizedState.tag&1){if(C.flags|=2048,Yr(9,{destroy:void 0},Hp.bind(null,C,M,b,h),null),mt===null)throw Error(r(349));R||(ro&127)!==0||ty(C,h,b)}return b}function ty(f,h,b){f.flags|=16384,f={getSnapshot:h,value:b},h=ut.updateQueue,h===null?(h=Rd(),ut.updateQueue=h,h.stores=[f]):(b=h.stores,b===null?h.stores=[f]:b.push(f))}function Hp(f,h,b,C){h.value=b,h.getSnapshot=C,jd(h)&&ny(f)}function Up(f,h,b){return b(function(){jd(h)&&ny(f)})}function jd(f){var h=f.getSnapshot;f=f.value;try{var b=h();return!qn(f,b)}catch{return!0}}function ny(f){var h=Sr(f,2);h!==null&&xn(h,f,2)}function Fp(f){var h=Gi();if(typeof f=="function"){var b=f;if(f=b(),Mt){ce(!0);try{b()}finally{ce(!1)}}}return h.memoizedState=h.baseState=f,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:f},h}function ef(f,h,b,C){return f.baseState=b,Dd(f,qe,typeof C=="function"?C:Is)}function qa(f,h,b,C,M){if(Gd(f))throw Error(r(485));if(f=h.action,f!==null){var R={payload:M,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){R.listeners.push(P)}};Ve.T!==null?b(!0):R.isTransition=!1,C(R),b=h.pending,b===null?(R.next=h.pending=R,Ld(h,R)):(R.next=b.next,h.pending=b.next=R)}}function Ld(f,h){var b=h.action,C=h.payload,M=f.state;if(h.isTransition){var R=Ve.T,P={};Ve.T=P;try{var W=b(M,C),me=Ve.S;me!==null&&me(P,W),Bd(f,h,W)}catch(Ce){Eo(f,h,Ce)}finally{R!==null&&P.types!==null&&(R.types=P.types),Ve.T=R}}else try{R=b(M,C),Bd(f,h,R)}catch(Ce){Eo(f,h,Ce)}}function Bd(f,h,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(C){vl(f,h,C)},function(C){return Eo(f,h,C)}):vl(f,h,b)}function vl(f,h,b){h.status="fulfilled",h.value=b,Gp(h),f.state=b,h=f.pending,h!==null&&(b=h.next,b===h?f.pending=null:(b=b.next,h.next=b,Ld(f,b)))}function Eo(f,h,b){var C=f.pending;if(f.pending=null,C!==null){C=C.next;do h.status="rejected",h.reason=b,Gp(h),h=h.next;while(h!==C)}f.action=null}function Gp(f){f=f.listeners;for(var h=0;h<f.length;h++)(0,f[h])()}function Pd(f,h){return h}function qp(f,h){if(Et){var b=mt.formState;if(b!==null){e:{var C=ut;if(Et){if(fn){var M=Wy(fn,cr);if(M){fn=Jy(M),C=Lm(M);break e}}et(C)}C=!1}C&&(h=b[0])}}b=Gi(),b.memoizedState=b.baseState=h,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pd,lastRenderedState:h},b.queue=C,b=ly.bind(null,ut,C),C.dispatch=b,C=Fp(!1);var R=Fd.bind(null,ut,!1,C.queue);return C=Gi(),M={state:h,dispatch:null,action:f,pending:null},C.queue=M,b=qa.bind(null,ut,M,R,b),M.dispatch=b,C.memoizedState=f,[h,b,!1]}function Su(f){var h=ln();return sa(h,qe,f)}function sa(f,h,b){if(h=Dd(f,h,Pd)[0],f=Ga(Is)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var C=qi(h)}catch(P){throw P===hi?Ns:P}else C=h;h=ln();var M=h.queue,R=M.dispatch;return b!==h.memoizedState&&(ut.flags|=2048,Yr(9,{destroy:void 0},Vp.bind(null,M,b),null)),[C,R,f]}function Vp(f,h){f.action=h}function Cu(f){var h=ln(),b=qe;if(b!==null)return sa(h,b,f);ln(),h=h.memoizedState,b=ln();var C=b.queue.dispatch;return b.memoizedState=f,[h,C,!1]}function Yr(f,h,b,C){return f={tag:f,create:b,deps:C,inst:h,next:null},h=ut.updateQueue,h===null&&(h=Rd(),ut.updateQueue=h),b=h.lastEffect,b===null?h.lastEffect=f.next=f:(C=b.next,b.next=f,f.next=C,h.lastEffect=f),f}function Id(){return ln().memoizedState}function bl(f,h,b,C){var M=Gi();ut.flags|=f,M.memoizedState=Yr(1|h,{destroy:void 0},b,C===void 0?null:C)}function tf(f,h,b,C){var M=ln();C=C===void 0?null:C;var R=M.memoizedState.inst;qe!==null&&C!==null&&Pp(C,qe.memoizedState.deps)?M.memoizedState=Yr(h,R,b,C):(ut.flags|=f,M.memoizedState=Yr(1|h,R,b,C))}function nf(f,h){bl(8390656,8,f,h)}function wu(f,h){tf(2048,8,f,h)}function iy(f){ut.flags|=4;var h=ut.updateQueue;if(h===null)h=Rd(),ut.updateQueue=h,h.events=[f];else{var b=h.events;b===null?h.events=[f]:b.push(f)}}function sr(f){var h=ln().memoizedState;return iy({ref:h,nextImpl:f}),function(){if((bt&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}function To(f,h){return tf(4,2,f,h)}function rf(f,h){return tf(4,4,f,h)}function Eu(f,h){if(typeof h=="function"){f=f();var b=h(f);return function(){typeof b=="function"?b():h(null)}}if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function ry(f,h,b){b=b!=null?b.concat([f]):null,tf(4,4,Eu.bind(null,h,f),b)}function sf(){}function Hd(f,h){var b=ln();h=h===void 0?null:h;var C=b.memoizedState;return h!==null&&Pp(h,C[1])?C[0]:(b.memoizedState=[f,h],f)}function Tu(f,h){var b=ln();h=h===void 0?null:h;var C=b.memoizedState;if(h!==null&&Pp(h,C[1]))return C[0];if(C=f(),Mt){ce(!0);try{f()}finally{ce(!1)}}return b.memoizedState=[C,h],C}function _u(f,h,b){return b===void 0||(ro&1073741824)!==0&&(Tt&261930)===0?f.memoizedState=h:(f.memoizedState=b,f=Ka(),ut.lanes|=f,so|=f,b)}function Yp(f,h,b,C){return qn(b,h)?b:Ul.current!==null?(f=_u(f,b,C),qn(f,h)||(tn=!0),f):(ro&42)===0||(ro&1073741824)!==0&&(Tt&261930)===0?(tn=!0,f.memoizedState=b):(f=Ka(),ut.lanes|=f,so|=f,h)}function sy(f,h,b,C,M){var R=ws();wt(R!==0&&8>R?R:8);var P=Ve.T,W={};Ve.T=W,Fd(f,!1,h,b);try{var me=M(),Ce=Ve.S;if(Ce!==null&&Ce(W,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var Re=yu(me,C);af(f,h,Re,un(f))}else af(f,h,C,un(f))}catch(we){af(f,h,{then:function(){},status:"rejected",reason:we},un())}finally{wt(R),P!==null&&W.types!==null&&(P.types=W.types),Ve.T=P}}function ay(f){var h=f.memoizedState;if(h!==null)return h;h={memoizedState:Dl,baseState:Dl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:Dl},next:null};var b={};return h.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:b},next:null},f.memoizedState=h,f=f.alternate,f!==null&&(f.memoizedState=h),h}function Kp(){return An(zl)}function Ud(){return ln().memoizedState}function oy(){return ln().memoizedState}function Jx(f){for(var h=f.return;h!==null;){switch(h.tag){case 24:case 3:var b=un();f=ia(b);var C=So(h,f,b);C!==null&&(xn(C,h,b),Wc(C,h,b)),h={cache:ye()},f.payload=h;return}h=h.return}}function Zx(f,h,b){var C=un();b={lane:C,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Gd(f)?uy(h,b):(b=Fr(f,h,b,C),b!==null&&(xn(b,f,C),cy(b,h,C)))}function ly(f,h,b){var C=un();af(f,h,b,C)}function af(f,h,b,C){var M={lane:C,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(Gd(f))uy(h,M);else{var R=f.alternate;if(f.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var P=h.lastRenderedState,W=R(P,b);if(M.hasEagerState=!0,M.eagerState=W,qn(W,P))return ps(f,h,M,0),mt===null&&hs(),!1}catch{}finally{}if(b=Fr(f,h,M,C),b!==null)return xn(b,f,C),cy(b,h,C),!0}return!1}function Fd(f,h,b,C){if(C={lane:2,revertLane:ds(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},Gd(f)){if(h)throw Error(r(479))}else h=Fr(f,b,C,2),h!==null&&xn(h,f,2)}function Gd(f){var h=f.alternate;return f===ut||h!==null&&h===ut}function uy(f,h){ft=pt=!0;var b=f.pending;b===null?h.next=h:(h.next=b.next,b.next=h),f.pending=h}function cy(f,h,b){if((b&4194048)!==0){var C=h.lanes;C&=f.pendingLanes,b|=C,h.lanes=b,$(f,b)}}function Xp(f,h,b,C){h=f.memoizedState,b=b(C,h),b=b==null?h:uh({},h,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}function qd(f,h,b,C,M,R,P){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,R,P):h.prototype&&h.prototype.isPureReactComponent?!Un(b,C)||!Un(M,R):!0}function fy(f,h,b,C){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(b,C),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(b,C),h.state!==f&&zf.enqueueReplaceState(h,h.state,null)}function xl(f,h){var b=h;if("ref"in h){b={};for(var C in h)C!=="ref"&&(b[C]=h[C])}if(f=f.defaultProps){b===h&&(b=uh({},b));for(var M in f)b[M]===void 0&&(b[M]=f[M])}return b}function Vd(f,h){try{var b=f.onUncaughtError;b(h.value,{componentStack:h.stack})}catch(C){setTimeout(function(){throw C})}}function Qp(f,h,b){try{var C=f.onCaughtError;C(b.value,{componentStack:b.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function Wp(f,h,b){return b=ia(b),b.tag=3,b.payload={element:null},b.callback=function(){Vd(f,h)},b}function dy(f){return f=ia(f),f.tag=3,f}function hy(f,h,b,C){var M=b.type.getDerivedStateFromError;if(typeof M=="function"){var R=C.value;f.payload=function(){return M(R)},f.callback=function(){Qp(h,b,C)}}var P=b.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(f.callback=function(){Qp(h,b,C),typeof M!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var W=C.stack;this.componentDidCatch(C.value,{componentStack:W!==null?W:""})})}function $x(f,h,b,C,M){if(b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(h=b.alternate,h!==null&&$n(h,b,M,!0),b=Ar.current,b!==null){switch(b.tag){case 31:case 13:return dr===null?Bu():b.alternate===null&&En===0&&(En=3),b.flags&=-257,b.flags|=65536,b.lanes=M,C===Ca?b.flags|=16384:(h=b.updateQueue,h===null?b.updateQueue=new Set([C]):h.add(C),Hu(f,C,M)),!1;case 22:return b.flags|=65536,C===Ca?b.flags|=16384:(h=b.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([C])},b.updateQueue=h):(b=h.retryQueue,b===null?h.retryQueue=new Set([C]):b.add(C)),Hu(f,C,M)),!1}throw Error(r(435,b.tag))}return Hu(f,C,M),Bu(),!1}if(Et)return h=Ar.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=M,C!==Oh&&(f=Error(r(422),{cause:C}),Ai(he(f,b)))):(C!==Oh&&(h=Error(r(423),{cause:C}),Ai(he(h,b))),f=f.current.alternate,f.flags|=65536,M&=-M,f.lanes|=M,C=he(C,b),M=Wp(f.stateNode,C,M),Md(f,M),En!==4&&(En=2)),!1;var R=Error(r(520),{cause:C});if(R=he(R,b),Lf===null?Lf=[R]:Lf.push(R),En!==4&&(En=2),h===null)return!0;C=he(C,b),b=h;do{switch(b.tag){case 3:return b.flags|=65536,f=M&-M,b.lanes|=f,f=Wp(b.stateNode,C,f),Md(b,f),!1;case 1:if(h=b.type,R=b.stateNode,(b.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(ao===null||!ao.has(R))))return b.flags|=65536,M&=-M,b.lanes|=M,M=dy(M),hy(M,f,b,C),Md(b,M),!1}b=b.return}while(b!==null);return!1}function Ni(f,h,b,C){h.child=f===null?eg(h,null,b,C):Di(h,f.child,b,C)}function py(f,h,b,C,M){b=b.render;var R=h.ref;if("ref"in C){var P={};for(var W in C)W!=="ref"&&(P[W]=C[W])}else P=C;return br(h),C=bu(f,h,b,P,R,M),W=Nd(),f!==null&&!tn?(Ip(f,h,M),aa(f,h,M)):(Et&&W&&se(h),h.flags|=1,Ni(f,h,C,M),h.child)}function my(f,h,b,C,M){if(f===null){var R=b.type;return typeof R=="function"&&!Tl(R)&&R.defaultProps===void 0&&b.compare===null?(h.tag=15,h.type=R,gy(f,h,R,C,M)):(f=Wa(b.type,null,C,h,h.mode,M),f.ref=h.ref,f.return=h,h.child=f)}if(R=f.child,!lf(f,M)){var P=R.memoizedProps;if(b=b.compare,b=b!==null?b:Un,b(P,C)&&f.ref===h.ref)return aa(f,h,M)}return h.flags|=1,f=Qr(R,C),f.ref=h.ref,f.return=h,h.child=f}function gy(f,h,b,C,M){if(f!==null){var R=f.memoizedProps;if(Un(R,C)&&f.ref===h.ref)if(tn=!1,h.pendingProps=C=R,lf(f,M))(f.flags&131072)!==0&&(tn=!0);else return h.lanes=f.lanes,aa(f,h,M)}return Kd(f,h,b,C,M)}function yy(f,h,b,C){var M=C.children,R=f!==null?f.memoizedState:null;if(f===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((h.flags&128)!==0){if(R=R!==null?R.baseLanes|b:b,f!==null){for(C=h.child=f.child,M=0;C!==null;)M=M|C.lanes|C.childLanes,C=C.sibling;C=M&~R}else C=0,h.child=null;return ku(f,h,R,b,C)}if((b&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},f!==null&&on(h,R!==null?R.cachePool:null),R!==null?vu(h,R):Co(),wo(h);else return C=h.lanes=536870912,ku(f,h,R!==null?R.baseLanes|b:b,b,C)}else R!==null?(on(h,R.cachePool),vu(h,R),qr(),h.memoizedState=null):(f!==null&&on(h,null),Co(),qr());return Ni(f,h,M,b),h.child}function Sl(f,h){return f!==null&&f.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function ku(f,h,b,C,M){var R=bo();return R=R===null?null:{parent:Fn?dn._currentValue:dn._currentValue2,pool:R},h.memoizedState={baseLanes:b,cachePool:R},f!==null&&on(h,null),Co(),wo(h),f!==null&&$n(f,h,C,!0),h.childLanes=M,null}function Yd(f,h){return h=_o({mode:h.mode,children:h.children},f.mode),h.ref=f.ref,f.child=h,h.return=f,h}function Jp(f,h,b){return Di(h,f.child,null,b),f=Yd(h,h.pendingProps),f.flags|=2,Vr(h),h.memoizedState=null,f}function vy(f,h,b){var C=h.pendingProps,M=(h.flags&128)!==0;if(h.flags&=-129,f===null){if(Et){if(C.mode==="hidden")return f=Yd(h,C),h.lanes=536870912,Sl(null,f);if(Ad(h),(f=fn)?(f=Pm(f,cr),f!==null&&(h.memoizedState={dehydrated:f,treeContext:_s!==null?{id:Ri,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},b=pm(f),b.return=h,h.child=b,fi=h,fn=null)):f=null,f===null)throw et(h);return h.lanes=536870912,null}return Yd(h,C)}var R=f.memoizedState;if(R!==null){var P=R.dehydrated;if(Ad(h),M)if(h.flags&256)h.flags&=-257,h=Jp(f,h,b);else if(h.memoizedState!==null)h.child=f.child,h.flags|=128,h=null;else throw Error(r(558));else if(tn||$n(f,h,b,!1),M=(b&f.childLanes)!==0,tn||M){if(C=mt,C!==null&&(P=G(C,b),P!==0&&P!==R.retryLane))throw R.retryLane=P,Sr(f,P),xn(C,f,P),hr;Bu(),h=Jp(f,h,b)}else f=R.treeContext,cn&&(fn=t1(P),fi=h,Et=!0,Sa=null,cr=!1,f!==null&&ke(h,f)),h=Yd(h,C),h.flags|=4096;return h}return f=Qr(f.child,{mode:C.mode,children:C.children}),f.ref=h.ref,h.child=f,f.return=h,f}function of(f,h){var b=h.ref;if(b===null)f!==null&&f.ref!==null&&(h.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(f===null||f.ref!==b)&&(h.flags|=4194816)}}function Kd(f,h,b,C,M){return br(h),b=bu(f,h,b,C,void 0,M),C=Nd(),f!==null&&!tn?(Ip(f,h,M),aa(f,h,M)):(Et&&C&&se(h),h.flags|=1,Ni(f,h,b,M),h.child)}function Zp(f,h,b,C,M,R){return br(h),h.updateQueue=null,b=ra(h,C,b,M),Zc(f),C=Nd(),f!==null&&!tn?(Ip(f,h,R),aa(f,h,R)):(Et&&C&&se(h),h.flags|=1,Ni(f,h,b,R),h.child)}function Cl(f,h,b,C,M){if(br(h),h.stateNode===null){var R=va,P=b.contextType;typeof P=="object"&&P!==null&&(R=An(P)),R=new b(C,R),h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=zf,h.stateNode=R,R._reactInternals=h,R=h.stateNode,R.props=C,R.state=h.memoizedState,R.refs={},Fi(h),P=b.contextType,R.context=typeof P=="object"&&P!==null?An(P):va,R.state=h.memoizedState,P=b.getDerivedStateFromProps,typeof P=="function"&&(Xp(h,b,P,C),R.state=h.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(P=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),P!==R.state&&zf.enqueueReplaceState(R,R.state,null),pl(h,C,R,M),Ua(),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308),C=!0}else if(f===null){R=h.stateNode;var W=h.memoizedProps,me=xl(b,W);R.props=me;var Ce=R.context,Re=b.contextType;P=va,typeof Re=="object"&&Re!==null&&(P=An(Re));var we=b.getDerivedStateFromProps;Re=typeof we=="function"||typeof R.getSnapshotBeforeUpdate=="function",W=h.pendingProps!==W,Re||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(W||Ce!==P)&&fy(h,R,C,P),Zr=!1;var Le=h.memoizedState;R.state=Le,pl(h,C,R,M),Ua(),Ce=h.memoizedState,W||Le!==Ce||Zr?(typeof we=="function"&&(Xp(h,b,we,C),Ce=h.memoizedState),(me=Zr||qd(h,b,me,C,Le,Ce,P))?(Re||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(h.flags|=4194308)):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=C,h.memoizedState=Ce),R.props=C,R.state=Ce,R.context=P,C=me):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),C=!1)}else{R=h.stateNode,xo(f,h),P=h.memoizedProps,Re=xl(b,P),R.props=Re,we=h.pendingProps,Le=R.context,Ce=b.contextType,me=va,typeof Ce=="object"&&Ce!==null&&(me=An(Ce)),W=b.getDerivedStateFromProps,(Ce=typeof W=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(P!==we||Le!==me)&&fy(h,R,C,me),Zr=!1,Le=h.memoizedState,R.state=Le,pl(h,C,R,M),Ua();var at=h.memoizedState;P!==we||Le!==at||Zr||f!==null&&f.dependencies!==null&&Pr(f.dependencies)?(typeof W=="function"&&(Xp(h,b,W,C),at=h.memoizedState),(Re=Zr||qd(h,b,Re,C,Le,at,me)||f!==null&&f.dependencies!==null&&Pr(f.dependencies))?(Ce||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(C,at,me),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(C,at,me)),typeof R.componentDidUpdate=="function"&&(h.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof R.componentDidUpdate!="function"||P===f.memoizedProps&&Le===f.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||P===f.memoizedProps&&Le===f.memoizedState||(h.flags|=1024),h.memoizedProps=C,h.memoizedState=at),R.props=C,R.state=at,R.context=me,C=Re):(typeof R.componentDidUpdate!="function"||P===f.memoizedProps&&Le===f.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||P===f.memoizedProps&&Le===f.memoizedState||(h.flags|=1024),C=!1)}return R=C,of(f,h),C=(h.flags&128)!==0,R||C?(R=h.stateNode,b=C&&typeof b.getDerivedStateFromError!="function"?null:R.render(),h.flags|=1,f!==null&&C?(h.child=Di(h,f.child,null,M),h.child=Di(h,null,b,M)):Ni(f,h,b,M),h.memoizedState=R.state,f=h.child):f=aa(f,h,M),f}function by(f,h,b,C){return Mn(),h.flags|=256,Ni(f,h,b,C),h.child}function $p(f){return{baseLanes:f,cachePool:Rn()}}function em(f,h,b){return f=f!==null?f.childLanes&~b:0,h&&(f|=pr),f}function tm(f,h,b){var C=h.pendingProps,M=!1,R=(h.flags&128)!==0,P;if((P=R)||(P=f!==null&&f.memoizedState===null?!1:(jn.current&2)!==0),P&&(M=!0,h.flags&=-129),P=(h.flags&32)!==0,h.flags&=-33,f===null){if(Et){if(M?Fa(h):qr(),(f=fn)?(f=s1(f,cr),f!==null&&(h.memoizedState={dehydrated:f,treeContext:_s!==null?{id:Ri,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},b=pm(f),b.return=h,h.child=b,fi=h,fn=null)):f=null,f===null)throw et(h);return yh(f)?h.lanes=32:h.lanes=536870912,null}var W=C.children;return C=C.fallback,M?(qr(),M=h.mode,W=_o({mode:"hidden",children:W},M),C=Ss(C,M,b,null),W.return=h,C.return=h,W.sibling=C,h.child=W,C=h.child,C.memoizedState=$p(b),C.childLanes=em(f,P,b),h.memoizedState=Fl,Sl(null,C)):(Fa(h),Xd(h,W))}var me=f.memoizedState;if(me!==null&&(W=me.dehydrated,W!==null)){if(R)h.flags&256?(Fa(h),h.flags&=-257,h=wl(f,h,b)):h.memoizedState!==null?(qr(),h.child=f.child,h.flags|=128,h=null):(qr(),W=C.fallback,M=h.mode,C=_o({mode:"visible",children:C.children},M),W=Ss(W,M,b,null),W.flags|=2,C.return=h,W.return=h,C.sibling=W,h.child=C,Di(h,f.child,null,b),C=h.child,C.memoizedState=$p(b),C.childLanes=em(f,P,b),h.memoizedState=Fl,h=Sl(null,C));else if(Fa(h),yh(W))P=vh(W).digest,C=Error(r(419)),C.stack="",C.digest=P,Ai({value:C,source:null,stack:null}),h=wl(f,h,b);else if(tn||$n(f,h,b,!1),P=(b&f.childLanes)!==0,tn||P){if(P=mt,P!==null&&(C=G(P,b),C!==0&&C!==me.retryLane))throw me.retryLane=C,Sr(f,C),xn(P,f,C),hr;Io(W)||Bu(),h=wl(f,h,b)}else Io(W)?(h.flags|=192,h.child=f.child,h=null):(f=me.treeContext,cn&&(fn=n1(W),fi=h,Et=!0,Sa=null,cr=!1,f!==null&&ke(h,f)),h=Xd(h,C.children),h.flags|=4096);return h}return M?(qr(),W=C.fallback,M=h.mode,me=f.child,R=me.sibling,C=Qr(me,{mode:"hidden",children:C.children}),C.subtreeFlags=me.subtreeFlags&65011712,R!==null?W=Qr(R,W):(W=Ss(W,M,b,null),W.flags|=2),W.return=h,C.return=h,C.sibling=W,h.child=C,Sl(null,C),C=h.child,W=f.child.memoizedState,W===null?W=$p(b):(M=W.cachePool,M!==null?(me=Fn?dn._currentValue:dn._currentValue2,M=M.parent!==me?{parent:me,pool:me}:M):M=Rn(),W={baseLanes:W.baseLanes|b,cachePool:M}),C.memoizedState=W,C.childLanes=em(f,P,b),h.memoizedState=Fl,Sl(f.child,C)):(Fa(h),b=f.child,f=b.sibling,b=Qr(b,{mode:"visible",children:C.children}),b.return=h,b.sibling=null,f!==null&&(P=h.deletions,P===null?(h.deletions=[f],h.flags|=16):P.push(f)),h.child=b,h.memoizedState=null,b)}function Xd(f,h){return h=_o({mode:"visible",children:h},f.mode),h.return=f,f.child=h}function _o(f,h){return f=n(22,f,null,h),f.lanes=0,f}function wl(f,h,b){return Di(h,f.child,null,b),f=Xd(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function xy(f,h,b){f.lanes|=h;var C=f.alternate;C!==null&&(C.lanes|=h),Ha(f.return,h,b)}function Mu(f,h,b,C,M,R){var P=f.memoizedState;P===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:M,treeForkCount:R}:(P.isBackwards=h,P.rendering=null,P.renderingStartTime=0,P.last=C,P.tail=b,P.tailMode=M,P.treeForkCount=R)}function nm(f,h,b){var C=h.pendingProps,M=C.revealOrder,R=C.tail;C=C.children;var P=jn.current,W=(P&2)!==0;if(W?(P=P&1|2,h.flags|=128):P&=1,S(jn,P),Ni(f,h,C,b),C=Et?Rf:0,!W&&f!==null&&(f.flags&128)!==0)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&xy(f,b,h);else if(f.tag===19)xy(f,b,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(M){case"forwards":for(b=h.child,M=null;b!==null;)f=b.alternate,f!==null&&Jc(f)===null&&(M=b),b=b.sibling;b=M,b===null?(M=h.child,h.child=null):(M=b.sibling,b.sibling=null),Mu(h,!1,M,b,R,C);break;case"backwards":case"unstable_legacy-backwards":for(b=null,M=h.child,h.child=null;M!==null;){if(f=M.alternate,f!==null&&Jc(f)===null){h.child=M;break}f=M.sibling,M.sibling=b,b=M,M=f}Mu(h,!0,b,null,R,C);break;case"together":Mu(h,!1,null,null,void 0,C);break;default:h.memoizedState=null}return h.child}function aa(f,h,b){if(f!==null&&(h.dependencies=f.dependencies),so|=h.lanes,(b&h.childLanes)===0)if(f!==null){if($n(f,h,b,!1),(b&h.childLanes)===0)return null}else return null;if(f!==null&&h.child!==f.child)throw Error(r(153));if(h.child!==null){for(f=h.child,b=Qr(f,f.pendingProps),h.child=b,b.return=h;f.sibling!==null;)f=f.sibling,b=b.sibling=Qr(f,f.pendingProps),b.return=h;b.sibling=null}return h.child}function lf(f,h){return(f.lanes&h)!==0?!0:(f=f.dependencies,!!(f!==null&&Pr(f)))}function im(f,h,b){switch(h.tag){case 3:Pe(h,h.stateNode.containerInfo),Zn(h,dn,f.memoizedState.cache),Mn();break;case 27:case 5:Ie(h);break;case 4:Pe(h,h.stateNode.containerInfo);break;case 10:Zn(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,Ad(h),null;break;case 13:var C=h.memoizedState;if(C!==null)return C.dehydrated!==null?(Fa(h),h.flags|=128,null):(b&h.child.childLanes)!==0?tm(f,h,b):(Fa(h),f=aa(f,h,b),f!==null?f.sibling:null);Fa(h);break;case 19:var M=(f.flags&128)!==0;if(C=(b&h.childLanes)!==0,C||($n(f,h,b,!1),C=(b&h.childLanes)!==0),M){if(C)return nm(f,h,b);h.flags|=128}if(M=h.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),S(jn,jn.current),C)break;return null;case 22:return h.lanes=0,yy(f,h,b,h.pendingProps);case 24:Zn(h,dn,f.memoizedState.cache)}return aa(f,h,b)}function rm(f,h,b){if(f!==null)if(f.memoizedProps!==h.pendingProps)tn=!0;else{if(!lf(f,b)&&(h.flags&128)===0)return tn=!1,im(f,h,b);tn=(f.flags&131072)!==0}else tn=!1,Et&&(h.flags&1048576)!==0&&Y(h,Rf,h.index);switch(h.lanes=0,h.tag){case 16:e:{var C=h.pendingProps;if(f=On(h.elementType),h.type=f,typeof f=="function")Tl(f)?(C=xl(f,C),h.tag=1,h=Cl(null,h,f,C,b)):(h.tag=0,h=Kd(null,h,f,C,b));else{if(f!=null){var M=f.$$typeof;if(M===Uu){h.tag=11,h=py(null,h,f,C,b);break e}else if(M===fh){h.tag=14,h=my(null,h,f,C,b);break e}}throw h=g(f)||f,Error(r(306,h,""))}}return h;case 0:return Kd(f,h,h.type,h.pendingProps,b);case 1:return C=h.type,M=xl(C,h.pendingProps),Cl(f,h,C,M,b);case 3:e:{if(Pe(h,h.stateNode.containerInfo),f===null)throw Error(r(387));var R=h.pendingProps;M=h.memoizedState,C=M.element,xo(f,h),pl(h,R,null,b);var P=h.memoizedState;if(R=P.cache,Zn(h,dn,R),R!==M.cache&&fs(h,[dn],b,!0),Ua(),R=P.element,cn&&M.isDehydrated)if(M={element:R,isDehydrated:!1,cache:P.cache},h.updateQueue.baseState=M,h.memoizedState=M,h.flags&256){h=by(f,h,R,b);break e}else if(R!==C){C=he(Error(r(424)),h),Ai(C),h=by(f,h,R,b);break e}else for(cn&&(fn=e1(h.stateNode.containerInfo),fi=h,Et=!0,Sa=null,cr=!0),b=eg(h,null,R,b),h.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Mn(),R===C){h=aa(f,h,b);break e}Ni(f,h,R,b)}h=h.child}return h;case 26:if(Es)return of(f,h),f===null?(b=Gm(h.type,null,h.pendingProps,null))?h.memoizedState=b:Et||(h.stateNode=Ch(h.type,h.pendingProps,Oi.current,h)):h.memoizedState=Gm(h.type,f.memoizedProps,h.pendingProps,f.memoizedState),null;case 27:if(ci)return Ie(h),f===null&&ci&&Et&&(C=h.stateNode=wh(h.type,h.pendingProps,Oi.current,xi.current,!1),fi=h,cr=!0,fn=Bm(h.type,C,fn)),Ni(f,h,h.pendingProps.children,b),of(f,h),f===null&&(h.flags|=4194304),h.child;case 5:return f===null&&Et&&(p1(h.type,h.pendingProps,xi.current),(M=C=fn)&&(C=i1(C,h.type,h.pendingProps,cr),C!==null?(h.stateNode=C,fi=h,fn=$y(C),cr=!1,M=!0):M=!1),M||et(h)),Ie(h),M=h.type,R=h.pendingProps,P=f!==null?f.memoizedProps:null,C=R.children,ur(M,R)?C=null:P!==null&&ur(M,P)&&(h.flags|=32),h.memoizedState!==null&&(M=bu(f,h,ms,null,null,b),Fn?zl._currentValue=M:zl._currentValue2=M),of(f,h),Ni(f,h,C,b),h.child;case 6:return f===null&&Et&&(Fm(h.pendingProps,xi.current),(f=b=fn)&&(b=r1(b,h.pendingProps,cr),b!==null?(h.stateNode=b,fi=h,fn=null,f=!0):f=!1),f||et(h)),null;case 13:return tm(f,h,b);case 4:return Pe(h,h.stateNode.containerInfo),C=h.pendingProps,f===null?h.child=Di(h,null,C,b):Ni(f,h,C,b),h.child;case 11:return py(f,h,h.type,h.pendingProps,b);case 7:return Ni(f,h,h.pendingProps,b),h.child;case 8:return Ni(f,h,h.pendingProps.children,b),h.child;case 12:return Ni(f,h,h.pendingProps.children,b),h.child;case 10:return C=h.pendingProps,Zn(h,h.type,C.value),Ni(f,h,C.children,b),h.child;case 9:return M=h.type._context,C=h.pendingProps.children,br(h),M=An(M),C=C(M),h.flags|=1,Ni(f,h,C,b),h.child;case 14:return my(f,h,h.type,h.pendingProps,b);case 15:return gy(f,h,h.type,h.pendingProps,b);case 19:return nm(f,h,b);case 31:return vy(f,h,b);case 22:return yy(f,h,b,h.pendingProps);case 24:return br(h),C=An(dn),f===null?(M=bo(),M===null&&(M=mt,R=ye(),M.pooledCache=R,R.refCount++,R!==null&&(M.pooledCacheLanes|=b),M=R),h.memoizedState={parent:C,cache:M},Fi(h),Zn(h,dn,M)):((f.lanes&b)!==0&&(xo(f,h),pl(h,null,null,b),Ua()),M=f.memoizedState,R=h.memoizedState,M.parent!==C?(M={parent:C,cache:C},h.memoizedState=M,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=M),Zn(h,dn,C)):(C=R.cache,Zn(h,dn,C),C!==M.cache&&fs(h,[dn],b,!0))),Ni(f,h,h.pendingProps.children,b),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function gs(f){f.flags|=4}function uf(f){Wr&&(f.flags|=8)}function Sy(f,h){if(f!==null&&f.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(f=h.child;f!==null;){if((f.flags&8218)!==0||(f.subtreeFlags&8218)!==0)return!0;f=f.sibling}return!1}function sm(f,h,b,C){if(kt)for(b=h.child;b!==null;){if(b.tag===5||b.tag===6)wf(f,b.stateNode);else if(!(b.tag===4||ci&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(Wr)for(var M=h.child;M!==null;){if(M.tag===5){var R=M.stateNode;b&&C&&(R=Qy(R,M.type,M.memoizedProps)),wf(f,R)}else if(M.tag===6)R=M.stateNode,b&&C&&(R=jm(R,M.memoizedProps)),wf(f,R);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)R=M.child,R!==null&&(R.return=M),sm(f,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}}function Cy(f,h,b,C){var M=!1;if(Wr)for(var R=h.child;R!==null;){if(R.tag===5){var P=R.stateNode;b&&C&&(P=Qy(P,R.type,R.memoizedProps)),Dm(f,P)}else if(R.tag===6)P=R.stateNode,b&&C&&(P=jm(P,R.memoizedProps)),Dm(f,P);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)M=R.child,M!==null&&(M.return=R),Cy(f,R,!0,!0),M=!0;else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return M;R=R.return}R.sibling.return=R.return,R=R.sibling}return M}function wy(f,h){if(Wr&&Sy(f,h)){f=h.stateNode;var b=f.containerInfo,C=Om();Cy(C,h,!1,!1),f.pendingChildren=C,gs(h),Xy(b,C)}}function am(f,h,b,C){if(kt)f.memoizedProps!==C&&gs(h);else if(Wr){var M=f.stateNode,R=f.memoizedProps;if((f=Sy(f,h))||R!==C){var P=xi.current;R=Ky(M,b,R,C,!f,null),R===M?h.stateNode=M:(uf(h),Tr(R,b,C,P)&&gs(h),h.stateNode=R,f&&sm(R,h,!1,!1))}else h.stateNode=M}}function ar(f,h,b,C,M){if((f.mode&32)!==0&&(b===null?Ef(h,C):Yu(h,b,C))){if(f.flags|=16777216,(M&335544128)===M||Sm(h,C))if(Sn(f.stateNode,h,C))f.flags|=8192;else if(_t())f.flags|=8192;else throw fr=Ca,zh}else f.flags&=-16777217}function Au(f,h){if(Km(h)){if(f.flags|=16777216,!Xm(h))if(_t())f.flags|=8192;else throw fr=Ca,zh}else f.flags&=-16777217}function cf(f,h){h!==null&&(f.flags|=4),f.flags&16384&&(h=f.tag!==22?L():536870912,f.lanes|=h,tc|=h)}function Nu(f,h){if(!Et)switch(f.tailMode){case"hidden":h=f.tail;for(var b=null;h!==null;)h.alternate!==null&&(b=h),h=h.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function Wt(f){var h=f.alternate!==null&&f.alternate.child===f.child,b=0,C=0;if(h)for(var M=f.child;M!==null;)b|=M.lanes|M.childLanes,C|=M.subtreeFlags&65011712,C|=M.flags&65011712,M.return=f,M=M.sibling;else for(M=f.child;M!==null;)b|=M.lanes|M.childLanes,C|=M.subtreeFlags,C|=M.flags,M.return=f,M=M.sibling;return f.subtreeFlags|=C,f.childLanes=b,h}function Ey(f,h,b){var C=h.pendingProps;switch(U(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(h),null;case 1:return Wt(h),null;case 3:return b=h.stateNode,C=null,f!==null&&(C=f.memoizedState.cache),h.memoizedState.cache!==C&&(h.flags|=2048),er(dn),ze(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(gn(h)?gs(h):f===null||f.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,In())),wy(f,h),Wt(h),null;case 26:if(Es){var M=h.type,R=h.memoizedState;return f===null?(gs(h),R!==null?(Wt(h),Au(h,R)):(Wt(h),ar(h,M,null,C,b))):R?R!==f.memoizedState?(gs(h),Wt(h),Au(h,R)):(Wt(h),h.flags&=-16777217):(R=f.memoizedProps,kt?R!==C&&gs(h):am(f,h,M,C),Wt(h),ar(h,M,R,C,b)),null}case 27:if(ci){if(ot(h),b=Oi.current,M=h.type,f!==null&&h.stateNode!=null)kt?f.memoizedProps!==C&&gs(h):am(f,h,M,C);else{if(!C){if(h.stateNode===null)throw Error(r(166));return Wt(h),null}f=xi.current,gn(h)?rt(h,f):(f=wh(M,C,b,f,!0),h.stateNode=f,gs(h))}return Wt(h),null}case 5:if(ot(h),M=h.type,f!==null&&h.stateNode!=null)am(f,h,M,C);else{if(!C){if(h.stateNode===null)throw Error(r(166));return Wt(h),null}if(R=xi.current,gn(h))rt(h,R),f1(h.stateNode,M,C,R)&&(h.flags|=64);else{var P=bm(M,C,Oi.current,R,h);uf(h),sm(P,h,!1,!1),h.stateNode=P,Tr(P,M,C,R)&&gs(h)}}return Wt(h),ar(h,h.type,f===null?null:f.memoizedProps,h.pendingProps,b),null;case 6:if(f&&h.stateNode!=null)b=f.memoizedProps,kt?b!==C&&gs(h):Wr&&(b!==C?(f=Oi.current,b=xi.current,uf(h),h.stateNode=$a(C,f,b,h)):h.stateNode=f.stateNode);else{if(typeof C!="string"&&h.stateNode===null)throw Error(r(166));if(f=Oi.current,b=xi.current,gn(h)){if(!cn)throw Error(r(176));if(f=h.stateNode,b=h.memoizedProps,C=null,M=fi,M!==null)switch(M.tag){case 27:case 5:C=M.memoizedProps}r2(f,b,h,C)||et(h,!0)}else uf(h),h.stateNode=$a(C,f,b,h)}return Wt(h),null;case 31:if(b=h.memoizedState,f===null||f.memoizedState!==null){if(C=gn(h),b!==null){if(f===null){if(!C)throw Error(r(318));if(!cn)throw Error(r(556));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(557));Im(f,h)}else Mn(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Wt(h),f=!1}else b=In(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=b),f=!0;if(!f)return h.flags&256?(Vr(h),h):(Vr(h),null);if((h.flags&128)!==0)throw Error(r(558))}return Wt(h),null;case 13:if(C=h.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(M=gn(h),C!==null&&C.dehydrated!==null){if(f===null){if(!M)throw Error(r(318));if(!cn)throw Error(r(344));if(M=h.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(r(317));o1(M,h)}else Mn(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Wt(h),M=!1}else M=In(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=M),M=!0;if(!M)return h.flags&256?(Vr(h),h):(Vr(h),null)}return Vr(h),(h.flags&128)!==0?(h.lanes=b,h):(b=C!==null,f=f!==null&&f.memoizedState!==null,b&&(C=h.child,M=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(M=C.alternate.memoizedState.cachePool.pool),R=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(R=C.memoizedState.cachePool.pool),R!==M&&(C.flags|=2048)),b!==f&&b&&(h.child.flags|=8192),cf(h,h.updateQueue),Wt(h),null);case 4:return ze(),wy(f,h),f===null&&Yt(h.stateNode.containerInfo),Wt(h),null;case 10:return er(h.type),Wt(h),null;case 19:if(x(jn),C=h.memoizedState,C===null)return Wt(h),null;if(M=(h.flags&128)!==0,R=C.rendering,R===null)if(M)Nu(C,!1);else{if(En!==0||f!==null&&(f.flags&128)!==0)for(f=h.child;f!==null;){if(R=Jc(f),R!==null){for(h.flags|=128,Nu(C,!1),f=R.updateQueue,h.updateQueue=f,cf(h,f),h.subtreeFlags=0,f=b,b=h.child;b!==null;)ah(b,f),b=b.sibling;return S(jn,jn.current&1|2),Et&&F(h,C.treeForkCount),h.child}f=f.sibling}C.tail!==null&&Yi()>Wo&&(h.flags|=128,M=!0,Nu(C,!1),h.lanes=4194304)}else{if(!M)if(f=Jc(R),f!==null){if(h.flags|=128,M=!0,f=f.updateQueue,h.updateQueue=f,cf(h,f),Nu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!R.alternate&&!Et)return Wt(h),null}else 2*Yi()-C.renderingStartTime>Wo&&b!==536870912&&(h.flags|=128,M=!0,Nu(C,!1),h.lanes=4194304);C.isBackwards?(R.sibling=h.child,h.child=R):(f=C.last,f!==null?f.sibling=R:h.child=R,C.last=R)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=Yi(),f.sibling=null,b=jn.current,S(jn,M?b&1|2:b&1),Et&&F(h,C.treeForkCount),f):(Wt(h),null);case 22:case 23:return Vr(h),ti(),C=h.memoizedState!==null,f!==null?f.memoizedState!==null!==C&&(h.flags|=8192):C&&(h.flags|=8192),C?(b&536870912)!==0&&(h.flags&128)===0&&(Wt(h),h.subtreeFlags&6&&(h.flags|=8192)):Wt(h),b=h.updateQueue,b!==null&&cf(h,b.retryQueue),b=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),C=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(C=h.memoizedState.cachePool.pool),C!==b&&(h.flags|=2048),f!==null&&x(Fo),null;case 24:return b=null,f!==null&&(b=f.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),er(dn),Wt(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function om(f,h){switch(U(h),h.tag){case 1:return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return er(dn),ze(),f=h.flags,(f&65536)!==0&&(f&128)===0?(h.flags=f&-65537|128,h):null;case 26:case 27:case 5:return ot(h),null;case 31:if(h.memoizedState!==null){if(Vr(h),h.alternate===null)throw Error(r(340));Mn()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 13:if(Vr(h),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Mn()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return x(jn),null;case 4:return ze(),null;case 10:return er(h.type),null;case 22:case 23:return Vr(h),ti(),f!==null&&x(Fo),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 24:return er(dn),null;case 25:return null;default:return null}}function Ty(f,h){switch(U(h),h.tag){case 3:er(dn),ze();break;case 26:case 27:case 5:ot(h);break;case 4:ze();break;case 31:h.memoizedState!==null&&Vr(h);break;case 13:Vr(h);break;case 19:x(jn);break;case 10:er(h.type);break;case 22:case 23:Vr(h),ti(),f!==null&&x(Fo);break;case 24:er(dn)}}function oa(f,h){try{var b=h.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var M=C.next;b=M;do{if((b.tag&f)===f){C=void 0;var R=b.create,P=b.inst;C=R(),P.destroy=C}b=b.next}while(b!==M)}}catch(W){tt(h,h.return,W)}}function la(f,h,b){try{var C=h.updateQueue,M=C!==null?C.lastEffect:null;if(M!==null){var R=M.next;C=R;do{if((C.tag&f)===f){var P=C.inst,W=P.destroy;if(W!==void 0){P.destroy=void 0,M=h;var me=b,Ce=W;try{Ce()}catch(Re){tt(M,me,Re)}}}C=C.next}while(C!==R)}}catch(Re){tt(h,h.return,Re)}}function Ru(f){var h=f.updateQueue;if(h!==null){var b=f.stateNode;try{gl(h,b)}catch(C){tt(f,f.return,C)}}}function Qd(f,h,b){b.props=xl(f.type,f.memoizedProps),b.state=f.memoizedState;try{b.componentWillUnmount()}catch(C){tt(f,h,C)}}function Ou(f,h){try{var b=f.ref;if(b!==null){switch(f.tag){case 26:case 27:case 5:var C=Gu(f.stateNode);break;case 30:C=f.stateNode;break;default:C=f.stateNode}typeof b=="function"?f.refCleanup=b(C):b.current=C}}catch(M){tt(f,h,M)}}function Vi(f,h){var b=f.ref,C=f.refCleanup;if(b!==null)if(typeof C=="function")try{C()}catch(M){tt(f,h,M)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(M){tt(f,h,M)}else b.current=null}function El(f){var h=f.type,b=f.memoizedProps,C=f.stateNode;try{Iy(C,h,b,f)}catch(M){tt(f,f.return,M)}}function ff(f,h,b){try{Hy(f.stateNode,f.type,b,h,f)}catch(C){tt(f,f.return,C)}}function lm(f){return f.tag===5||f.tag===3||(Es?f.tag===26:!1)||(ci?f.tag===27&&jl(f.type):!1)||f.tag===4}function Va(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||lm(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(ci&&f.tag===27&&jl(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Wd(f,h,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,h?Fy(b,f,h):Mm(b,f);else if(C!==4&&(ci&&C===27&&jl(f.type)&&(b=f.stateNode,h=null),f=f.child,f!==null))for(Wd(f,h,b),f=f.sibling;f!==null;)Wd(f,h,b),f=f.sibling}function df(f,h,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,h?Uy(b,f,h):km(b,f);else if(C!==4&&(ci&&C===27&&jl(f.type)&&(b=f.stateNode),f=f.child,f!==null))for(df(f,h,b),f=f.sibling;f!==null;)df(f,h,b),f=f.sibling}function um(f,h,b){f=f.containerInfo;try{zm(f,b)}catch(C){tt(h,h.return,C)}}function _y(f){var h=f.stateNode,b=f.memoizedProps;try{ii(f.type,b,h,f)}catch(C){tt(f,f.return,C)}}function e2(f,h){for(dh(f.containerInfo),Vn=h;Vn!==null;)if(f=Vn,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,Vn=h;else for(;Vn!==null;){f=Vn;var b=f.alternate;switch(h=f.flags,f.tag){case 0:if((h&4)!==0&&(h=f.updateQueue,h=h!==null?h.events:null,h!==null))for(var C=0;C<h.length;C++){var M=h[C];M.ref.impl=M.nextImpl}break;case 11:case 15:break;case 1:if((h&1024)!==0&&b!==null){h=void 0,C=f,M=b.memoizedProps,b=b.memoizedState;var R=C.stateNode;try{var P=xl(C.type,M);h=R.getSnapshotBeforeUpdate(P,b),R.__reactInternalSnapshotBeforeUpdate=h}catch(W){tt(C,C.return,W)}}break;case 3:(h&1024)!==0&&kt&&Rm(f.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(r(163))}if(h=f.sibling,h!==null){h.return=f.return,Vn=h;break}Vn=f.return}}function ky(f,h,b){var C=b.flags;switch(b.tag){case 0:case 11:case 15:or(f,b),C&4&&oa(5,b);break;case 1:if(or(f,b),C&4)if(f=b.stateNode,h===null)try{f.componentDidMount()}catch(P){tt(b,b.return,P)}else{var M=xl(b.type,h.memoizedProps);h=h.memoizedState;try{f.componentDidUpdate(M,h,f.__reactInternalSnapshotBeforeUpdate)}catch(P){tt(b,b.return,P)}}C&64&&Ru(b),C&512&&Ou(b,b.return);break;case 3:if(or(f,b),C&64&&(C=b.updateQueue,C!==null)){if(f=null,b.child!==null)switch(b.child.tag){case 27:case 5:f=Gu(b.child.stateNode);break;case 1:f=b.child.stateNode}try{gl(C,f)}catch(P){tt(b,b.return,P)}}break;case 27:ci&&h===null&&C&4&&_y(b);case 26:case 5:if(or(f,b),h===null){if(C&4)El(b);else if(C&64){f=b.type,h=b.memoizedProps,M=b.stateNode;try{u1(M,f,h,b)}catch(P){tt(b,b.return,P)}}}C&512&&Ou(b,b.return);break;case 12:or(f,b);break;case 31:or(f,b),C&4&&vs(f,b);break;case 13:or(f,b),C&4&&pf(f,b),C&64&&(C=b.memoizedState,C!==null&&(C=C.dehydrated,C!==null&&(b=t2.bind(null,b),bh(C,b))));break;case 22:if(C=b.memoizedState!==null||Ln,!C){h=h!==null&&h.memoizedState!==null||Bn,M=Ln;var R=Bn;Ln=C,(Bn=h)&&!R?xs(f,b,(b.subtreeFlags&8772)!==0):or(f,b),Ln=M,Bn=R}break;case 30:break;default:or(f,b)}}function cm(f){var h=f.alternate;h!==null&&(f.alternate=null,cm(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&hh(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function ys(f,h,b){for(b=b.child;b!==null;)hf(f,h,b),b=b.sibling}function hf(f,h,b){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(Pl,b)}catch{}switch(b.tag){case 26:if(Es){Bn||Vi(b,h),ys(f,h,b),b.memoizedState?Ho(b.memoizedState):b.stateNode&&Ym(b.stateNode);break}case 27:if(ci){Bn||Vi(b,h);var C=wn,M=Yn;jl(b.type)&&(wn=b.stateNode,Yn=!1),ys(f,h,b),bi(b.stateNode),wn=C,Yn=M;break}case 5:Bn||Vi(b,h);case 6:if(kt){if(C=wn,M=Yn,wn=null,ys(f,h,b),wn=C,Yn=M,wn!==null)if(Yn)try{Am(wn,b.stateNode)}catch(R){tt(b,h,R)}else try{Gy(wn,b.stateNode)}catch(R){tt(b,h,R)}}else ys(f,h,b);break;case 18:kt&&wn!==null&&(Yn?xh(wn,b.stateNode):Um(wn,b.stateNode));break;case 4:kt?(C=wn,M=Yn,wn=b.stateNode.containerInfo,Yn=!0,ys(f,h,b),wn=C,Yn=M):(Wr&&um(b.stateNode,b,Om()),ys(f,h,b));break;case 0:case 11:case 14:case 15:la(2,b,h),Bn||la(4,b,h),ys(f,h,b);break;case 1:Bn||(Vi(b,h),C=b.stateNode,typeof C.componentWillUnmount=="function"&&Qd(b,h,C)),ys(f,h,b);break;case 21:ys(f,h,b);break;case 22:Bn=(C=Bn)||b.memoizedState!==null,ys(f,h,b),Bn=C;break;default:ys(f,h,b)}}function vs(f,h){if(cn&&h.memoizedState===null&&(f=h.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{s2(f)}catch(b){tt(h,h.return,b)}}}function pf(f,h){if(cn&&h.memoizedState===null&&(f=h.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{a2(f)}catch(b){tt(h,h.return,b)}}function bs(f){switch(f.tag){case 31:case 13:case 19:var h=f.stateNode;return h===null&&(h=f.stateNode=new ng),h;case 22:return f=f.stateNode,h=f._retryCache,h===null&&(h=f._retryCache=new ng),h;default:throw Error(r(435,f.tag))}}function Ya(f,h){var b=bs(f);h.forEach(function(C){if(!b.has(C)){b.add(C);var M=n2.bind(null,f,C);C.then(M,M)}})}function yi(f,h){var b=h.deletions;if(b!==null)for(var C=0;C<b.length;C++){var M=b[C],R=f,P=h;if(kt){var W=P;e:for(;W!==null;){switch(W.tag){case 27:if(ci){if(jl(W.type)){wn=W.stateNode,Yn=!1;break e}break}case 5:wn=W.stateNode,Yn=!1;break e;case 3:case 4:wn=W.stateNode.containerInfo,Yn=!0;break e}W=W.return}if(wn===null)throw Error(r(160));hf(R,P,M),wn=null,Yn=!1}else hf(R,P,M);R=M.alternate,R!==null&&(R.return=null),M.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)mf(h,f),h=h.sibling}function mf(f,h){var b=f.alternate,C=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:yi(h,f),vi(f),C&4&&(la(3,f,f.return),oa(3,f),la(5,f,f.return));break;case 1:yi(h,f),vi(f),C&512&&(Bn||b===null||Vi(b,b.return)),C&64&&Ln&&(f=f.updateQueue,f!==null&&(C=f.callbacks,C!==null&&(b=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=b===null?C:b.concat(C))));break;case 26:if(Es){var M=Gt;if(yi(h,f),vi(f),C&512&&(Bn||b===null||Vi(b,b.return)),C&4){C=b!==null?b.memoizedState:null;var R=f.memoizedState;b===null?R===null?f.stateNode===null?f.stateNode=m1(M,f.type,f.memoizedProps,f):Vm(M,f.type,f.stateNode):f.stateNode=qm(M,R,f.memoizedProps):C!==R?(C===null?b.stateNode!==null&&Ym(b.stateNode):Ho(C),R===null?Vm(M,f.type,f.stateNode):qm(M,R,f.memoizedProps)):R===null&&f.stateNode!==null&&ff(f,f.memoizedProps,b.memoizedProps)}break}case 27:if(ci){yi(h,f),vi(f),C&512&&(Bn||b===null||Vi(b,b.return)),b!==null&&C&4&&ff(f,f.memoizedProps,b.memoizedProps);break}case 5:if(yi(h,f),vi(f),C&512&&(Bn||b===null||Vi(b,b.return)),kt){if(f.flags&32){M=f.stateNode;try{Nm(M)}catch(we){tt(f,f.return,we)}}C&4&&f.stateNode!=null&&(M=f.memoizedProps,ff(f,M,b!==null?b.memoizedProps:M)),C&1024&&(Wu=!0)}else Wr&&f.alternate!==null&&(f.alternate.stateNode=f.stateNode);break;case 6:if(yi(h,f),vi(f),C&4&&kt){if(f.stateNode===null)throw Error(r(162));C=f.memoizedProps,b=b!==null?b.memoizedProps:C,M=f.stateNode;try{Py(M,b,C)}catch(we){tt(f,f.return,we)}}break;case 3:if(Es?(g1(),M=Gt,Gt=kf(h.containerInfo),yi(h,f),Gt=M):yi(h,f),vi(f),C&4){if(kt&&cn&&b!==null&&b.memoizedState.isDehydrated)try{c1(h.containerInfo)}catch(we){tt(f,f.return,we)}if(Wr){C=h.containerInfo,b=h.pendingChildren;try{zm(C,b)}catch(we){tt(f,f.return,we)}}}Wu&&(Wu=!1,Jd(f));break;case 4:Es?(b=Gt,Gt=kf(f.stateNode.containerInfo),yi(h,f),vi(f),Gt=b):(yi(h,f),vi(f)),C&4&&Wr&&um(f.stateNode,f,f.stateNode.pendingChildren);break;case 12:yi(h,f),vi(f);break;case 31:yi(h,f),vi(f),C&4&&(C=f.updateQueue,C!==null&&(f.updateQueue=null,Ya(f,C)));break;case 13:yi(h,f),vi(f),f.child.flags&8192&&f.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Bf=Yi()),C&4&&(C=f.updateQueue,C!==null&&(f.updateQueue=null,Ya(f,C)));break;case 22:M=f.memoizedState!==null;var P=b!==null&&b.memoizedState!==null,W=Ln,me=Bn;if(Ln=W||M,Bn=me||P,yi(h,f),Bn=me,Ln=W,vi(f),C&8192&&(h=f.stateNode,h._visibility=M?h._visibility&-2:h._visibility|1,M&&(b===null||P||Ln||Bn||ko(f)),kt)){e:if(b=null,kt)for(h=f;;){if(h.tag===5||Es&&h.tag===26){if(b===null){P=b=h;try{R=P.stateNode,M?i2(R):Vy(P.stateNode,P.memoizedProps)}catch(we){tt(P,P.return,we)}}}else if(h.tag===6){if(b===null){P=h;try{var Ce=P.stateNode;M?qy(Ce):Yy(Ce,P.memoizedProps)}catch(we){tt(P,P.return,we)}}}else if(h.tag===18){if(b===null){P=h;try{var Re=P.stateNode;M?d1(Re):h1(P.stateNode)}catch(we){tt(P,P.return,we)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===f)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break e;for(;h.sibling===null;){if(h.return===null||h.return===f)break e;b===h&&(b=null),h=h.return}b===h&&(b=null),h.sibling.return=h.return,h=h.sibling}}C&4&&(C=f.updateQueue,C!==null&&(b=C.retryQueue,b!==null&&(C.retryQueue=null,Ya(f,b))));break;case 19:yi(h,f),vi(f),C&4&&(C=f.updateQueue,C!==null&&(f.updateQueue=null,Ya(f,C)));break;case 30:break;case 21:break;default:yi(h,f),vi(f)}}function vi(f){var h=f.flags;if(h&2){try{for(var b,C=f.return;C!==null;){if(lm(C)){b=C;break}C=C.return}if(kt){if(b==null)throw Error(r(160));switch(b.tag){case 27:if(ci){var M=b.stateNode,R=Va(f);df(f,R,M);break}case 5:var P=b.stateNode;b.flags&32&&(Nm(P),b.flags&=-33);var W=Va(f);df(f,W,P);break;case 3:case 4:var me=b.stateNode.containerInfo,Ce=Va(f);Wd(f,Ce,me);break;default:throw Error(r(161))}}}catch(Re){tt(f,f.return,Re)}f.flags&=-3}h&4096&&(f.flags&=-4097)}function Jd(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var h=f;Jd(h),h.tag===5&&h.flags&1024&&wm(h.stateNode),f=f.sibling}}function or(f,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)ky(f,h.alternate,h),h=h.sibling}function ko(f){for(f=f.child;f!==null;){var h=f;switch(h.tag){case 0:case 11:case 14:case 15:la(4,h,h.return),ko(h);break;case 1:Vi(h,h.return);var b=h.stateNode;typeof b.componentWillUnmount=="function"&&Qd(h,h.return,b),ko(h);break;case 27:ci&&bi(h.stateNode);case 26:case 5:Vi(h,h.return),ko(h);break;case 22:h.memoizedState===null&&ko(h);break;case 30:ko(h);break;default:ko(h)}f=f.sibling}}function xs(f,h,b){for(b=b&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var C=h.alternate,M=f,R=h,P=R.flags;switch(R.tag){case 0:case 11:case 15:xs(M,R,b),oa(4,R);break;case 1:if(xs(M,R,b),C=R,M=C.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(Ce){tt(C,C.return,Ce)}if(C=R,M=C.updateQueue,M!==null){var W=C.stateNode;try{var me=M.shared.hiddenCallbacks;if(me!==null)for(M.shared.hiddenCallbacks=null,M=0;M<me.length;M++)ml(me[M],W)}catch(Ce){tt(C,C.return,Ce)}}b&&P&64&&Ru(R),Ou(R,R.return);break;case 27:ci&&_y(R);case 26:case 5:xs(M,R,b),b&&C===null&&P&4&&El(R),Ou(R,R.return);break;case 12:xs(M,R,b);break;case 31:xs(M,R,b),b&&P&4&&vs(M,R);break;case 13:xs(M,R,b),b&&P&4&&pf(M,R);break;case 22:R.memoizedState===null&&xs(M,R,b),Ou(R,R.return);break;case 30:break;default:xs(M,R,b)}h=h.sibling}}function Mo(f,h){var b=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),f=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(f=h.memoizedState.cachePool.pool),f!==b&&(f!=null&&f.refCount++,b!=null&&_e(b))}function fm(f,h){f=null,h.alternate!==null&&(f=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==f&&(h.refCount++,f!=null&&_e(f))}function bn(f,h,b,C){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Zd(f,h,b,C),h=h.sibling}function Zd(f,h,b,C){var M=h.flags;switch(h.tag){case 0:case 11:case 15:bn(f,h,b,C),M&2048&&oa(9,h);break;case 1:bn(f,h,b,C);break;case 3:bn(f,h,b,C),M&2048&&(f=null,h.alternate!==null&&(f=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==f&&(h.refCount++,f!=null&&_e(f)));break;case 12:if(M&2048){bn(f,h,b,C),f=h.stateNode;try{var R=h.memoizedProps,P=R.id,W=R.onPostCommit;typeof W=="function"&&W(P,h.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(me){tt(h,h.return,me)}}else bn(f,h,b,C);break;case 31:bn(f,h,b,C);break;case 13:bn(f,h,b,C);break;case 23:break;case 22:R=h.stateNode,P=h.alternate,h.memoizedState!==null?R._visibility&2?bn(f,h,b,C):Du(f,h):R._visibility&2?bn(f,h,b,C):(R._visibility|=2,Cr(f,h,b,C,(h.subtreeFlags&10256)!==0||!1)),M&2048&&Mo(P,h);break;case 24:bn(f,h,b,C),M&2048&&fm(h.alternate,h);break;default:bn(f,h,b,C)}}function Cr(f,h,b,C,M){for(M=M&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var R=f,P=h,W=b,me=C,Ce=P.flags;switch(P.tag){case 0:case 11:case 15:Cr(R,P,W,me,M),oa(8,P);break;case 23:break;case 22:var Re=P.stateNode;P.memoizedState!==null?Re._visibility&2?Cr(R,P,W,me,M):Du(R,P):(Re._visibility|=2,Cr(R,P,W,me,M)),M&&Ce&2048&&Mo(P.alternate,P);break;case 24:Cr(R,P,W,me,M),M&&Ce&2048&&fm(P.alternate,P);break;default:Cr(R,P,W,me,M)}h=h.sibling}}function Du(f,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var b=f,C=h,M=C.flags;switch(C.tag){case 22:Du(b,C),M&2048&&Mo(C.alternate,C);break;case 24:Du(b,C),M&2048&&fm(C.alternate,C);break;default:Du(b,C)}h=h.sibling}}function ua(f,h,b){if(f.subtreeFlags&es)for(f=f.child;f!==null;)Ao(f,h,b),f=f.sibling}function Ao(f,h,b){switch(f.tag){case 26:if(ua(f,h,b),f.flags&es)if(f.memoizedState!==null)y1(b,Gt,f.memoizedState,f.memoizedProps);else{var C=f.stateNode,M=f.type;f=f.memoizedProps,((h&335544128)===h||Sm(M,f))&&ph(b,C,M,f)}break;case 5:ua(f,h,b),f.flags&es&&(C=f.stateNode,M=f.type,f=f.memoizedProps,((h&335544128)===h||Sm(M,f))&&ph(b,C,M,f));break;case 3:case 4:Es?(C=Gt,Gt=kf(f.stateNode.containerInfo),ua(f,h,b),Gt=C):ua(f,h,b);break;case 22:f.memoizedState===null&&(C=f.alternate,C!==null&&C.memoizedState!==null?(C=es,es=16777216,ua(f,h,b),es=C):ua(f,h,b));break;default:ua(f,h,b)}}function $d(f){var h=f.alternate;if(h!==null&&(f=h.child,f!==null)){h.child=null;do h=f.sibling,f.sibling=null,f=h;while(f!==null)}}function zu(f){var h=f.deletions;if((f.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var C=h[b];Vn=C,Kr(C,f)}$d(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)eh(f),f=f.sibling}function eh(f){switch(f.tag){case 0:case 11:case 15:zu(f),f.flags&2048&&la(9,f,f.return);break;case 3:zu(f);break;case 12:zu(f);break;case 22:var h=f.stateNode;f.memoizedState!==null&&h._visibility&2&&(f.return===null||f.return.tag!==13)?(h._visibility&=-3,gf(f)):zu(f);break;default:zu(f)}}function gf(f){var h=f.deletions;if((f.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var C=h[b];Vn=C,Kr(C,f)}$d(f)}for(f=f.child;f!==null;){switch(h=f,h.tag){case 0:case 11:case 15:la(8,h,h.return),gf(h);break;case 22:b=h.stateNode,b._visibility&2&&(b._visibility&=-3,gf(h));break;default:gf(h)}f=f.sibling}}function Kr(f,h){for(;Vn!==null;){var b=Vn;switch(b.tag){case 0:case 11:case 15:la(8,b,h);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var C=b.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:_e(b.memoizedState.cache)}if(C=b.child,C!==null)C.return=b,Vn=C;else e:for(b=f;Vn!==null;){C=Vn;var M=C.sibling,R=C.return;if(cm(C),C===b){Vn=null;break e}if(M!==null){M.return=R,Vn=M;break e}Vn=R}}}function No(f){var h=lt(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(r(364));return h}if(f=Gn(f),f===null)throw Error(r(362));return f.stateNode.current}function Ro(f,h){var b=f.tag;switch(h.$$typeof){case Os:if(f.type===h.value)return!0;break;case Zu:e:{for(h=h.value,f=[f,0],b=0;b<f.length;){var C=f[b++],M=C.tag,R=f[b++],P=h[R];if(M!==5&&M!==26&&M!==27||!Po(C)){for(;P!=null&&Ro(C,P);)R++,P=h[R];if(R===h.length){h=!0;break e}else for(C=C.child;C!==null;)f.push(C,R),C=C.sibling}}h=!1}return h;case $u:if((b===5||b===26||b===27)&&_m(f.stateNode,h.value))return!0;break;case Yo:if((b===5||b===6||b===26||b===27)&&(f=Tf(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case jf:if((b===5||b===26||b===27)&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function ju(f){switch(f.$$typeof){case Os:return"<"+(g(f.value)||"Unknown")+">";case Zu:return":has("+(ju(f)||"")+")";case $u:return'[role="'+f.value+'"]';case Yo:return'"'+f.value+'"';case jf:return'[data-testname="'+f.value+'"]';default:throw Error(r(365))}}function Lu(f,h){var b=[];f=[f,0];for(var C=0;C<f.length;){var M=f[C++],R=M.tag,P=f[C++],W=h[P];if(R!==5&&R!==26&&R!==27||!Po(M)){for(;W!=null&&Ro(M,W);)P++,W=h[P];if(P===h.length)b.push(M);else for(M=M.child;M!==null;)f.push(M,P),M=M.sibling}}return b}function wr(f,h){if(!ui)throw Error(r(363));f=No(f),f=Lu(f,h),h=[],f=Array.from(f);for(var b=0;b<f.length;){var C=f[b++],M=C.tag;if(M===5||M===26||M===27)Po(C)||h.push(C.stateNode);else for(C=C.child;C!==null;)f.push(C),C=C.sibling}return h}function un(){return(bt&2)!==0&&Tt!==0?Tt&-Tt:Ve.T!==null?ds():Vu()}function Ka(){if(pr===0)if((Tt&536870912)===0||Et){var f=Bl;Bl<<=1,(Bl&3932160)===0&&(Bl=262144),pr=f}else pr=536870912;return f=Ar.current,f!==null&&(f.flags|=32),pr}function xn(f,h,b){(f===mt&&(qt===2||qt===9)||f.cancelPendingCommit!==null)&&(zn(f,0),fa(f,Tt,pr,!1)),j(f,b),((bt&2)===0||f!==mt)&&(f===mt&&((bt&2)===0&&(Qo|=b),En===4&&fa(f,Tt,pr,!1)),Xe(f))}function Hs(f,h,b){if((bt&6)!==0)throw Error(r(327));var C=!b&&(h&127)===0&&(h&f.expiredLanes)===0||O(f,h),M=C?Ny(f,h):da(f,h,!0),R=C;do{if(M===0){Ko&&!C&&fa(f,h,0,!1);break}else{if(b=f.current.alternate,R&&!My(b)){M=da(f,h,!1),R=!1;continue}if(M===2){if(R=h,f.errorRecoveryDisabledLanes&R)var P=0;else P=f.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){h=P;e:{var W=f;M=Lf;var me=cn&&W.current.memoizedState.isDehydrated;if(me&&(zn(W,P).flags|=256),P=da(W,P,!1),P!==2){if(Xo&&!me){W.errorRecoveryDisabledLanes|=R,Qo|=R,M=4;break e}R=Nr,Nr=M,R!==null&&(Nr===null?Nr=R:Nr.push.apply(Nr,R))}M=P}if(R=!1,M!==2)continue}}if(M===1){zn(f,0),fa(f,h,0,!0);break}e:{switch(C=f,R=M,R){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:fa(C,h,pr,!qs);break e;case 2:Nr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(M=Bf+300-Yi(),10<M)){if(fa(C,h,pr,!qs),A(C,0,!0)!==0)break e;_a=h,C.timeoutHandle=xm(ca.bind(null,C,b,Nr,Pf,Lh,h,pr,Qo,tc,qs,R,"Throttled",-0,0),M);break e}ca(C,b,Nr,Pf,Lh,h,pr,Qo,tc,qs,R,null,-0,0)}}break}while(!0);Xe(f)}function ca(f,h,b,C,M,R,P,W,me,Ce,Re,we,Le,at){if(f.timeoutHandle=_r,we=h.subtreeFlags,we&8192||(we&16785408)===16785408){we=Cm(),Ao(h,R,we);var Ci=(R&62914560)===R?Bf-Yi():(R&4194048)===R?ql-Yi():0;if(Ci=By(we,Ci),Ci!==null){_a=R,f.cancelPendingCommit=Ci(pa.bind(null,f,h,R,b,C,M,P,W,me,Re,we,null,Le,at)),fa(f,R,P,!Ce);return}}pa(f,h,R,b,C,M,P,W,me)}function My(f){for(var h=f;;){var b=h.tag;if((b===0||b===11||b===15)&&h.flags&16384&&(b=h.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var C=0;C<b.length;C++){var M=b[C],R=M.getSnapshot;M=M.value;try{if(!qn(R(),M))return!1}catch{return!1}}if(b=h.child,h.subtreeFlags&16384&&b!==null)b.return=h,h=b;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function fa(f,h,b,C){h&=~ec,h&=~Qo,f.suspendedLanes|=h,f.pingedLanes&=~h,C&&(f.warmLanes|=h),C=f.expirationTimes;for(var M=h;0<M;){var R=31-kr(M),P=1<<R;C[R]=-1,M&=~P}b!==0&&q(f,b,h)}function th(){return(bt&6)===0?(vt(0),!1):!0}function nh(){if(xt!==null){if(qt===0)var f=xt.return;else f=xt,Fs=Zt=null,$c(f),Go=null,Il=0,f=xt;for(;f!==null;)Ty(f.alternate,f),f=f.return;xt=null}}function zn(f,h){var b=f.timeoutHandle;b!==_r&&(f.timeoutHandle=_r,Ly(b)),b=f.cancelPendingCommit,b!==null&&(f.cancelPendingCommit=null,b()),_a=0,nh(),mt=f,xt=b=Qr(f.current,null),Tt=h,qt=0,ri=null,qs=!1,Ko=O(f,h),Xo=!1,tc=pr=ec=Qo=so=En=0,Nr=Lf=null,Lh=!1,(h&8)!==0&&(h|=h&32);var C=f.entangledLanes;if(C!==0)for(f=f.entanglements,C&=h;0<C;){var M=31-kr(C),R=1<<M;h|=f[M],C&=~R}return Ta=h,hs(),b}function Jt(f,h){ut=null,Ve.H=$r,h===hi||h===Ns?(h=ir(),qt=3):h===zh?(h=ir(),qt=4):qt=h===hr?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ri=h,xt===null&&(En=1,Vd(f,he(h,f.current)))}function _t(){var f=Ar.current;return f===null?!0:(Tt&4194048)===Tt?dr===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?f===dr:!1}function Xa(){var f=Ve.H;return Ve.H=$r,f===null?$r:f}function Xr(){var f=Ve.A;return Ve.A=Ju,f}function Bu(){En=4,qs||(Tt&4194048)!==Tt&&Ar.current!==null||(Ko=!0),(so&134217727)===0&&(Qo&134217727)===0||mt===null||fa(mt,Tt,pr,!1)}function da(f,h,b){var C=bt;bt|=2;var M=Xa(),R=Xr();(mt!==f||Tt!==h)&&(Pf=null,zn(f,h)),h=!1;var P=En;e:do try{if(qt!==0&&xt!==null){var W=xt,me=ri;switch(qt){case 8:nh(),P=6;break e;case 3:case 2:case 9:case 6:Ar.current===null&&(h=!0);var Ce=qt;if(qt=0,ri=null,ha(f,W,me,Ce),b&&Ko){P=0;break e}break;default:Ce=qt,qt=0,ri=null,ha(f,W,me,Ce)}}Ay(),P=En;break}catch(Re){Jt(f,Re)}while(!0);return h&&f.shellSuspendCounter++,Fs=Zt=null,bt=C,Ve.H=M,Ve.A=R,xt===null&&(mt=null,Tt=0,hs()),P}function Ay(){for(;xt!==null;)Oo(xt)}function Ny(f,h){var b=bt;bt|=2;var C=Xa(),M=Xr();mt!==f||Tt!==h?(Pf=null,Wo=Yi()+500,zn(f,h)):Ko=O(f,h);e:do try{if(qt!==0&&xt!==null){h=xt;var R=ri;t:switch(qt){case 1:qt=0,ri=null,ha(f,h,R,1);break;case 2:case 9:if(tr(R)){qt=0,ri=null,ih(h);break}h=function(){qt!==2&&qt!==9||mt!==f||(qt=7),Xe(f)},R.then(h,h);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:tr(R)?(qt=0,ri=null,ih(h)):(qt=0,ri=null,ha(f,h,R,7));break;case 5:var P=null;switch(xt.tag){case 26:P=xt.memoizedState;case 5:case 27:var W=xt,me=W.type,Ce=W.pendingProps;if(P?Xm(P):Sn(W.stateNode,me,Ce)){qt=0,ri=null;var Re=W.sibling;if(Re!==null)xt=Re;else{var we=W.return;we!==null?(xt=we,Iu(we)):xt=null}break t}}qt=0,ri=null,ha(f,h,R,5);break;case 6:qt=0,ri=null,ha(f,h,R,6);break;case 8:nh(),En=6;break e;default:throw Error(r(462))}}Pu();break}catch(Le){Jt(f,Le)}while(!0);return Fs=Zt=null,Ve.H=C,Ve.A=M,bt=b,xt!==null?0:(mt=null,Tt=0,hs(),En)}function Pu(){for(;xt!==null&&!b1();)Oo(xt)}function Oo(f){var h=rm(f.alternate,f,Ta);f.memoizedProps=f.pendingProps,h===null?Iu(f):xt=h}function ih(f){var h=f,b=h.alternate;switch(h.tag){case 15:case 0:h=Zp(b,h,h.pendingProps,h.type,void 0,Tt);break;case 11:h=Zp(b,h,h.pendingProps,h.type.render,h.ref,Tt);break;case 5:$c(h);default:Ty(b,h),h=xt=ah(h,Ta),h=rm(b,h,Ta)}f.memoizedProps=f.pendingProps,h===null?Iu(f):xt=h}function ha(f,h,b,C){Fs=Zt=null,$c(h),Go=null,Il=0;var M=h.return;try{if($x(f,M,h,b,Tt)){En=1,Vd(f,he(b,f.current)),xt=null;return}}catch(R){if(M!==null)throw xt=M,R;En=1,Vd(f,he(b,f.current)),xt=null;return}h.flags&32768?(Et||C===1?f=!0:Ko||(Tt&536870912)!==0?f=!1:(qs=f=!0,(C===2||C===9||C===3||C===6)&&(C=Ar.current,C!==null&&C.tag===13&&(C.flags|=16384))),Do(h,f)):Iu(h)}function Iu(f){var h=f;do{if((h.flags&32768)!==0){Do(h,qs);return}f=h.return;var b=Ey(h.alternate,h,Ta);if(b!==null){xt=b;return}if(h=h.sibling,h!==null){xt=h;return}xt=h=f}while(h!==null);En===0&&(En=5)}function Do(f,h){do{var b=om(f.alternate,f);if(b!==null){b.flags&=32767,xt=b;return}if(b=f.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!h&&(f=f.sibling,f!==null)){xt=f;return}xt=f=b}while(f!==null);En=6,xt=null}function pa(f,h,b,C,M,R,P,W,me){f.cancelPendingCommit=null;do ga();while(si!==0);if((bt&6)!==0)throw Error(r(327));if(h!==null){if(h===f.current)throw Error(r(177));if(R=h.lanes|h.childLanes,R|=Hl,B(f,b,R,P,W,me),f===mt&&(xt=mt=null,Tt=0),Vl=h,oo=f,_a=b,nc=R,Bh=M,ig=C,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,ni(Af,function(){return yf(),null})):(f.callbackNode=null,f.callbackPriority=0),C=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||C){C=Ve.T,Ve.T=null,M=ws(),wt(2),P=bt,bt|=4;try{e2(f,h,b)}finally{bt=P,wt(M),Ve.T=C}}si=1,Qa(),ma(),rh()}}function Qa(){if(si===1){si=0;var f=oo,h=Vl,b=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||b){b=Ve.T,Ve.T=null;var C=ws();wt(2);var M=bt;bt|=4;try{mf(h,f),jy(f.containerInfo)}finally{bt=M,wt(C),Ve.T=b}}f.current=h,si=2}}function ma(){if(si===2){si=0;var f=oo,h=Vl,b=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||b){b=Ve.T,Ve.T=null;var C=ws();wt(2);var M=bt;bt|=4;try{ky(f,h.alternate,h)}finally{bt=M,wt(C),Ve.T=b}}si=3}}function rh(){if(si===4||si===3){si=0,Wm();var f=oo,h=Vl,b=_a,C=ig;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?si=5:(si=0,Vl=oo=null,sh(f,f.pendingLanes));var M=f.pendingLanes;if(M===0&&(ao=null),J(b),h=h.stateNode,Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(Pl,h,void 0,(h.current.flags&128)===128)}catch{}if(C!==null){h=Ve.T,M=ws(),wt(2),Ve.T=null;try{for(var R=f.onRecoverableError,P=0;P<C.length;P++){var W=C[P];R(W.value,{componentStack:W.stack})}}finally{Ve.T=h,wt(M)}}(_a&3)!==0&&ga(),Xe(f),M=f.pendingLanes,(b&261930)!==0&&(M&42)!==0?f===If?Dt++:(Dt=0,If=f):Dt=0,cn&&_f(),vt(0)}}function sh(f,h){(f.pooledCacheLanes&=h)===0&&(h=f.pooledCache,h!=null&&(f.pooledCache=null,_e(h)))}function ga(){return Qa(),ma(),rh(),yf()}function yf(){if(si!==5)return!1;var f=oo,h=nc;nc=0;var b=J(_a),C=32>b?32:b;b=Ve.T;var M=ws();try{wt(C),Ve.T=null,C=Bh,Bh=null;var R=oo,P=_a;if(si=0,Vl=oo=null,_a=0,(bt&6)!==0)throw Error(r(331));var W=bt;if(bt|=4,eh(R.current),Zd(R,R.current,P,C),bt=W,vt(0,!1),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(Pl,R)}catch{}return!0}finally{wt(M),Ve.T=b,sh(f,h)}}function zo(f,h,b){h=he(b,h),h=Wp(f.stateNode,h,2),f=So(f,h,2),f!==null&&(j(f,2),Xe(f))}function tt(f,h,b){if(f.tag===3)zo(f,f,b);else for(;h!==null;){if(h.tag===3){zo(h,f,b);break}else if(h.tag===1){var C=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(ao===null||!ao.has(C))){f=he(b,f),b=dy(2),C=So(h,b,2),C!==null&&(hy(b,C,h,f),j(C,2),Xe(C));break}}h=h.return}}function Hu(f,h,b){var C=f.pingCache;if(C===null){C=f.pingCache=new ts;var M=new Set;C.set(h,M)}else M=C.get(h),M===void 0&&(M=new Set,C.set(h,M));M.has(b)||(Xo=!0,M.add(b),f=Ry.bind(null,f,h,b),h.then(f,f))}function Ry(f,h,b){var C=f.pingCache;C!==null&&C.delete(h),f.pingedLanes|=f.suspendedLanes&b,f.warmLanes&=~b,mt===f&&(Tt&b)===b&&(En===4||En===3&&(Tt&62914560)===Tt&&300>Yi()-Bf?(bt&2)===0&&zn(f,0):ec|=b,tc===Tt&&(tc=0)),Xe(f)}function Oy(f,h){h===0&&(h=L()),f=Sr(f,h),f!==null&&(j(f,h),Xe(f))}function t2(f){var h=f.memoizedState,b=0;h!==null&&(b=h.retryLane),Oy(f,b)}function n2(f,h){var b=0;switch(f.tag){case 31:case 13:var C=f.stateNode,M=f.memoizedState;M!==null&&(b=M.retryLane);break;case 19:C=f.stateNode;break;case 22:C=f.stateNode._retryCache;break;default:throw Error(r(314))}C!==null&&C.delete(h),Oy(f,b)}function ni(f,h){return Mf(f,h)}function dm(f,h,b,C){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tl(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Qr(f,h){var b=f.alternate;return b===null?(b=n(f.tag,h,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=h,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&65011712,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,h=f.dependencies,b.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b.refCleanup=f.refCleanup,b}function ah(f,h){f.flags&=65011714;var b=f.alternate;return b===null?(f.childLanes=0,f.lanes=h,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=b.childLanes,f.lanes=b.lanes,f.child=b.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=b.memoizedProps,f.memoizedState=b.memoizedState,f.updateQueue=b.updateQueue,f.type=b.type,h=b.dependencies,f.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),f}function Wa(f,h,b,C,M,R){var P=0;if(C=f,typeof f=="function")Tl(f)&&(P=1);else if(typeof f=="string")P=Es&&ci?Sh(f,b,xi.current)?26:Qm(f)?27:5:Es?Sh(f,b,xi.current)?26:5:ci&&Qm(f)?27:5;else e:switch(f){case Sf:return f=n(31,b,h,M),f.elementType=Sf,f.lanes=R,f;case Al:return Ss(b.children,M,R,h);case Nl:P=8,M|=24;break;case Rl:return f=n(12,b,h,M|2),f.elementType=Rl,f.lanes=R,f;case ch:return f=n(13,b,h,M),f.elementType=ch,f.lanes=R,f;case Ja:return f=n(19,b,h,M),f.elementType=Ja,f.lanes=R,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case Cs:P=10;break e;case xf:P=9;break e;case Uu:P=11;break e;case fh:P=14;break e;case lr:P=16,C=null;break e}P=29,b=Error(r(130,f===null?"null":typeof f,"")),C=null}return h=n(P,b,h,M),h.elementType=f,h.type=C,h.lanes=R,h}function Ss(f,h,b,C){return f=n(7,f,C,h),f.lanes=b,f}function hm(f,h,b){return f=n(6,f,null,h),f.lanes=b,f}function pm(f){var h=n(18,null,null,0);return h.stateNode=f,h}function mm(f,h,b){return h=n(4,f.children!==null?f.children:[],f.key,h),h.lanes=b,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function Dy(f,h,b,C,M,R,P,W,me){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=_r,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=C,this.onUncaughtError=M,this.onCaughtError=R,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function jo(f,h,b,C,M,R,P,W,me,Ce,Re,we){return f=new Dy(f,h,b,P,me,Ce,Re,we,W),h=1,R===!0&&(h|=24),R=n(3,null,null,h),f.current=R,R.stateNode=f,h=ye(),h.refCount++,f.pooledCache=h,h.refCount++,R.memoizedState={element:C,isDehydrated:b,cache:h},Fi(R),f}function oh(f){return f?(f=va,f):va}function vf(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=l(h),f=f!==null?c(f):null,f===null?null:Gu(f.stateNode)}function gm(f,h,b,C,M,R){M=oh(M),C.context===null?C.context=M:C.pendingContext=M,C=ia(h),C.payload={element:b},R=R===void 0?null:R,R!==null&&(C.callback=R),b=So(f,C,h),b!==null&&(xn(b,f,h),Wc(b,f,h))}function _l(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<h?b:h}}function bf(f,h){_l(f,h),(f=f.alternate)&&_l(f,h)}var ht={},lh=Tp(),Er=Dw(),uh=Object.assign,kl=Symbol.for("react.element"),ya=Symbol.for("react.transitional.element"),Ml=Symbol.for("react.portal"),Al=Symbol.for("react.fragment"),Nl=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),xf=Symbol.for("react.consumer"),Cs=Symbol.for("react.context"),Uu=Symbol.for("react.forward_ref"),ch=Symbol.for("react.suspense"),Ja=Symbol.for("react.suspense_list"),fh=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),Sf=Symbol.for("react.activity"),ym=Symbol.for("react.memo_cache_sentinel"),Za=Symbol.iterator,Lo=Symbol.for("react.client.reference"),Bo=Array.isArray,Ve=lh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vm=e.rendererVersion,Cf=e.rendererPackageName,Fu=e.extraDevToolsConfig,Gu=e.getPublicInstance,zy=e.getRootHostContext,qu=e.getChildHostContext,dh=e.prepareForCommit,jy=e.resetAfterCommit,bm=e.createInstance;e.cloneMutableInstance;var wf=e.appendInitialChild,Tr=e.finalizeInitialChildren,ur=e.shouldSetTextContent,$a=e.createTextInstance;e.cloneMutableTextInstance;var xm=e.scheduleTimeout,Ly=e.cancelTimeout,_r=e.noTimeout,Fn=e.isPrimaryRenderer;e.warnsIfNotActing;var kt=e.supportsMutation,Wr=e.supportsPersistence,cn=e.supportsHydration,lt=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Yt=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var wt=e.setCurrentUpdatePriority,ws=e.getCurrentUpdatePriority,Vu=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Ol=e.shouldAttemptEagerTransition,hh=e.detachDeletedInstance;e.requestPostPaintCallback;var Ef=e.maySuspendCommit,Yu=e.maySuspendCommitOnUpdate,Sm=e.maySuspendCommitInSyncRender,Sn=e.preloadInstance,Cm=e.startSuspendingCommit,ph=e.suspendInstance;e.suspendOnActiveViewTransition;var By=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Dl=e.NotPendingTransition,zl=e.HostTransitionContext,wm=e.resetFormInstance;e.bindToConsole;var Em=e.supportsMicrotasks,Tm=e.scheduleMicrotask,ui=e.supportsTestSelectors,Gn=e.findFiberRoot,mh=e.getBoundingRect,Tf=e.getTextContent,Po=e.isHiddenSubtree,_m=e.matchAccessibilityRole,eo=e.setFocusIfFocusable,gh=e.setupIntersectionObserver,km=e.appendChild,Mm=e.appendChildToContainer,Py=e.commitTextUpdate,Iy=e.commitMount,Hy=e.commitUpdate,Uy=e.insertBefore,Fy=e.insertInContainerBefore,Gy=e.removeChild,Am=e.removeChildFromContainer,Nm=e.resetTextContent,i2=e.hideInstance,qy=e.hideTextInstance,Vy=e.unhideInstance,Yy=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Rm=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Ky=e.cloneInstance,Om=e.createContainerChildSet,Dm=e.appendChildToContainerChildSet,Xy=e.finalizeContainerChildren,zm=e.replaceContainerChildren,Qy=e.cloneHiddenInstance,jm=e.cloneHiddenTextInstance,Io=e.isSuspenseInstancePending,yh=e.isSuspenseInstanceFallback,vh=e.getSuspenseInstanceFallbackErrorDetails,bh=e.registerSuspenseInstanceRetry,Wy=e.canHydrateFormStateMarker,Lm=e.isFormStateMarkerMatching,Jy=e.getNextHydratableSibling,Zy=e.getNextHydratableSiblingAfterSingleton,$y=e.getFirstHydratableChild,e1=e.getFirstHydratableChildWithinContainer,t1=e.getFirstHydratableChildWithinActivityInstance,n1=e.getFirstHydratableChildWithinSuspenseInstance,Bm=e.getFirstHydratableChildWithinSingleton,i1=e.canHydrateInstance,r1=e.canHydrateTextInstance,Pm=e.canHydrateActivityInstance,s1=e.canHydrateSuspenseInstance,a1=e.hydrateInstance,r2=e.hydrateTextInstance,Im=e.hydrateActivityInstance,o1=e.hydrateSuspenseInstance,l1=e.getNextHydratableInstanceAfterActivityInstance,Hm=e.getNextHydratableInstanceAfterSuspenseInstance,u1=e.commitHydratedInstance,c1=e.commitHydratedContainer,s2=e.commitHydratedActivityInstance,a2=e.commitHydratedSuspenseInstance,f1=e.finalizeHydratedChildren,_f=e.flushHydrationEvents;e.clearActivityBoundary;var Um=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var xh=e.clearSuspenseBoundaryFromContainer,d1=e.hideDehydratedBoundary,h1=e.unhideDehydratedBoundary,Ku=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var p1=e.validateHydratableInstance,Fm=e.validateHydratableTextInstance,Es=e.supportsResources,Sh=e.isHostHoistableType,kf=e.getHoistableRoot,Gm=e.getResource,qm=e.acquireResource,Ho=e.releaseResource,m1=e.hydrateHoistable,Vm=e.mountHoistable,Ym=e.unmountHoistable,Ch=e.createHoistableInstance,g1=e.prepareToCommitHoistables,Km=e.mayResourceSuspendCommit,Xm=e.preloadResource,y1=e.suspendResource,ci=e.supportsSingletons,wh=e.resolveSingletonInstance,ii=e.acquireSingletonInstance,bi=e.releaseSingletonInstance,Qm=e.isHostSingletonType,jl=e.isSingletonScope,Eh=[],Ll=-1,va={},kr=Math.clz32?Math.clz32:T,Th=Math.log,v1=Math.LN2,_h=256,Bl=262144,Xu=4194304,Mf=Er.unstable_scheduleCallback,kh=Er.unstable_cancelCallback,b1=Er.unstable_shouldYield,Wm=Er.unstable_requestPaint,Yi=Er.unstable_now,Mh=Er.unstable_ImmediatePriority,x1=Er.unstable_UserBlockingPriority,Af=Er.unstable_NormalPriority,Ah=Er.unstable_IdlePriority,Jm=Er.log,S1=Er.unstable_setDisableYieldValue,Pl=null,Mr=null,qn=typeof Object.is=="function"?Object.is:Z,Nh=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},o2=Object.prototype.hasOwnProperty,Rh,ba,Nf=!1,Zm=new WeakMap,to=[],xa=0,Kt=null,Rf=0,Ts=[],Jr=0,_s=null,Ri=1,Us="",xi=v(null),no=v(null),Oi=v(null),Of=v(null),fi=null,fn=null,Et=!1,Sa=null,cr=!1,Oh=Error(r(519)),ks=v(null),Zt=null,Fs=null,C1=typeof AbortController<"u"?AbortController:function(){var f=[],h=this.signal={aborted:!1,addEventListener:function(b,C){f.push(C)}};this.abort=function(){h.aborted=!0,f.forEach(function(b){return b()})}},Si=Er.unstable_scheduleCallback,l2=Er.unstable_NormalPriority,dn={$$typeof:Cs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Df=null,Ft=null,Ki=!1,Ms=!1,Dh=!1,Uo=0,Qu=null,$m=0,io=0,di=null,As=Ve.S;Ve.S=function(f,h){ql=Yi(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&xr(f,h),As!==null&&As(f,h)};var Fo=v(null),hi=Error(r(460)),zh=Error(r(474)),Ns=Error(r(542)),Ca={then:function(){}},fr=null,Go=null,Il=0,Di=Ur(!0),eg=Ur(!1),zi=[],wa=0,Hl=0,Zr=!1,jh=!1,Ul=v(null),qo=v(0),Ar=v(null),dr=null,jn=v(0),ro=0,ut=null,qe=null,it=null,pt=!1,ft=!1,Mt=!1,Xi=0,Rs=0,Gs=null,tg=0,$r={readContext:An,use:xu,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};$r.useEffectEvent=vn;var Cn={readContext:An,use:xu,useCallback:function(f,h){return Gi().memoizedState=[f,h===void 0?null:h],f},useContext:An,useEffect:nf,useImperativeHandle:function(f,h,b){b=b!=null?b.concat([f]):null,bl(4194308,4,Eu.bind(null,h,f),b)},useLayoutEffect:function(f,h){return bl(4194308,4,f,h)},useInsertionEffect:function(f,h){bl(4,2,f,h)},useMemo:function(f,h){var b=Gi();h=h===void 0?null:h;var C=f();if(Mt){ce(!0);try{f()}finally{ce(!1)}}return b.memoizedState=[C,h],C},useReducer:function(f,h,b){var C=Gi();if(b!==void 0){var M=b(h);if(Mt){ce(!0);try{b(h)}finally{ce(!1)}}}else M=h;return C.memoizedState=C.baseState=M,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:M},C.queue=f,f=f.dispatch=Zx.bind(null,ut,f),[C.memoizedState,f]},useRef:function(f){var h=Gi();return f={current:f},h.memoizedState=f},useState:function(f){f=Fp(f);var h=f.queue,b=ly.bind(null,ut,h);return h.dispatch=b,[f.memoizedState,b]},useDebugValue:sf,useDeferredValue:function(f,h){var b=Gi();return _u(b,f,h)},useTransition:function(){var f=Fp(!1);return f=sy.bind(null,ut,f.queue,!0,!1),Gi().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,h,b){var C=ut,M=Gi();if(Et){if(b===void 0)throw Error(r(407));b=b()}else{if(b=h(),mt===null)throw Error(r(349));(Tt&127)!==0||ty(C,h,b)}M.memoizedState=b;var R={value:b,getSnapshot:h};return M.queue=R,nf(Up.bind(null,C,R,f),[f]),C.flags|=2048,Yr(9,{destroy:void 0},Hp.bind(null,C,R,b,h),null),b},useId:function(){var f=Gi(),h=mt.identifierPrefix;if(Et){var b=Us,C=Ri;b=(C&~(1<<32-kr(C)-1)).toString(32)+b,h="_"+h+"R_"+b,b=Xi++,0<b&&(h+="H"+b.toString(32)),h+="_"}else b=tg++,h="_"+h+"r_"+b.toString(32)+"_";return f.memoizedState=h},useHostTransitionStatus:Kp,useFormState:qp,useActionState:qp,useOptimistic:function(f){var h=Gi();h.memoizedState=h.baseState=f;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=b,h=Fd.bind(null,ut,!0,b),b.dispatch=h,[f,h]},useMemoCache:Od,useCacheRefresh:function(){return Gi().memoizedState=Jx.bind(null,ut)},useEffectEvent:function(f){var h=Gi(),b={impl:f};return h.memoizedState=b,function(){if((bt&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},Ea={readContext:An,use:xu,useCallback:Hd,useContext:An,useEffect:wu,useImperativeHandle:ry,useInsertionEffect:To,useLayoutEffect:rf,useMemo:Tu,useReducer:Ga,useRef:Id,useState:function(){return Ga(Is)},useDebugValue:sf,useDeferredValue:function(f,h){var b=ln();return Yp(b,qe.memoizedState,f,h)},useTransition:function(){var f=Ga(Is)[0],h=ln().memoizedState;return[typeof f=="boolean"?f:qi(f),h]},useSyncExternalStore:yl,useId:Ud,useHostTransitionStatus:Kp,useFormState:Su,useActionState:Su,useOptimistic:function(f,h){var b=ln();return ef(b,qe,f,h)},useMemoCache:Od,useCacheRefresh:oy};Ea.useEffectEvent=sr;var Vo={readContext:An,use:xu,useCallback:Hd,useContext:An,useEffect:wu,useImperativeHandle:ry,useInsertionEffect:To,useLayoutEffect:rf,useMemo:Tu,useReducer:zd,useRef:Id,useState:function(){return zd(Is)},useDebugValue:sf,useDeferredValue:function(f,h){var b=ln();return qe===null?_u(b,f,h):Yp(b,qe.memoizedState,f,h)},useTransition:function(){var f=zd(Is)[0],h=ln().memoizedState;return[typeof f=="boolean"?f:qi(f),h]},useSyncExternalStore:yl,useId:Ud,useHostTransitionStatus:Kp,useFormState:Cu,useActionState:Cu,useOptimistic:function(f,h){var b=ln();return qe!==null?ef(b,qe,f,h):(b.baseState=f,[f,b.queue.dispatch])},useMemoCache:Od,useCacheRefresh:oy};Vo.useEffectEvent=sr;var zf={enqueueSetState:function(f,h,b){f=f._reactInternals;var C=un(),M=ia(C);M.payload=h,b!=null&&(M.callback=b),h=So(f,M,C),h!==null&&(xn(h,f,C),Wc(h,f,C))},enqueueReplaceState:function(f,h,b){f=f._reactInternals;var C=un(),M=ia(C);M.tag=1,M.payload=h,b!=null&&(M.callback=b),h=So(f,M,C),h!==null&&(xn(h,f,C),Wc(h,f,C))},enqueueForceUpdate:function(f,h){f=f._reactInternals;var b=un(),C=ia(b);C.tag=2,h!=null&&(C.callback=h),h=So(f,C,b),h!==null&&(xn(h,f,b),Wc(h,f,b))}},hr=Error(r(461)),tn=!1,Fl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Ln=!1,Bn=!1,Wu=!1,ng=typeof WeakSet=="function"?WeakSet:Set,Vn=null,wn=null,Yn=!1,Gt=null,es=8192,Ju={getCacheForType:function(f){var h=An(dn),b=h.data.get(f);return b===void 0&&(b=f(),h.data.set(f,b)),b},cacheSignal:function(){return An(dn).controller.signal}},Os=0,Zu=1,$u=2,jf=3,Yo=4;if(typeof Symbol=="function"&&Symbol.for){var Gl=Symbol.for;Os=Gl("selector.component"),Zu=Gl("selector.has_pseudo_class"),$u=Gl("selector.role"),jf=Gl("selector.test_id"),Yo=Gl("selector.text")}var ts=typeof WeakMap=="function"?WeakMap:Map,bt=0,mt=null,xt=null,Tt=0,qt=0,ri=null,qs=!1,Ko=!1,Xo=!1,Ta=0,En=0,so=0,Qo=0,ec=0,pr=0,tc=0,Lf=null,Nr=null,Lh=!1,Bf=0,ql=0,Wo=1/0,Pf=null,ao=null,si=0,oo=null,Vl=null,_a=0,nc=0,Bh=null,ig=null,Dt=0,If=null;return ht.attemptContinuousHydration=function(f){if(f.tag===13||f.tag===31){var h=Sr(f,67108864);h!==null&&xn(h,f,67108864),bf(f,67108864)}},ht.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13||f.tag===31){var h=un();h=X(h);var b=Sr(f,h);b!==null&&xn(b,f,h),bf(f,h)}},ht.attemptSynchronousHydration=function(f){switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var h=k(f.pendingLanes);if(h!==0){for(f.pendingLanes|=2,f.entangledLanes|=2;h;){var b=1<<31-kr(h);f.entanglements[1]|=b,h&=~b}Xe(f),(bt&6)===0&&(Wo=Yi()+500,vt(0))}}break;case 31:case 13:h=Sr(f,2),h!==null&&xn(h,f,2),th(),bf(f,2)}},ht.batchedUpdates=function(f,h){return f(h)},ht.createComponentSelector=function(f){return{$$typeof:Os,value:f}},ht.createContainer=function(f,h,b,C,M,R,P,W,me,Ce){return jo(f,h,!1,null,b,C,R,null,P,W,me,Ce)},ht.createHasPseudoClassSelector=function(f){return{$$typeof:Zu,value:f}},ht.createHydrationContainer=function(f,h,b,C,M,R,P,W,me,Ce,Re,we,Le,at){return f=jo(b,C,!0,f,M,R,W,at,me,Ce,Re,we),f.context=oh(null),b=f.current,C=un(),C=X(C),M=ia(C),M.callback=h??null,So(b,M,C),h=C,f.current.lanes=h,j(f,h),Xe(f),f},ht.createPortal=function(f,h,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ml,key:C==null?null:""+C,children:f,containerInfo:h,implementation:b}},ht.createRoleSelector=function(f){return{$$typeof:$u,value:f}},ht.createTestNameSelector=function(f){return{$$typeof:jf,value:f}},ht.createTextSelector=function(f){return{$$typeof:Yo,value:f}},ht.defaultOnCaughtError=function(f){console.error(f)},ht.defaultOnRecoverableError=function(f){Nh(f)},ht.defaultOnUncaughtError=function(f){Nh(f)},ht.deferredUpdates=function(f){var h=Ve.T,b=ws();try{return wt(32),Ve.T=null,f()}finally{wt(b),Ve.T=h}},ht.discreteUpdates=function(f,h,b,C,M){var R=Ve.T,P=ws();try{return wt(2),Ve.T=null,f(h,b,C,M)}finally{wt(P),Ve.T=R,bt===0&&(Wo=Yi()+500)}},ht.findAllNodes=wr,ht.findBoundingRects=function(f,h){if(!ui)throw Error(r(363));h=wr(f,h),f=[];for(var b=0;b<h.length;b++)f.push(mh(h[b]));for(h=f.length-1;0<h;h--){b=f[h];for(var C=b.x,M=C+b.width,R=b.y,P=R+b.height,W=h-1;0<=W;W--)if(h!==W){var me=f[W],Ce=me.x,Re=Ce+me.width,we=me.y,Le=we+me.height;if(C>=Ce&&R>=we&&M<=Re&&P<=Le){f.splice(h,1);break}else if(C!==Ce||b.width!==me.width||Le<R||we>P){if(!(R!==we||b.height!==me.height||Re<C||Ce>M)){Ce>C&&(me.width+=Ce-C,me.x=C),Re<M&&(me.width=M-Ce),f.splice(h,1);break}}else{we>R&&(me.height+=we-R,me.y=R),Le<P&&(me.height=P-we),f.splice(h,1);break}}}return f},ht.findHostInstance=vf,ht.findHostInstanceWithNoPortals=function(f){return f=l(f),f=f!==null?d(f):null,f===null?null:Gu(f.stateNode)},ht.findHostInstanceWithWarning=function(f){return vf(f)},ht.flushPassiveEffects=ga,ht.flushSyncFromReconciler=function(f){var h=bt;bt|=1;var b=Ve.T,C=ws();try{if(wt(2),Ve.T=null,f)return f()}finally{wt(C),Ve.T=b,bt=h,(bt&6)===0&&vt(0)}},ht.flushSyncWork=th,ht.focusWithin=function(f,h){if(!ui)throw Error(r(363));for(f=No(f),h=Lu(f,h),h=Array.from(h),f=0;f<h.length;){var b=h[f++],C=b.tag;if(!Po(b)){if((C===5||C===26||C===27)&&eo(b.stateNode))return!0;for(b=b.child;b!==null;)h.push(b),b=b.sibling}}return!1},ht.getFindAllNodesFailureDescription=function(f,h){if(!ui)throw Error(r(363));var b=0,C=[];f=[No(f),0];for(var M=0;M<f.length;){var R=f[M++],P=R.tag,W=f[M++],me=h[W];if((P!==5&&P!==26&&P!==27||!Po(R))&&(Ro(R,me)&&(C.push(ju(me)),W++,W>b&&(b=W)),W<h.length))for(R=R.child;R!==null;)f.push(R,W),R=R.sibling}if(b<h.length){for(f=[];b<h.length;b++)f.push(ju(h[b]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},ht.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 27:case 5:return Gu(f.child.stateNode);default:return f.child.stateNode}},ht.injectIntoDevTools=function(){var f={bundleType:0,version:vm,rendererPackageName:Cf,currentDispatcherRef:Ve,reconcilerVersion:"19.2.0"};if(Fu!==null&&(f.rendererConfig=Fu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{Pl=h.inject(f),Mr=h}catch{}f=!!h.checkDCE}}return f},ht.isAlreadyRendering=function(){return(bt&6)!==0},ht.observeVisibleRects=function(f,h,b,C){if(!ui)throw Error(r(363));f=wr(f,h);var M=gh(f,b,C).disconnect;return{disconnect:function(){M()}}},ht.shouldError=function(){return null},ht.shouldSuspend=function(){return!1},ht.startHostTransition=function(f,h,b,C){if(f.tag!==5)throw Error(r(476));var M=ay(f).queue;sy(f,M,h,Dl,b===null?i:function(){var R=ay(f);return R.next===null&&(R=f.alternate.memoizedState),af(f,R.next.queue,{},un()),b(C)})},ht.updateContainer=function(f,h,b,C){var M=h.current,R=un();return gm(M,R,f,h,b,C),R},ht.updateContainerSync=function(f,h,b,C){return gm(h.current,2,f,h,b,C),2},ht},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})})(IS)),IS.exports}var L_;function WQ(){return L_||(L_=1,PS.exports=QQ()),PS.exports}var JQ=WQ();const ZQ=Ep(JQ);var HS={exports:{}},Wl={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function $Q(){return B_||(B_=1,Wl.ConcurrentRoot=1,Wl.ContinuousEventPriority=8,Wl.DefaultEventPriority=32,Wl.DiscreteEventPriority=2,Wl.IdleEventPriority=268435456,Wl.LegacyRoot=0,Wl.NoEventPriority=0),Wl}var P_;function eW(){return P_||(P_=1,HS.exports=$Q()),HS.exports}var Lx=eW();const I_={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let H_=!1,U_=!1;const Gb=".react-konva-event",tW=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,nW=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,iW={};function Bx(t,e,n=iW){if(!H_&&"zIndex"in e&&(console.warn(nW),H_=!0),!U_&&e.draggable){var i=e.x!==void 0||e.y!==void 0,r=e.onDragEnd||e.onDragMove;i&&!r&&(console.warn(tW),U_=!0)}for(var s in n)if(!I_[s]){var a=s.slice(0,2)==="on",l=n[s]!==e[s];if(a&&l){var c=s.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t.off(c,n[s])}var d=!e.hasOwnProperty(s);d&&t.setAttr(s,void 0)}var m=e._useStrictMode,g={},v=!1;const x={};for(var s in e)if(!I_[s]){var a=s.slice(0,2)==="on",S=n[s]!==e[s];if(a&&S){var c=s.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e[s]&&(x[c]=e[s])}!a&&(e[s]!==n[s]||m&&e[s]!==t.getAttr(s))&&(v=!0,g[s]=e[s])}v&&(t.setAttrs(g),Kc(t));for(var c in x)t.off(c+Gb),t.on(c+Gb,x[c])}function Kc(t){if(!je.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}var US=Dw();const dR={},rW={};Sp.Node.prototype._applyProps=Bx;let hR=Lx.DefaultEventPriority;function sW(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Kc(t)}function aW(t,e,n){let i=Sp[t];i||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Sp.Group);const r={},s={};for(var a in e)if(a!=="ref"){var l=a.slice(0,2)==="on";l?s[a]=e[a]:r[a]=e[a]}const c=new i(r);return Bx(c,s),c}function oW(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function lW(t,e,n){return!1}function uW(t){return t}function cW(){return null}function fW(){return null}function dW(t,e,n,i){return rW}function hW(){}function pW(t){}function mW(t,e){return!1}function gW(){return dR}function yW(){return dR}const vW=setTimeout,bW=clearTimeout,xW=!0,SW=t=>{t()},CW=-1;function wW(t,e){return!1}const EW=!1,TW=!1,_W=!0,kW=!1,MW=!1;function AW(t,e){e.parent===t?e.moveToTop():t.add(e),Kc(t)}function NW(t,e){e.parent===t?e.moveToTop():t.add(e),Kc(t)}function pR(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),Kc(t)}function RW(t,e,n){pR(t,e,n)}function OW(t,e){e.destroy(),e.off(Gb),Kc(t)}function DW(t,e){e.destroy(),e.off(Gb),Kc(t)}function zW(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function jW(t,e,n){}function LW(t,e,n,i){Bx(t,i,n)}function BW(t){t.hide(),Kc(t)}function PW(t){}function IW(t,e){(e.visible==null||e.visible)&&t.show()}function HW(t,e){}function UW(t){}function FW(){}function GW(){return null}function qW(){}function VW(){}function YW(){return Lx.DefaultEventPriority}function KW(){}function XW(){return null}function QW(t){hR=t}function WW(){return hR}function JW(){return Lx.DiscreteEventPriority}function ZW(){return!1}function $W(){}function eJ(){return null}function tJ(){return-1.1}function nJ(){}function iJ(){return!1}function rJ(){return!0}function sJ(){}function aJ(){}function oJ(){return null}const lJ=null,uJ=Fe.createContext(null);function cJ(){}const fJ=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:uJ,NotPendingTransition:lJ,afterActiveInstanceBlur:VW,appendChild:AW,appendChildToContainer:NW,appendInitialChild:sW,beforeActiveInstanceBlur:qW,cancelTimeout:bW,clearContainer:UW,commitMount:jW,commitTextUpdate:zW,commitUpdate:LW,createInstance:aW,createTextInstance:oW,detachDeletedInstance:FW,finalizeInitialChildren:lW,getChildHostContext:yW,getCurrentEventPriority:YW,getCurrentUpdatePriority:WW,getInstanceFromNode:GW,getInstanceFromScope:XW,getPublicInstance:uW,getRootHostContext:gW,hideInstance:BW,hideTextInstance:PW,idlePriority:US.unstable_IdlePriority,insertBefore:pR,insertInContainerBefore:RW,isPrimaryRenderer:EW,maySuspendCommit:iJ,noTimeout:CW,now:US.unstable_now,preloadInstance:rJ,prepareForCommit:cW,preparePortalMount:fW,prepareScopeUpdate:KW,prepareUpdate:dW,removeChild:OW,removeChildFromContainer:DW,requestPostPaintCallback:nJ,resetAfterCommit:hW,resetFormInstance:cJ,resetTextContent:pW,resolveEventTimeStamp:tJ,resolveEventType:eJ,resolveUpdatePriority:JW,run:US.unstable_runWithPriority,scheduleMicrotask:SW,scheduleTimeout:vW,setCurrentUpdatePriority:QW,shouldAttemptEagerTransition:ZW,shouldDeprioritizeSubtree:mW,shouldSetTextContent:wW,startSuspendingCommit:sJ,supportsHydration:MW,supportsMicrotasks:xW,supportsMutation:_W,supportsPersistence:kW,suspendInstance:aJ,trackSchedulerEvent:$W,unhideInstance:IW,unhideTextInstance:HW,waitForCommitToBeReady:oJ,warnsIfNotActing:TW},Symbol.toStringTag,{value:"Module"}));function mR(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=t.child;for(;i;){const r=mR(i,e,n);if(r)return r;i=i.sibling}}function gR(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const r3=gR(N.createContext(null));class yR extends N.Component{render(){return N.createElement(r3.Provider,{value:this._reactInternals},this.props.children)}}function dJ(){const t=N.useContext(r3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const n of[t,t?.alternate]){if(!n)continue;const i=mR(n,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}const hJ=Symbol.for("react.context"),pJ=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===hJ;function mJ(){const t=dJ(),[e]=N.useState(()=>new Map);e.clear();let n=t;for(;n;){const i=n.type;pJ(i)&&i!==r3&&!e.has(i)&&e.set(i,N.use(gR(i))),n=n.return}return e}function gJ(){const t=mJ();return N.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>N.createElement(e,null,N.createElement(n.Provider,{...i,value:t.get(n)})),e=>N.createElement(yR,{...e})),[t])}if(Fe.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function yJ(t){const e=Fe.useRef({});return Fe.useLayoutEffect(()=>{e.current=t}),Fe.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const vJ=()=>{const t=Fe.useRef(0);return Fe.useMemo(()=>{t.current++},[]),t.current>1},bJ=t=>{const e=Fe.useRef(null),n=Fe.useRef(null),i=Fe.useRef(null),r=yJ(t),s=gJ(),a=Fe.useRef(null),l=m=>{const{forwardedRef:g}=t;g&&(typeof g=="function"?g(m):g.current=m)},c=vJ(),d=()=>{l(null),vv.updateContainer(null,i.current,null),n.current?.destroy(),n.current=null};return Fe.useLayoutEffect(()=>(a.current&&(clearTimeout(a.current),a.current=null),n.current?l(n.current):(n.current=new Sp.Stage({width:t.width,height:t.height,container:e.current}),l(n.current),i.current=vv.createContainer(n.current,Lx.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),vv.updateContainer(Fe.createElement(s,{},t.children),i.current,null,()=>{})),()=>{c?a.current=setTimeout(d,0):d()}),[]),Fe.useLayoutEffect(()=>{l(n.current),Bx(n.current,t,r),vv.updateContainer(Fe.createElement(s,{},t.children),i.current,null)}),Fe.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},xJ="Layer",SJ="Rect",CJ="Circle",wJ="Line",vv=ZQ(fJ),EJ=Fe.forwardRef((t,e)=>Fe.createElement(yR,{},Fe.createElement(bJ,{...t,forwardedRef:e}))),TJ=["#000000","#EF4444","#3B82F6","#10B981","#F59E0B","#8B5CF6"],vR=()=>{const[t,e]=N.useState("pen"),[n,i]=N.useState("#000000"),[r,s]=N.useState(5),[a,l]=N.useState([]),[c,d]=N.useState([]),[m,g]=N.useState([]),v=N.useRef(!1),x=N.useRef(null),S=O=>{v.current=!0;const z=O.target.getStage()?.getPointerPosition();z&&(t==="pen"||t==="eraser"?l([...a,{tool:t,points:[z.x,z.y],color:n,width:r}]):(x.current=z,t==="rect"?d([...c,{x:z.x,y:z.y,width:0,height:0,color:n,strokeWidth:r}]):t==="circle"&&g([...m,{x:z.x,y:z.y,radius:0,color:n,strokeWidth:r}])))},T=O=>{if(!v.current)return;const L=O.target.getStage()?.getPointerPosition();if(L){if(t==="pen"||t==="eraser"){const I=a[a.length-1];I.points=I.points.concat([L.x,L.y]),a.splice(a.length-1,1,I),l(a.concat())}else if(t==="rect"&&x.current){const I=c[c.length-1],j=L.x-x.current.x,B=L.y-x.current.y;I.width=j,I.height=B,c.splice(c.length-1,1,I),d(c.concat())}else if(t==="circle"&&x.current){const I=m[m.length-1],j=L.x-x.current.x,B=L.y-x.current.y,q=Math.sqrt(j*j+B*B);I.radius=q,m.splice(m.length-1,1,I),g(m.concat())}}},k=()=>{v.current=!1,x.current=null},A=()=>{l([]),d([]),g([])};return _.jsxs("div",{className:"h-full bg-white relative flex flex-col overflow-hidden",children:[_.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-2 bg-white/90 backdrop-blur border border-ink/20 shadow-hard rounded-lg p-2",children:[_.jsxs("div",{className:"flex flex-col gap-1 border-b border-gray-200 pb-2",children:[_.jsx("button",{onClick:()=>e("pen"),className:Pt("w-8 h-8 rounded flex items-center justify-center hover:bg-gray-100",t==="pen"&&"bg-accent-blue text-white hover:bg-blue-600"),title:"Pen",children:_.jsx("i",{className:"fa-solid fa-pen"})}),_.jsx("button",{onClick:()=>e("eraser"),className:Pt("w-8 h-8 rounded flex items-center justify-center hover:bg-gray-100",t==="eraser"&&"bg-accent-red text-white hover:bg-red-600"),title:"Eraser",children:_.jsx("i",{className:"fa-solid fa-eraser"})}),_.jsx("button",{onClick:()=>e("rect"),className:Pt("w-8 h-8 rounded flex items-center justify-center hover:bg-gray-100",t==="rect"&&"bg-accent-purple text-white hover:bg-purple-600"),title:"Rectangle",children:_.jsx("i",{className:"fa-regular fa-square"})}),_.jsx("button",{onClick:()=>e("circle"),className:Pt("w-8 h-8 rounded flex items-center justify-center hover:bg-gray-100",t==="circle"&&"bg-accent-yellow text-white hover:bg-yellow-600"),title:"Circle",children:_.jsx("i",{className:"fa-regular fa-circle"})})]}),_.jsx("div",{className:"grid grid-cols-2 gap-1 pt-1 border-b border-gray-200 pb-2",children:TJ.map(O=>_.jsx("button",{onClick:()=>i(O),className:Pt("w-4 h-4 rounded-full border border-gray-300",n===O&&"ring-2 ring-offset-1 ring-black"),style:{backgroundColor:O}},O))}),_.jsxs("div",{className:"flex flex-col gap-1 pt-1 items-center",children:[_.jsx("input",{type:"range",min:"1",max:"20",value:r,onChange:O=>s(parseInt(O.target.value)),className:"w-8 h-20 writing-mode-vertical",style:{writingMode:"vertical-lr",direction:"rtl"}}),_.jsxs("span",{className:"text-[10px] text-gray-500 font-bold",children:[r,"px"]})]}),_.jsx("button",{onClick:A,className:"mt-2 text-xs font-bold text-red-500 hover:text-red-700",children:"Clear"})]}),_.jsx("div",{className:"flex-1 cursor-crosshair",children:_.jsx(EJ,{width:window.innerWidth,height:window.innerHeight,onMouseDown:S,onMousemove:T,onMouseup:k,className:"bg-grid-pattern",children:_.jsxs(xJ,{children:[c.map((O,z)=>_.jsx(SJ,{x:O.x,y:O.y,width:O.width,height:O.height,stroke:O.color,strokeWidth:O.strokeWidth},z)),m.map((O,z)=>_.jsx(CJ,{x:O.x,y:O.y,radius:O.radius,stroke:O.color,strokeWidth:O.strokeWidth},z)),a.map((O,z)=>_.jsx(wJ,{points:O.points,stroke:O.tool==="eraser"?"#ffffff":O.color,strokeWidth:O.width,tension:.5,lineCap:"round",globalCompositeOperation:O.tool==="eraser"?"destination-out":"source-over"},z))]})})})]})};function _J(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const kJ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,MJ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,AJ={};function F_(t,e){return(AJ.jsx?MJ:kJ).test(t)}const NJ=/[ \t\n\f\r]/g;function RJ(t){return typeof t=="object"?t.type==="text"?G_(t.value):!1:G_(t)}function G_(t){return t.replace(NJ,"")===""}class V0{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}V0.prototype.normal={};V0.prototype.property={};V0.prototype.space=void 0;function bR(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new V0(n,i,e)}function pw(t){return t.toLowerCase()}class Ps{constructor(e,n){this.attribute=n,this.property=e}}Ps.prototype.attribute="";Ps.prototype.booleanish=!1;Ps.prototype.boolean=!1;Ps.prototype.commaOrSpaceSeparated=!1;Ps.prototype.commaSeparated=!1;Ps.prototype.defined=!1;Ps.prototype.mustUseProperty=!1;Ps.prototype.number=!1;Ps.prototype.overloadedBoolean=!1;Ps.prototype.property="";Ps.prototype.spaceSeparated=!1;Ps.prototype.space=void 0;let OJ=0;const yt=Ed(),Ei=Ed(),mw=Ed(),Ne=Ed(),pn=Ed(),cp=Ed(),Vs=Ed();function Ed(){return 2**++OJ}const gw=Object.freeze(Object.defineProperty({__proto__:null,boolean:yt,booleanish:Ei,commaOrSpaceSeparated:Vs,commaSeparated:cp,number:Ne,overloadedBoolean:mw,spaceSeparated:pn},Symbol.toStringTag,{value:"Module"})),FS=Object.keys(gw);class s3 extends Ps{constructor(e,n,i,r){let s=-1;if(super(e,n),q_(this,"space",r),typeof i=="number")for(;++s<FS.length;){const a=FS[s];q_(this,FS[s],(i&gw[a])===gw[a])}}}s3.prototype.defined=!0;function q_(t,e,n){n&&(t[e]=n)}function Op(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new s3(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[pw(i)]=i,n[pw(s.attribute)]=i}return new V0(e,n,t.space)}const xR=Op({properties:{ariaActiveDescendant:null,ariaAtomic:Ei,ariaAutoComplete:null,ariaBusy:Ei,ariaChecked:Ei,ariaColCount:Ne,ariaColIndex:Ne,ariaColSpan:Ne,ariaControls:pn,ariaCurrent:null,ariaDescribedBy:pn,ariaDetails:null,ariaDisabled:Ei,ariaDropEffect:pn,ariaErrorMessage:null,ariaExpanded:Ei,ariaFlowTo:pn,ariaGrabbed:Ei,ariaHasPopup:null,ariaHidden:Ei,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pn,ariaLevel:Ne,ariaLive:null,ariaModal:Ei,ariaMultiLine:Ei,ariaMultiSelectable:Ei,ariaOrientation:null,ariaOwns:pn,ariaPlaceholder:null,ariaPosInSet:Ne,ariaPressed:Ei,ariaReadOnly:Ei,ariaRelevant:null,ariaRequired:Ei,ariaRoleDescription:pn,ariaRowCount:Ne,ariaRowIndex:Ne,ariaRowSpan:Ne,ariaSelected:Ei,ariaSetSize:Ne,ariaSort:null,ariaValueMax:Ne,ariaValueMin:Ne,ariaValueNow:Ne,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function SR(t,e){return e in t?t[e]:e}function CR(t,e){return SR(t,e.toLowerCase())}const DJ=Op({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cp,acceptCharset:pn,accessKey:pn,action:null,allow:null,allowFullScreen:yt,allowPaymentRequest:yt,allowUserMedia:yt,alt:null,as:null,async:yt,autoCapitalize:null,autoComplete:pn,autoFocus:yt,autoPlay:yt,blocking:pn,capture:null,charSet:null,checked:yt,cite:null,className:pn,cols:Ne,colSpan:null,content:null,contentEditable:Ei,controls:yt,controlsList:pn,coords:Ne|cp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yt,defer:yt,dir:null,dirName:null,disabled:yt,download:mw,draggable:Ei,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yt,formTarget:null,headers:pn,height:Ne,hidden:mw,high:Ne,href:null,hrefLang:null,htmlFor:pn,httpEquiv:pn,id:null,imageSizes:null,imageSrcSet:null,inert:yt,inputMode:null,integrity:null,is:null,isMap:yt,itemId:null,itemProp:pn,itemRef:pn,itemScope:yt,itemType:pn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yt,low:Ne,manifest:null,max:null,maxLength:Ne,media:null,method:null,min:null,minLength:Ne,multiple:yt,muted:yt,name:null,nonce:null,noModule:yt,noValidate:yt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yt,optimum:Ne,pattern:null,ping:pn,placeholder:null,playsInline:yt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yt,referrerPolicy:null,rel:pn,required:yt,reversed:yt,rows:Ne,rowSpan:Ne,sandbox:pn,scope:null,scoped:yt,seamless:yt,selected:yt,shadowRootClonable:yt,shadowRootDelegatesFocus:yt,shadowRootMode:null,shape:null,size:Ne,sizes:null,slot:null,span:Ne,spellCheck:Ei,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ne,step:null,style:null,tabIndex:Ne,target:null,title:null,translate:null,type:null,typeMustMatch:yt,useMap:null,value:Ei,width:Ne,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:pn,axis:null,background:null,bgColor:null,border:Ne,borderColor:null,bottomMargin:Ne,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yt,declare:yt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ne,leftMargin:Ne,link:null,longDesc:null,lowSrc:null,marginHeight:Ne,marginWidth:Ne,noResize:yt,noHref:yt,noShade:yt,noWrap:yt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ne,rules:null,scheme:null,scrolling:Ei,standby:null,summary:null,text:null,topMargin:Ne,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ne,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yt,disableRemotePlayback:yt,prefix:null,property:null,results:Ne,security:null,unselectable:null},space:"html",transform:CR}),zJ=Op({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Vs,accentHeight:Ne,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ne,amplitude:Ne,arabicForm:null,ascent:Ne,attributeName:null,attributeType:null,azimuth:Ne,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ne,by:null,calcMode:null,capHeight:Ne,className:pn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ne,diffuseConstant:Ne,direction:null,display:null,dur:null,divisor:Ne,dominantBaseline:null,download:yt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ne,enableBackground:null,end:null,event:null,exponent:Ne,externalResourcesRequired:null,fill:null,fillOpacity:Ne,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cp,g2:cp,glyphName:cp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ne,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ne,horizOriginX:Ne,horizOriginY:Ne,id:null,ideographic:Ne,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ne,k:Ne,k1:Ne,k2:Ne,k3:Ne,k4:Ne,kernelMatrix:Vs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ne,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ne,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ne,overlineThickness:Ne,paintOrder:null,panose1:null,path:null,pathLength:Ne,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ne,pointsAtY:Ne,pointsAtZ:Ne,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Vs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Vs,rev:Vs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Vs,requiredFeatures:Vs,requiredFonts:Vs,requiredFormats:Vs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ne,specularExponent:Ne,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ne,strikethroughThickness:Ne,string:null,stroke:null,strokeDashArray:Vs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ne,strokeOpacity:Ne,strokeWidth:null,style:null,surfaceScale:Ne,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Vs,tabIndex:Ne,tableValues:null,target:null,targetX:Ne,targetY:Ne,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Vs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ne,underlineThickness:Ne,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ne,values:null,vAlphabetic:Ne,vMathematical:Ne,vectorEffect:null,vHanging:Ne,vIdeographic:Ne,version:null,vertAdvY:Ne,vertOriginX:Ne,vertOriginY:Ne,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ne,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:SR}),wR=Op({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),ER=Op({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:CR}),TR=Op({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),jJ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},LJ=/[A-Z]/g,V_=/-[a-z]/g,BJ=/^data[-\w.:]+$/i;function PJ(t,e){const n=pw(e);let i=e,r=Ps;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&BJ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(V_,HJ);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!V_.test(s)){let a=s.replace(LJ,IJ);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=s3}return new r(i,e)}function IJ(t){return"-"+t.toLowerCase()}function HJ(t){return t.charAt(1).toUpperCase()}const UJ=bR([xR,DJ,wR,ER,TR],"html"),a3=bR([xR,zJ,wR,ER,TR],"svg");function FJ(t){return t.join(" ").trim()}var Wh={},GS,Y_;function GJ(){if(Y_)return GS;Y_=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,d="/",m="*",g="",v="comment",x="declaration";function S(k,A){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];A=A||{};var O=1,z=1;function L(Z){var te=Z.match(e);te&&(O+=te.length);var V=Z.lastIndexOf(c);z=~V?Z.length-V:z+Z.length}function I(){var Z={line:O,column:z};return function(te){return te.position=new j(Z),$(),te}}function j(Z){this.start=Z,this.end={line:O,column:z},this.source=A.source}j.prototype.content=k;function B(Z){var te=new Error(A.source+":"+O+":"+z+": "+Z);if(te.reason=Z,te.filename=A.source,te.line=O,te.column=z,te.source=k,!A.silent)throw te}function q(Z){var te=Z.exec(k);if(te){var V=te[0];return L(V),k=k.slice(V.length),te}}function $(){q(n)}function G(Z){var te;for(Z=Z||[];te=X();)te!==!1&&Z.push(te);return Z}function X(){var Z=I();if(!(d!=k.charAt(0)||m!=k.charAt(1))){for(var te=2;g!=k.charAt(te)&&(m!=k.charAt(te)||d!=k.charAt(te+1));)++te;if(te+=2,g===k.charAt(te-1))return B("End of comment missing");var V=k.slice(2,te-2);return z+=2,L(V),k=k.slice(te),z+=2,Z({type:v,comment:V})}}function J(){var Z=I(),te=q(i);if(te){if(X(),!q(r))return B("property missing ':'");var V=q(s),ae=Z({type:x,property:T(te[0].replace(t,g)),value:V?T(V[0].replace(t,g)):g});return q(a),ae}}function ce(){var Z=[];G(Z);for(var te;te=J();)te!==!1&&(Z.push(te),G(Z));return Z}return $(),ce()}function T(k){return k?k.replace(l,g):g}return GS=S,GS}var K_;function qJ(){if(K_)return Wh;K_=1;var t=Wh&&Wh.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.default=n;const e=t(GJ());function n(i,r){let s=null;if(!i||typeof i!="string")return s;const a=(0,e.default)(i),l=typeof r=="function";return a.forEach(c=>{if(c.type!=="declaration")return;const{property:d,value:m}=c;l?r(d,m,c):m&&(s=s||{},s[d]=m)}),s}return Wh}var Eg={},X_;function VJ(){if(X_)return Eg;X_=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(d){return!d||n.test(d)||t.test(d)},a=function(d,m){return m.toUpperCase()},l=function(d,m){return"".concat(m,"-")},c=function(d,m){return m===void 0&&(m={}),s(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(r,l):d=d.replace(i,l),d.replace(e,a))};return Eg.camelCase=c,Eg}var Tg,Q_;function YJ(){if(Q_)return Tg;Q_=1;var t=Tg&&Tg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(qJ()),n=VJ();function i(r,s){var a={};return!r||typeof r!="string"||(0,e.default)(r,function(l,c){l&&c&&(a[(0,n.camelCase)(l,s)]=c)}),a}return i.default=i,Tg=i,Tg}var KJ=YJ();const XJ=Ep(KJ),_R=kR("end"),o3=kR("start");function kR(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function QJ(t){const e=o3(t),n=_R(t);if(e&&n)return{start:e,end:n}}function i0(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?W_(t.position):"start"in t||"end"in t?W_(t):"line"in t||"column"in t?yw(t):""}function yw(t){return J_(t&&t.line)+":"+J_(t&&t.column)}function W_(t){return yw(t&&t.start)+"-"+yw(t&&t.end)}function J_(t){return t&&typeof t=="number"?t:1}class Br extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(a=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?s.ruleId=i:(s.source=i.slice(0,c),s.ruleId=i.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=l?l.line:void 0,this.name=i0(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Br.prototype.file="";Br.prototype.name="";Br.prototype.reason="";Br.prototype.message="";Br.prototype.stack="";Br.prototype.column=void 0;Br.prototype.line=void 0;Br.prototype.ancestors=void 0;Br.prototype.cause=void 0;Br.prototype.fatal=void 0;Br.prototype.place=void 0;Br.prototype.ruleId=void 0;Br.prototype.source=void 0;const l3={}.hasOwnProperty,WJ=new Map,JJ=/[A-Z]/g,ZJ=new Set(["table","tbody","thead","tfoot","tr"]),$J=new Set(["td","th"]),MR="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eZ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=lZ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=oZ(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?a3:UJ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=AR(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function AR(t,e,n){if(e.type==="element")return tZ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return nZ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return rZ(t,e,n);if(e.type==="mdxjsEsm")return iZ(t,e);if(e.type==="root")return sZ(t,e,n);if(e.type==="text")return aZ(t,e)}function tZ(t,e,n){const i=t.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=a3,t.schema=r),t.ancestors.push(e);const s=RR(t,e.tagName,!1),a=uZ(t,e);let l=c3(t,e);return ZJ.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!RJ(c):!0})),NR(t,a,s,e),u3(a,l),t.ancestors.pop(),t.schema=i,t.create(e,s,a,n)}function nZ(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}T0(t,e.position)}function iZ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);T0(t,e.position)}function rZ(t,e,n){const i=t.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=a3,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:RR(t,e.name,!0),a=cZ(t,e),l=c3(t,e);return NR(t,a,s,e),u3(a,l),t.ancestors.pop(),t.schema=i,t.create(e,s,a,n)}function sZ(t,e,n){const i={};return u3(i,c3(t,e)),t.create(e,t.Fragment,i,n)}function aZ(t,e){return e.value}function NR(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function u3(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function oZ(t,e,n){return i;function i(r,s,a,l){const d=Array.isArray(a.children)?n:e;return l?d(s,a,l):d(s,a)}}function lZ(t,e){return n;function n(i,r,s,a){const l=Array.isArray(s.children),c=o3(i);return e(r,s,a,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function uZ(t,e){const n={};let i,r;for(r in e.properties)if(r!=="children"&&l3.call(e.properties,r)){const s=fZ(t,r,e.properties[r]);if(s){const[a,l]=s;t.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&$J.has(e.tagName)?i=l:n[a]=l}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function cZ(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const a=s.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else T0(t,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const l=i.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else T0(t,e.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function c3(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:WJ;for(;++i<e.children.length;){const s=e.children[i];let a;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const d=r.get(c)||0;a=c+"-"+d,r.set(c,d+1)}}const l=AR(t,s,a);l!==void 0&&n.push(l)}return n}function fZ(t,e,n){const i=PJ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?_J(n):FJ(n)),i.property==="style"){let r=typeof n=="object"?n:dZ(t,String(n));return t.stylePropertyNameCase==="css"&&(r=hZ(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&i.space?jJ[i.property]||i.property:i.attribute,n]}}function dZ(t,e){try{return XJ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,r=new Br("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=MR+"#cannot-parse-style-attribute",r}}function RR(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,a;for(;++s<r.length;){const l=F_(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}i=a}else i=F_(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return l3.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(i);T0(t)}function T0(t,e){const n=new Br("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=MR+"#cannot-handle-mdx-estrees-without-createevaluater",n}function hZ(t){const e={};let n;for(n in t)l3.call(t,n)&&(e[pZ(n)]=t[n]);return e}function pZ(t){let e=t.replace(JJ,mZ);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function mZ(t){return"-"+t.toLowerCase()}const qS={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},gZ={};function f3(t,e){const n=gZ,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return OR(t,i,r)}function OR(t,e,n){if(yZ(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Z_(t.children,e,n)}return Array.isArray(t)?Z_(t,e,n):""}function Z_(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=OR(t[r],e,n);return i.join("")}function yZ(t){return!!(t&&typeof t=="object")}const $_=document.createElement("i");function d3(t){const e="&"+t+";";$_.innerHTML=e;const n=$_.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function $s(t,e,n,i){const r=t.length;let s=0,a;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)a=Array.from(i),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);s<i.length;)a=i.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}function za(t,e){return t.length>0?($s(t,t.length,0,e),t):e}const ek={}.hasOwnProperty;function DR(t){const e={};let n=-1;for(;++n<t.length;)vZ(e,t[n]);return e}function vZ(t,e){let n;for(n in e){const r=(ek.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let a;if(s)for(a in s){ek.call(r,a)||(r[a]=[]);const l=s[a];bZ(r[a],Array.isArray(l)?l:l?[l]:[])}}}function bZ(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);$s(t,0,0,i)}function zR(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function fo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const is=Xc(/[A-Za-z]/),jr=Xc(/[\dA-Za-z]/),xZ=Xc(/[#-'*+\--9=?A-Z^-~]/);function qb(t){return t!==null&&(t<32||t===127)}const vw=Xc(/\d/),SZ=Xc(/[\dA-Fa-f]/),CZ=Xc(/[!-/:-@[-`{-~]/);function Ze(t){return t!==null&&t<-2}function rn(t){return t!==null&&(t<0||t===32)}function Nt(t){return t===-2||t===-1||t===32}const Px=Xc(new RegExp("\\p{P}|\\p{S}","u")),hd=Xc(/\s/);function Xc(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Dp(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let a="";if(s===37&&jr(t.charCodeAt(n+1))&&jr(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(a=String.fromCharCode(s,l),r=1):a=""}else a=String.fromCharCode(s);a&&(e.push(t.slice(i,n),encodeURIComponent(a)),i=n+r+1,a=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function Bt(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return Nt(c)?(t.enter(n),l(c)):e(c)}function l(c){return Nt(c)&&s++<r?(t.consume(c),l):(t.exit(n),e(c))}}const wZ={tokenize:EZ};function EZ(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Bt(t,e,"linePrefix")}function r(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Ze(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),a)}}const TZ={tokenize:_Z},tk={tokenize:kZ};function _Z(t){const e=this,n=[];let i=0,r,s,a;return l;function l(z){if(i<n.length){const L=n[i];return e.containerState=L[1],t.attempt(L[0].continuation,c,d)(z)}return d(z)}function c(z){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&O();const L=e.events.length;let I=L,j;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){j=e.events[I][1].end;break}A(i);let B=L;for(;B<e.events.length;)e.events[B][1].end={...j},B++;return $s(e.events,I+1,0,e.events.slice(L)),e.events.length=B,d(z)}return l(z)}function d(z){if(i===n.length){if(!r)return v(z);if(r.currentConstruct&&r.currentConstruct.concrete)return S(z);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(tk,m,g)(z)}function m(z){return r&&O(),A(i),v(z)}function g(z){return e.parser.lazy[e.now().line]=i!==n.length,a=e.now().offset,S(z)}function v(z){return e.containerState={},t.attempt(tk,x,S)(z)}function x(z){return i++,n.push([e.currentConstruct,e.containerState]),v(z)}function S(z){if(z===null){r&&O(),A(0),t.consume(z);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),T(z)}function T(z){if(z===null){k(t.exit("chunkFlow"),!0),A(0),t.consume(z);return}return Ze(z)?(t.consume(z),k(t.exit("chunkFlow")),i=0,e.interrupt=void 0,l):(t.consume(z),T)}function k(z,L){const I=e.sliceStream(z);if(L&&I.push(null),z.previous=s,s&&(s.next=z),s=z,r.defineSkip(z.start),r.write(I),e.parser.lazy[z.start.line]){let j=r.events.length;for(;j--;)if(r.events[j][1].start.offset<a&&(!r.events[j][1].end||r.events[j][1].end.offset>a))return;const B=e.events.length;let q=B,$,G;for(;q--;)if(e.events[q][0]==="exit"&&e.events[q][1].type==="chunkFlow"){if($){G=e.events[q][1].end;break}$=!0}for(A(i),j=B;j<e.events.length;)e.events[j][1].end={...G},j++;$s(e.events,q+1,0,e.events.slice(B)),e.events.length=j}}function A(z){let L=n.length;for(;L-- >z;){const I=n[L];e.containerState=I[1],I[0].exit.call(e,t)}n.length=z}function O(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function kZ(t,e,n){return Bt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Cp(t){if(t===null||rn(t)||hd(t))return 1;if(Px(t))return 2}function Ix(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const bw={name:"attention",resolveAll:MZ,tokenize:AZ};function MZ(t,e){let n=-1,i,r,s,a,l,c,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[i][1].end},v={...t[n][1].start};nk(g,-c),nk(v,c),a={type:c>1?"strongSequence":"emphasisSequence",start:g,end:{...t[i][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:v},s={type:c>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[i][1].end={...a.start},t[n][1].start={...l.end},d=[],t[i][1].end.offset-t[i][1].start.offset&&(d=za(d,[["enter",t[i][1],e],["exit",t[i][1],e]])),d=za(d,[["enter",r,e],["enter",a,e],["exit",a,e],["enter",s,e]]),d=za(d,Ix(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),d=za(d,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=za(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,$s(t,i-1,n-i+3,d),n=i+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function AZ(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Cp(i);let s;return a;function a(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const d=t.exit("attentionSequence"),m=Cp(c),g=!m||m===2&&r||n.includes(c),v=!r||r===2&&m||n.includes(i);return d._open=!!(s===42?g:g&&(r||!v)),d._close=!!(s===42?v:v&&(m||!g)),e(c)}}function nk(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const NZ={name:"autolink",tokenize:RZ};function RZ(t,e,n){let i=0;return r;function r(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(x){return is(x)?(t.consume(x),a):x===64?n(x):d(x)}function a(x){return x===43||x===45||x===46||jr(x)?(i=1,l(x)):d(x)}function l(x){return x===58?(t.consume(x),i=0,c):(x===43||x===45||x===46||jr(x))&&i++<32?(t.consume(x),l):(i=0,d(x))}function c(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||qb(x)?n(x):(t.consume(x),c)}function d(x){return x===64?(t.consume(x),m):xZ(x)?(t.consume(x),d):n(x)}function m(x){return jr(x)?g(x):n(x)}function g(x){return x===46?(t.consume(x),i=0,m):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):v(x)}function v(x){if((x===45||jr(x))&&i++<63){const S=x===45?v:g;return t.consume(x),S}return n(x)}}const Y0={partial:!0,tokenize:OZ};function OZ(t,e,n){return i;function i(s){return Nt(s)?Bt(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||Ze(s)?e(s):n(s)}}const jR={continuation:{tokenize:zZ},exit:jZ,name:"blockQuote",tokenize:DZ};function DZ(t,e,n){const i=this;return r;function r(a){if(a===62){const l=i.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Nt(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function zZ(t,e,n){const i=this;return r;function r(a){return Nt(a)?Bt(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(jR,e,n)(a)}}function jZ(t){t.exit("blockQuote")}const LR={name:"characterEscape",tokenize:LZ};function LZ(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return CZ(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const BR={name:"characterReference",tokenize:BZ};function BZ(t,e,n){const i=this;let r=0,s,a;return l;function l(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),c}function c(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,a=jr,m(g))}function d(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=SZ,m):(t.enter("characterReferenceValue"),s=7,a=vw,m(g))}function m(g){if(g===59&&r){const v=t.exit("characterReferenceValue");return a===jr&&!d3(i.sliceSerialize(v))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(g)&&r++<s?(t.consume(g),m):n(g)}}const ik={partial:!0,tokenize:IZ},rk={concrete:!0,name:"codeFenced",tokenize:PZ};function PZ(t,e,n){const i=this,r={partial:!0,tokenize:I};let s=0,a=0,l;return c;function c(j){return d(j)}function d(j){const B=i.events[i.events.length-1];return s=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,l=j,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(j)}function m(j){return j===l?(a++,t.consume(j),m):a<3?n(j):(t.exit("codeFencedFenceSequence"),Nt(j)?Bt(t,g,"whitespace")(j):g(j))}function g(j){return j===null||Ze(j)?(t.exit("codeFencedFence"),i.interrupt?e(j):t.check(ik,T,L)(j)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),v(j))}function v(j){return j===null||Ze(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(j)):Nt(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Bt(t,x,"whitespace")(j)):j===96&&j===l?n(j):(t.consume(j),v)}function x(j){return j===null||Ze(j)?g(j):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),S(j))}function S(j){return j===null||Ze(j)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(j)):j===96&&j===l?n(j):(t.consume(j),S)}function T(j){return t.attempt(r,L,k)(j)}function k(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),A}function A(j){return s>0&&Nt(j)?Bt(t,O,"linePrefix",s+1)(j):O(j)}function O(j){return j===null||Ze(j)?t.check(ik,T,L)(j):(t.enter("codeFlowValue"),z(j))}function z(j){return j===null||Ze(j)?(t.exit("codeFlowValue"),O(j)):(t.consume(j),z)}function L(j){return t.exit("codeFenced"),e(j)}function I(j,B,q){let $=0;return G;function G(te){return j.enter("lineEnding"),j.consume(te),j.exit("lineEnding"),X}function X(te){return j.enter("codeFencedFence"),Nt(te)?Bt(j,J,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(te):J(te)}function J(te){return te===l?(j.enter("codeFencedFenceSequence"),ce(te)):q(te)}function ce(te){return te===l?($++,j.consume(te),ce):$>=a?(j.exit("codeFencedFenceSequence"),Nt(te)?Bt(j,Z,"whitespace")(te):Z(te)):q(te)}function Z(te){return te===null||Ze(te)?(j.exit("codeFencedFence"),B(te)):q(te)}}}function IZ(t,e,n){const i=this;return r;function r(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return i.parser.lazy[i.now().line]?n(a):e(a)}}const VS={name:"codeIndented",tokenize:UZ},HZ={partial:!0,tokenize:FZ};function UZ(t,e,n){const i=this;return r;function r(d){return t.enter("codeIndented"),Bt(t,s,"linePrefix",5)(d)}function s(d){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?a(d):n(d)}function a(d){return d===null?c(d):Ze(d)?t.attempt(HZ,a,c)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||Ze(d)?(t.exit("codeFlowValue"),a(d)):(t.consume(d),l)}function c(d){return t.exit("codeIndented"),e(d)}}function FZ(t,e,n){const i=this;return r;function r(a){return i.parser.lazy[i.now().line]?n(a):Ze(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),r):Bt(t,s,"linePrefix",5)(a)}function s(a){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):Ze(a)?r(a):n(a)}}const GZ={name:"codeText",previous:VZ,resolve:qZ,tokenize:YZ};function qZ(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function VZ(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function YZ(t,e,n){let i=0,r,s;return a;function a(g){return t.enter("codeText"),t.enter("codeTextSequence"),l(g)}function l(g){return g===96?(t.consume(g),i++,l):(t.exit("codeTextSequence"),c(g))}function c(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),c):g===96?(s=t.enter("codeTextSequence"),r=0,m(g)):Ze(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),c):(t.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||Ze(g)?(t.exit("codeTextData"),c(g)):(t.consume(g),d)}function m(g){return g===96?(t.consume(g),r++,m):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(g)):(s.type="codeTextData",d(g))}}class KZ{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&_g(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),_g(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),_g(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);_g(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);_g(this.left,n.reverse())}}}function _g(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function PR(t){const e={};let n=-1,i,r,s,a,l,c,d;const m=new KZ(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(i=m.get(n),n&&i[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,XZ(m,n)),n=e[n],d=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(a=m.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(i[1].end={...m.get(r)[1].start},l=m.slice(r,n),l.unshift(i),m.splice(r,n-r+1,l))}}return $s(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function XZ(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],d={};let m,g,v=-1,x=n,S=0,T=0;const k=[T];for(;x;){for(;t.get(++r)[1]!==x;);s.push(r),x._tokenizer||(m=i.sliceStream(x),x.next||m.push(null),g&&a.defineSkip(x.start),x._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(m),x._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),g=x,x=x.next}for(x=n;++v<l.length;)l[v][0]==="exit"&&l[v-1][0]==="enter"&&l[v][1].type===l[v-1][1].type&&l[v][1].start.line!==l[v][1].end.line&&(T=v+1,k.push(T),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(a.events=[],x?(x._tokenizer=void 0,x.previous=void 0):k.pop(),v=k.length;v--;){const A=l.slice(k[v],k[v+1]),O=s.pop();c.push([O,O+A.length-1]),t.splice(O,2,A)}for(c.reverse(),v=-1;++v<c.length;)d[S+c[v][0]]=S+c[v][1],S+=c[v][1]-c[v][0]-1;return d}const QZ={resolve:JZ,tokenize:ZZ},WZ={partial:!0,tokenize:$Z};function JZ(t){return PR(t),t}function ZZ(t,e){let n;return i;function i(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(l)}function r(l){return l===null?s(l):Ze(l)?t.check(WZ,a,s)(l):(t.consume(l),r)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function $Z(t,e,n){const i=this;return r;function r(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Bt(t,s,"linePrefix")}function s(a){if(a===null||Ze(a))return n(a);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(i.parser.constructs.flow,n,e)(a)}}function IR(t,e,n,i,r,s,a,l,c){const d=c||Number.POSITIVE_INFINITY;let m=0;return g;function g(A){return A===60?(t.enter(i),t.enter(r),t.enter(s),t.consume(A),t.exit(s),v):A===null||A===32||A===41||qb(A)?n(A):(t.enter(i),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),T(A))}function v(A){return A===62?(t.enter(s),t.consume(A),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),x(A))}function x(A){return A===62?(t.exit("chunkString"),t.exit(l),v(A)):A===null||A===60||Ze(A)?n(A):(t.consume(A),A===92?S:x)}function S(A){return A===60||A===62||A===92?(t.consume(A),x):x(A)}function T(A){return!m&&(A===null||A===41||rn(A))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(i),e(A)):m<d&&A===40?(t.consume(A),m++,T):A===41?(t.consume(A),m--,T):A===null||A===32||A===40||qb(A)?n(A):(t.consume(A),A===92?k:T)}function k(A){return A===40||A===41||A===92?(t.consume(A),T):T(A)}}function HR(t,e,n,i,r,s){const a=this;let l=0,c;return d;function d(x){return t.enter(i),t.enter(r),t.consume(x),t.exit(r),t.enter(s),m}function m(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(x):x===93?(t.exit(s),t.enter(r),t.consume(x),t.exit(r),t.exit(i),e):Ze(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),g(x))}function g(x){return x===null||x===91||x===93||Ze(x)||l++>999?(t.exit("chunkString"),m(x)):(t.consume(x),c||(c=!Nt(x)),x===92?v:g)}function v(x){return x===91||x===92||x===93?(t.consume(x),l++,g):g(x)}}function UR(t,e,n,i,r,s){let a;return l;function l(v){return v===34||v===39||v===40?(t.enter(i),t.enter(r),t.consume(v),t.exit(r),a=v===40?41:v,c):n(v)}function c(v){return v===a?(t.enter(r),t.consume(v),t.exit(r),t.exit(i),e):(t.enter(s),d(v))}function d(v){return v===a?(t.exit(s),c(a)):v===null?n(v):Ze(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),Bt(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===a||v===null||Ze(v)?(t.exit("chunkString"),d(v)):(t.consume(v),v===92?g:m)}function g(v){return v===a||v===92?(t.consume(v),m):m(v)}}function r0(t,e){let n;return i;function i(r){return Ze(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):Nt(r)?Bt(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const e$={name:"definition",tokenize:n$},t$={partial:!0,tokenize:i$};function n$(t,e,n){const i=this;let r;return s;function s(x){return t.enter("definition"),a(x)}function a(x){return HR.call(i,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return r=fo(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),c):n(x)}function c(x){return rn(x)?r0(t,d)(x):d(x)}function d(x){return IR(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function m(x){return t.attempt(t$,g,g)(x)}function g(x){return Nt(x)?Bt(t,v,"whitespace")(x):v(x)}function v(x){return x===null||Ze(x)?(t.exit("definition"),i.parser.defined.push(r),e(x)):n(x)}}function i$(t,e,n){return i;function i(l){return rn(l)?r0(t,r)(l):n(l)}function r(l){return UR(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Nt(l)?Bt(t,a,"whitespace")(l):a(l)}function a(l){return l===null||Ze(l)?e(l):n(l)}}const r$={name:"hardBreakEscape",tokenize:s$};function s$(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return Ze(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const a$={name:"headingAtx",resolve:o$,tokenize:l$};function o$(t,e){let n=t.length-2,i=3,r,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},$s(t,i,n-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function l$(t,e,n){let i=0;return r;function r(m){return t.enter("atxHeading"),s(m)}function s(m){return t.enter("atxHeadingSequence"),a(m)}function a(m){return m===35&&i++<6?(t.consume(m),a):m===null||rn(m)?(t.exit("atxHeadingSequence"),l(m)):n(m)}function l(m){return m===35?(t.enter("atxHeadingSequence"),c(m)):m===null||Ze(m)?(t.exit("atxHeading"),e(m)):Nt(m)?Bt(t,l,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function c(m){return m===35?(t.consume(m),c):(t.exit("atxHeadingSequence"),l(m))}function d(m){return m===null||m===35||rn(m)?(t.exit("atxHeadingText"),l(m)):(t.consume(m),d)}}const u$=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sk=["pre","script","style","textarea"],c$={concrete:!0,name:"htmlFlow",resolveTo:h$,tokenize:p$},f$={partial:!0,tokenize:g$},d$={partial:!0,tokenize:m$};function h$(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function p$(t,e,n){const i=this;let r,s,a,l,c;return d;function d(U){return m(U)}function m(U){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(U),g}function g(U){return U===33?(t.consume(U),v):U===47?(t.consume(U),s=!0,T):U===63?(t.consume(U),r=3,i.interrupt?e:F):is(U)?(t.consume(U),a=String.fromCharCode(U),k):n(U)}function v(U){return U===45?(t.consume(U),r=2,x):U===91?(t.consume(U),r=5,l=0,S):is(U)?(t.consume(U),r=4,i.interrupt?e:F):n(U)}function x(U){return U===45?(t.consume(U),i.interrupt?e:F):n(U)}function S(U){const ke="CDATA[";return U===ke.charCodeAt(l++)?(t.consume(U),l===ke.length?i.interrupt?e:J:S):n(U)}function T(U){return is(U)?(t.consume(U),a=String.fromCharCode(U),k):n(U)}function k(U){if(U===null||U===47||U===62||rn(U)){const ke=U===47,Pe=a.toLowerCase();return!ke&&!s&&sk.includes(Pe)?(r=1,i.interrupt?e(U):J(U)):u$.includes(a.toLowerCase())?(r=6,ke?(t.consume(U),A):i.interrupt?e(U):J(U)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(U):s?O(U):z(U))}return U===45||jr(U)?(t.consume(U),a+=String.fromCharCode(U),k):n(U)}function A(U){return U===62?(t.consume(U),i.interrupt?e:J):n(U)}function O(U){return Nt(U)?(t.consume(U),O):G(U)}function z(U){return U===47?(t.consume(U),G):U===58||U===95||is(U)?(t.consume(U),L):Nt(U)?(t.consume(U),z):G(U)}function L(U){return U===45||U===46||U===58||U===95||jr(U)?(t.consume(U),L):I(U)}function I(U){return U===61?(t.consume(U),j):Nt(U)?(t.consume(U),I):z(U)}function j(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(t.consume(U),c=U,B):Nt(U)?(t.consume(U),j):q(U)}function B(U){return U===c?(t.consume(U),c=null,$):U===null||Ze(U)?n(U):(t.consume(U),B)}function q(U){return U===null||U===34||U===39||U===47||U===60||U===61||U===62||U===96||rn(U)?I(U):(t.consume(U),q)}function $(U){return U===47||U===62||Nt(U)?z(U):n(U)}function G(U){return U===62?(t.consume(U),X):n(U)}function X(U){return U===null||Ze(U)?J(U):Nt(U)?(t.consume(U),X):n(U)}function J(U){return U===45&&r===2?(t.consume(U),V):U===60&&r===1?(t.consume(U),ae):U===62&&r===4?(t.consume(U),Y):U===63&&r===3?(t.consume(U),F):U===93&&r===5?(t.consume(U),he):Ze(U)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(f$,se,ce)(U)):U===null||Ze(U)?(t.exit("htmlFlowData"),ce(U)):(t.consume(U),J)}function ce(U){return t.check(d$,Z,se)(U)}function Z(U){return t.enter("lineEnding"),t.consume(U),t.exit("lineEnding"),te}function te(U){return U===null||Ze(U)?ce(U):(t.enter("htmlFlowData"),J(U))}function V(U){return U===45?(t.consume(U),F):J(U)}function ae(U){return U===47?(t.consume(U),a="",oe):J(U)}function oe(U){if(U===62){const ke=a.toLowerCase();return sk.includes(ke)?(t.consume(U),Y):J(U)}return is(U)&&a.length<8?(t.consume(U),a+=String.fromCharCode(U),oe):J(U)}function he(U){return U===93?(t.consume(U),F):J(U)}function F(U){return U===62?(t.consume(U),Y):U===45&&r===2?(t.consume(U),F):J(U)}function Y(U){return U===null||Ze(U)?(t.exit("htmlFlowData"),se(U)):(t.consume(U),Y)}function se(U){return t.exit("htmlFlow"),e(U)}}function m$(t,e,n){const i=this;return r;function r(a){return Ze(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):n(a)}function s(a){return i.parser.lazy[i.now().line]?n(a):e(a)}}function g$(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Y0,e,n)}}const y$={name:"htmlText",tokenize:v$};function v$(t,e,n){const i=this;let r,s,a;return l;function l(F){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(F),c}function c(F){return F===33?(t.consume(F),d):F===47?(t.consume(F),I):F===63?(t.consume(F),z):is(F)?(t.consume(F),q):n(F)}function d(F){return F===45?(t.consume(F),m):F===91?(t.consume(F),s=0,S):is(F)?(t.consume(F),O):n(F)}function m(F){return F===45?(t.consume(F),x):n(F)}function g(F){return F===null?n(F):F===45?(t.consume(F),v):Ze(F)?(a=g,ae(F)):(t.consume(F),g)}function v(F){return F===45?(t.consume(F),x):g(F)}function x(F){return F===62?V(F):F===45?v(F):g(F)}function S(F){const Y="CDATA[";return F===Y.charCodeAt(s++)?(t.consume(F),s===Y.length?T:S):n(F)}function T(F){return F===null?n(F):F===93?(t.consume(F),k):Ze(F)?(a=T,ae(F)):(t.consume(F),T)}function k(F){return F===93?(t.consume(F),A):T(F)}function A(F){return F===62?V(F):F===93?(t.consume(F),A):T(F)}function O(F){return F===null||F===62?V(F):Ze(F)?(a=O,ae(F)):(t.consume(F),O)}function z(F){return F===null?n(F):F===63?(t.consume(F),L):Ze(F)?(a=z,ae(F)):(t.consume(F),z)}function L(F){return F===62?V(F):z(F)}function I(F){return is(F)?(t.consume(F),j):n(F)}function j(F){return F===45||jr(F)?(t.consume(F),j):B(F)}function B(F){return Ze(F)?(a=B,ae(F)):Nt(F)?(t.consume(F),B):V(F)}function q(F){return F===45||jr(F)?(t.consume(F),q):F===47||F===62||rn(F)?$(F):n(F)}function $(F){return F===47?(t.consume(F),V):F===58||F===95||is(F)?(t.consume(F),G):Ze(F)?(a=$,ae(F)):Nt(F)?(t.consume(F),$):V(F)}function G(F){return F===45||F===46||F===58||F===95||jr(F)?(t.consume(F),G):X(F)}function X(F){return F===61?(t.consume(F),J):Ze(F)?(a=X,ae(F)):Nt(F)?(t.consume(F),X):$(F)}function J(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(t.consume(F),r=F,ce):Ze(F)?(a=J,ae(F)):Nt(F)?(t.consume(F),J):(t.consume(F),Z)}function ce(F){return F===r?(t.consume(F),r=void 0,te):F===null?n(F):Ze(F)?(a=ce,ae(F)):(t.consume(F),ce)}function Z(F){return F===null||F===34||F===39||F===60||F===61||F===96?n(F):F===47||F===62||rn(F)?$(F):(t.consume(F),Z)}function te(F){return F===47||F===62||rn(F)?$(F):n(F)}function V(F){return F===62?(t.consume(F),t.exit("htmlTextData"),t.exit("htmlText"),e):n(F)}function ae(F){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),oe}function oe(F){return Nt(F)?Bt(t,he,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):he(F)}function he(F){return t.enter("htmlTextData"),a(F)}}const h3={name:"labelEnd",resolveAll:C$,resolveTo:w$,tokenize:E$},b$={tokenize:T$},x$={tokenize:_$},S$={tokenize:k$};function C$(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&$s(t,0,t.length,n),t}function w$(t,e){let n=t.length,i=0,r,s,a,l;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(a=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},m={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",c,e],["enter",d,e]],l=za(l,t.slice(s+1,s+i+3)),l=za(l,[["enter",m,e]]),l=za(l,Ix(e.parser.constructs.insideSpan.null,t.slice(s+i+4,a-3),e)),l=za(l,[["exit",m,e],t[a-2],t[a-1],["exit",d,e]]),l=za(l,t.slice(a+1)),l=za(l,[["exit",c,e]]),$s(t,s,t.length,l),t}function E$(t,e,n){const i=this;let r=i.events.length,s,a;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return l;function l(v){return s?s._inactive?g(v):(a=i.parser.defined.includes(fo(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(v),t.exit("labelMarker"),t.exit("labelEnd"),c):n(v)}function c(v){return v===40?t.attempt(b$,m,a?m:g)(v):v===91?t.attempt(x$,m,a?d:g)(v):a?m(v):g(v)}function d(v){return t.attempt(S$,m,g)(v)}function m(v){return e(v)}function g(v){return s._balanced=!0,n(v)}}function T$(t,e,n){return i;function i(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),r}function r(g){return rn(g)?r0(t,s)(g):s(g)}function s(g){return g===41?m(g):IR(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function a(g){return rn(g)?r0(t,c)(g):m(g)}function l(g){return n(g)}function c(g){return g===34||g===39||g===40?UR(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):m(g)}function d(g){return rn(g)?r0(t,m)(g):m(g)}function m(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),e):n(g)}}function _$(t,e,n){const i=this;return r;function r(l){return HR.call(i,t,s,a,"reference","referenceMarker","referenceString")(l)}function s(l){return i.parser.defined.includes(fo(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}function k$(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const M$={name:"labelStartImage",resolveAll:h3.resolveAll,tokenize:A$};function A$(t,e,n){const i=this;return r;function r(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):e(l)}}const N$={name:"labelStartLink",resolveAll:h3.resolveAll,tokenize:R$};function R$(t,e,n){const i=this;return r;function r(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):e(a)}}const YS={name:"lineEnding",tokenize:O$};function O$(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),Bt(t,e,"linePrefix")}}const Pv={name:"thematicBreak",tokenize:D$};function D$(t,e,n){let i=0,r;return s;function s(d){return t.enter("thematicBreak"),a(d)}function a(d){return r=d,l(d)}function l(d){return d===r?(t.enter("thematicBreakSequence"),c(d)):i>=3&&(d===null||Ze(d))?(t.exit("thematicBreak"),e(d)):n(d)}function c(d){return d===r?(t.consume(d),i++,c):(t.exit("thematicBreakSequence"),Nt(d)?Bt(t,l,"whitespace")(d):l(d))}}const zs={continuation:{tokenize:B$},exit:I$,name:"list",tokenize:L$},z$={partial:!0,tokenize:H$},j$={partial:!0,tokenize:P$};function L$(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return l;function l(x){const S=i.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!i.containerState.marker||x===i.containerState.marker:vw(x)){if(i.containerState.type||(i.containerState.type=S,t.enter(S,{_container:!0})),S==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(Pv,n,d)(x):d(x);if(!i.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(x)}return n(x)}function c(x){return vw(x)&&++a<10?(t.consume(x),c):(!i.interrupt||a<2)&&(i.containerState.marker?x===i.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),d(x)):n(x)}function d(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||x,t.check(Y0,i.interrupt?n:m,t.attempt(z$,v,g))}function m(x){return i.containerState.initialBlankLine=!0,s++,v(x)}function g(x){return Nt(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),v):n(x)}function v(x){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function B$(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Y0,r,s);function r(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Bt(t,e,"listItemIndent",i.containerState.size+1)(l)}function s(l){return i.containerState.furtherBlankLines||!Nt(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(j$,e,a)(l))}function a(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,Bt(t,t.attempt(zs,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function P$(t,e,n){const i=this;return Bt(t,r,"listItemIndent",i.containerState.size+1);function r(s){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?e(s):n(s)}}function I$(t){t.exit(this.containerState.type)}function H$(t,e,n){const i=this;return Bt(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const a=i.events[i.events.length-1];return!Nt(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const ak={name:"setextUnderline",resolveTo:U$,tokenize:F$};function U$(t,e){let n=t.length,i,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",a,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=a,t.push(["exit",a,e]),t}function F$(t,e,n){const i=this;let r;return s;function s(d){let m=i.events.length,g;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){g=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||g)?(t.enter("setextHeadingLine"),r=d,a(d)):n(d)}function a(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===r?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),Nt(d)?Bt(t,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Ze(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const G$={tokenize:q$};function q$(t){const e=this,n=t.attempt(Y0,i,t.attempt(this.parser.constructs.flowInitial,r,Bt(t,t.attempt(this.parser.constructs.flow,r,t.attempt(QZ,r)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const V$={resolveAll:GR()},Y$=FR("string"),K$=FR("text");function FR(t){return{resolveAll:GR(t==="text"?X$:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],s=n.attempt(r,a,l);return a;function a(m){return d(m)?s(m):l(m)}function l(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),c}function c(m){return d(m)?(n.exit("data"),s(m)):(n.consume(m),c)}function d(m){if(m===null)return!0;const g=r[m];let v=-1;if(g)for(;++v<g.length;){const x=g[v];if(!x.previous||x.previous.call(i,i.previous))return!0}return!1}}}function GR(t){return e;function e(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,i):n}}function X$(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let s=r.length,a=-1,l=0,c;for(;s--;){const d=r[s];if(typeof d=="string"){for(a=d.length;d.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(d===-2)c=!0,l++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:i.start._bufferIndex+a,_index:i.start._index+s,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const Q$={42:zs,43:zs,45:zs,48:zs,49:zs,50:zs,51:zs,52:zs,53:zs,54:zs,55:zs,56:zs,57:zs,62:jR},W$={91:e$},J$={[-2]:VS,[-1]:VS,32:VS},Z$={35:a$,42:Pv,45:[ak,Pv],60:c$,61:ak,95:Pv,96:rk,126:rk},$$={38:BR,92:LR},eee={[-5]:YS,[-4]:YS,[-3]:YS,33:M$,38:BR,42:bw,60:[NZ,y$],91:N$,92:[r$,LR],93:h3,95:bw,96:GZ},tee={null:[bw,V$]},nee={null:[42,95]},iee={null:[]},ree=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:nee,contentInitial:W$,disable:iee,document:Q$,flow:Z$,flowInitial:J$,insideSpan:tee,string:$$,text:eee},Symbol.toStringTag,{value:"Module"}));function see(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let a=[],l=[];const c={attempt:B(I),check:B(j),consume:O,enter:z,exit:L,interrupt:B(j,{interrupt:!0})},d={code:null,containerState:{},defineSkip:T,events:[],now:S,parser:t,previous:null,sliceSerialize:v,sliceStream:x,write:g};let m=e.tokenize.call(d,c);return e.resolveAll&&s.push(e),d;function g(X){return a=za(a,X),k(),a[a.length-1]!==null?[]:(q(e,0),d.events=Ix(s,d.events,d),d.events)}function v(X,J){return oee(x(X),J)}function x(X){return aee(a,X)}function S(){const{_bufferIndex:X,_index:J,line:ce,column:Z,offset:te}=i;return{_bufferIndex:X,_index:J,line:ce,column:Z,offset:te}}function T(X){r[X.line]=X.column,G()}function k(){let X;for(;i._index<a.length;){const J=a[i._index];if(typeof J=="string")for(X=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===X&&i._bufferIndex<J.length;)A(J.charCodeAt(i._bufferIndex));else A(J)}}function A(X){m=m(X)}function O(X){Ze(X)?(i.line++,i.column=1,i.offset+=X===-3?2:1,G()):X!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=X}function z(X,J){const ce=J||{};return ce.type=X,ce.start=S(),d.events.push(["enter",ce,d]),l.push(ce),ce}function L(X){const J=l.pop();return J.end=S(),d.events.push(["exit",J,d]),J}function I(X,J){q(X,J.from)}function j(X,J){J.restore()}function B(X,J){return ce;function ce(Z,te,V){let ae,oe,he,F;return Array.isArray(Z)?se(Z):"tokenize"in Z?se([Z]):Y(Z);function Y(ze){return Ie;function Ie(ot){const et=ot!==null&&ze[ot],rt=ot!==null&&ze.null,mi=[...Array.isArray(et)?et:et?[et]:[],...Array.isArray(rt)?rt:rt?[rt]:[]];return se(mi)(ot)}}function se(ze){return ae=ze,oe=0,ze.length===0?V:U(ze[oe])}function U(ze){return Ie;function Ie(ot){return F=$(),he=ze,ze.partial||(d.currentConstruct=ze),ze.name&&d.parser.constructs.disable.null.includes(ze.name)?Pe():ze.tokenize.call(J?Object.assign(Object.create(d),J):d,c,ke,Pe)(ot)}}function ke(ze){return X(he,F),te}function Pe(ze){return F.restore(),++oe<ae.length?U(ae[oe]):V}}}function q(X,J){X.resolveAll&&!s.includes(X)&&s.push(X),X.resolve&&$s(d.events,J,d.events.length-J,X.resolve(d.events.slice(J),d)),X.resolveTo&&(d.events=X.resolveTo(d.events,d))}function $(){const X=S(),J=d.previous,ce=d.currentConstruct,Z=d.events.length,te=Array.from(l);return{from:Z,restore:V};function V(){i=X,d.previous=J,d.currentConstruct=ce,d.events.length=Z,l=te,G()}}function G(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function aee(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let a;if(n===r)a=[t[n].slice(i,s)];else{if(a=t.slice(n,r),i>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(i):a.shift()}s>0&&a.push(t[r].slice(0,s))}return a}function oee(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&r)continue;a=" ";break}default:a=String.fromCharCode(s)}r=s===-2,i.push(a)}return i.join("")}function lee(t){const i={constructs:DR([ree,...(t||{}).extensions||[]]),content:r(wZ),defined:[],document:r(TZ),flow:r(G$),lazy:{},string:r(Y$),text:r(K$)};return i;function r(s){return a;function a(l){return see(i,s,l)}}}function uee(t){for(;!PR(t););return t}const ok=/[\0\t\n\r]/g;function cee(){let t=1,e="",n=!0,i;return r;function r(s,a,l){const c=[];let d,m,g,v,x;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),g=0,e="",n&&(s.charCodeAt(0)===65279&&g++,n=void 0);g<s.length;){if(ok.lastIndex=g,d=ok.exec(s),v=d&&d.index!==void 0?d.index:s.length,x=s.charCodeAt(v),!d){e=s.slice(g);break}if(x===10&&g===v&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),g<v&&(c.push(s.slice(g,v)),t+=v-g),x){case 0:{c.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,c.push(-2);t++<m;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:i=!0,t=1}g=v+1}return l&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const fee=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dee(t){return t.replace(fee,hee)}function hee(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return zR(n.slice(s?2:1),s?16:10)}return d3(n)||t}const qR={}.hasOwnProperty;function pee(t,e,n){return typeof e!="string"&&(n=e,e=void 0),mee(n)(uee(lee(n).document().write(cee()(t,e,!0))))}function mee(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(fs),autolinkProtocol:$,autolinkEmail:$,atxHeading:s(Ai),blockQuote:s(rt),characterEscape:$,characterReference:$,codeFenced:s(mi),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(mi,a),codeText:s(gn,a),codeTextData:$,data:$,codeFlowValue:$,definition:s(Mn),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(In),hardBreakEscape:s(Zn),hardBreakTrailing:s(Zn),htmlFlow:s(er,a),htmlFlowData:$,htmlText:s(er,a),htmlTextData:$,image:s(Ha),label:a,link:s(fs),listItem:s(Pr),listItemValue:v,listOrdered:s($n,g),listUnordered:s($n),paragraph:s(br),reference:U,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Ai),strong:s(An),thematicBreak:s(gu)},exit:{atxHeading:c(),atxHeadingSequence:I,autolink:c(),autolinkEmail:et,autolinkProtocol:ot,blockQuote:c(),characterEscapeValue:G,characterReferenceMarkerHexadecimal:Pe,characterReferenceMarkerNumeric:Pe,characterReferenceValue:ze,characterReference:Ie,codeFenced:c(k),codeFencedFence:T,codeFencedFenceInfo:x,codeFencedFenceMeta:S,codeFlowValue:G,codeIndented:c(A),codeText:c(te),codeTextData:G,data:G,definition:c(),definitionDestinationString:L,definitionLabelString:O,definitionTitleString:z,emphasis:c(),hardBreakEscape:c(J),hardBreakTrailing:c(J),htmlFlow:c(ce),htmlFlowData:G,htmlText:c(Z),htmlTextData:G,image:c(ae),label:he,labelText:oe,lineEnding:X,link:c(V),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ke,resourceDestinationString:F,resourceTitleString:Y,resource:se,setextHeading:c(q),setextHeadingLineSequence:B,setextHeadingText:j,strong:c(),thematicBreak:c()}};VR(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(ye){let _e={type:"root",children:[]};const Ge={stack:[_e],tokenStack:[],config:e,enter:l,exit:d,buffer:a,resume:m,data:n},Xe=[];let vt=-1;for(;++vt<ye.length;)if(ye[vt][1].type==="listOrdered"||ye[vt][1].type==="listUnordered")if(ye[vt][0]==="enter")Xe.push(vt);else{const yn=Xe.pop();vt=r(ye,yn,vt)}for(vt=-1;++vt<ye.length;){const yn=e[ye[vt][0]];qR.call(yn,ye[vt][1].type)&&yn[ye[vt][1].type].call(Object.assign({sliceSerialize:ye[vt][2].sliceSerialize},Ge),ye[vt][1])}if(Ge.tokenStack.length>0){const yn=Ge.tokenStack[Ge.tokenStack.length-1];(yn[1]||lk).call(Ge,void 0,yn[0])}for(_e.position={start:pc(ye.length>0?ye[0][1].start:{line:1,column:1,offset:0}),end:pc(ye.length>0?ye[ye.length-2][1].end:{line:1,column:1,offset:0})},vt=-1;++vt<e.transforms.length;)_e=e.transforms[vt](_e)||_e;return _e}function r(ye,_e,Ge){let Xe=_e-1,vt=-1,yn=!1,Ir,gi,Nn,li;for(;++Xe<=Ge;){const It=ye[Xe];switch(It[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{It[0]==="enter"?vt++:vt--,li=void 0;break}case"lineEndingBlank":{It[0]==="enter"&&(Ir&&!li&&!vt&&!Nn&&(Nn=Xe),li=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:li=void 0}if(!vt&&It[0]==="enter"&&It[1].type==="listItemPrefix"||vt===-1&&It[0]==="exit"&&(It[1].type==="listUnordered"||It[1].type==="listOrdered")){if(Ir){let ds=Xe;for(gi=void 0;ds--;){const xr=ye[ds];if(xr[1].type==="lineEnding"||xr[1].type==="lineEndingBlank"){if(xr[0]==="exit")continue;gi&&(ye[gi][1].type="lineEndingBlank",yn=!0),xr[1].type="lineEnding",gi=ds}else if(!(xr[1].type==="linePrefix"||xr[1].type==="blockQuotePrefix"||xr[1].type==="blockQuotePrefixWhitespace"||xr[1].type==="blockQuoteMarker"||xr[1].type==="listItemIndent"))break}Nn&&(!gi||Nn<gi)&&(Ir._spread=!0),Ir.end=Object.assign({},gi?ye[gi][1].start:It[1].end),ye.splice(gi||Xe,0,["exit",Ir,It[2]]),Xe++,Ge++}if(It[1].type==="listItemPrefix"){const ds={type:"listItem",_spread:!1,start:Object.assign({},It[1].start),end:void 0};Ir=ds,ye.splice(Xe,0,["enter",ds,It[2]]),Xe++,Ge++,Nn=void 0,li=!0}}}return ye[_e][1]._spread=yn,Ge}function s(ye,_e){return Ge;function Ge(Xe){l.call(this,ye(Xe),Xe),_e&&_e.call(this,Xe)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(ye,_e,Ge){this.stack[this.stack.length-1].children.push(ye),this.stack.push(ye),this.tokenStack.push([_e,Ge||void 0]),ye.position={start:pc(_e.start),end:void 0}}function c(ye){return _e;function _e(Ge){ye&&ye.call(this,Ge),d.call(this,Ge)}}function d(ye,_e){const Ge=this.stack.pop(),Xe=this.tokenStack.pop();if(Xe)Xe[0].type!==ye.type&&(_e?_e.call(this,ye,Xe[0]):(Xe[1]||lk).call(this,ye,Xe[0]));else throw new Error("Cannot close `"+ye.type+"` ("+i0({start:ye.start,end:ye.end})+"): its not open");Ge.position.end=pc(ye.end)}function m(){return f3(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function v(ye){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(ye),10),this.data.expectingFirstListItemValue=void 0}}function x(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=ye}function S(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=ye}function T(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ye.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function A(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ye.replace(/(\r?\n|\r)$/g,"")}function O(ye){const _e=this.resume(),Ge=this.stack[this.stack.length-1];Ge.label=_e,Ge.identifier=fo(this.sliceSerialize(ye)).toLowerCase()}function z(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.title=ye}function L(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.url=ye}function I(ye){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Ge=this.sliceSerialize(ye).length;_e.depth=Ge}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function B(ye){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(ye).codePointAt(0)===61?1:2}function q(){this.data.setextHeadingSlurpLineEnding=void 0}function $(ye){const Ge=this.stack[this.stack.length-1].children;let Xe=Ge[Ge.length-1];(!Xe||Xe.type!=="text")&&(Xe=Hn(),Xe.position={start:pc(ye.start),end:void 0},Ge.push(Xe)),this.stack.push(Xe)}function G(ye){const _e=this.stack.pop();_e.value+=this.sliceSerialize(ye),_e.position.end=pc(ye.end)}function X(ye){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ge=_e.children[_e.children.length-1];Ge.position.end=pc(ye.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(_e.type)&&($.call(this,ye),G.call(this,ye))}function J(){this.data.atHardBreak=!0}function ce(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ye}function Z(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ye}function te(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ye}function V(){const ye=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";ye.type+="Reference",ye.referenceType=_e,delete ye.url,delete ye.title}else delete ye.identifier,delete ye.label;this.data.referenceType=void 0}function ae(){const ye=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";ye.type+="Reference",ye.referenceType=_e,delete ye.url,delete ye.title}else delete ye.identifier,delete ye.label;this.data.referenceType=void 0}function oe(ye){const _e=this.sliceSerialize(ye),Ge=this.stack[this.stack.length-2];Ge.label=dee(_e),Ge.identifier=fo(_e).toLowerCase()}function he(){const ye=this.stack[this.stack.length-1],_e=this.resume(),Ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ge.type==="link"){const Xe=ye.children;Ge.children=Xe}else Ge.alt=_e}function F(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.url=ye}function Y(){const ye=this.resume(),_e=this.stack[this.stack.length-1];_e.title=ye}function se(){this.data.inReference=void 0}function U(){this.data.referenceType="collapsed"}function ke(ye){const _e=this.resume(),Ge=this.stack[this.stack.length-1];Ge.label=_e,Ge.identifier=fo(this.sliceSerialize(ye)).toLowerCase(),this.data.referenceType="full"}function Pe(ye){this.data.characterReferenceType=ye.type}function ze(ye){const _e=this.sliceSerialize(ye),Ge=this.data.characterReferenceType;let Xe;Ge?(Xe=zR(_e,Ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Xe=d3(_e);const vt=this.stack[this.stack.length-1];vt.value+=Xe}function Ie(ye){const _e=this.stack.pop();_e.position.end=pc(ye.end)}function ot(ye){G.call(this,ye);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(ye)}function et(ye){G.call(this,ye);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(ye)}function rt(){return{type:"blockquote",children:[]}}function mi(){return{type:"code",lang:null,meta:null,value:""}}function gn(){return{type:"inlineCode",value:""}}function Mn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function In(){return{type:"emphasis",children:[]}}function Ai(){return{type:"heading",depth:0,children:[]}}function Zn(){return{type:"break"}}function er(){return{type:"html",value:""}}function Ha(){return{type:"image",title:null,url:"",alt:null}}function fs(){return{type:"link",title:null,url:"",children:[]}}function $n(ye){return{type:"list",ordered:ye.type==="listOrdered",start:null,spread:ye._spread,children:[]}}function Pr(ye){return{type:"listItem",spread:ye._spread,checked:null,children:[]}}function br(){return{type:"paragraph",children:[]}}function An(){return{type:"strong",children:[]}}function Hn(){return{type:"text",value:""}}function gu(){return{type:"thematicBreak"}}}function pc(t){return{line:t.line,column:t.column,offset:t.offset}}function VR(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?VR(t,i):gee(t,i)}}function gee(t,e){let n;for(n in e)if(qR.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function lk(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+i0({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+i0({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+i0({start:e.start,end:e.end})+") is still open")}function yee(t){const e=this;e.parser=n;function n(i){return pee(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function vee(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function bee(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function xee(t,e){const n=e.value?e.value+`
`:"",i={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(i.className=["language-"+r[0]]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function See(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Cee(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wee(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Dp(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let a,l=t.footnoteCounts.get(i);l===void 0?(l=0,t.footnoteOrder.push(i),a=t.footnoteOrder.length):a=s+1,l+=1,t.footnoteCounts.set(i,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,d),t.applyData(e,d)}function Eee(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Tee(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function YR(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=i:r.push({type:"text",value:i}),r}function _ee(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return YR(t,e);const r={src:Dp(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function kee(t,e){const n={src:Dp(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function Mee(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function Aee(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return YR(t,e);const r={href:Dp(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function Nee(t,e){const n={href:Dp(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function Ree(t,e,n){const i=t.all(e),r=n?Oee(n):KR(e),s={},a=[];if(typeof e.checked=="boolean"){const m=i[0];let g;m&&m.type==="element"&&m.tagName==="p"?g=m:(g={type:"element",tagName:"p",properties:{},children:[]},i.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const m=i[l];(r||l!==0||m.type!=="element"||m.tagName!=="p")&&a.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?a.push(...m.children):a.push(m)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:a};return t.patch(e,d),t.applyData(e,d)}function Oee(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=KR(n[i])}return e}function KR(t){const e=t.spread;return e??t.children.length>1}function Dee(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const a=i[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function zee(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jee(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Lee(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Bee(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],a),r.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=o3(e.children[1]),c=_R(e.children[e.children.length-1]);l&&c&&(a.position={start:l,end:c}),r.push(a)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function Pee(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:e.children.length;let c=-1;const d=[];for(;++c<l;){const g=e.children[c],v={},x=a?a[c]:void 0;x&&(v.align=x);let S={type:"element",tagName:s,properties:v,children:[]};g&&(S.children=t.all(g),t.patch(g,S),S=t.applyData(g,S)),d.push(S)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function Iee(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const uk=9,ck=32;function Hee(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(fk(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(fk(e.slice(r),r>0,!1)),s.join("")}function fk(t,e,n){let i=0,r=t.length;if(e){let s=t.codePointAt(i);for(;s===uk||s===ck;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(r-1);for(;s===uk||s===ck;)r--,s=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function Uee(t,e){const n={type:"text",value:Hee(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Fee(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Gee={blockquote:vee,break:bee,code:xee,delete:See,emphasis:Cee,footnoteReference:wee,heading:Eee,html:Tee,imageReference:_ee,image:kee,inlineCode:Mee,linkReference:Aee,link:Nee,listItem:Ree,list:Dee,paragraph:zee,root:jee,strong:Lee,table:Bee,tableCell:Iee,tableRow:Pee,text:Uee,thematicBreak:Fee,toml:bv,yaml:bv,definition:bv,footnoteDefinition:bv};function bv(){}const XR=-1,Hx=0,s0=1,Vb=2,p3=3,m3=4,g3=5,y3=6,QR=7,WR=8,dk=typeof self=="object"?self:globalThis,qee=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),i=r=>{if(t.has(r))return t.get(r);const[s,a]=e[r];switch(s){case Hx:case XR:return n(a,r);case s0:{const l=n([],r);for(const c of a)l.push(i(c));return l}case Vb:{const l=n({},r);for(const[c,d]of a)l[i(c)]=i(d);return l}case p3:return n(new Date(a),r);case m3:{const{source:l,flags:c}=a;return n(new RegExp(l,c),r)}case g3:{const l=n(new Map,r);for(const[c,d]of a)l.set(i(c),i(d));return l}case y3:{const l=n(new Set,r);for(const c of a)l.add(i(c));return l}case QR:{const{name:l,message:c}=a;return n(new dk[l](c),r)}case WR:return n(BigInt(a),r);case"BigInt":return n(Object(BigInt(a)),r);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new dk[s](a),r)};return i},hk=t=>qee(new Map,t)(0),Jh="",{toString:Vee}={},{keys:Yee}=Object,kg=t=>{const e=typeof t;if(e!=="object"||!t)return[Hx,e];const n=Vee.call(t).slice(8,-1);switch(n){case"Array":return[s0,Jh];case"Object":return[Vb,Jh];case"Date":return[p3,Jh];case"RegExp":return[m3,Jh];case"Map":return[g3,Jh];case"Set":return[y3,Jh];case"DataView":return[s0,n]}return n.includes("Array")?[s0,n]:n.includes("Error")?[QR,n]:[Vb,n]},xv=([t,e])=>t===Hx&&(e==="function"||e==="symbol"),Kee=(t,e,n,i)=>{const r=(a,l)=>{const c=i.push(a)-1;return n.set(l,c),c},s=a=>{if(n.has(a))return n.get(a);let[l,c]=kg(a);switch(l){case Hx:{let m=a;switch(c){case"bigint":l=WR,m=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);m=null;break;case"undefined":return r([XR],a)}return r([l,m],a)}case s0:{if(c){let v=a;return c==="DataView"?v=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(v=new Uint8Array(a)),r([c,[...v]],a)}const m=[],g=r([l,m],a);for(const v of a)m.push(s(v));return g}case Vb:{if(c)switch(c){case"BigInt":return r([c,a.toString()],a);case"Boolean":case"Number":case"String":return r([c,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const m=[],g=r([l,m],a);for(const v of Yee(a))(t||!xv(kg(a[v])))&&m.push([s(v),s(a[v])]);return g}case p3:return r([l,a.toISOString()],a);case m3:{const{source:m,flags:g}=a;return r([l,{source:m,flags:g}],a)}case g3:{const m=[],g=r([l,m],a);for(const[v,x]of a)(t||!(xv(kg(v))||xv(kg(x))))&&m.push([s(v),s(x)]);return g}case y3:{const m=[],g=r([l,m],a);for(const v of a)(t||!xv(kg(v)))&&m.push(s(v));return g}}const{message:d}=a;return r([l,{name:c,message:d}],a)};return s},pk=(t,{json:e,lossy:n}={})=>{const i=[];return Kee(!(e||n),!!e,new Map,i)(t),i},Yb=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?hk(pk(t,e)):structuredClone(t):(t,e)=>hk(pk(t,e));function Xee(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Qee(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Wee(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Xee,i=t.options.footnoteBackLabel||Qee,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[c]);if(!d)continue;const m=t.all(d),g=String(d.identifier).toUpperCase(),v=Dp(g.toLowerCase());let x=0;const S=[],T=t.footnoteCounts.get(g);for(;T!==void 0&&++x<=T;){S.length>0&&S.push({type:"text",value:" "});let O=typeof n=="string"?n:n(c,x);typeof O=="string"&&(O={type:"text",value:O}),S.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+v+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,x),className:["data-footnote-backref"]},children:Array.isArray(O)?O:[O]})}const k=m[m.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const O=k.children[k.children.length-1];O&&O.type==="text"?O.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...S)}else m.push(...S);const A={type:"element",tagName:"li",properties:{id:e+"fn-"+v},children:t.wrap(m,!0)};t.patch(d,A),l.push(A)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Yb(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const Ux=(function(t){if(t==null)return ete;if(typeof t=="function")return Fx(t);if(typeof t=="object")return Array.isArray(t)?Jee(t):Zee(t);if(typeof t=="string")return $ee(t);throw new Error("Expected function, string, or object as test")});function Jee(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Ux(t[n]);return Fx(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function Zee(t){const e=t;return Fx(n);function n(i){const r=i;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function $ee(t){return Fx(e);function e(n){return n&&n.type===t}}function Fx(t){return e;function e(n,i,r){return!!(tte(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function ete(){return!0}function tte(t){return t!==null&&typeof t=="object"&&"type"in t}const JR=[],nte=!0,xw=!1,ite="skip";function ZR(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const s=Ux(r),a=i?-1:1;l(t,void 0,[])();function l(c,d,m){const g=c&&typeof c=="object"?c:{};if(typeof g.type=="string"){const x=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return v;function v(){let x=JR,S,T,k;if((!e||s(c,d,m[m.length-1]||void 0))&&(x=rte(n(c,m)),x[0]===xw))return x;if("children"in c&&c.children){const A=c;if(A.children&&x[0]!==ite)for(T=(i?A.children.length:-1)+a,k=m.concat(A);T>-1&&T<A.children.length;){const O=A.children[T];if(S=l(O,T,k)(),S[0]===xw)return S;T=typeof S[1]=="number"?S[1]:T+a}}return x}}}function rte(t){return Array.isArray(t)?t:typeof t=="number"?[nte,t]:t==null?JR:[t]}function v3(t,e,n,i){let r,s,a;typeof e=="function"&&typeof n!="function"?(s=void 0,a=e,r=n):(s=e,a=n,r=i),ZR(t,s,l,r);function l(c,d){const m=d[d.length-1],g=m?m.children.indexOf(c):void 0;return a(c,g,m)}}const Sw={}.hasOwnProperty,ste={};function ate(t,e){const n=e||ste,i=new Map,r=new Map,s=new Map,a={...Gee,...n.handlers},l={all:d,applyData:lte,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:n,patch:ote,wrap:cte};return v3(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const g=m.type==="definition"?i:r,v=String(m.identifier).toUpperCase();g.has(v)||g.set(v,m)}}),l;function c(m,g){const v=m.type,x=l.handlers[v];if(Sw.call(l.handlers,v)&&x)return x(l,m,g);if(l.options.passThrough&&l.options.passThrough.includes(v)){if("children"in m){const{children:T,...k}=m,A=Yb(k);return A.children=l.all(m),A}return Yb(m)}return(l.options.unknownHandler||ute)(l,m,g)}function d(m){const g=[];if("children"in m){const v=m.children;let x=-1;for(;++x<v.length;){const S=l.one(v[x],m);if(S){if(x&&v[x-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=mk(S.value)),!Array.isArray(S)&&S.type==="element")){const T=S.children[0];T&&T.type==="text"&&(T.value=mk(T.value))}Array.isArray(S)?g.push(...S):g.push(S)}}}return g}}function ote(t,e){t.position&&(e.position=QJ(t))}function lte(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const a="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Yb(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function ute(t,e){const n=e.data||{},i="value"in e&&!(Sw.call(n,"hProperties")||Sw.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function cte(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function mk(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function gk(t,e){const n=ate(t,e),i=n.one(t,void 0),r=Wee(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function fte(t,e){return t&&"run"in t?async function(n,i){const r=gk(n,{file:i,...e});await t.run(r,i)}:function(n,i){return gk(n,{file:i,...t||e})}}function yk(t){if(t)throw t}var KS,vk;function dte(){if(vk)return KS;vk=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!g)return!1;var v;for(v in d);return typeof v>"u"||t.call(d,v)},a=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},l=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(i)return i(d,m).value}else return;return d[m]};return KS=function c(){var d,m,g,v,x,S,T=arguments[0],k=1,A=arguments.length,O=!1;for(typeof T=="boolean"&&(O=T,T=arguments[1]||{},k=2),(T==null||typeof T!="object"&&typeof T!="function")&&(T={});k<A;++k)if(d=arguments[k],d!=null)for(m in d)g=l(T,m),v=l(d,m),T!==v&&(O&&v&&(s(v)||(x=r(v)))?(x?(x=!1,S=g&&r(g)?g:[]):S=g&&s(g)?g:{},a(T,{name:m,newValue:c(O,S,v)})):typeof v<"u"&&a(T,{name:m,newValue:v}));return T},KS}var hte=dte();const XS=Ep(hte);function Cw(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function pte(){const t=[],e={run:n,use:i};return e;function n(...r){let s=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...r);function l(c,...d){const m=t[++s];let g=-1;if(c){a(c);return}for(;++g<r.length;)(d[g]===null||d[g]===void 0)&&(d[g]=r[g]);r=d,m?mte(m,l)(...d):a(null,...d)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function mte(t,e){let n;return i;function i(...a){const l=t.length>a.length;let c;l&&a.push(r);try{c=t.apply(this,a)}catch(d){const m=d;if(l&&n)throw m;return r(m)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,r):c instanceof Error?r(c):s(c))}function r(a,...l){n||(n=!0,e(a,...l))}function s(a){r(null,a)}}const el={basename:gte,dirname:yte,extname:vte,join:bte,sep:"/"};function gte(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');K0(t);let n=0,i=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let a=-1,l=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else a<0&&(s=!0,a=r+1),l>-1&&(t.codePointAt(r)===e.codePointAt(l--)?l<0&&(i=r):(l=-1,i=a));return n===i?i=a:i<0&&(i=t.length),t.slice(n,i)}function yte(t){if(K0(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function vte(t){K0(t);let e=t.length,n=-1,i=0,r=-1,s=0,a;for(;e--;){const l=t.codePointAt(e);if(l===47){if(a){i=e+1;break}continue}n<0&&(a=!0,n=e+1),l===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function bte(...t){let e=-1,n;for(;++e<t.length;)K0(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":xte(n)}function xte(t){K0(t);const e=t.codePointAt(0)===47;let n=Ste(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Ste(t,e){let n="",i=0,r=-1,s=0,a=-1,l,c;for(;++a<=t.length;){if(a<t.length)l=t.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",i=0):(n=n.slice(0,c),i=n.length-1-n.lastIndexOf("/")),r=a,s=0;continue}}else if(n.length>0){n="",i=0,r=a,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,a):n=t.slice(r+1,a),i=a-r-1;r=a,s=0}else l===46&&s>-1?s++:s=-1}return n}function K0(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Cte={cwd:wte};function wte(){return"/"}function ww(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Ete(t){if(typeof t=="string")t=new URL(t);else if(!ww(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Tte(t)}function Tte(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const QS=["history","path","basename","stem","extname","dirname"];class $R{constructor(e){let n;e?ww(e)?n={path:e}:typeof e=="string"||_te(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Cte.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<QS.length;){const s=QS[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)QS.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?el.basename(this.path):void 0}set basename(e){JS(e,"basename"),WS(e,"basename"),this.path=el.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?el.dirname(this.path):void 0}set dirname(e){bk(this.basename,"dirname"),this.path=el.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?el.extname(this.path):void 0}set extname(e){if(WS(e,"extname"),bk(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=el.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ww(e)&&(e=Ete(e)),JS(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?el.basename(this.path,this.extname):void 0}set stem(e){JS(e,"stem"),WS(e,"stem"),this.path=el.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new Br(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function WS(t,e){if(t&&t.includes(el.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+el.sep+"`")}function JS(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function bk(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function _te(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const kte=(function(t){const i=this.constructor.prototype,r=i[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s}),Mte={}.hasOwnProperty;class b3 extends kte{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pte()}copy(){const e=new b3;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(XS(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(eC("data",this.frozen),this.namespace[e]=n,this):Mte.call(this.namespace,e)&&this.namespace[e]||void 0:e?(eC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Sv(e),i=this.parser||this.Parser;return ZS("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),ZS("process",this.parser||this.Parser),$S("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,a){const l=Sv(e),c=i.parse(l);i.run(c,l,function(m,g,v){if(m||!g||!v)return d(m);const x=g,S=i.stringify(x,v);Rte(S)?v.value=S:v.result=S,d(m,v)});function d(m,g){m||!g?a(m):s?s(g):n(void 0,g)}}}processSync(e){let n=!1,i;return this.freeze(),ZS("processSync",this.parser||this.Parser),$S("processSync",this.compiler||this.Compiler),this.process(e,r),Sk("processSync","process",n),i;function r(s,a){n=!0,yk(s),i=a}}run(e,n,i){xk(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(a,l){const c=Sv(n);r.run(e,c,d);function d(m,g,v){const x=g||e;m?l(m):a?a(x):i(void 0,x,v)}}}runSync(e,n){let i=!1,r;return this.run(e,n,s),Sk("runSync","run",i),r;function s(a,l){yk(a),r=l,i=!0}}stringify(e,n){this.freeze();const i=Sv(n),r=this.compiler||this.Compiler;return $S("stringify",r),xk(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(eC("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...g]=d;c(m,g)}else a(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function a(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(r.settings=XS(!0,r.settings,d.settings))}function l(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const g=d[m];s(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,m){let g=-1,v=-1;for(;++g<i.length;)if(i[g][0]===d){v=g;break}if(v===-1)i.push([d,...m]);else if(m.length>0){let[x,...S]=m;const T=i[v][1];Cw(T)&&Cw(x)&&(x=XS(!0,T,x)),i[v]=[d,x,...S]}}}}const Ate=new b3().freeze();function ZS(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function $S(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function eC(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function xk(t){if(!Cw(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Sk(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Sv(t){return Nte(t)?t:new $R(t)}function Nte(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Rte(t){return typeof t=="string"||Ote(t)}function Ote(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Dte="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ck=[],wk={allowDangerousHtml:!0},zte=/^(https?|ircs?|mailto|xmpp)$/i,jte=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Lte(t){const e=Bte(t),n=Pte(t);return Ite(e.runSync(e.parse(n),n),t)}function Bte(t){const e=t.rehypePlugins||Ck,n=t.remarkPlugins||Ck,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...wk}:wk;return Ate().use(yee).use(n).use(fte,i).use(e)}function Pte(t){const e=t.children||"",n=new $R;return typeof e=="string"&&(n.value=e),n}function Ite(t,e){const n=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,a=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||Hte;for(const m of jte)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+Dte+m.id,void 0);return v3(t,d),eZ(t,{Fragment:_.Fragment,components:r,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function d(m,g,v){if(m.type==="raw"&&v&&typeof g=="number")return a?v.children.splice(g,1):v.children[g]={type:"text",value:m.value},g;if(m.type==="element"){let x;for(x in qS)if(Object.hasOwn(qS,x)&&Object.hasOwn(m.properties,x)){const S=m.properties[x],T=qS[x];(T===null||T.includes(m.tagName))&&(m.properties[x]=c(String(S||""),x,m))}}if(m.type==="element"){let x=n?!n.includes(m.tagName):s?s.includes(m.tagName):!1;if(!x&&i&&typeof g=="number"&&(x=!i(m,g,v)),x&&v&&typeof g=="number")return l&&m.children?v.children.splice(g,1,...m.children):v.children.splice(g,1),g}}}function Hte(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||i!==-1&&e>i||zte.test(t.slice(0,e))?t:""}function Ek(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(e);for(;r!==-1;)i++,r=n.indexOf(e,r+e.length);return i}function Ute(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Fte(t,e,n){const r=Ux((n||{}).ignore||[]),s=Gte(e);let a=-1;for(;++a<s.length;)ZR(t,"text",l);function l(d,m){let g=-1,v;for(;++g<m.length;){const x=m[g],S=v?v.children:void 0;if(r(x,S?S.indexOf(x):void 0,v))return;v=x}if(v)return c(d,m)}function c(d,m){const g=m[m.length-1],v=s[a][0],x=s[a][1];let S=0;const k=g.children.indexOf(d);let A=!1,O=[];v.lastIndex=0;let z=v.exec(d.value);for(;z;){const L=z.index,I={index:z.index,input:z.input,stack:[...m,d]};let j=x(...z,I);if(typeof j=="string"&&(j=j.length>0?{type:"text",value:j}:void 0),j===!1?v.lastIndex=L+1:(S!==L&&O.push({type:"text",value:d.value.slice(S,L)}),Array.isArray(j)?O.push(...j):j&&O.push(j),S=L+z[0].length,A=!0),!v.global)break;z=v.exec(d.value)}return A?(S<d.value.length&&O.push({type:"text",value:d.value.slice(S)}),g.children.splice(k,1,...O)):O=[d],k+O.length}}function Gte(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const r=n[i];e.push([qte(r[0]),Vte(r[1])])}return e}function qte(t){return typeof t=="string"?new RegExp(Ute(t),"g"):t}function Vte(t){return typeof t=="function"?t:function(){return t}}const tC="phrasing",nC=["autolink","link","image","label"];function Yte(){return{transforms:[$te],enter:{literalAutolink:Xte,literalAutolinkEmail:iC,literalAutolinkHttp:iC,literalAutolinkWww:iC},exit:{literalAutolink:Zte,literalAutolinkEmail:Jte,literalAutolinkHttp:Qte,literalAutolinkWww:Wte}}}function Kte(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:tC,notInConstruct:nC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:tC,notInConstruct:nC},{character:":",before:"[ps]",after:"\\/",inConstruct:tC,notInConstruct:nC}]}}function Xte(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function iC(t){this.config.enter.autolinkProtocol.call(this,t)}function Qte(t){this.config.exit.autolinkProtocol.call(this,t)}function Wte(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Jte(t){this.config.exit.autolinkEmail.call(this,t)}function Zte(t){this.exit(t)}function $te(t){Fte(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,ene],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),tne]],{ignore:["link","linkReference"]})}function ene(t,e,n,i,r){let s="";if(!e9(r)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!nne(n)))return!1;const a=ine(n+i);if(!a[0])return!1;const l={type:"link",title:null,url:s+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function tne(t,e,n,i){return!e9(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function nne(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function ine(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const r=Ek(t,"(");let s=Ek(t,")");for(;i!==-1&&r>s;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[t,n]}function e9(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||hd(n)||Px(n))&&(!e||n!==47)}t9.peek=dne;function rne(){this.buffer()}function sne(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function ane(){this.buffer()}function one(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function lne(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=fo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function une(t){this.exit(t)}function cne(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=fo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function fne(t){this.exit(t)}function dne(){return"["}function t9(t,e,n,i){const r=n.createTracker(i);let s=r.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return s+=r.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),a(),s+=r.move("]"),s}function hne(){return{enter:{gfmFootnoteCallString:rne,gfmFootnoteCall:sne,gfmFootnoteDefinitionLabelString:ane,gfmFootnoteDefinition:one},exit:{gfmFootnoteCallString:lne,gfmFootnoteCall:une,gfmFootnoteDefinitionLabelString:cne,gfmFootnoteDefinition:fne}}}function pne(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:t9},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,s,a){const l=s.createTracker(a);let c=l.move("[^");const d=s.enter("footnoteDefinition"),m=s.enter("label");return c+=l.move(s.safe(s.associationId(i),{before:c,after:"]"})),m(),c+=l.move("]:"),i.children&&i.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,l.current()),e?n9:mne))),d(),c}}function mne(t,e,n){return e===0?t:n9(t,e,n)}function n9(t,e,n){return(n?"":"    ")+t}const gne=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];i9.peek=Sne;function yne(){return{canContainEols:["delete"],enter:{strikethrough:bne},exit:{strikethrough:xne}}}function vne(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:gne}],handlers:{delete:i9}}}function bne(t){this.enter({type:"delete",children:[]},t)}function xne(t){this.exit(t)}function i9(t,e,n,i){const r=n.createTracker(i),s=n.enter("strikethrough");let a=r.move("~~");return a+=n.containerPhrasing(t,{...r.current(),before:a,after:"~"}),a+=r.move("~~"),s(),a}function Sne(){return"~"}function Cne(t){return t.length}function wne(t,e){const n=e||{},i=(n.align||[]).concat(),r=n.stringLength||Cne,s=[],a=[],l=[],c=[];let d=0,m=-1;for(;++m<t.length;){const T=[],k=[];let A=-1;for(t[m].length>d&&(d=t[m].length);++A<t[m].length;){const O=Ene(t[m][A]);if(n.alignDelimiters!==!1){const z=r(O);k[A]=z,(c[A]===void 0||z>c[A])&&(c[A]=z)}T.push(O)}a[m]=T,l[m]=k}let g=-1;if(typeof i=="object"&&"length"in i)for(;++g<d;)s[g]=Tk(i[g]);else{const T=Tk(i);for(;++g<d;)s[g]=T}g=-1;const v=[],x=[];for(;++g<d;){const T=s[g];let k="",A="";T===99?(k=":",A=":"):T===108?k=":":T===114&&(A=":");let O=n.alignDelimiters===!1?1:Math.max(1,c[g]-k.length-A.length);const z=k+"-".repeat(O)+A;n.alignDelimiters!==!1&&(O=k.length+O+A.length,O>c[g]&&(c[g]=O),x[g]=O),v[g]=z}a.splice(1,0,v),l.splice(1,0,x),m=-1;const S=[];for(;++m<a.length;){const T=a[m],k=l[m];g=-1;const A=[];for(;++g<d;){const O=T[g]||"";let z="",L="";if(n.alignDelimiters!==!1){const I=c[g]-(k[g]||0),j=s[g];j===114?z=" ".repeat(I):j===99?I%2?(z=" ".repeat(I/2+.5),L=" ".repeat(I/2-.5)):(z=" ".repeat(I/2),L=z):L=" ".repeat(I)}n.delimiterStart!==!1&&!g&&A.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&O==="")&&(n.delimiterStart!==!1||g)&&A.push(" "),n.alignDelimiters!==!1&&A.push(z),A.push(O),n.alignDelimiters!==!1&&A.push(L),n.padding!==!1&&A.push(" "),(n.delimiterEnd!==!1||g!==d-1)&&A.push("|")}S.push(n.delimiterEnd===!1?A.join("").replace(/ +$/,""):A.join(""))}return S.join(`
`)}function Ene(t){return t==null?"":String(t)}function Tk(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Tne(t,e,n,i){const r=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(t,s.current()),_ne);return r(),a}function _ne(t,e,n){return">"+(n?"":" ")+t}function kne(t,e){return _k(t,e.inConstruct,!0)&&!_k(t,e.notInConstruct,!1)}function _k(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function kk(t,e,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&kne(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function Mne(t,e){const n=String(t);let i=n.indexOf(e),r=i,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>a&&(a=s):s=1,r=i+e.length,i=n.indexOf(e,r);return a}function Ane(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Nne(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Rne(t,e,n,i){const r=Nne(n),s=t.value||"",a=r==="`"?"GraveAccent":"Tilde";if(Ane(t,n)){const g=n.enter("codeIndented"),v=n.indentLines(s,One);return g(),v}const l=n.createTracker(i),c=r.repeat(Math.max(Mne(s,r)+1,3)),d=n.enter("codeFenced");let m=l.move(c);if(t.lang){const g=n.enter(`codeFencedLang${a}`);m+=l.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...l.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${a}`);m+=l.move(" "),m+=l.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...l.current()})),g()}return m+=l.move(`
`),s&&(m+=l.move(s+`
`)),m+=l.move(c),d(),m}function One(t,e,n){return(n?"":"    ")+t}function x3(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Dne(t,e,n,i){const r=x3(n),s=r==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const c=n.createTracker(i);let d=c.move("[");return d+=c.move(n.safe(n.associationId(t),{before:d,after:"]",...c.current()})),d+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+r),d+=c.move(n.safe(t.title,{before:d,after:r,...c.current()})),d+=c.move(r),l()),a(),d}function zne(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function _0(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Kb(t,e,n){const i=Cp(t),r=Cp(e);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}r9.peek=jne;function r9(t,e,n,i){const r=zne(n),s=n.enter("emphasis"),a=n.createTracker(i),l=a.move(r);let c=a.move(n.containerPhrasing(t,{after:r,before:l,...a.current()}));const d=c.charCodeAt(0),m=Kb(i.before.charCodeAt(i.before.length-1),d,r);m.inside&&(c=_0(d)+c.slice(1));const g=c.charCodeAt(c.length-1),v=Kb(i.after.charCodeAt(0),g,r);v.inside&&(c=c.slice(0,-1)+_0(g));const x=a.move(r);return s(),n.attentionEncodeSurroundingInfo={after:v.outside,before:m.outside},l+c+x}function jne(t,e,n){return n.options.emphasis||"*"}function Lne(t,e){let n=!1;return v3(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,xw}),!!((!t.depth||t.depth<3)&&f3(t)&&(e.options.setext||n))}function Bne(t,e,n,i){const r=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(i);if(Lne(t,n)){const m=n.enter("headingSetext"),g=n.enter("phrasing"),v=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return g(),m(),v+`
`+(r===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const a="#".repeat(r),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(a+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(d)&&(d=_0(d.charCodeAt(0))+d.slice(1)),d=d?a+" "+d:a,n.options.closeAtx&&(d+=" "+a),c(),l(),d}s9.peek=Pne;function s9(t){return t.value||""}function Pne(){return"<"}a9.peek=Ine;function a9(t,e,n,i){const r=x3(n),s=r==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const c=n.createTracker(i);let d=c.move("![");return d+=c.move(n.safe(t.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+r),d+=c.move(n.safe(t.title,{before:d,after:r,...c.current()})),d+=c.move(r),l()),d+=c.move(")"),a(),d}function Ine(){return"!"}o9.peek=Hne;function o9(t,e,n,i){const r=t.referenceType,s=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(i);let c=l.move("![");const d=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),a();const m=n.stack;n.stack=[],a=n.enter("reference");const g=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return a(),n.stack=m,s(),r==="full"||!d||d!==g?c+=l.move(g+"]"):r==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Hne(){return"!"}l9.peek=Une;function l9(t,e,n){let i=t.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const a=n.unsafe[s],l=n.compilePattern(a);let c;if(a.atBreak)for(;c=l.exec(i);){let d=c.index;i.charCodeAt(d)===10&&i.charCodeAt(d-1)===13&&d--,i=i.slice(0,d)+" "+i.slice(c.index+1)}}return r+i+r}function Une(){return"`"}function u9(t,e){const n=f3(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}c9.peek=Fne;function c9(t,e,n,i){const r=x3(n),s=r==='"'?"Quote":"Apostrophe",a=n.createTracker(i);let l,c;if(u9(t,n)){const m=n.stack;n.stack=[],l=n.enter("autolink");let g=a.move("<");return g+=a.move(n.containerPhrasing(t,{before:g,after:">",...a.current()})),g+=a.move(">"),l(),n.stack=m,g}l=n.enter("link"),c=n.enter("label");let d=a.move("[");return d+=a.move(n.containerPhrasing(t,{before:d,after:"](",...a.current()})),d+=a.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=a.move("<"),d+=a.move(n.safe(t.url,{before:d,after:">",...a.current()})),d+=a.move(">")):(c=n.enter("destinationRaw"),d+=a.move(n.safe(t.url,{before:d,after:t.title?" ":")",...a.current()}))),c(),t.title&&(c=n.enter(`title${s}`),d+=a.move(" "+r),d+=a.move(n.safe(t.title,{before:d,after:r,...a.current()})),d+=a.move(r),c()),d+=a.move(")"),l(),d}function Fne(t,e,n){return u9(t,n)?"<":"["}f9.peek=Gne;function f9(t,e,n,i){const r=t.referenceType,s=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(i);let c=l.move("[");const d=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),a();const m=n.stack;n.stack=[],a=n.enter("reference");const g=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return a(),n.stack=m,s(),r==="full"||!d||d!==g?c+=l.move(g+"]"):r==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Gne(){return"["}function S3(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function qne(t){const e=S3(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Vne(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function d9(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Yne(t,e,n,i){const r=n.enter("list"),s=n.bulletCurrent;let a=t.ordered?Vne(n):S3(n);const l=t.ordered?a==="."?")":".":qne(n);let c=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),d9(n)===a&&m){let g=-1;for(;++g<t.children.length;){const v=t.children[g];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=l),n.bulletCurrent=a;const d=n.containerFlow(t,i);return n.bulletLastUsed=a,n.bulletCurrent=s,r(),d}function Kne(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Xne(t,e,n,i){const r=Kne(n);let s=n.bulletCurrent||S3(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let a=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(i);l.move(s+" ".repeat(a-s.length)),l.shift(a);const c=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,l.current()),m);return c(),d;function m(g,v,x){return v?(x?"":" ".repeat(a))+g:(x?s:s+" ".repeat(a-s.length))+g}}function Qne(t,e,n,i){const r=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(t,i);return s(),r(),a}const Wne=Ux(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Jne(t,e,n,i){return(t.children.some(function(a){return Wne(a)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function Zne(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}h9.peek=$ne;function h9(t,e,n,i){const r=Zne(n),s=n.enter("strong"),a=n.createTracker(i),l=a.move(r+r);let c=a.move(n.containerPhrasing(t,{after:r,before:l,...a.current()}));const d=c.charCodeAt(0),m=Kb(i.before.charCodeAt(i.before.length-1),d,r);m.inside&&(c=_0(d)+c.slice(1));const g=c.charCodeAt(c.length-1),v=Kb(i.after.charCodeAt(0),g,r);v.inside&&(c=c.slice(0,-1)+_0(g));const x=a.move(r+r);return s(),n.attentionEncodeSurroundingInfo={after:v.outside,before:m.outside},l+c+x}function $ne(t,e,n){return n.options.strong||"*"}function eie(t,e,n,i){return n.safe(t.value,i)}function tie(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function nie(t,e,n){const i=(d9(n)+(n.options.ruleSpaces?" ":"")).repeat(tie(n));return n.options.ruleSpaces?i.slice(0,-1):i}const p9={blockquote:Tne,break:kk,code:Rne,definition:Dne,emphasis:r9,hardBreak:kk,heading:Bne,html:s9,image:a9,imageReference:o9,inlineCode:l9,link:c9,linkReference:f9,list:Yne,listItem:Xne,paragraph:Qne,root:Jne,strong:h9,text:eie,thematicBreak:nie};function iie(){return{enter:{table:rie,tableData:Mk,tableHeader:Mk,tableRow:aie},exit:{codeText:oie,table:sie,tableData:rC,tableHeader:rC,tableRow:rC}}}function rie(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function sie(t){this.exit(t),this.data.inTable=void 0}function aie(t){this.enter({type:"tableRow",children:[]},t)}function rC(t){this.exit(t)}function Mk(t){this.enter({type:"tableCell",children:[]},t)}function oie(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,lie));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function lie(t,e){return e==="|"?e:t}function uie(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:a,tableCell:c,tableRow:l}};function a(x,S,T,k){return d(m(x,T,k),x.align)}function l(x,S,T,k){const A=g(x,T,k),O=d([A]);return O.slice(0,O.indexOf(`
`))}function c(x,S,T,k){const A=T.enter("tableCell"),O=T.enter("phrasing"),z=T.containerPhrasing(x,{...k,before:s,after:s});return O(),A(),z}function d(x,S){return wne(x,{align:S,alignDelimiters:i,padding:n,stringLength:r})}function m(x,S,T){const k=x.children;let A=-1;const O=[],z=S.enter("table");for(;++A<k.length;)O[A]=g(k[A],S,T);return z(),O}function g(x,S,T){const k=x.children;let A=-1;const O=[],z=S.enter("tableRow");for(;++A<k.length;)O[A]=c(k[A],x,S,T);return z(),O}function v(x,S,T){let k=p9.inlineCode(x,S,T);return T.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function cie(){return{exit:{taskListCheckValueChecked:Ak,taskListCheckValueUnchecked:Ak,paragraph:die}}}function fie(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:hie}}}function Ak(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function die(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=e.children;let s=-1,a;for(;++s<r.length;){const l=r[s];if(l.type==="paragraph"){a=l;break}}a===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function hie(t,e,n,i){const r=t.children[0],s=typeof t.checked=="boolean"&&r&&r.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",l=n.createTracker(i);s&&l.move(a);let c=p9.listItem(t,e,n,{...i,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(m){return m+a}}function pie(){return[Yte(),hne(),yne(),iie(),cie()]}function mie(t){return{extensions:[Kte(),pne(t),vne(),uie(t),fie()]}}const gie={tokenize:Cie,partial:!0},m9={tokenize:wie,partial:!0},g9={tokenize:Eie,partial:!0},y9={tokenize:Tie,partial:!0},yie={tokenize:_ie,partial:!0},v9={name:"wwwAutolink",tokenize:xie,previous:x9},b9={name:"protocolAutolink",tokenize:Sie,previous:S9},mu={name:"emailAutolink",tokenize:bie,previous:C9},cl={};function vie(){return{text:cl}}let Ff=48;for(;Ff<123;)cl[Ff]=mu,Ff++,Ff===58?Ff=65:Ff===91&&(Ff=97);cl[43]=mu;cl[45]=mu;cl[46]=mu;cl[95]=mu;cl[72]=[mu,b9];cl[104]=[mu,b9];cl[87]=[mu,v9];cl[119]=[mu,v9];function bie(t,e,n){const i=this;let r,s;return a;function a(g){return!Ew(g)||!C9.call(i,i.previous)||C3(i.events)?n(g):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(g))}function l(g){return Ew(g)?(t.consume(g),l):g===64?(t.consume(g),c):n(g)}function c(g){return g===46?t.check(yie,m,d)(g):g===45||g===95||jr(g)?(s=!0,t.consume(g),c):m(g)}function d(g){return t.consume(g),r=!0,c}function m(g){return s&&r&&is(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(g)):n(g)}}function xie(t,e,n){const i=this;return r;function r(a){return a!==87&&a!==119||!x9.call(i,i.previous)||C3(i.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(gie,t.attempt(m9,t.attempt(g9,s),n),n)(a))}function s(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function Sie(t,e,n){const i=this;let r="",s=!1;return a;function a(g){return(g===72||g===104)&&S9.call(i,i.previous)&&!C3(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(g),t.consume(g),l):n(g)}function l(g){if(is(g)&&r.length<5)return r+=String.fromCodePoint(g),t.consume(g),l;if(g===58){const v=r.toLowerCase();if(v==="http"||v==="https")return t.consume(g),c}return n(g)}function c(g){return g===47?(t.consume(g),s?d:(s=!0,c)):n(g)}function d(g){return g===null||qb(g)||rn(g)||hd(g)||Px(g)?n(g):t.attempt(m9,t.attempt(g9,m),n)(g)}function m(g){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(g)}}function Cie(t,e,n){let i=0;return r;function r(a){return(a===87||a===119)&&i<3?(i++,t.consume(a),r):a===46&&i===3?(t.consume(a),s):n(a)}function s(a){return a===null?n(a):e(a)}}function wie(t,e,n){let i,r,s;return a;function a(d){return d===46||d===95?t.check(y9,c,l)(d):d===null||rn(d)||hd(d)||d!==45&&Px(d)?c(d):(s=!0,t.consume(d),a)}function l(d){return d===95?i=!0:(r=i,i=void 0),t.consume(d),a}function c(d){return r||i||!s?n(d):e(d)}}function Eie(t,e){let n=0,i=0;return r;function r(a){return a===40?(n++,t.consume(a),r):a===41&&i<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(y9,e,s)(a):a===null||rn(a)||hd(a)?e(a):(t.consume(a),r)}function s(a){return a===41&&i++,t.consume(a),r}}function Tie(t,e,n){return i;function i(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),i):l===38?(t.consume(l),s):l===93?(t.consume(l),r):l===60||l===null||rn(l)||hd(l)?e(l):n(l)}function r(l){return l===null||l===40||l===91||rn(l)||hd(l)?e(l):i(l)}function s(l){return is(l)?a(l):n(l)}function a(l){return l===59?(t.consume(l),i):is(l)?(t.consume(l),a):n(l)}}function _ie(t,e,n){return i;function i(s){return t.consume(s),r}function r(s){return jr(s)?n(s):e(s)}}function x9(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||rn(t)}function S9(t){return!is(t)}function C9(t){return!(t===47||Ew(t))}function Ew(t){return t===43||t===45||t===46||t===95||jr(t)}function C3(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const kie={tokenize:jie,partial:!0};function Mie(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Oie,continuation:{tokenize:Die},exit:zie}},text:{91:{name:"gfmFootnoteCall",tokenize:Rie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Aie,resolveTo:Nie}}}}function Aie(t,e,n){const i=this;let r=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a;for(;r--;){const c=i.events[r][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!a||!a._balanced)return n(c);const d=fo(i.sliceSerialize({start:a.end,end:i.now()}));return d.codePointAt(0)!==94||!s.includes(d.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function Nie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...l),t}function Rie(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,a;return l;function l(g){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),c}function c(g){return g!==94?n(g):(t.enter("gfmFootnoteCallMarker"),t.consume(g),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(g){if(s>999||g===93&&!a||g===null||g===91||rn(g))return n(g);if(g===93){t.exit("chunkString");const v=t.exit("gfmFootnoteCallString");return r.includes(fo(i.sliceSerialize(v)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(g)}return rn(g)||(a=!0),s++,t.consume(g),g===92?m:d}function m(g){return g===91||g===92||g===93?(t.consume(g),s++,d):d(g)}}function Oie(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,a=0,l;return c;function c(S){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(S){return S===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(S)}function m(S){if(a>999||S===93&&!l||S===null||S===91||rn(S))return n(S);if(S===93){t.exit("chunkString");const T=t.exit("gfmFootnoteDefinitionLabelString");return s=fo(i.sliceSerialize(T)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),v}return rn(S)||(l=!0),a++,t.consume(S),S===92?g:m}function g(S){return S===91||S===92||S===93?(t.consume(S),a++,m):m(S)}function v(S){return S===58?(t.enter("definitionMarker"),t.consume(S),t.exit("definitionMarker"),r.includes(s)||r.push(s),Bt(t,x,"gfmFootnoteDefinitionWhitespace")):n(S)}function x(S){return e(S)}}function Die(t,e,n){return t.check(Y0,e,t.attempt(kie,e,n))}function zie(t){t.exit("gfmFootnoteDefinition")}function jie(t,e,n){const i=this;return Bt(t,r,"gfmFootnoteDefinitionIndent",5);function r(s){const a=i.events[i.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(s):n(s)}}function Lie(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:r};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(a,l){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let d=c;for(;d--;)if(a[d][0]==="exit"&&a[d][1].type==="strikethroughSequenceTemporary"&&a[d][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[d][1].end.offset-a[d][1].start.offset){a[c][1].type="strikethroughSequence",a[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},a[d][1].start),end:Object.assign({},a[c][1].end)},g={type:"strikethroughText",start:Object.assign({},a[d][1].end),end:Object.assign({},a[c][1].start)},v=[["enter",m,l],["enter",a[d][1],l],["exit",a[d][1],l],["enter",g,l]],x=l.parser.constructs.insideSpan.null;x&&$s(v,v.length,0,Ix(x,a.slice(d+1,c),l)),$s(v,v.length,0,[["exit",g,l],["enter",a[c][1],l],["exit",a[c][1],l],["exit",m,l]]),$s(a,d-1,c-d+3,v),c=d+v.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function s(a,l,c){const d=this.previous,m=this.events;let g=0;return v;function v(S){return d===126&&m[m.length-1][1].type!=="characterEscape"?c(S):(a.enter("strikethroughSequenceTemporary"),x(S))}function x(S){const T=Cp(d);if(S===126)return g>1?c(S):(a.consume(S),g++,x);if(g<2&&!n)return c(S);const k=a.exit("strikethroughSequenceTemporary"),A=Cp(S);return k._open=!A||A===2&&!!T,k._close=!T||T===2&&!!A,l(S)}}}class Bie{constructor(){this.map=[]}add(e,n,i){Pie(this,e,n,i)}consume(e){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const s of r)e.push(s);r=i.pop()}this.map.length=0}}function Pie(t,e,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...i);return}r+=1}t.map.push([e,n,i])}}function Iie(t,e){let n=!1;const i=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function Hie(){return{flow:{null:{name:"table",tokenize:Uie,resolveAll:Fie}}}}function Uie(t,e,n){const i=this;let r=0,s=0,a;return l;function l(G){let X=i.events.length-1;for(;X>-1;){const Z=i.events[X][1].type;if(Z==="lineEnding"||Z==="linePrefix")X--;else break}const J=X>-1?i.events[X][1].type:null,ce=J==="tableHead"||J==="tableRow"?j:c;return ce===j&&i.parser.lazy[i.now().line]?n(G):ce(G)}function c(G){return t.enter("tableHead"),t.enter("tableRow"),d(G)}function d(G){return G===124||(a=!0,s+=1),m(G)}function m(G){return G===null?n(G):Ze(G)?s>1?(s=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(G),t.exit("lineEnding"),x):n(G):Nt(G)?Bt(t,m,"whitespace")(G):(s+=1,a&&(a=!1,r+=1),G===124?(t.enter("tableCellDivider"),t.consume(G),t.exit("tableCellDivider"),a=!0,m):(t.enter("data"),g(G)))}function g(G){return G===null||G===124||rn(G)?(t.exit("data"),m(G)):(t.consume(G),G===92?v:g)}function v(G){return G===92||G===124?(t.consume(G),g):g(G)}function x(G){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(G):(t.enter("tableDelimiterRow"),a=!1,Nt(G)?Bt(t,S,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):S(G))}function S(G){return G===45||G===58?k(G):G===124?(a=!0,t.enter("tableCellDivider"),t.consume(G),t.exit("tableCellDivider"),T):I(G)}function T(G){return Nt(G)?Bt(t,k,"whitespace")(G):k(G)}function k(G){return G===58?(s+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(G),t.exit("tableDelimiterMarker"),A):G===45?(s+=1,A(G)):G===null||Ze(G)?L(G):I(G)}function A(G){return G===45?(t.enter("tableDelimiterFiller"),O(G)):I(G)}function O(G){return G===45?(t.consume(G),O):G===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(G),t.exit("tableDelimiterMarker"),z):(t.exit("tableDelimiterFiller"),z(G))}function z(G){return Nt(G)?Bt(t,L,"whitespace")(G):L(G)}function L(G){return G===124?S(G):G===null||Ze(G)?!a||r!==s?I(G):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(G)):I(G)}function I(G){return n(G)}function j(G){return t.enter("tableRow"),B(G)}function B(G){return G===124?(t.enter("tableCellDivider"),t.consume(G),t.exit("tableCellDivider"),B):G===null||Ze(G)?(t.exit("tableRow"),e(G)):Nt(G)?Bt(t,B,"whitespace")(G):(t.enter("data"),q(G))}function q(G){return G===null||G===124||rn(G)?(t.exit("data"),B(G)):(t.consume(G),G===92?$:q)}function $(G){return G===92||G===124?(t.consume(G),q):q(G)}}function Fie(t,e){let n=-1,i=!0,r=0,s=[0,0,0,0],a=[0,0,0,0],l=!1,c=0,d,m,g;const v=new Bie;for(;++n<t.length;){const x=t[n],S=x[1];x[0]==="enter"?S.type==="tableHead"?(l=!1,c!==0&&(Nk(v,e,c,d,m),m=void 0,c=0),d={type:"table",start:Object.assign({},S.start),end:Object.assign({},S.end)},v.add(n,0,[["enter",d,e]])):S.type==="tableRow"||S.type==="tableDelimiterRow"?(i=!0,g=void 0,s=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,m={type:"tableBody",start:Object.assign({},S.start),end:Object.assign({},S.end)},v.add(n,0,[["enter",m,e]])),r=S.type==="tableDelimiterRow"?2:m?3:1):r&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")?(i=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],g=Cv(v,e,s,r,void 0,g),s=[0,0,0,0]),a[2]=n)):S.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(a[0]=a[1],g=Cv(v,e,s,r,void 0,g)),s=a,a=[s[1],n,0,0])):S.type==="tableHead"?(l=!0,c=n):S.type==="tableRow"||S.type==="tableDelimiterRow"?(c=n,s[1]!==0?(a[0]=a[1],g=Cv(v,e,s,r,n,g)):a[1]!==0&&(g=Cv(v,e,a,r,n,g)),r=0):r&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&Nk(v,e,c,d,m),v.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=Iie(e.events,n))}return t}function Cv(t,e,n,i,r,s){const a=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},ip(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=ip(e.events,n[1]);if(s={type:a,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const d=ip(e.events,n[2]),m=ip(e.events,n[3]),g={type:l,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",g,e]]),i!==2){const v=e.events[n[2]],x=e.events[n[3]];if(v[1].end=Object.assign({},x[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const S=n[2]+1,T=n[3]-n[2]-1;t.add(S,T,[])}}t.add(n[3]+1,0,[["exit",g,e]])}return r!==void 0&&(s.end=Object.assign({},ip(e.events,r)),t.add(r,0,[["exit",s,e]]),s=void 0),s}function Nk(t,e,n,i,r){const s=[],a=ip(e.events,n);r&&(r.end=Object.assign({},a),s.push(["exit",r,e])),i.end=Object.assign({},a),s.push(["exit",i,e]),t.add(n+1,0,s)}function ip(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const Gie={name:"tasklistCheck",tokenize:Vie};function qie(){return{text:{91:Gie}}}function Vie(t,e,n){const i=this;return r;function r(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return rn(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Ze(c)?e(c):Nt(c)?t.check({tokenize:Yie},e,n)(c):n(c)}}function Yie(t,e,n){return Bt(t,i,"whitespace");function i(r){return r===null?n(r):e(r)}}function Kie(t){return DR([vie(),Mie(),Lie(t),Hie(),qie()])}const Xie={};function Qie(t){const e=this,n=t||Xie,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),a=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(Kie(n)),s.push(pie()),a.push(mie(n))}const w9=({message:t})=>{const e=t.role==="user";return _.jsx("div",{className:Pt("flex w-full mb-4",e?"justify-end":"justify-start"),children:_.jsxs("div",{className:Pt("max-w-[80%] rounded-2xl px-4 py-3 shadow-sm text-sm",e?"bg-accent-blue text-white rounded-br-none":"bg-surface-100 text-ink border border-border rounded-bl-none dark:bg-gray-800 dark:text-gray-100"),children:[_.jsx("div",{className:"markdown-body",children:_.jsx(Lte,{remarkPlugins:[Qie],children:t.content})}),_.jsx("div",{className:Pt("text-[10px] mt-1 opacity-70",e?"text-blue-100 text-right":"text-gray-400 text-left"),children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})},Zh={general:{label:"General Chat",icon:"fa-comments",description:"Helpful assistant for any task"},coding:{label:"Code Companion",icon:"fa-code",description:"Optimized for programming queries"},email:{label:"Email Drafter",icon:"fa-envelope-open-text",description:"Assistance with writing emails"},brainstorming:{label:"Brainstorming",icon:"fa-lightbulb",description:"Generate creative ideas"}},Wie=()=>{const[t,e]=N.useState([{id:"1",role:"system",content:"Hello! I am Jarvis. How can I help you today?",timestamp:new Date}]),[n,i]=N.useState(""),[r,s]=N.useState("general"),[a,l]=N.useState(!0),c=N.useRef(null),d=()=>{c.current?.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{d()},[t]);const m=()=>{if(!n.trim())return;const v={id:Date.now().toString(),role:"user",content:n,timestamp:new Date};e(x=>[...x,v]),i(""),setTimeout(()=>{const x={id:(Date.now()+1).toString(),role:"system",content:`**[${Zh[r].label}]** I received: "${v.content}".

Here is a *markdown* example:
\`\`\`javascript
console.log("Hello World");
\`\`\``,timestamp:new Date};e(S=>[...S,x])},1e3)},g=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),m())};return _.jsxs("div",{className:"flex h-full bg-paper dark:bg-gray-900 text-ink dark:text-white",children:[_.jsxs("div",{className:Pt("w-64 bg-surface-50 dark:bg-gray-800 border-r border-border dark:border-gray-700 flex flex-col transition-all duration-300",!a&&"w-0 overflow-hidden border-0"),children:[_.jsx("div",{className:"p-4 border-b border-border dark:border-gray-700 bg-subtle dark:bg-gray-800",children:_.jsx("h3",{className:"font-bold text-sm uppercase text-gray-500 tracking-wider",children:"Context Mode"})}),_.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:Object.keys(Zh).map(v=>_.jsxs("button",{onClick:()=>s(v),className:Pt("w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-colors",r===v?"bg-accent-blue/10 text-accent-blue border border-accent-blue/20":"hover:bg-surface-100 dark:hover:bg-gray-700 text-ink dark:text-gray-300"),children:[_.jsx("div",{className:Pt("w-8 h-8 rounded-full flex items-center justify-center shrink-0",r===v?"bg-accent-blue text-white":"bg-gray-200 dark:bg-gray-600 text-gray-500"),children:_.jsx("i",{className:`fa-solid ${Zh[v].icon} text-xs`})}),_.jsxs("div",{children:[_.jsx("div",{className:"font-bold text-sm leading-none mb-1",children:Zh[v].label}),_.jsx("div",{className:"text-[10px] opacity-70 leading-tight",children:Zh[v].description})]})]},v))})]}),_.jsxs("div",{className:"flex-1 flex flex-col relative",children:[_.jsx("button",{onClick:()=>l(!a),className:"absolute top-4 left-4 z-10 p-2 bg-white/50 dark:bg-black/50 backdrop-blur rounded-md hover:bg-white dark:hover:bg-gray-700 shadow-sm border border-border transition-all",title:"Toggle Context Menu",children:_.jsx("i",{className:`fa-solid ${a?"fa-chevron-left":"fa-list"}`})}),_.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar",children:_.jsxs("div",{className:"max-w-3xl mx-auto",children:[t.map(v=>_.jsx(w9,{message:v},v.id)),_.jsx("div",{ref:c})]})}),_.jsxs("div",{className:"p-4 border-t border-border bg-surface-50 dark:bg-gray-800",children:[_.jsxs("div",{className:"max-w-3xl mx-auto flex gap-2",children:[_.jsxs("div",{className:"flex-1 relative",children:[_.jsx("textarea",{value:n,onChange:v=>i(v.target.value),onKeyDown:g,placeholder:`Message Jarvis in ${Zh[r].label}...`,className:"w-full pl-4 pr-12 py-3 rounded-xl border border-border bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-accent-blue/50 resize-none h-[52px] max-h-32",style:{minHeight:"52px"}}),_.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-ink",children:_.jsx("i",{className:"fa-solid fa-paperclip"})})]}),_.jsx("button",{onClick:m,disabled:!n.trim(),className:"w-[52px] h-[52px] rounded-xl bg-accent-blue text-white flex items-center justify-center hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:_.jsx("i",{className:"fa-solid fa-paper-plane"})})]}),_.jsx("div",{className:"text-center mt-2 text-xs text-gray-400",children:"Jarvis can make mistakes. Please verify important information."})]})]})]})},Jie=[{id:"d1",title:"Computer Science 101",cards:[{id:"c1",front:"What is a bit?",back:"The basic unit of information in computing (0 or 1).",nextReview:new Date},{id:"c2",front:"What is RAM?",back:"Random Access Memory - volatile memory used for currently running programs.",nextReview:new Date}]},{id:"d2",title:"Spanish Vocabulary",cards:[{id:"c3",front:"Hola",back:"Hello",nextReview:new Date},{id:"c4",front:"Gracias",back:"Thank you",nextReview:new Date}]}],E9=()=>{const[t,e]=N.useState(Jie),[n,i]=N.useState(null),[r,s]=N.useState(!1),[a,l]=N.useState(0),[c,d]=N.useState(!1),m=x=>{i(x),s(!0),l(0),d(!1)},g=()=>{d(!1),n&&a<n.cards.length-1?l(a+1):(alert("Session Complete!"),s(!1),i(null))},v=()=>{const x={id:Date.now().toString(),title:"New Deck",cards:[]};e([...t,x])};if(r&&n){const x=n.cards[a];return _.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 p-8",children:[_.jsxs("div",{className:"w-full max-w-2xl flex justify-between items-center mb-8",children:[_.jsxs("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400",children:[_.jsx("i",{className:"fa-solid fa-arrow-left"})," Back to Decks"]}),_.jsxs("span",{className:"font-mono text-sm text-gray-400",children:[a+1," / ",n.cards.length]})]}),_.jsx("div",{className:"w-full max-w-2xl aspect-[3/2] perspective-1000 cursor-pointer group",onClick:()=>d(!c),children:_.jsxs("div",{className:`relative w-full h-full transition-transform duration-500 transform-style-3d ${c?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:[_.jsxs("div",{className:"absolute w-full h-full bg-surface border-2 border-border rounded-2xl shadow-xl flex items-center justify-center p-12 text-center",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[_.jsx("h2",{className:"text-3xl font-bold text-ink",children:x.front}),_.jsx("div",{className:"absolute bottom-6 text-xs text-gray-400 uppercase tracking-widest",children:"Click to Flip"})]}),_.jsx("div",{className:"absolute w-full h-full bg-subtle border-2 border-accent-blue rounded-2xl shadow-xl flex items-center justify-center p-12 text-center rotate-y-180",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:_.jsx("h2",{className:"text-2xl font-medium text-ink",children:x.back})})]})}),c&&_.jsxs("div",{className:"flex gap-4 mt-8",children:[_.jsx("button",{onClick:()=>g(),className:"px-8 py-3 bg-red-100 text-red-700 rounded-lg font-bold hover:bg-red-200 transition-colors",children:"Hard"}),_.jsx("button",{onClick:()=>g(),className:"px-8 py-3 bg-green-100 text-green-700 rounded-lg font-bold hover:bg-green-200 transition-colors",children:"Easy"})]})]})}return _.jsxs("div",{className:"h-full bg-white dark:bg-gray-900 p-8 overflow-y-auto",children:[_.jsxs("div",{className:"flex justify-between items-center mb-8",children:[_.jsx("h1",{className:"text-2xl font-bold text-ink",children:"Flashcards"}),_.jsxs("button",{onClick:v,className:"px-4 py-2 bg-accent-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[_.jsx("i",{className:"fa-solid fa-plus mr-2"})," New Deck"]})]}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(x=>_.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-border hover:shadow-lg transition-all group",children:[_.jsxs("div",{className:"flex justify-between items-start mb-4",children:[_.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 text-xl",children:_.jsx("i",{className:"fa-solid fa-layer-group"})}),_.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:_.jsx("i",{className:"fa-solid fa-ellipsis"})})]}),_.jsx("h3",{className:"text-lg font-bold text-ink mb-2",children:x.title}),_.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:[x.cards.length," cards  Due today"]}),_.jsx("button",{onClick:()=>m(x),className:"w-full py-2 bg-subtle border border-border rounded-lg text-ink font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Study Now"})]},x.id))})]})};var Zie=N.createContext(void 0);function T9(t){const e=N.useContext(Zie);return t||e||"ltr"}const $ie=["top","right","bottom","left"],Ic=Math.min,Ks=Math.max,Xb=Math.round,wv=Math.floor,il=t=>({x:t,y:t}),ere={left:"right",right:"left",bottom:"top",top:"bottom"},tre={start:"end",end:"start"};function Tw(t,e,n){return Ks(t,Ic(e,n))}function ou(t,e){return typeof t=="function"?t(e):t}function lu(t){return t.split("-")[0]}function zp(t){return t.split("-")[1]}function w3(t){return t==="x"?"y":"x"}function E3(t){return t==="y"?"height":"width"}const nre=new Set(["top","bottom"]);function nl(t){return nre.has(lu(t))?"y":"x"}function T3(t){return w3(nl(t))}function ire(t,e,n){n===void 0&&(n=!1);const i=zp(t),r=T3(t),s=E3(r);let a=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Qb(a)),[a,Qb(a)]}function rre(t){const e=Qb(t);return[_w(t),e,_w(e)]}function _w(t){return t.replace(/start|end/g,e=>tre[e])}const Rk=["left","right"],Ok=["right","left"],sre=["top","bottom"],are=["bottom","top"];function ore(t,e,n){switch(t){case"top":case"bottom":return n?e?Ok:Rk:e?Rk:Ok;case"left":case"right":return e?sre:are;default:return[]}}function lre(t,e,n,i){const r=zp(t);let s=ore(lu(t),n==="start",i);return r&&(s=s.map(a=>a+"-"+r),e&&(s=s.concat(s.map(_w)))),s}function Qb(t){return t.replace(/left|right|bottom|top/g,e=>ere[e])}function ure(t){return{top:0,right:0,bottom:0,left:0,...t}}function _9(t){return typeof t!="number"?ure(t):{top:t,right:t,bottom:t,left:t}}function Wb(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function Dk(t,e,n){let{reference:i,floating:r}=t;const s=nl(e),a=T3(e),l=E3(a),c=lu(e),d=s==="y",m=i.x+i.width/2-r.width/2,g=i.y+i.height/2-r.height/2,v=i[l]/2-r[l]/2;let x;switch(c){case"top":x={x:m,y:i.y-r.height};break;case"bottom":x={x:m,y:i.y+i.height};break;case"right":x={x:i.x+i.width,y:g};break;case"left":x={x:i.x-r.width,y:g};break;default:x={x:i.x,y:i.y}}switch(zp(e)){case"start":x[a]-=v*(n&&d?-1:1);break;case"end":x[a]+=v*(n&&d?-1:1);break}return x}const cre=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=n,l=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:g}=Dk(d,i,c),v=i,x={},S=0;for(let T=0;T<l.length;T++){const{name:k,fn:A}=l[T],{x:O,y:z,data:L,reset:I}=await A({x:m,y:g,initialPlacement:i,placement:v,strategy:r,middlewareData:x,rects:d,platform:a,elements:{reference:t,floating:e}});m=O??m,g=z??g,x={...x,[k]:{...x[k],...L}},I&&S<=50&&(S++,typeof I=="object"&&(I.placement&&(v=I.placement),I.rects&&(d=I.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:r}):I.rects),{x:m,y:g}=Dk(d,v,c)),T=-1)}return{x:m,y:g,placement:v,strategy:r,middlewareData:x}};async function k0(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:v=!1,padding:x=0}=ou(e,t),S=_9(x),k=l[v?g==="floating"?"reference":"floating":g],A=Wb(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:d,rootBoundary:m,strategy:c})),O=g==="floating"?{x:i,y:r,width:a.floating.width,height:a.floating.height}:a.reference,z=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),L=await(s.isElement==null?void 0:s.isElement(z))?await(s.getScale==null?void 0:s.getScale(z))||{x:1,y:1}:{x:1,y:1},I=Wb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:O,offsetParent:z,strategy:c}):O);return{top:(A.top-I.top+S.top)/L.y,bottom:(I.bottom-A.bottom+S.bottom)/L.y,left:(A.left-I.left+S.left)/L.x,right:(I.right-A.right+S.right)/L.x}}const fre=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:m=0}=ou(t,e)||{};if(d==null)return{};const g=_9(m),v={x:n,y:i},x=T3(r),S=E3(x),T=await a.getDimensions(d),k=x==="y",A=k?"top":"left",O=k?"bottom":"right",z=k?"clientHeight":"clientWidth",L=s.reference[S]+s.reference[x]-v[x]-s.floating[S],I=v[x]-s.reference[x],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let B=j?j[z]:0;(!B||!await(a.isElement==null?void 0:a.isElement(j)))&&(B=l.floating[z]||s.floating[S]);const q=L/2-I/2,$=B/2-T[S]/2-1,G=Ic(g[A],$),X=Ic(g[O],$),J=G,ce=B-T[S]-X,Z=B/2-T[S]/2+q,te=Tw(J,Z,ce),V=!c.arrow&&zp(r)!=null&&Z!==te&&s.reference[S]/2-(Z<J?G:X)-T[S]/2<0,ae=V?Z<J?Z-J:Z-ce:0;return{[x]:v[x]+ae,data:{[x]:te,centerOffset:Z-te-ae,...V&&{alignmentOffset:ae}},reset:V}}}),dre=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:T=!0,...k}=ou(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const A=lu(r),O=nl(l),z=lu(l)===l,L=await(c.isRTL==null?void 0:c.isRTL(d.floating)),I=v||(z||!T?[Qb(l)]:rre(l)),j=S!=="none";!v&&j&&I.push(...lre(l,T,S,L));const B=[l,...I],q=await k0(e,k),$=[];let G=((i=s.flip)==null?void 0:i.overflows)||[];if(m&&$.push(q[A]),g){const Z=ire(r,a,L);$.push(q[Z[0]],q[Z[1]])}if(G=[...G,{placement:r,overflows:$}],!$.every(Z=>Z<=0)){var X,J;const Z=(((X=s.flip)==null?void 0:X.index)||0)+1,te=B[Z];if(te&&(!(g==="alignment"?O!==nl(te):!1)||G.every(oe=>nl(oe.placement)===O?oe.overflows[0]>0:!0)))return{data:{index:Z,overflows:G},reset:{placement:te}};let V=(J=G.filter(ae=>ae.overflows[0]<=0).sort((ae,oe)=>ae.overflows[1]-oe.overflows[1])[0])==null?void 0:J.placement;if(!V)switch(x){case"bestFit":{var ce;const ae=(ce=G.filter(oe=>{if(j){const he=nl(oe.placement);return he===O||he==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(he=>he>0).reduce((he,F)=>he+F,0)]).sort((oe,he)=>oe[1]-he[1])[0])==null?void 0:ce[0];ae&&(V=ae);break}case"initialPlacement":V=l;break}if(r!==V)return{reset:{placement:V}}}return{}}}};function zk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function jk(t){return $ie.some(e=>t[e]>=0)}const hre=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ou(t,e);switch(i){case"referenceHidden":{const s=await k0(e,{...r,elementContext:"reference"}),a=zk(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:jk(a)}}}case"escaped":{const s=await k0(e,{...r,altBoundary:!0}),a=zk(s,n.floating);return{data:{escapedOffsets:a,escaped:jk(a)}}}default:return{}}}}},k9=new Set(["left","top"]);async function pre(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),a=lu(n),l=zp(n),c=nl(n)==="y",d=k9.has(a)?-1:1,m=s&&c?-1:1,g=ou(e,t);let{mainAxis:v,crossAxis:x,alignmentAxis:S}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof S=="number"&&(x=l==="end"?S*-1:S),c?{x:x*m,y:v*d}:{x:v*d,y:x*m}}const mre=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:a,middlewareData:l}=e,c=await pre(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:r+c.x,y:s+c.y,data:{...c,placement:a}}}}},gre=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:k=>{let{x:A,y:O}=k;return{x:A,y:O}}},...c}=ou(t,e),d={x:n,y:i},m=await k0(e,c),g=nl(lu(r)),v=w3(g);let x=d[v],S=d[g];if(s){const k=v==="y"?"top":"left",A=v==="y"?"bottom":"right",O=x+m[k],z=x-m[A];x=Tw(O,x,z)}if(a){const k=g==="y"?"top":"left",A=g==="y"?"bottom":"right",O=S+m[k],z=S-m[A];S=Tw(O,S,z)}const T=l.fn({...e,[v]:x,[g]:S});return{...T,data:{x:T.x-n,y:T.y-i,enabled:{[v]:s,[g]:a}}}}}},yre=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ou(t,e),m={x:n,y:i},g=nl(r),v=w3(g);let x=m[v],S=m[g];const T=ou(l,e),k=typeof T=="number"?{mainAxis:T,crossAxis:0}:{mainAxis:0,crossAxis:0,...T};if(c){const z=v==="y"?"height":"width",L=s.reference[v]-s.floating[z]+k.mainAxis,I=s.reference[v]+s.reference[z]-k.mainAxis;x<L?x=L:x>I&&(x=I)}if(d){var A,O;const z=v==="y"?"width":"height",L=k9.has(lu(r)),I=s.reference[g]-s.floating[z]+(L&&((A=a.offset)==null?void 0:A[g])||0)+(L?0:k.crossAxis),j=s.reference[g]+s.reference[z]+(L?0:((O=a.offset)==null?void 0:O[g])||0)-(L?k.crossAxis:0);S<I?S=I:S>j&&(S=j)}return{[v]:x,[g]:S}}}},vre=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:a,elements:l}=e,{apply:c=()=>{},...d}=ou(t,e),m=await k0(e,d),g=lu(r),v=zp(r),x=nl(r)==="y",{width:S,height:T}=s.floating;let k,A;g==="top"||g==="bottom"?(k=g,A=v===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(A=g,k=v==="end"?"top":"bottom");const O=T-m.top-m.bottom,z=S-m.left-m.right,L=Ic(T-m[k],O),I=Ic(S-m[A],z),j=!e.middlewareData.shift;let B=L,q=I;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(q=z),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(B=O),j&&!v){const G=Ks(m.left,0),X=Ks(m.right,0),J=Ks(m.top,0),ce=Ks(m.bottom,0);x?q=S-2*(G!==0||X!==0?G+X:Ks(m.left,m.right)):B=T-2*(J!==0||ce!==0?J+ce:Ks(m.top,m.bottom))}await c({...e,availableWidth:q,availableHeight:B});const $=await a.getDimensions(l.floating);return S!==$.width||T!==$.height?{reset:{rects:!0}}:{}}}};function Gx(){return typeof window<"u"}function jp(t){return M9(t)?(t.nodeName||"").toLowerCase():"#document"}function ea(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function fl(t){var e;return(e=(M9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function M9(t){return Gx()?t instanceof Node||t instanceof ea(t).Node:!1}function mo(t){return Gx()?t instanceof Element||t instanceof ea(t).Element:!1}function al(t){return Gx()?t instanceof HTMLElement||t instanceof ea(t).HTMLElement:!1}function Lk(t){return!Gx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ea(t).ShadowRoot}const bre=new Set(["inline","contents"]);function X0(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=go(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!bre.has(r)}const xre=new Set(["table","td","th"]);function Sre(t){return xre.has(jp(t))}const Cre=[":popover-open",":modal"];function qx(t){return Cre.some(e=>{try{return t.matches(e)}catch{return!1}})}const wre=["transform","translate","scale","rotate","perspective"],Ere=["transform","translate","scale","rotate","perspective","filter"],Tre=["paint","layout","strict","content"];function _3(t){const e=k3(),n=mo(t)?go(t):t;return wre.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Ere.some(i=>(n.willChange||"").includes(i))||Tre.some(i=>(n.contain||"").includes(i))}function _re(t){let e=Hc(t);for(;al(e)&&!wp(e);){if(_3(e))return e;if(qx(e))return null;e=Hc(e)}return null}function k3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const kre=new Set(["html","body","#document"]);function wp(t){return kre.has(jp(t))}function go(t){return ea(t).getComputedStyle(t)}function Vx(t){return mo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Hc(t){if(jp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Lk(t)&&t.host||fl(t);return Lk(e)?e.host:e}function A9(t){const e=Hc(t);return wp(e)?t.ownerDocument?t.ownerDocument.body:t.body:al(e)&&X0(e)?e:A9(e)}function M0(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=A9(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),a=ea(r);if(s){const l=kw(a);return e.concat(a,a.visualViewport||[],X0(r)?r:[],l&&n?M0(l):[])}return e.concat(r,M0(r,[],n))}function kw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function N9(t){const e=go(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=al(t),s=r?t.offsetWidth:n,a=r?t.offsetHeight:i,l=Xb(n)!==s||Xb(i)!==a;return l&&(n=s,i=a),{width:n,height:i,$:l}}function M3(t){return mo(t)?t:t.contextElement}function fp(t){const e=M3(t);if(!al(e))return il(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=N9(e);let a=(s?Xb(n.width):n.width)/i,l=(s?Xb(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Mre=il(0);function R9(t){const e=ea(t);return!k3()||!e.visualViewport?Mre:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Are(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ea(t)?!1:e}function pd(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=M3(t);let a=il(1);e&&(i?mo(i)&&(a=fp(i)):a=fp(t));const l=Are(s,n,i)?R9(s):il(0);let c=(r.left+l.x)/a.x,d=(r.top+l.y)/a.y,m=r.width/a.x,g=r.height/a.y;if(s){const v=ea(s),x=i&&mo(i)?ea(i):i;let S=v,T=kw(S);for(;T&&i&&x!==S;){const k=fp(T),A=T.getBoundingClientRect(),O=go(T),z=A.left+(T.clientLeft+parseFloat(O.paddingLeft))*k.x,L=A.top+(T.clientTop+parseFloat(O.paddingTop))*k.y;c*=k.x,d*=k.y,m*=k.x,g*=k.y,c+=z,d+=L,S=ea(T),T=kw(S)}}return Wb({width:m,height:g,x:c,y:d})}function Yx(t,e){const n=Vx(t).scrollLeft;return e?e.left+n:pd(fl(t)).left+n}function O9(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-Yx(t,n),r=n.top+e.scrollTop;return{x:i,y:r}}function Nre(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",a=fl(i),l=e?qx(e.floating):!1;if(i===a||l&&s)return n;let c={scrollLeft:0,scrollTop:0},d=il(1);const m=il(0),g=al(i);if((g||!g&&!s)&&((jp(i)!=="body"||X0(a))&&(c=Vx(i)),al(i))){const x=pd(i);d=fp(i),m.x=x.x+i.clientLeft,m.y=x.y+i.clientTop}const v=a&&!g&&!s?O9(a,c):il(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+m.x+v.x,y:n.y*d.y-c.scrollTop*d.y+m.y+v.y}}function Rre(t){return Array.from(t.getClientRects())}function Ore(t){const e=fl(t),n=Vx(t),i=t.ownerDocument.body,r=Ks(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Ks(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-n.scrollLeft+Yx(t);const l=-n.scrollTop;return go(i).direction==="rtl"&&(a+=Ks(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:a,y:l}}const Bk=25;function Dre(t,e){const n=ea(t),i=fl(t),r=n.visualViewport;let s=i.clientWidth,a=i.clientHeight,l=0,c=0;if(r){s=r.width,a=r.height;const m=k3();(!m||m&&e==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}const d=Yx(i);if(d<=0){const m=i.ownerDocument,g=m.body,v=getComputedStyle(g),x=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,S=Math.abs(i.clientWidth-g.clientWidth-x);S<=Bk&&(s-=S)}else d<=Bk&&(s+=d);return{width:s,height:a,x:l,y:c}}const zre=new Set(["absolute","fixed"]);function jre(t,e){const n=pd(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=al(t)?fp(t):il(1),a=t.clientWidth*s.x,l=t.clientHeight*s.y,c=r*s.x,d=i*s.y;return{width:a,height:l,x:c,y:d}}function Pk(t,e,n){let i;if(e==="viewport")i=Dre(t,n);else if(e==="document")i=Ore(fl(t));else if(mo(e))i=jre(e,n);else{const r=R9(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Wb(i)}function D9(t,e){const n=Hc(t);return n===e||!mo(n)||wp(n)?!1:go(n).position==="fixed"||D9(n,e)}function Lre(t,e){const n=e.get(t);if(n)return n;let i=M0(t,[],!1).filter(l=>mo(l)&&jp(l)!=="body"),r=null;const s=go(t).position==="fixed";let a=s?Hc(t):t;for(;mo(a)&&!wp(a);){const l=go(a),c=_3(a);!c&&l.position==="fixed"&&(r=null),(s?!c&&!r:!c&&l.position==="static"&&!!r&&zre.has(r.position)||X0(a)&&!c&&D9(t,a))?i=i.filter(m=>m!==a):r=l,a=Hc(a)}return e.set(t,i),i}function Bre(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const a=[...n==="clippingAncestors"?qx(e)?[]:Lre(e,this._c):[].concat(n),i],l=a[0],c=a.reduce((d,m)=>{const g=Pk(e,m,r);return d.top=Ks(g.top,d.top),d.right=Ic(g.right,d.right),d.bottom=Ic(g.bottom,d.bottom),d.left=Ks(g.left,d.left),d},Pk(e,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Pre(t){const{width:e,height:n}=N9(t);return{width:e,height:n}}function Ire(t,e,n){const i=al(e),r=fl(e),s=n==="fixed",a=pd(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const c=il(0);function d(){c.x=Yx(r)}if(i||!i&&!s)if((jp(e)!=="body"||X0(r))&&(l=Vx(e)),i){const x=pd(e,!0,s,e);c.x=x.x+e.clientLeft,c.y=x.y+e.clientTop}else r&&d();s&&!i&&r&&d();const m=r&&!i&&!s?O9(r,l):il(0),g=a.left+l.scrollLeft-c.x-m.x,v=a.top+l.scrollTop-c.y-m.y;return{x:g,y:v,width:a.width,height:a.height}}function sC(t){return go(t).position==="static"}function Ik(t,e){if(!al(t)||go(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return fl(t)===n&&(n=n.ownerDocument.body),n}function z9(t,e){const n=ea(t);if(qx(t))return n;if(!al(t)){let r=Hc(t);for(;r&&!wp(r);){if(mo(r)&&!sC(r))return r;r=Hc(r)}return n}let i=Ik(t,e);for(;i&&Sre(i)&&sC(i);)i=Ik(i,e);return i&&wp(i)&&sC(i)&&!_3(i)?n:i||_re(t)||n}const Hre=async function(t){const e=this.getOffsetParent||z9,n=this.getDimensions,i=await n(t.floating);return{reference:Ire(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Ure(t){return go(t).direction==="rtl"}const Fre={convertOffsetParentRelativeRectToViewportRelativeRect:Nre,getDocumentElement:fl,getClippingRect:Bre,getOffsetParent:z9,getElementRects:Hre,getClientRects:Rre,getDimensions:Pre,getScale:fp,isElement:mo,isRTL:Ure};function j9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Gre(t,e){let n=null,i;const r=fl(t);function s(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:m,top:g,width:v,height:x}=d;if(l||e(),!v||!x)return;const S=wv(g),T=wv(r.clientWidth-(m+v)),k=wv(r.clientHeight-(g+x)),A=wv(m),z={rootMargin:-S+"px "+-T+"px "+-k+"px "+-A+"px",threshold:Ks(0,Ic(1,c))||1};let L=!0;function I(j){const B=j[0].intersectionRatio;if(B!==c){if(!L)return a();B?a(!1,B):i=setTimeout(()=>{a(!1,1e-7)},1e3)}B===1&&!j9(d,t.getBoundingClientRect())&&a(),L=!1}try{n=new IntersectionObserver(I,{...z,root:r.ownerDocument})}catch{n=new IntersectionObserver(I,z)}n.observe(t)}return a(!0),s}function qre(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,d=M3(t),m=r||s?[...d?M0(d):[],...M0(e)]:[];m.forEach(A=>{r&&A.addEventListener("scroll",n,{passive:!0}),s&&A.addEventListener("resize",n)});const g=d&&l?Gre(d,n):null;let v=-1,x=null;a&&(x=new ResizeObserver(A=>{let[O]=A;O&&O.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var z;(z=x)==null||z.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let S,T=c?pd(t):null;c&&k();function k(){const A=pd(t);T&&!j9(T,A)&&n(),T=A,S=requestAnimationFrame(k)}return n(),()=>{var A;m.forEach(O=>{r&&O.removeEventListener("scroll",n),s&&O.removeEventListener("resize",n)}),g?.(),(A=x)==null||A.disconnect(),x=null,c&&cancelAnimationFrame(S)}}const Vre=mre,Yre=gre,Kre=dre,Xre=vre,Qre=hre,Hk=fre,Wre=yre,Jre=(t,e,n)=>{const i=new Map,r={platform:Fre,...n},s={...r.platform,_c:i};return cre(t,e,{...r,platform:s})};var Zre=typeof document<"u",$re=function(){},Iv=Zre?N.useLayoutEffect:$re;function Jb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Jb(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!Jb(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function L9(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Uk(t,e){const n=L9(t);return Math.round(e*n)/n}function aC(t){const e=N.useRef(t);return Iv(()=>{e.current=t}),e}function ese(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[m,g]=N.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,x]=N.useState(i);Jb(v,i)||x(i);const[S,T]=N.useState(null),[k,A]=N.useState(null),O=N.useCallback(oe=>{oe!==j.current&&(j.current=oe,T(oe))},[]),z=N.useCallback(oe=>{oe!==B.current&&(B.current=oe,A(oe))},[]),L=s||S,I=a||k,j=N.useRef(null),B=N.useRef(null),q=N.useRef(m),$=c!=null,G=aC(c),X=aC(r),J=aC(d),ce=N.useCallback(()=>{if(!j.current||!B.current)return;const oe={placement:e,strategy:n,middleware:v};X.current&&(oe.platform=X.current),Jre(j.current,B.current,oe).then(he=>{const F={...he,isPositioned:J.current!==!1};Z.current&&!Jb(q.current,F)&&(q.current=F,eu.flushSync(()=>{g(F)}))})},[v,e,n,X,J]);Iv(()=>{d===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,g(oe=>({...oe,isPositioned:!1})))},[d]);const Z=N.useRef(!1);Iv(()=>(Z.current=!0,()=>{Z.current=!1}),[]),Iv(()=>{if(L&&(j.current=L),I&&(B.current=I),L&&I){if(G.current)return G.current(L,I,ce);ce()}},[L,I,ce,G,$]);const te=N.useMemo(()=>({reference:j,floating:B,setReference:O,setFloating:z}),[O,z]),V=N.useMemo(()=>({reference:L,floating:I}),[L,I]),ae=N.useMemo(()=>{const oe={position:n,left:0,top:0};if(!V.floating)return oe;const he=Uk(V.floating,m.x),F=Uk(V.floating,m.y);return l?{...oe,transform:"translate("+he+"px, "+F+"px)",...L9(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:he,top:F}},[n,l,V.floating,m.x,m.y]);return N.useMemo(()=>({...m,update:ce,refs:te,elements:V,floatingStyles:ae}),[m,ce,te,V,ae])}const tse=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?Hk({element:i.current,padding:r}).fn(n):{}:i?Hk({element:i,padding:r}).fn(n):{}}}},nse=(t,e)=>({...Vre(t),options:[t,e]}),ise=(t,e)=>({...Yre(t),options:[t,e]}),rse=(t,e)=>({...Wre(t),options:[t,e]}),sse=(t,e)=>({...Kre(t),options:[t,e]}),ase=(t,e)=>({...Xre(t),options:[t,e]}),ose=(t,e)=>({...Qre(t),options:[t,e]}),lse=(t,e)=>({...tse(t),options:[t,e]});var use="Arrow",B9=N.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return _.jsx(sn.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});B9.displayName=use;var cse=B9;function fse(t){const[e,n]=N.useState(void 0);return su(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,l;if("borderBoxSize"in s){const c=s.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var A3="Popper",[P9,I9]=md(A3),[dse,H9]=P9(A3),U9=t=>{const{__scopePopper:e,children:n}=t,[i,r]=N.useState(null);return _.jsx(dse,{scope:e,anchor:i,onAnchorChange:r,children:n})};U9.displayName=A3;var F9="PopperAnchor",G9=N.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=H9(F9,n),a=N.useRef(null),l=Pi(e,a),c=N.useRef(null);return N.useEffect(()=>{const d=c.current;c.current=i?.current||a.current,d!==c.current&&s.onAnchorChange(c.current)}),i?null:_.jsx(sn.div,{...r,ref:l})});G9.displayName=F9;var N3="PopperContent",[hse,pse]=P9(N3),q9=N.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:x="optimized",onPlaced:S,...T}=t,k=H9(N3,n),[A,O]=N.useState(null),z=Pi(e,Ie=>O(Ie)),[L,I]=N.useState(null),j=fse(L),B=j?.width??0,q=j?.height??0,$=i+(s!=="center"?"-"+s:""),G=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},X=Array.isArray(d)?d:[d],J=X.length>0,ce={padding:G,boundary:X.filter(gse),altBoundary:J},{refs:Z,floatingStyles:te,placement:V,isPositioned:ae,middlewareData:oe}=ese({strategy:"fixed",placement:$,whileElementsMounted:(...Ie)=>qre(...Ie,{animationFrame:x==="always"}),elements:{reference:k.anchor},middleware:[nse({mainAxis:r+q,alignmentAxis:a}),c&&ise({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?rse():void 0,...ce}),c&&sse({...ce}),ase({...ce,apply:({elements:Ie,rects:ot,availableWidth:et,availableHeight:rt})=>{const{width:mi,height:gn}=ot.reference,Mn=Ie.floating.style;Mn.setProperty("--radix-popper-available-width",`${et}px`),Mn.setProperty("--radix-popper-available-height",`${rt}px`),Mn.setProperty("--radix-popper-anchor-width",`${mi}px`),Mn.setProperty("--radix-popper-anchor-height",`${gn}px`)}}),L&&lse({element:L,padding:l}),yse({arrowWidth:B,arrowHeight:q}),v&&ose({strategy:"referenceHidden",...ce})]}),[he,F]=K9(V),Y=Bs(S);su(()=>{ae&&Y?.()},[ae,Y]);const se=oe.arrow?.x,U=oe.arrow?.y,ke=oe.arrow?.centerOffset!==0,[Pe,ze]=N.useState();return su(()=>{A&&ze(window.getComputedStyle(A).zIndex)},[A]),_.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:ae?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[oe.transformOrigin?.x,oe.transformOrigin?.y].join(" "),...oe.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:_.jsx(hse,{scope:n,placedSide:he,onArrowChange:I,arrowX:se,arrowY:U,shouldHideArrow:ke,children:_.jsx(sn.div,{"data-side":he,"data-align":F,...T,ref:z,style:{...T.style,animation:ae?void 0:"none"}})})})});q9.displayName=N3;var V9="PopperArrow",mse={top:"bottom",right:"left",bottom:"top",left:"right"},Y9=N.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=pse(V9,i),a=mse[s.placedSide];return _.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:_.jsx(cse,{...r,ref:n,style:{...r.style,display:"block"}})})});Y9.displayName=V9;function gse(t){return t!==null}var yse=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,a=r.arrow?.centerOffset!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,m]=K9(n),g={start:"0%",center:"50%",end:"100%"}[m],v=(r.arrow?.x??0)+l/2,x=(r.arrow?.y??0)+c/2;let S="",T="";return d==="bottom"?(S=a?g:`${v}px`,T=`${-c}px`):d==="top"?(S=a?g:`${v}px`,T=`${i.floating.height+c}px`):d==="right"?(S=`${-c}px`,T=a?g:`${x}px`):d==="left"&&(S=`${i.floating.width+c}px`,T=a?g:`${x}px`),{data:{x:S,y:T}}}});function K9(t){const[e,n="center"]=t.split("-");return[e,n]}var vse=U9,bse=G9,xse=q9,Sse=Y9,oC="rovingFocusGroup.onEntryFocus",Cse={bubbles:!1,cancelable:!0},Q0="RovingFocusGroup",[Mw,X9,wse]=jw(Q0),[Ese,Q9]=md(Q0,[wse]),[Tse,_se]=Ese(Q0),W9=N.forwardRef((t,e)=>_.jsx(Mw.Provider,{scope:t.__scopeRovingFocusGroup,children:_.jsx(Mw.Slot,{scope:t.__scopeRovingFocusGroup,children:_.jsx(kse,{...t,ref:e})})}));W9.displayName=Q0;var kse=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...g}=t,v=N.useRef(null),x=Pi(e,v),S=T9(s),[T,k]=Bw({prop:a,defaultProp:l??null,onChange:c,caller:Q0}),[A,O]=N.useState(!1),z=Bs(d),L=X9(n),I=N.useRef(!1),[j,B]=N.useState(0);return N.useEffect(()=>{const q=v.current;if(q)return q.addEventListener(oC,z),()=>q.removeEventListener(oC,z)},[z]),_.jsx(Tse,{scope:n,orientation:i,dir:S,loop:r,currentTabStopId:T,onItemFocus:N.useCallback(q=>k(q),[k]),onItemShiftTab:N.useCallback(()=>O(!0),[]),onFocusableItemAdd:N.useCallback(()=>B(q=>q+1),[]),onFocusableItemRemove:N.useCallback(()=>B(q=>q-1),[]),children:_.jsx(sn.div,{tabIndex:A||j===0?-1:0,"data-orientation":i,...g,ref:x,style:{outline:"none",...t.style},onMouseDown:nt(t.onMouseDown,()=>{I.current=!0}),onFocus:nt(t.onFocus,q=>{const $=!I.current;if(q.target===q.currentTarget&&$&&!A){const G=new CustomEvent(oC,Cse);if(q.currentTarget.dispatchEvent(G),!G.defaultPrevented){const X=L().filter(V=>V.focusable),J=X.find(V=>V.active),ce=X.find(V=>V.id===T),te=[J,ce,...X].filter(Boolean).map(V=>V.ref.current);$9(te,m)}}I.current=!1}),onBlur:nt(t.onBlur,()=>O(!1))})})}),J9="RovingFocusGroupItem",Z9=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:a,...l}=t,c=Dv(),d=s||c,m=_se(J9,n),g=m.currentTabStopId===d,v=X9(n),{onFocusableItemAdd:x,onFocusableItemRemove:S,currentTabStopId:T}=m;return N.useEffect(()=>{if(i)return x(),()=>S()},[i,x,S]),_.jsx(Mw.ItemSlot,{scope:n,id:d,focusable:i,active:r,children:_.jsx(sn.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...l,ref:e,onMouseDown:nt(t.onMouseDown,k=>{i?m.onItemFocus(d):k.preventDefault()}),onFocus:nt(t.onFocus,()=>m.onItemFocus(d)),onKeyDown:nt(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){m.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const A=Nse(k,m.orientation,m.dir);if(A!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let z=v().filter(L=>L.focusable).map(L=>L.ref.current);if(A==="last")z.reverse();else if(A==="prev"||A==="next"){A==="prev"&&z.reverse();const L=z.indexOf(k.currentTarget);z=m.loop?Rse(z,L+1):z.slice(L+1)}setTimeout(()=>$9(z))}}),children:typeof a=="function"?a({isCurrentTabStop:g,hasTabStop:T!=null}):a})})});Z9.displayName=J9;var Mse={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ase(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Nse(t,e,n){const i=Ase(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return Mse[i]}function $9(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function Rse(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Ose=W9,Dse=Z9,Aw=["Enter"," "],zse=["ArrowDown","PageUp","Home"],eO=["ArrowUp","PageDown","End"],jse=[...zse,...eO],Lse={ltr:[...Aw,"ArrowRight"],rtl:[...Aw,"ArrowLeft"]},Bse={ltr:["ArrowLeft"],rtl:["ArrowRight"]},W0="Menu",[A0,Pse,Ise]=jw(W0),[Td,tO]=md(W0,[Ise,I9,Q9]),Kx=I9(),nO=Q9(),[Hse,_d]=Td(W0),[Use,J0]=Td(W0),iO=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:s,modal:a=!0}=t,l=Kx(e),[c,d]=N.useState(null),m=N.useRef(!1),g=Bs(s),v=T9(r);return N.useEffect(()=>{const x=()=>{m.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>m.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),_.jsx(vse,{...l,children:_.jsx(Hse,{scope:e,open:n,onOpenChange:g,content:c,onContentChange:d,children:_.jsx(Use,{scope:e,onClose:N.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:m,dir:v,modal:a,children:i})})})};iO.displayName=W0;var Fse="MenuAnchor",R3=N.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Kx(n);return _.jsx(bse,{...r,...i,ref:e})});R3.displayName=Fse;var O3="MenuPortal",[Gse,rO]=Td(O3,{forceMount:void 0}),sO=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=_d(O3,e);return _.jsx(Gse,{scope:e,forceMount:n,children:_.jsx(cu,{present:n||s.open,children:_.jsx(nx,{asChild:!0,container:r,children:i})})})};sO.displayName=O3;var Ia="MenuContent",[qse,D3]=Td(Ia),aO=N.forwardRef((t,e)=>{const n=rO(Ia,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=_d(Ia,t.__scopeMenu),a=J0(Ia,t.__scopeMenu);return _.jsx(A0.Provider,{scope:t.__scopeMenu,children:_.jsx(cu,{present:i||s.open,children:_.jsx(A0.Slot,{scope:t.__scopeMenu,children:a.modal?_.jsx(Vse,{...r,ref:e}):_.jsx(Yse,{...r,ref:e})})})})}),Vse=N.forwardRef((t,e)=>{const n=_d(Ia,t.__scopeMenu),i=N.useRef(null),r=Pi(e,i);return N.useEffect(()=>{const s=i.current;if(s)return oN(s)},[]),_.jsx(z3,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:nt(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Yse=N.forwardRef((t,e)=>{const n=_d(Ia,t.__scopeMenu);return _.jsx(z3,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Kse=a0("MenuContent.ScrollLock"),z3=N.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:v,onDismiss:x,disableOutsideScroll:S,...T}=t,k=_d(Ia,n),A=J0(Ia,n),O=Kx(n),z=nO(n),L=Pse(n),[I,j]=N.useState(null),B=N.useRef(null),q=Pi(e,B,k.onContentChange),$=N.useRef(0),G=N.useRef(""),X=N.useRef(0),J=N.useRef(null),ce=N.useRef("right"),Z=N.useRef(0),te=S?XE:N.Fragment,V=S?{as:Kse,allowPinchZoom:!0}:void 0,ae=he=>{const F=G.current+he,Y=L().filter(Ie=>!Ie.disabled),se=document.activeElement,U=Y.find(Ie=>Ie.ref.current===se)?.textValue,ke=Y.map(Ie=>Ie.textValue),Pe=sae(ke,F,U),ze=Y.find(Ie=>Ie.textValue===Pe)?.ref.current;(function Ie(ot){G.current=ot,window.clearTimeout($.current),ot!==""&&($.current=window.setTimeout(()=>Ie(""),1e3))})(F),ze&&setTimeout(()=>ze.focus())};N.useEffect(()=>()=>window.clearTimeout($.current),[]),ZA();const oe=N.useCallback(he=>ce.current===J.current?.side&&oae(he,J.current?.area),[]);return _.jsx(qse,{scope:n,searchRef:G,onItemEnter:N.useCallback(he=>{oe(he)&&he.preventDefault()},[oe]),onItemLeave:N.useCallback(he=>{oe(he)||(B.current?.focus(),j(null))},[oe]),onTriggerLeave:N.useCallback(he=>{oe(he)&&he.preventDefault()},[oe]),pointerGraceTimerRef:X,onPointerGraceIntentChange:N.useCallback(he=>{J.current=he},[]),children:_.jsx(te,{...V,children:_.jsx(KE,{asChild:!0,trapped:r,onMountAutoFocus:nt(s,he=>{he.preventDefault(),B.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:_.jsx(tx,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:v,onDismiss:x,children:_.jsx(Ose,{asChild:!0,...z,dir:A.dir,orientation:"vertical",loop:i,currentTabStopId:I,onCurrentTabStopIdChange:j,onEntryFocus:nt(c,he=>{A.isUsingKeyboardRef.current||he.preventDefault()}),preventScrollOnEntryFocus:!0,children:_.jsx(xse,{role:"menu","aria-orientation":"vertical","data-state":CO(k.open),"data-radix-menu-content":"",dir:A.dir,...O,...T,ref:q,style:{outline:"none",...T.style},onKeyDown:nt(T.onKeyDown,he=>{const Y=he.target.closest("[data-radix-menu-content]")===he.currentTarget,se=he.ctrlKey||he.altKey||he.metaKey,U=he.key.length===1;Y&&(he.key==="Tab"&&he.preventDefault(),!se&&U&&ae(he.key));const ke=B.current;if(he.target!==ke||!jse.includes(he.key))return;he.preventDefault();const ze=L().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);eO.includes(he.key)&&ze.reverse(),iae(ze)}),onBlur:nt(t.onBlur,he=>{he.currentTarget.contains(he.target)||(window.clearTimeout($.current),G.current="")}),onPointerMove:nt(t.onPointerMove,N0(he=>{const F=he.target,Y=Z.current!==he.clientX;if(he.currentTarget.contains(F)&&Y){const se=he.clientX>Z.current?"right":"left";ce.current=se,Z.current=he.clientX}}))})})})})})})});aO.displayName=Ia;var Xse="MenuGroup",j3=N.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return _.jsx(sn.div,{role:"group",...i,ref:e})});j3.displayName=Xse;var Qse="MenuLabel",oO=N.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return _.jsx(sn.div,{...i,ref:e})});oO.displayName=Qse;var Zb="MenuItem",Fk="menu.itemSelect",Xx=N.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=N.useRef(null),a=J0(Zb,t.__scopeMenu),l=D3(Zb,t.__scopeMenu),c=Pi(e,s),d=N.useRef(!1),m=()=>{const g=s.current;if(!n&&g){const v=new CustomEvent(Fk,{bubbles:!0,cancelable:!0});g.addEventListener(Fk,x=>i?.(x),{once:!0}),Lw(g,v),v.defaultPrevented?d.current=!1:a.onClose()}};return _.jsx(lO,{...r,ref:c,disabled:n,onClick:nt(t.onClick,m),onPointerDown:g=>{t.onPointerDown?.(g),d.current=!0},onPointerUp:nt(t.onPointerUp,g=>{d.current||g.currentTarget?.click()}),onKeyDown:nt(t.onKeyDown,g=>{const v=l.searchRef.current!=="";n||v&&g.key===" "||Aw.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Xx.displayName=Zb;var lO=N.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,a=D3(Zb,n),l=nO(n),c=N.useRef(null),d=Pi(e,c),[m,g]=N.useState(!1),[v,x]=N.useState("");return N.useEffect(()=>{const S=c.current;S&&x((S.textContent??"").trim())},[s.children]),_.jsx(A0.ItemSlot,{scope:n,disabled:i,textValue:r??v,children:_.jsx(Dse,{asChild:!0,...l,focusable:!i,children:_.jsx(sn.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:d,onPointerMove:nt(t.onPointerMove,N0(S=>{i?a.onItemLeave(S):(a.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:nt(t.onPointerLeave,N0(S=>a.onItemLeave(S))),onFocus:nt(t.onFocus,()=>g(!0)),onBlur:nt(t.onBlur,()=>g(!1))})})})}),Wse="MenuCheckboxItem",uO=N.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return _.jsx(pO,{scope:t.__scopeMenu,checked:n,children:_.jsx(Xx,{role:"menuitemcheckbox","aria-checked":$b(n)?"mixed":n,...r,ref:e,"data-state":B3(n),onSelect:nt(r.onSelect,()=>i?.($b(n)?!0:!n),{checkForDefaultPrevented:!1})})})});uO.displayName=Wse;var cO="MenuRadioGroup",[Jse,Zse]=Td(cO,{value:void 0,onValueChange:()=>{}}),fO=N.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=Bs(i);return _.jsx(Jse,{scope:t.__scopeMenu,value:n,onValueChange:s,children:_.jsx(j3,{...r,ref:e})})});fO.displayName=cO;var dO="MenuRadioItem",hO=N.forwardRef((t,e)=>{const{value:n,...i}=t,r=Zse(dO,t.__scopeMenu),s=n===r.value;return _.jsx(pO,{scope:t.__scopeMenu,checked:s,children:_.jsx(Xx,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":B3(s),onSelect:nt(i.onSelect,()=>r.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});hO.displayName=dO;var L3="MenuItemIndicator",[pO,$se]=Td(L3,{checked:!1}),mO=N.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=$se(L3,n);return _.jsx(cu,{present:i||$b(s.checked)||s.checked===!0,children:_.jsx(sn.span,{...r,ref:e,"data-state":B3(s.checked)})})});mO.displayName=L3;var eae="MenuSeparator",gO=N.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return _.jsx(sn.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});gO.displayName=eae;var tae="MenuArrow",yO=N.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Kx(n);return _.jsx(Sse,{...r,...i,ref:e})});yO.displayName=tae;var nae="MenuSub",[Jle,vO]=Td(nae),Ig="MenuSubTrigger",bO=N.forwardRef((t,e)=>{const n=_d(Ig,t.__scopeMenu),i=J0(Ig,t.__scopeMenu),r=vO(Ig,t.__scopeMenu),s=D3(Ig,t.__scopeMenu),a=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,d={__scopeMenu:t.__scopeMenu},m=N.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return N.useEffect(()=>m,[m]),N.useEffect(()=>{const g=l.current;return()=>{window.clearTimeout(g),c(null)}},[l,c]),_.jsx(R3,{asChild:!0,...d,children:_.jsx(lO,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":CO(n.open),...t,ref:zw(e,r.onTriggerChange),onClick:g=>{t.onClick?.(g),!(t.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:nt(t.onPointerMove,N0(g=>{s.onItemEnter(g),!g.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:nt(t.onPointerLeave,N0(g=>{m();const v=n.content?.getBoundingClientRect();if(v){const x=n.content?.dataset.side,S=x==="right",T=S?-5:5,k=v[S?"left":"right"],A=v[S?"right":"left"];s.onPointerGraceIntentChange({area:[{x:g.clientX+T,y:g.clientY},{x:k,y:v.top},{x:A,y:v.top},{x:A,y:v.bottom},{x:k,y:v.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(g),g.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:nt(t.onKeyDown,g=>{const v=s.searchRef.current!=="";t.disabled||v&&g.key===" "||Lse[i.dir].includes(g.key)&&(n.onOpenChange(!0),n.content?.focus(),g.preventDefault())})})})});bO.displayName=Ig;var xO="MenuSubContent",SO=N.forwardRef((t,e)=>{const n=rO(Ia,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=_d(Ia,t.__scopeMenu),a=J0(Ia,t.__scopeMenu),l=vO(xO,t.__scopeMenu),c=N.useRef(null),d=Pi(e,c);return _.jsx(A0.Provider,{scope:t.__scopeMenu,children:_.jsx(cu,{present:i||s.open,children:_.jsx(A0.Slot,{scope:t.__scopeMenu,children:_.jsx(z3,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{a.isUsingKeyboardRef.current&&c.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:nt(t.onFocusOutside,m=>{m.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:nt(t.onEscapeKeyDown,m=>{a.onClose(),m.preventDefault()}),onKeyDown:nt(t.onKeyDown,m=>{const g=m.currentTarget.contains(m.target),v=Bse[a.dir].includes(m.key);g&&v&&(s.onOpenChange(!1),l.trigger?.focus(),m.preventDefault())})})})})})});SO.displayName=xO;function CO(t){return t?"open":"closed"}function $b(t){return t==="indeterminate"}function B3(t){return $b(t)?"indeterminate":t?"checked":"unchecked"}function iae(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function rae(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function sae(t,e,n){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let a=rae(t,Math.max(s,0));r.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function aae(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const l=e[s],c=e[a],d=l.x,m=l.y,g=c.x,v=c.y;m>i!=v>i&&n<(g-d)*(i-m)/(v-m)+d&&(r=!r)}return r}function oae(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return aae(n,e)}function N0(t){return e=>e.pointerType==="mouse"?t(e):void 0}var lae=iO,uae=R3,cae=sO,fae=aO,dae=j3,hae=oO,pae=Xx,mae=uO,gae=fO,yae=hO,vae=mO,bae=gO,xae=yO,Sae=bO,Cae=SO,P3="ContextMenu",[wae]=md(P3,[tO]),cs=tO(),[Eae,wO]=wae(P3),EO=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:i,dir:r,modal:s=!0}=t,[a,l]=N.useState(!1),c=cs(e),d=Bs(i),m=N.useCallback(g=>{l(g),d(g)},[d]);return _.jsx(Eae,{scope:e,open:a,onOpenChange:m,modal:s,children:_.jsx(lae,{...c,dir:r,open:a,onOpenChange:m,modal:s,children:n})})};EO.displayName=P3;var TO="ContextMenuTrigger",_O=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:i=!1,...r}=t,s=wO(TO,n),a=cs(n),l=N.useRef({x:0,y:0}),c=N.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...l.current})}),d=N.useRef(0),m=N.useCallback(()=>window.clearTimeout(d.current),[]),g=v=>{l.current={x:v.clientX,y:v.clientY},s.onOpenChange(!0)};return N.useEffect(()=>m,[m]),N.useEffect(()=>void(i&&m()),[i,m]),_.jsxs(_.Fragment,{children:[_.jsx(uae,{...a,virtualRef:c}),_.jsx(sn.span,{"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,...r,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:i?t.onContextMenu:nt(t.onContextMenu,v=>{m(),g(v),v.preventDefault()}),onPointerDown:i?t.onPointerDown:nt(t.onPointerDown,Ev(v=>{m(),d.current=window.setTimeout(()=>g(v),700)})),onPointerMove:i?t.onPointerMove:nt(t.onPointerMove,Ev(m)),onPointerCancel:i?t.onPointerCancel:nt(t.onPointerCancel,Ev(m)),onPointerUp:i?t.onPointerUp:nt(t.onPointerUp,Ev(m))})]})});_O.displayName=TO;var Tae="ContextMenuPortal",kO=t=>{const{__scopeContextMenu:e,...n}=t,i=cs(e);return _.jsx(cae,{...i,...n})};kO.displayName=Tae;var MO="ContextMenuContent",AO=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=wO(MO,n),s=cs(n),a=N.useRef(!1);return _.jsx(fae,{...s,...i,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:l=>{t.onCloseAutoFocus?.(l),!l.defaultPrevented&&a.current&&l.preventDefault(),a.current=!1},onInteractOutside:l=>{t.onInteractOutside?.(l),!l.defaultPrevented&&!r.modal&&(a.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});AO.displayName=MO;var _ae="ContextMenuGroup",kae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(dae,{...r,...i,ref:e})});kae.displayName=_ae;var Mae="ContextMenuLabel",Aae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(hae,{...r,...i,ref:e})});Aae.displayName=Mae;var Nae="ContextMenuItem",NO=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(pae,{...r,...i,ref:e})});NO.displayName=Nae;var Rae="ContextMenuCheckboxItem",Oae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(mae,{...r,...i,ref:e})});Oae.displayName=Rae;var Dae="ContextMenuRadioGroup",zae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(gae,{...r,...i,ref:e})});zae.displayName=Dae;var jae="ContextMenuRadioItem",Lae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(yae,{...r,...i,ref:e})});Lae.displayName=jae;var Bae="ContextMenuItemIndicator",Pae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(vae,{...r,...i,ref:e})});Pae.displayName=Bae;var Iae="ContextMenuSeparator",Hae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(bae,{...r,...i,ref:e})});Hae.displayName=Iae;var Uae="ContextMenuArrow",Fae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(xae,{...r,...i,ref:e})});Fae.displayName=Uae;var Gae="ContextMenuSubTrigger",qae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(Sae,{...r,...i,ref:e})});qae.displayName=Gae;var Vae="ContextMenuSubContent",Yae=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...i}=t,r=cs(n);return _.jsx(Cae,{...r,...i,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Yae.displayName=Vae;function Ev(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var Kae=EO,Xae=_O,Qae=kO,Wae=AO,Gk=NO;const Jae=t=>({note:"fa-note-sticky",board:"fa-list-check",canvas:"fa-pen-nib",flashcard:"fa-layer-group"})[t]||"fa-file",Zae=({files:t,currentWorkspace:e,onOpenFile:n,onBack:i,activeFile:r,onCreateNew:s})=>{const[a,l]=N.useState("grid"),c=m=>{const g=prompt("Rename file:",m.name);g&&(m.name=g)},d=m=>{confirm(`Are you sure you want to delete ${m.name}?`)&&console.log("Delete",m)};return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsxs("div",{className:"bg-subtle px-4 py-2 border-b border-border text-sm flex gap-2 text-gray-500 dark:text-gray-400 shrink-0 items-center justify-between",children:[_.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsx("span",{children:"Computer"})," ",_.jsx("i",{className:"fa-solid fa-chevron-right text-[10px] mt-1"})," ",_.jsx("span",{className:"text-ink font-medium",children:e==="work"?"Work":"School"}),r&&_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"fa-solid fa-chevron-right text-[10px] mt-1"}),_.jsx("span",{className:"text-ink font-medium",children:r.name})]})]}),!r&&_.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 rounded-lg p-0.5",children:[_.jsx("button",{onClick:()=>l("grid"),className:`p-1.5 rounded-md text-xs transition-colors ${a==="grid"?"bg-white dark:bg-gray-700 shadow-sm text-ink":"text-gray-500 hover:text-ink"}`,title:"Grid View",children:_.jsx("i",{className:"fa-solid fa-border-all"})}),_.jsx("button",{onClick:()=>l("list"),className:`p-1.5 rounded-md text-xs transition-colors ${a==="list"?"bg-white dark:bg-gray-700 shadow-sm text-ink":"text-gray-500 hover:text-ink"}`,title:"List View",children:_.jsx("i",{className:"fa-solid fa-list"})})]})]}),_.jsx("div",{className:"flex-1 bg-paper relative overflow-hidden",children:r?_.jsxs("div",{className:"h-full w-full absolute top-0 left-0 bg-paper z-10 flex flex-col",children:[_.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-border bg-subtle",children:[_.jsxs("button",{onClick:i,className:"px-3 py-1 bg-surface border border-border rounded text-xs font-bold hover:bg-subtle text-ink",children:[_.jsx("i",{className:"fa-solid fa-chevron-left mr-1"})," Back"]}),_.jsx("span",{className:"text-xs font-bold text-ink",children:r.name})]}),_.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[r.targetContent==="win-notes"&&_.jsx(CA,{}),r.targetContent==="win-kanban"&&_.jsx(zN,{}),r.targetContent==="win-whiteboard"&&_.jsx(vR,{}),r.targetContent==="win-flashcards"&&_.jsx(E9,{})]})]}):_.jsx("div",{className:"p-4 overflow-y-auto h-full",children:_.jsxs("div",{className:a==="grid"?"grid grid-cols-2 md:grid-cols-4 gap-4":"flex flex-col gap-2",children:[_.jsxs("div",{onClick:s,className:`flex ${a==="grid"?"flex-col items-center justify-center h-32":"flex-row items-center h-16"} p-4 bg-surface border-2 border-dashed border-border hover:border-accent-blue hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl cursor-pointer transition-all group`,children:[_.jsx("div",{className:`w-10 h-10 rounded-full bg-subtle flex items-center justify-center ${a==="grid"?"mb-2":"mr-4"} group-hover:bg-blue-200 dark:group-hover:bg-blue-800 group-hover:text-blue-700 dark:group-hover:text-blue-200`,children:_.jsx("i",{className:"fa-solid fa-plus text-xl text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-300"})}),_.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-300",children:"Create New"})]}),t[e].map((m,g)=>_.jsxs(Kae,{children:[_.jsx(Xae,{children:_.jsxs("div",{onClick:()=>n(m),className:`flex ${a==="grid"?"flex-col items-center justify-center h-32":"flex-row items-center h-16 px-4"} p-4 bg-surface border border-transparent hover:border-border hover:shadow-md rounded-xl cursor-pointer transition-all group relative`,children:[_.jsx("i",{className:`fa-solid ${Jae(m.type)} ${a==="grid"?"text-4xl mb-2":"text-2xl mr-4"} group-hover:scale-110 transition-transform text-ink`}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("span",{className:"text-xs font-bold text-ink break-all line-clamp-2",children:m.name}),a==="list"&&_.jsxs("div",{className:"text-[10px] text-gray-500 mt-0.5 capitalize",children:[m.type,"  Modified just now"]})]})]})}),_.jsx(Qae,{children:_.jsxs(Wae,{className:"min-w-[160px] bg-white dark:bg-gray-800 rounded-md overflow-hidden p-[5px] shadow-[0px_10px_38px_-10px_rgba(22,_23,_24,_0.35),_0px_10px_20px_-15px_rgba(22,_23,_24,_0.2)] border border-gray-200 dark:border-gray-700 z-50",children:[_.jsxs(Gk,{className:"group text-[13px] leading-none text-violet11 rounded-[3px] flex items-center h-[25px] px-[5px] relative pl-[25px] select-none outline-none data-[highlighted]:bg-violet9 data-[highlighted]:text-violet1 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-600",onSelect:()=>c(m),children:[_.jsx("i",{className:"fa-solid fa-pen-to-square absolute left-[5px] w-4 text-center"}),"Rename"]}),_.jsxs(Gk,{className:"group text-[13px] leading-none text-red-500 rounded-[3px] flex items-center h-[25px] px-[5px] relative pl-[25px] select-none outline-none data-[highlighted]:bg-red-100 data-[highlighted]:text-red-700 cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/20",onSelect:()=>d(m),children:[_.jsx("i",{className:"fa-solid fa-trash absolute left-[5px] w-4 text-center"}),"Delete"]})]})})]},g))]})})})]})},$ae={work:[{name:"Q4_Strategy.note",type:"note",targetContent:"win-notes"},{name:"Launch_Plan.board",type:"board",targetContent:"win-kanban"},{name:"UI_Concepts.canvas",type:"canvas",targetContent:"win-whiteboard"}],school:[{name:"History_Essay.note",type:"note",targetContent:"win-notes"},{name:"Math_HW.canvas",type:"canvas",targetContent:"win-whiteboard"}]},eoe=()=>{const{currentWorkspace:t}=D0(),[e,n]=N.useState(!1),[i,r]=N.useState(!1),[s,a]=N.useState($ae),[l,c]=N.useState(null),d=v=>{r(!1);const x={note:{name:"Untitled",targetContent:"win-notes"},board:{name:"New Board",targetContent:"win-kanban"},canvas:{name:"New Canvas",targetContent:"win-whiteboard"},flashcard:{name:"Study Set",targetContent:"win-flashcards"}},S={name:`${x[v].name} ${s[t].length+1}`,type:v,targetContent:x[v].targetContent};a(T=>({...T,[t]:[...T[t],S]})),c(S)},m=v=>{c(v)},g=()=>{c(null)};return _.jsxs("div",{className:"flex flex-col h-screen w-full font-sans overflow-hidden bg-paper dark:bg-gray-900 text-ink dark:text-white transition-colors duration-300",children:[_.jsxs("main",{className:"flex-1 relative bg-paper dark:bg-gray-900 bg-dot-pattern overflow-hidden p-0 md:p-4",id:"desktop-area",children:[_.jsx(Tz,{}),i&&_.jsx("div",{className:"absolute inset-0 z-[60] flex flex-col items-center justify-center p-8 backdrop-blur-sm bg-paper/80",children:_.jsxs("div",{className:"bg-white border-2 border-ink rounded-xl p-6 shadow-hard max-w-lg w-full",children:[_.jsx("h2",{className:"text-xl font-display font-bold mb-4",children:"Create New"}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("button",{onClick:()=>d("note"),className:"p-4 border border-border rounded-lg hover:bg-yellow-50 hover:border-yellow-400 flex flex-col items-center gap-2 transition-colors",children:[_.jsx("i",{className:"fa-solid fa-note-sticky text-2xl text-accent-yellow"}),_.jsx("span",{className:"font-bold text-sm",children:"Note"})]}),_.jsxs("button",{onClick:()=>d("board"),className:"p-4 border border-border rounded-lg hover:bg-teal-50 hover:border-teal-400 flex flex-col items-center gap-2 transition-colors",children:[_.jsx("i",{className:"fa-solid fa-list-check text-2xl text-accent-teal"}),_.jsx("span",{className:"font-bold text-sm",children:"Kanban"})]}),_.jsxs("button",{onClick:()=>d("canvas"),className:"p-4 border border-border rounded-lg hover:bg-purple-50 hover:border-purple-400 flex flex-col items-center gap-2 transition-colors",children:[_.jsx("i",{className:"fa-solid fa-pen-nib text-2xl text-accent-purple"}),_.jsx("span",{className:"font-bold text-sm",children:"Canvas"})]}),_.jsxs("button",{onClick:()=>d("flashcard"),className:"p-4 border border-border rounded-lg hover:bg-blue-50 hover:border-blue-400 flex flex-col items-center gap-2 transition-colors",children:[_.jsx("i",{className:"fa-solid fa-layer-group text-2xl text-accent-blue"}),_.jsx("span",{className:"font-bold text-sm",children:"Cards"})]})]}),_.jsx("button",{onClick:()=>r(!1),className:"w-full mt-4 py-3 text-sm text-gray-500 font-bold hover:text-black",children:"Cancel"})]})}),_.jsxs("div",{id:"windows-container",className:"w-full h-full relative",children:[_.jsx(cc,{id:"win-dashboard",headerChips:_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"smart-chip hidden md:flex items-center gap-2 px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-bold cursor-pointer border border-red-200",children:[_.jsx("i",{className:"fa-solid fa-stopwatch animate-pulse"})," 24:59"]}),_.jsxs("div",{className:"smart-chip hidden md:flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold cursor-pointer border border-green-200",children:[_.jsx("i",{className:"fa-brands fa-spotify"})," Lo-Fi Beats"]})]}),children:_.jsx(Bz,{})}),_.jsx(cc,{id:"win-email",headerChips:_.jsxs("div",{className:"smart-chip hidden md:flex items-center gap-2 px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-xs font-bold cursor-pointer border border-gray-300",children:[_.jsx("i",{className:"fa-solid fa-filter"})," Unread: 4"]}),children:_.jsx(_K,{})}),_.jsx(cc,{id:"win-notes",headerChips:_.jsxs("div",{className:"smart-chip hidden md:flex items-center gap-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-bold cursor-pointer border border-yellow-200",children:[_.jsx("i",{className:"fa-solid fa-check"})," Saved"]}),children:_.jsx(CA,{})}),_.jsx(cc,{id:"win-kanban",children:_.jsx(zN,{})}),_.jsx(cc,{id:"win-whiteboard",children:_.jsx(vR,{})}),_.jsx(cc,{id:"win-jarvis",children:_.jsx(Wie,{})}),_.jsx(cc,{id:"win-files",children:_.jsx(Zae,{files:s,currentWorkspace:t,onOpenFile:m,onBack:g,activeFile:l,onCreateNew:()=>r(!0)})}),_.jsx(cc,{id:"win-flashcards",children:_.jsx(E9,{})})]})]}),_.jsx(Ez,{isOpen:e,onClose:()=>n(!1)}),_.jsx(wz,{onToggleStart:()=>n(!e)})]})};/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qk="popstate";function toe(t={}){function e(i,r){let{pathname:s,search:a,hash:l}=i.location;return Nw("",{pathname:s,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:R0(r)}return ioe(e,n,null,t)}function Qn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ol(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function noe(){return Math.random().toString(36).substring(2,10)}function Vk(t,e){return{usr:t.state,key:t.key,idx:e}}function Nw(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Lp(e):e,state:n,key:e&&e.key||i||noe()}}function R0({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Lp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function ioe(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,l="POP",c=null,d=m();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function m(){return(a.state||{idx:null}).idx}function g(){l="POP";let k=m(),A=k==null?null:k-d;d=k,c&&c({action:l,location:T.location,delta:A})}function v(k,A){l="PUSH";let O=Nw(T.location,k,A);d=m()+1;let z=Vk(O,d),L=T.createHref(O);try{a.pushState(z,"",L)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;r.location.assign(L)}s&&c&&c({action:l,location:T.location,delta:1})}function x(k,A){l="REPLACE";let O=Nw(T.location,k,A);d=m();let z=Vk(O,d),L=T.createHref(O);a.replaceState(z,"",L),s&&c&&c({action:l,location:T.location,delta:0})}function S(k){return roe(k)}let T={get action(){return l},get location(){return t(r,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(qk,g),c=k,()=>{r.removeEventListener(qk,g),c=null}},createHref(k){return e(r,k)},createURL:S,encodeLocation(k){let A=S(k);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:x,go(k){return a.go(k)}};return T}function roe(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Qn(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:R0(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function RO(t,e,n="/"){return soe(t,e,n,!1)}function soe(t,e,n,i){let r=typeof e=="string"?Lp(e):e,s=uu(r.pathname||"/",n);if(s==null)return null;let a=OO(t);aoe(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=yoe(s);l=moe(a[c],d,i)}return l}function OO(t,e=[],n=[],i="",r=!1){let s=(a,l,c=r,d)=>{let m={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&c)return;Qn(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let g=ru([i,m.relativePath]),v=n.concat(m);a.children&&a.children.length>0&&(Qn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),OO(a.children,e,v,g,c)),!(a.path==null&&!a.index)&&e.push({path:g,score:hoe(g,a.index),routesMeta:v})};return t.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let c of DO(a.path))s(a,l,!0,c)}),e}function DO(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=DO(i.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function aoe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:poe(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var ooe=/^:[\w-]+$/,loe=3,uoe=2,coe=1,foe=10,doe=-2,Yk=t=>t==="*";function hoe(t,e){let n=t.split("/"),i=n.length;return n.some(Yk)&&(i+=doe),e&&(i+=uoe),n.filter(r=>!Yk(r)).reduce((r,s)=>r+(ooe.test(s)?loe:s===""?coe:foe),i)}function poe(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function moe(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let l=0;l<i.length;++l){let c=i[l],d=l===i.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=ex({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),v=c.route;if(!g&&d&&n&&!i[i.length-1].route.index&&(g=ex({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:ru([s,g.pathname]),pathnameBase:Soe(ru([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=ru([s,g.pathnameBase]))}return a}function ex(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=goe(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((d,{paramName:m,isOptional:g},v)=>{if(m==="*"){let S=l[v]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[v];return g&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function goe(t,e=!1,n=!0){ol(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function yoe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ol(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function uu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function voe(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Lp(t):t;return{pathname:n?n.startsWith("/")?n:boe(n,e):e,search:Coe(i),hash:woe(r)}}function boe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function lC(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xoe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zO(t){let e=xoe(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function jO(t,e,n,i=!1){let r;typeof t=="string"?r=Lp(t):(r={...t},Qn(!r.pathname||!r.pathname.includes("?"),lC("?","pathname","search",r)),Qn(!r.pathname||!r.pathname.includes("#"),lC("#","pathname","hash",r)),Qn(!r.search||!r.search.includes("#"),lC("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,l;if(a==null)l=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=voe(r,l),d=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}var ru=t=>t.join("/").replace(/\/\/+/g,"/"),Soe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Coe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,woe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Eoe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LO=["POST","PUT","PATCH","DELETE"];new Set(LO);var Toe=["GET",...LO];new Set(Toe);var Bp=N.createContext(null);Bp.displayName="DataRouter";var Qx=N.createContext(null);Qx.displayName="DataRouterState";N.createContext(!1);var BO=N.createContext({isTransitioning:!1});BO.displayName="ViewTransition";var _oe=N.createContext(new Map);_oe.displayName="Fetchers";var koe=N.createContext(null);koe.displayName="Await";var dl=N.createContext(null);dl.displayName="Navigation";var Z0=N.createContext(null);Z0.displayName="Location";var hl=N.createContext({outlet:null,matches:[],isDataRoute:!1});hl.displayName="Route";var I3=N.createContext(null);I3.displayName="RouteError";function Moe(t,{relative:e}={}){Qn($0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=N.useContext(dl),{hash:r,pathname:s,search:a}=ey(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:ru([n,s])),i.createHref({pathname:l,search:a,hash:r})}function $0(){return N.useContext(Z0)!=null}function Qc(){return Qn($0(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Z0).location}var PO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function IO(t){N.useContext(dl).static||N.useLayoutEffect(t)}function HO(){let{isDataRoute:t}=N.useContext(hl);return t?Goe():Aoe()}function Aoe(){Qn($0(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Bp),{basename:e,navigator:n}=N.useContext(dl),{matches:i}=N.useContext(hl),{pathname:r}=Qc(),s=JSON.stringify(zO(i)),a=N.useRef(!1);return IO(()=>{a.current=!0}),N.useCallback((c,d={})=>{if(ol(a.current,PO),!a.current)return;if(typeof c=="number"){n.go(c);return}let m=jO(c,JSON.parse(s),r,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ru([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,s,r,t])}var Noe=N.createContext(null);function Roe(t){let e=N.useContext(hl).outlet;return N.useMemo(()=>e&&N.createElement(Noe.Provider,{value:t},e),[e,t])}function ey(t,{relative:e}={}){let{matches:n}=N.useContext(hl),{pathname:i}=Qc(),r=JSON.stringify(zO(n));return N.useMemo(()=>jO(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function Ooe(t,e){return UO(t,e)}function UO(t,e,n,i,r){Qn($0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=N.useContext(dl),{matches:a}=N.useContext(hl),l=a[a.length-1],c=l?l.params:{},d=l?l.pathname:"/",m=l?l.pathnameBase:"/",g=l&&l.route;{let O=g&&g.path||"";FO(d,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let v=Qc(),x;if(e){let O=typeof e=="string"?Lp(e):e;Qn(m==="/"||O.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${O.pathname}" was given in the \`location\` prop.`),x=O}else x=v;let S=x.pathname||"/",T=S;if(m!=="/"){let O=m.replace(/^\//,"").split("/");T="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let k=RO(t,{pathname:T});ol(g||k!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ol(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=Boe(k&&k.map(O=>Object.assign({},O,{params:Object.assign({},c,O.params),pathname:ru([m,s.encodeLocation?s.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:ru([m,s.encodeLocation?s.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),a,n,i,r);return e&&A?N.createElement(Z0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},A):A}function Doe(){let t=Foe(),e=Eoe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:s},"ErrorBoundary")," or"," ",N.createElement("code",{style:s},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:r},n):null,a)}var zoe=N.createElement(Doe,null),joe=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?N.createElement(hl.Provider,{value:this.props.routeContext},N.createElement(I3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Loe({routeContext:t,match:e,children:n}){let i=N.useContext(Bp);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(hl.Provider,{value:t},n)}function Boe(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n?.errors;if(a!=null){let d=s.findIndex(m=>m.route.id&&a?.[m.route.id]!==void 0);Qn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<s.length;d++){let m=s[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:g,errors:v}=n,x=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||x){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,m,g)=>{let v,x=!1,S=null,T=null;n&&(v=a&&m.route.id?a[m.route.id]:void 0,S=m.route.errorElement||zoe,l&&(c<0&&g===0?(FO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,T=null):c===g&&(x=!0,T=m.route.hydrateFallbackElement||null)));let k=e.concat(s.slice(0,g+1)),A=()=>{let O;return v?O=S:x?O=T:m.route.Component?O=N.createElement(m.route.Component,null):m.route.element?O=m.route.element:O=d,N.createElement(Loe,{match:m,routeContext:{outlet:d,matches:k,isDataRoute:n!=null},children:O})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?N.createElement(joe,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:A(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:i}):A()},null)}function H3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Poe(t){let e=N.useContext(Bp);return Qn(e,H3(t)),e}function Ioe(t){let e=N.useContext(Qx);return Qn(e,H3(t)),e}function Hoe(t){let e=N.useContext(hl);return Qn(e,H3(t)),e}function U3(t){let e=Hoe(t),n=e.matches[e.matches.length-1];return Qn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Uoe(){return U3("useRouteId")}function Foe(){let t=N.useContext(I3),e=Ioe("useRouteError"),n=U3("useRouteError");return t!==void 0?t:e.errors?.[n]}function Goe(){let{router:t}=Poe("useNavigate"),e=U3("useNavigate"),n=N.useRef(!1);return IO(()=>{n.current=!0}),N.useCallback(async(r,s={})=>{ol(n.current,PO),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var Kk={};function FO(t,e,n){!e&&!Kk[t]&&(Kk[t]=!0,ol(!1,n))}N.memo(qoe);function qoe({routes:t,future:e,state:n,unstable_onError:i}){return UO(t,void 0,n,i,e)}function Voe(t){return Roe(t.context)}function GO(t){Qn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Yoe({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Qn(!$0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=Lp(n));let{pathname:c="/",search:d="",hash:m="",state:g=null,key:v="default"}=n,x=N.useMemo(()=>{let S=uu(c,a);return S==null?null:{location:{pathname:S,search:d,hash:m,state:g,key:v},navigationType:i}},[a,c,d,m,g,v,i]);return ol(x!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:N.createElement(dl.Provider,{value:l},N.createElement(Z0.Provider,{children:e,value:x}))}function Koe({children:t,location:e}){return Ooe(Rw(t),e)}function Rw(t,e=[]){let n=[];return N.Children.forEach(t,(i,r)=>{if(!N.isValidElement(i))return;let s=[...e,r];if(i.type===N.Fragment){n.push.apply(n,Rw(i.props.children,s));return}Qn(i.type===GO,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Rw(i.props.children,s)),n.push(a)}),n}var Hv="get",Uv="application/x-www-form-urlencoded";function Wx(t){return t!=null&&typeof t.tagName=="string"}function Xoe(t){return Wx(t)&&t.tagName.toLowerCase()==="button"}function Qoe(t){return Wx(t)&&t.tagName.toLowerCase()==="form"}function Woe(t){return Wx(t)&&t.tagName.toLowerCase()==="input"}function Joe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Zoe(t,e){return t.button===0&&(!e||e==="_self")&&!Joe(t)}var Tv=null;function $oe(){if(Tv===null)try{new FormData(document.createElement("form"),0),Tv=!1}catch{Tv=!0}return Tv}var ele=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uC(t){return t!=null&&!ele.has(t)?(ol(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uv}"`),null):t}function tle(t,e){let n,i,r,s,a;if(Qoe(t)){let l=t.getAttribute("action");i=l?uu(l,e):null,n=t.getAttribute("method")||Hv,r=uC(t.getAttribute("enctype"))||Uv,s=new FormData(t)}else if(Xoe(t)||Woe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(i=c?uu(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Hv,r=uC(t.getAttribute("formenctype"))||uC(l.getAttribute("enctype"))||Uv,s=new FormData(l,t),!$oe()){let{name:d,type:m,value:g}=t;if(m==="image"){let v=d?`${d}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else d&&s.append(d,g)}}else{if(Wx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Hv,i=null,r=Uv,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function F3(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nle(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&uu(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function ile(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rle(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function sle(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await ile(s,n);return a.links?a.links():[]}return[]}));return ule(i.flat(1).filter(rle).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Xk(t,e,n,i,r,s){let a=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>n[d].pathname!==c.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==c.params["*"];return s==="assets"?e.filter((c,d)=>a(c,d)||l(c,d)):s==="data"?e.filter((c,d)=>{let m=i.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(a(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function ale(t,e,{includeHydrateFallback:n}={}){return ole(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function ole(t){return[...new Set(t)]}function lle(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function ule(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(lle(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function qO(){let t=N.useContext(Bp);return F3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function cle(){let t=N.useContext(Qx);return F3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var G3=N.createContext(void 0);G3.displayName="FrameworkContext";function VO(){let t=N.useContext(G3);return F3(t,"You must render this element inside a <HydratedRouter> element"),t}function fle(t,e){let n=N.useContext(G3),[i,r]=N.useState(!1),[s,a]=N.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:m,onTouchStart:g}=e,v=N.useRef(null);N.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let T=A=>{A.forEach(O=>{a(O.isIntersecting)})},k=new IntersectionObserver(T,{threshold:.5});return v.current&&k.observe(v.current),()=>{k.disconnect()}}},[t]),N.useEffect(()=>{if(i){let T=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(T)}}},[i]);let x=()=>{r(!0)},S=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,v,{}]:[s,v,{onFocus:Mg(l,x),onBlur:Mg(c,S),onMouseEnter:Mg(d,x),onMouseLeave:Mg(m,S),onTouchStart:Mg(g,x)}]:[!1,v,{}]}function Mg(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function dle({page:t,...e}){let{router:n}=qO(),i=N.useMemo(()=>RO(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?N.createElement(ple,{page:t,matches:i,...e}):null}function hle(t){let{manifest:e,routeModules:n}=VO(),[i,r]=N.useState([]);return N.useEffect(()=>{let s=!1;return sle(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function ple({page:t,matches:e,...n}){let i=Qc(),{manifest:r,routeModules:s}=VO(),{basename:a}=qO(),{loaderData:l,matches:c}=cle(),d=N.useMemo(()=>Xk(t,e,c,r,i,"data"),[t,e,c,r,i]),m=N.useMemo(()=>Xk(t,e,c,r,i,"assets"),[t,e,c,r,i]),g=N.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,T=!1;if(e.forEach(A=>{let O=r.routes[A.route.id];!O||!O.hasLoader||(!d.some(z=>z.route.id===A.route.id)&&A.route.id in l&&s[A.route.id]?.shouldRevalidate||O.hasClientLoader?T=!0:S.add(A.route.id))}),S.size===0)return[];let k=nle(t,a,"data");return T&&S.size>0&&k.searchParams.set("_routes",e.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[k.pathname+k.search]},[a,l,i,r,d,e,t,s]),v=N.useMemo(()=>ale(m,r),[m,r]),x=hle(m);return N.createElement(N.Fragment,null,g.map(S=>N.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>N.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),x.map(({key:S,link:T})=>N.createElement("link",{key:S,nonce:n.nonce,...T})))}function mle(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var YO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YO&&(window.__reactRouterVersion="7.9.5")}catch{}function gle({basename:t,children:e,window:n}){let i=N.useRef();i.current==null&&(i.current=toe({window:n,v5Compat:!0}));let r=i.current,[s,a]=N.useState({action:r.action,location:r.location}),l=N.useCallback(c=>{N.startTransition(()=>a(c))},[a]);return N.useLayoutEffect(()=>r.listen(l),[r,l]),N.createElement(Yoe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var KO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XO=N.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:l,target:c,to:d,preventScrollReset:m,viewTransition:g,...v},x){let{basename:S}=N.useContext(dl),T=typeof d=="string"&&KO.test(d),k,A=!1;if(typeof d=="string"&&T&&(k=d,YO))try{let $=new URL(window.location.href),G=d.startsWith("//")?new URL($.protocol+d):new URL(d),X=uu(G.pathname,S);G.origin===$.origin&&X!=null?d=X+G.search+G.hash:A=!0}catch{ol(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=Moe(d,{relative:r}),[z,L,I]=fle(i,v),j=ble(d,{replace:a,state:l,target:c,preventScrollReset:m,relative:r,viewTransition:g});function B($){e&&e($),$.defaultPrevented||j($)}let q=N.createElement("a",{...v,...I,href:k||O,onClick:A||s?e:B,ref:mle(x,L),target:c,"data-discover":!T&&n==="render"?"true":void 0});return z&&!T?N.createElement(N.Fragment,null,q,N.createElement(dle,{page:O})):q});XO.displayName="Link";var Ow=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:l,children:c,...d},m){let g=ey(a,{relative:d.relative}),v=Qc(),x=N.useContext(Qx),{navigator:S,basename:T}=N.useContext(dl),k=x!=null&&Ele(g)&&l===!0,A=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,O=v.pathname,z=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(O=O.toLowerCase(),z=z?z.toLowerCase():null,A=A.toLowerCase()),z&&T&&(z=uu(z,T)||z);const L=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let I=O===A||!r&&O.startsWith(A)&&O.charAt(L)==="/",j=z!=null&&(z===A||!r&&z.startsWith(A)&&z.charAt(A.length)==="/"),B={isActive:I,isPending:j,isTransitioning:k},q=I?e:void 0,$;typeof i=="function"?$=i(B):$=[i,I?"active":null,j?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let G=typeof s=="function"?s(B):s;return N.createElement(XO,{...d,"aria-current":q,className:$,ref:m,style:G,to:a,viewTransition:l},typeof c=="function"?c(B):c)});Ow.displayName="NavLink";var yle=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Hv,action:l,onSubmit:c,relative:d,preventScrollReset:m,viewTransition:g,...v},x)=>{let S=Cle(),T=wle(l,{relative:d}),k=a.toLowerCase()==="get"?"get":"post",A=typeof l=="string"&&KO.test(l),O=z=>{if(c&&c(z),z.defaultPrevented)return;z.preventDefault();let L=z.nativeEvent.submitter,I=L?.getAttribute("formmethod")||a;S(L||z.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:r,state:s,relative:d,preventScrollReset:m,viewTransition:g})};return N.createElement("form",{ref:x,method:k,action:T,onSubmit:i?c:O,...v,"data-discover":!A&&t==="render"?"true":void 0})});yle.displayName="Form";function vle(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QO(t){let e=N.useContext(Bp);return Qn(e,vle(t)),e}function ble(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let l=HO(),c=Qc(),d=ey(t,{relative:s});return N.useCallback(m=>{if(Zoe(m,e)){m.preventDefault();let g=n!==void 0?n:R0(c)===R0(d);l(t,{replace:g,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[c,l,d,n,i,e,t,r,s,a])}var xle=0,Sle=()=>`__${String(++xle)}__`;function Cle(){let{router:t}=QO("useSubmit"),{basename:e}=N.useContext(dl),n=Uoe();return N.useCallback(async(i,r={})=>{let{action:s,method:a,encType:l,formData:c,body:d}=tle(i,e);if(r.navigate===!1){let m=r.fetcherKey||Sle();await t.fetch(m,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function wle(t,{relative:e}={}){let{basename:n}=N.useContext(dl),i=N.useContext(hl);Qn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...ey(t||".",{relative:e})},a=Qc();if(t==null){s.search=a.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(m=>m==="")){l.delete("index"),c.filter(g=>g).forEach(g=>l.append("index",g));let m=l.toString();s.search=m?`?${m}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ru([n,s.pathname])),R0(s)}function Ele(t,{relative:e}={}){let n=N.useContext(BO);Qn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=QO("useViewTransitionState"),r=ey(t,{relative:e});if(!n.isTransitioning)return!1;let s=uu(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=uu(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ex(r.pathname,a)!=null||ex(r.pathname,s)!=null}const Tle=t=>{console.log(`Jarvis context: ${t}`)};function _le(){const[t,e]=N.useState(!1),[n,i]=N.useState(!1),r=Qc(),[s,a]=N.useState([{id:"1",role:"system",content:"Hi! I see you are working on something. How can I assist?",timestamp:new Date}]),[l,c]=N.useState(""),d=N.useRef(null);N.useEffect(()=>{Tle(`I am looking at the ${r.pathname} page.`)},[r]);const m=()=>{d.current?.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{m()},[s,t,n]);const g=()=>{if(!l.trim())return;const S={id:Date.now().toString(),role:"user",content:l,timestamp:new Date};a(T=>[...T,S]),c(""),setTimeout(()=>{const T={id:(Date.now()+1).toString(),role:"system",content:`I am aware you are at **${r.pathname}**. Here is some help...`,timestamp:new Date};a(k=>[...k,T])},1e3)},v=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),g())},x=t||n;return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"w-4 h-full fixed right-0 top-0 z-40",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)}),_.jsxs("aside",{className:Pt("fixed top-0 right-0 h-full w-96 bg-surface/95 backdrop-blur-lg border-l border-border shadow-2xl transition-transform duration-300 ease-in-out z-50 transform flex flex-col",x?"translate-x-0":"translate-x-full"),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[_.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between bg-surface-100/50",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),_.jsx("h2",{className:"text-lg font-semibold",children:"Jarvis"})]}),_.jsx("button",{onClick:()=>e(!t),className:Pt("p-2 rounded-md hover:bg-surface-200 transition-colors",t?"text-accent-blue bg-blue-50":"text-gray-500"),title:t?"Unpin":"Pin",children:_.jsx("i",{className:"fa-solid fa-thumbtack transform rotate-45"})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar bg-surface-50/50",children:[s.map(S=>_.jsx(w9,{message:S},S.id)),_.jsx("div",{ref:d})]}),_.jsxs("div",{className:"p-4 border-t border-border bg-surface-100/50",children:[_.jsxs("div",{className:"relative",children:[_.jsx("textarea",{value:l,onChange:S=>c(S.target.value),onKeyDown:v,placeholder:"Ask about this page...",className:"w-full pl-4 pr-10 py-3 rounded-xl border border-border bg-white focus:outline-none focus:ring-2 focus:ring-accent-blue/50 resize-none h-12 min-h-[48px] text-sm"}),_.jsx("button",{onClick:g,disabled:!l.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 text-accent-blue hover:text-blue-700 disabled:opacity-50",children:_.jsx("i",{className:"fa-solid fa-paper-plane"})})]}),_.jsxs("p",{className:"text-[10px] text-gray-400 mt-2 text-center",children:["Context: ",r.pathname]})]})]})]})}function kle(){const[t,e]=N.useState(null),[n,i]=N.useState(!0),[r,s]=N.useState(null),a=N.useCallback(async()=>{i(!0),s(null);try{const l=await Ys("/v1/tenants/current"),c=await l.json().catch(()=>null);if(!l.ok||!c)throw new Error(c?.message||"Unable to load current tenant");e(c)}catch(l){e(null),s(l?.message||"Unable to resolve tenant")}finally{i(!1)}},[]);return N.useEffect(()=>{a()},[a]),{tenant:t,loading:n,error:r,refresh:a}}const cC=[{id:"1",name:"Personal"},{id:"2",name:"Work"}],Mle={1:[{id:"1",name:"Project A"},{id:"2",name:"Project B"}],2:[{id:"3",name:"Project C"},{id:"4",name:"Project D"}]};function Ale(){const t=HO(),{tenant:e,loading:n,error:i}=kle(),[r,s]=N.useState(cC[0]);return _.jsxs("div",{className:"flex h-screen bg-background text-foreground",children:[_.jsxs("aside",{className:"w-72 flex-shrink-0 border-r border-border bg-surface/50",children:[_.jsxs("div",{className:"p-4",children:[_.jsx("h2",{className:"text-lg font-semibold",children:"Workspaces"}),_.jsx("select",{value:r.id,onChange:a=>{const l=cC.find(c=>c.id===a.target.value);l&&s(l)},className:"w-full mt-2 p-2 rounded-md bg-surface-100 border border-border",children:cC.map(a=>_.jsx("option",{value:a.id,children:a.name},a.id))})]}),_.jsxs("div",{className:"p-4",children:[_.jsx("h3",{className:"text-md font-semibold",children:"Projects"}),_.jsx("nav",{className:"mt-2 space-y-1",children:Mle[r.id]?.map(a=>_.jsx(Ow,{to:`/projects/${a.id}/board`,className:({isActive:l})=>Pt("block px-4 py-2 rounded-md",l?"bg-primary/10 text-primary":"hover:bg-surface-100"),children:a.name},a.id))})]}),_.jsx("div",{className:"p-4 mt-auto",children:_.jsx(Ow,{to:"/customize",className:({isActive:a})=>Pt("block px-4 py-2 rounded-md",a?"bg-primary/10 text-primary":"hover:bg-surface-100"),children:"Customize"})})]}),_.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[_.jsxs("header",{className:"h-16 border-b border-border flex items-center justify-between px-6",role:"banner",children:[_.jsx("div",{className:"flex items-center gap-4",children:_.jsx("h1",{className:"text-lg font-semibold sr-only",children:"FocusDeck"})}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{className:"p-2 hover:bg-surface-100 rounded-md transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary","aria-label":"Search",children:_.jsx("span",{className:"text-xl",children:""})}),_.jsx("button",{onClick:()=>t("/tenants"),className:"flex items-center gap-2 rounded-full border border-border bg-surface/70 px-3 py-1.5 text-sm text-foreground hover:bg-surface-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",title:e?.name??"Select tenant",children:e?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"font-medium",children:e.name}),_.jsxs("span",{className:"text-xs text-gray-400",children:["/",e.slug]})]}):n?_.jsx("span",{className:"text-xs text-gray-400",children:"Resolving tenant"}):i?_.jsx("span",{className:"text-xs text-red-300",children:"Tenant error"}):_.jsx("span",{className:"text-xs text-gray-400",children:"Select tenant"})}),_.jsx("button",{onClick:()=>OD(),className:"px-3 py-2 hover:bg-surface-100 rounded-md transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary","aria-label":"Logout",title:"Logout",children:"Logout"})]})]}),_.jsx("div",{id:"main-content",className:"flex-1 overflow-auto p-6",role:"main",tabIndex:-1,children:_.jsx("div",{className:"max-w-7xl mx-auto",children:_.jsx(Voe,{})})})]}),_.jsx(_le,{})]})}function Nle(t=768){const[e,n]=N.useState(!1);return N.useEffect(()=>{const i=window.matchMedia(`(max-width: ${t}px)`),r=()=>{n(i.matches)};return r(),i.addEventListener("change",r),()=>{i.removeEventListener("change",r)}},[t]),e}function Rle(){const t=Nle();return _.jsx(LD,{children:_.jsx(bz,{children:_.jsx(Sz,{children:_.jsx(gle,{children:_.jsxs(Cz,{children:[t?_.jsx(Koe,{children:_.jsx(GO,{path:"/*",element:_.jsx(Ale,{})})}):_.jsx(eoe,{}),_.jsx(Uw,{})]})})})})})}const Ole=N.createContext(void 0),Dle=({children:t})=>{const[e,n]=N.useState(null);return _.jsx(Ole.Provider,{value:{currentWorkspace:e,setCurrentWorkspace:n},children:t})},zle=N.createContext(null);function jle({children:t}){const[e,n]=N.useState([]),[i,r]=N.useState(!0),s=N.useCallback(async()=>{r(!0);try{const d=await Ys("/v1/privacy/consent");if(!d.ok)throw new Error("Failed to load privacy consent dashboard");const m=await d.json();n(m)}catch(d){if(d instanceof Error&&d.message==="Not authenticated")return;console.error("Unable to refresh privacy settings",d)}finally{r(!1)}},[]),a=N.useCallback(async(d,m)=>{const g=await Ys("/v1/privacy/consent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contextType:d,isEnabled:m})});if(!g.ok){const x=await g.text();throw new Error(x||"Unable to update privacy setting")}const v=await g.json();return n(x=>x.map(S=>S.contextType===v.contextType?v:S)),v},[]),l=N.useCallback(d=>e.some(m=>m.contextType===d&&m.isEnabled),[e]);N.useEffect(()=>{s()},[s]);const c=N.useMemo(()=>({settings:e,loading:i,refresh:s,updateSetting:a,isEnabled:l}),[e,i,s,a,l]);return _.jsx(zle.Provider,{value:c,children:t})}const Lle=new aj;P7.createRoot(document.getElementById("root")).render(_.jsx(N.StrictMode,{children:_.jsx(oj,{client:Lle,children:_.jsx(jle,{children:_.jsx(Dle,{children:_.jsx(Rle,{})})})})}));
