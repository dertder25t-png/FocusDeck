<Window x:Class="FocusDock.App.RuleEditorDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Rule Editor" 
        Width="600" Height="650"
        Background="#0F0F10" 
        Foreground="#E8EAED"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True">
    
    <Window.Resources>
        <SolidColorBrush x:Key="AccentBrush" Color="#7B5FFF"/>
        <SolidColorBrush x:Key="AccentHoverBrush" Color="#9176FF"/>
        <SolidColorBrush x:Key="DarkBg1" Color="#0F0F10"/>
        <SolidColorBrush x:Key="DarkBg2" Color="#1C1C1F"/>
        <SolidColorBrush x:Key="DarkBg3" Color="#1D1E20"/>
        <SolidColorBrush x:Key="StrokeBrush" Color="#3F4550"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#E8EAED"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#AAB2BE"/>
    </Window.Resources>
    
    <Border Background="{StaticResource DarkBg1}" 
            BorderBrush="{StaticResource AccentBrush}"
            BorderThickness="2"
            CornerRadius="12">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0"
                    Background="{StaticResource DarkBg2}"
                    CornerRadius="10,10,0,0"
                    Padding="24,20">
                <TextBlock x:Name="TxtTitle"
                           Text="Create Automation Rule"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextPrimary}"/>
            </Border>
            
            <!-- Form -->
            <ScrollViewer Grid.Row="1" 
                          VerticalScrollBarVisibility="Auto"
                          Padding="24,20">
                <StackPanel>
                    <!-- Rule Name -->
                    <TextBlock Text="Rule Name"
                               FontSize="13"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextSecondary}"
                               Margin="0,0,0,8"/>
                    <TextBox x:Name="TxtRuleName"
                             Background="{StaticResource DarkBg3}"
                             Foreground="{StaticResource TextPrimary}"
                             BorderBrush="{StaticResource StrokeBrush}"
                             BorderThickness="1"
                             Padding="12"
                             FontSize="14"
                             Margin="0,0,0,20"/>
                    
                    <!-- Trigger Type -->
                    <TextBlock Text="Trigger Type"
                               FontSize="13"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextSecondary}"
                               Margin="0,0,0,8"/>
                    <ComboBox x:Name="CmbTriggerType"
                              Background="{StaticResource DarkBg3}"
                              Foreground="{StaticResource TextPrimary}"
                              BorderBrush="{StaticResource StrokeBrush}"
                              BorderThickness="1"
                              Padding="12"
                              FontSize="14"
                              Margin="0,0,0,16"
                              SelectionChanged="OnTriggerTypeChanged">
                        <ComboBoxItem Content="â° Time Schedule" Tag="Time"/>
                        <ComboBoxItem Content="ðŸ“¶ WiFi Network" Tag="WiFi"/>
                        <ComboBoxItem Content="ðŸ’» Application Focus" Tag="App"/>
                    </ComboBox>
                    
                    <!-- Time-based Trigger Panel -->
                    <StackPanel x:Name="TimeTriggerPanel" Visibility="Visible">
                        <!-- Days of Week -->
                        <TextBlock Text="Days of Week"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        <WrapPanel x:Name="DaysPanel" Margin="0,0,0,20">
                            <CheckBox x:Name="ChkMonday" Content="Monday" Margin="0,0,12,8"/>
                            <CheckBox x:Name="ChkTuesday" Content="Tuesday" Margin="0,0,12,8"/>
                            <CheckBox x:Name="ChkWednesday" Content="Wednesday" Margin="0,0,12,8"/>
                            <CheckBox x:Name="ChkThursday" Content="Thursday" Margin="0,0,12,8"/>
                            <CheckBox x:Name="ChkFriday" Content="Friday" Margin="0,0,12,8"/>
                            <CheckBox x:Name="ChkSaturday" Content="Saturday" Margin="0,0,12,8"/>
                            <CheckBox x:Name="ChkSunday" Content="Sunday" Margin="0,0,12,8"/>
                        </WrapPanel>
                        
                        <!-- Time Range -->
                        <TextBlock Text="Time Range"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                            <TextBox x:Name="TxtStartTime"
                                     Text="09:00"
                                     Background="{StaticResource DarkBg3}"
                                     Foreground="{StaticResource TextPrimary}"
                                     BorderBrush="{StaticResource StrokeBrush}"
                                     BorderThickness="1"
                                     Padding="12"
                                     FontSize="14"
                                     Width="100"
                                     Margin="0,0,12,0"/>
                            <TextBlock Text="to"
                                       FontSize="14"
                                       Foreground="{StaticResource TextSecondary}"
                                       VerticalAlignment="Center"
                                       Margin="0,0,12,0"/>
                            <TextBox x:Name="TxtEndTime"
                                     Text="17:00"
                                     Background="{StaticResource DarkBg3}"
                                     Foreground="{StaticResource TextPrimary}"
                                     BorderBrush="{StaticResource StrokeBrush}"
                                     BorderThickness="1"
                                     Padding="12"
                                     FontSize="14"
                                     Width="100"/>
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- WiFi-based Trigger Panel -->
                    <StackPanel x:Name="WiFiTriggerPanel" Visibility="Collapsed">
                        <TextBlock Text="WiFi Network (SSID)"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        <ComboBox x:Name="CmbWiFiNetwork"
                                  Background="{StaticResource DarkBg3}"
                                  Foreground="{StaticResource TextPrimary}"
                                  BorderBrush="{StaticResource StrokeBrush}"
                                  BorderThickness="1"
                                  Padding="12"
                                  FontSize="14"
                                  IsEditable="True"
                                  Margin="0,0,0,12"/>
                        
                        <Button Content="ðŸ”„ Scan Networks"
                                Background="{StaticResource DarkBg3}"
                                Foreground="{StaticResource TextPrimary}"
                                BorderThickness="0"
                                Padding="12,8"
                                FontSize="13"
                                Margin="0,0,0,16"
                                Click="OnScanNetworksClick"/>
                        
                        <TextBlock Text="Trigger When"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                            <RadioButton x:Name="RbOnConnect" Content="Connect to network" 
                                        GroupName="WiFiTrigger" IsChecked="True" 
                                        Foreground="{StaticResource TextPrimary}" Margin="0,0,16,0"/>
                            <RadioButton x:Name="RbOnDisconnect" Content="Disconnect from network" 
                                        GroupName="WiFiTrigger" 
                                        Foreground="{StaticResource TextPrimary}"/>
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- App-based Trigger Panel -->
                    <StackPanel x:Name="AppTriggerPanel" Visibility="Collapsed">
                        <TextBlock Text="Application Name"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        <ComboBox x:Name="CmbApplication"
                                  Background="{StaticResource DarkBg3}"
                                  Foreground="{StaticResource TextPrimary}"
                                  BorderBrush="{StaticResource StrokeBrush}"
                                  BorderThickness="1"
                                  Padding="12"
                                  FontSize="14"
                                  IsEditable="True"
                                  Margin="0,0,0,12"/>
                        
                        <Button Content="ðŸ” Detect Running Apps"
                                Background="{StaticResource DarkBg3}"
                                Foreground="{StaticResource TextPrimary}"
                                BorderThickness="0"
                                Padding="12,8"
                                FontSize="13"
                                Margin="0,0,0,16"
                                Click="OnDetectAppsClick"/>
                        
                        <TextBlock Text="Process Name (Optional)"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        <TextBox x:Name="TxtProcessName"
                                 Background="{StaticResource DarkBg3}"
                                 Foreground="{StaticResource TextPrimary}"
                                 BorderBrush="{StaticResource StrokeBrush}"
                                 BorderThickness="1"
                                 Padding="12"
                                 FontSize="14"
                                 Margin="0,0,0,20"/>
                        <TextBlock Text="Example: Code.exe, chrome.exe, notepad.exe"
                                   FontSize="11"
                                   FontStyle="Italic"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,-16,0,20"/>
                    </StackPanel>
                    
                    <!-- Action Type -->
                    <TextBlock Text="Action"
                               FontSize="13"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextSecondary}"
                               Margin="0,0,0,8"/>
                    <ComboBox x:Name="CmbAction"
                              Background="{StaticResource DarkBg3}"
                              Foreground="{StaticResource TextPrimary}"
                              BorderBrush="{StaticResource StrokeBrush}"
                              BorderThickness="1"
                              Padding="12"
                              FontSize="14"
                              Margin="0,0,0,16"
                              SelectionChanged="OnActionChanged">
                        <ComboBoxItem Content="Apply Layout Preset"/>
                        <ComboBoxItem Content="Enable Focus Mode"/>
                        <ComboBoxItem Content="Disable Focus Mode"/>
                    </ComboBox>
                    
                    <!-- Preset Selection (conditional) -->
                    <StackPanel x:Name="PresetPanel" Visibility="Collapsed">
                        <TextBlock Text="Layout Preset"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        <ComboBox x:Name="CmbPreset"
                                  Background="{StaticResource DarkBg3}"
                                  Foreground="{StaticResource TextPrimary}"
                                  BorderBrush="{StaticResource StrokeBrush}"
                                  BorderThickness="1"
                                  Padding="12"
                                  FontSize="14"
                                  Margin="0,0,0,12"/>
                        
                        <TextBlock Text="Monitor"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   Margin="0,0,0,8"/>
                        <ComboBox x:Name="CmbMonitor"
                                  Background="{StaticResource DarkBg3}"
                                  Foreground="{StaticResource TextPrimary}"
                                  BorderBrush="{StaticResource StrokeBrush}"
                                  BorderThickness="1"
                                  Padding="12"
                                  FontSize="14"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
            
            <!-- Footer Buttons -->
            <Border Grid.Row="2"
                    Background="{StaticResource DarkBg2}"
                    BorderBrush="{StaticResource StrokeBrush}"
                    BorderThickness="0,1,0,0"
                    CornerRadius="0,0,10,10"
                    Padding="24,16">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="BtnCancel"
                            Content="Cancel"
                            Background="{StaticResource DarkBg3}"
                            Foreground="{StaticResource TextPrimary}"
                            BorderThickness="0"
                            Padding="24,12"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Margin="0,0,12,0"
                            Cursor="Hand"
                            Click="OnCancelClick"/>
                    <Button x:Name="BtnSave"
                            Content="Save Rule"
                            Background="{StaticResource AccentBrush}"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="24,12"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Cursor="Hand"
                            Click="OnSaveClick"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
