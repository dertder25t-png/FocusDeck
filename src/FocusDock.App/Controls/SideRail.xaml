<UserControl x:Class="FocusDock.App.Controls.SideRail"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="220">
    
    <!--
        ╔══════════════════════════════════════════════════════════════╗
        ║  SIDE RAIL NAVIGATION - Expand on hover with smooth animation║
        ║  Collapsed: 64px • Expanded: 220px • Accent active indicator ║
        ╚══════════════════════════════════════════════════════════════╝
    -->
    
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Styles/DesignSystem.xaml"/>
                <ResourceDictionary Source="../Styles/PremiumButtons.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <Border x:Name="RailContainer"
            Width="64"
            Background="{StaticResource GlassPanelGradient}"
            BorderBrush="{StaticResource StrokeSecondaryBrush}"
            BorderThickness="0,0,1,0"
            CornerRadius="0,18,18,0"
            Effect="{StaticResource SoftShadow}">
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/><!-- Brand / Logo -->
                <RowDefinition Height="*"/><!-- Navigation Items -->
                <RowDefinition Height="Auto"/><!-- Settings / User -->
            </Grid.RowDefinitions>
            
            <!-- ═════════ TOP SECTION: Brand / Logo ═════════ -->
            <Border Grid.Row="0" 
                    Height="64" 
                    Padding="16">
                <Viewbox>
                    <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                               Text="" 
                               FontSize="24"
                               Foreground="{StaticResource AccentBrush}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Viewbox>
            </Border>
            
            <!-- ═════════ MIDDLE SECTION: Main Navigation ═════════ -->
            <StackPanel Grid.Row="1" 
                        Margin="8,16,8,16"
                        VerticalAlignment="Top">
                
                <!-- Home / Dashboard -->
                <Button x:Name="BtnHome"
                        Style="{StaticResource NavigationButton}"
                        Tag="Active"
                        Margin="0,0,0,4"
                        Click="OnNavigationClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                                   Text="" 
                                   FontSize="18"
                                   Width="20"
                                   Margin="0,0,12,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="LblHome"
                                   Text="Home" 
                                   Style="{StaticResource LabelTextStyle}"
                                   VerticalAlignment="Center"
                                   Opacity="0"/>
                    </StackPanel>
                </Button>
                
                <!-- Calendar -->
                <Button x:Name="BtnCalendar"
                        Style="{StaticResource NavigationButton}"
                        Margin="0,0,0,4"
                        Click="OnNavigationClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                                   Text="" 
                                   FontSize="18"
                                   Width="20"
                                   Margin="0,0,12,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="LblCalendar"
                                   Text="Calendar" 
                                   Style="{StaticResource LabelTextStyle}"
                                   VerticalAlignment="Center"
                                   Opacity="0"/>
                    </StackPanel>
                </Button>
                
                <!-- Tasks / To-Do -->
                <Button x:Name="BtnTasks"
                        Style="{StaticResource NavigationButton}"
                        Margin="0,0,0,4"
                        Click="OnNavigationClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                                   Text="" 
                                   FontSize="18"
                                   Width="20"
                                   Margin="0,0,12,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="LblTasks"
                                   Text="Tasks" 
                                   Style="{StaticResource LabelTextStyle}"
                                   VerticalAlignment="Center"
                                   Opacity="0"/>
                    </StackPanel>
                </Button>
                
                <!-- Study Timer -->
                <Button x:Name="BtnStudy"
                        Style="{StaticResource NavigationButton}"
                        Margin="0,0,0,4"
                        Click="OnNavigationClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                                   Text="" 
                                   FontSize="18"
                                   Width="20"
                                   Margin="0,0,12,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="LblStudy"
                                   Text="Study" 
                                   Style="{StaticResource LabelTextStyle}"
                                   VerticalAlignment="Center"
                                   Opacity="0"/>
                    </StackPanel>
                </Button>
                
                <!-- Analytics -->
                <Button x:Name="BtnAnalytics"
                        Style="{StaticResource NavigationButton}"
                        Margin="0,0,0,4"
                        Click="OnNavigationClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                                   Text="" 
                                   FontSize="18"
                                   Width="20"
                                   Margin="0,0,12,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="LblAnalytics"
                                   Text="Analytics" 
                                   Style="{StaticResource LabelTextStyle}"
                                   VerticalAlignment="Center"
                                   Opacity="0"/>
                    </StackPanel>
                </Button>
                
                <!-- Separator -->
                <Rectangle Height="1" 
                           Fill="{StaticResource StrokeSecondaryBrush}"
                           Margin="12,12"/>
                
                <!-- Workspace -->
                <Button x:Name="BtnWorkspace"
                        Style="{StaticResource NavigationButton}"
                        Margin="0,0,0,4"
                        Click="OnNavigationClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                                   Text="" 
                                   FontSize="18"
                                   Width="20"
                                   Margin="0,0,12,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="LblWorkspace"
                                   Text="Workspace" 
                                   Style="{StaticResource LabelTextStyle}"
                                   VerticalAlignment="Center"
                                   Opacity="0"/>
                    </StackPanel>
                </Button>
                
                <!-- Automations -->
                <Button x:Name="BtnAutomations"
                        Style="{StaticResource NavigationButton}"
                        Margin="0,0,0,4"
                        Click="OnNavigationClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                                   Text="" 
                                   FontSize="18"
                                   Width="20"
                                   Margin="0,0,12,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="LblAutomations"
                                   Text="Automations" 
                                   Style="{StaticResource LabelTextStyle}"
                                   VerticalAlignment="Center"
                                   Opacity="0"/>
                    </StackPanel>
                </Button>
                
            </StackPanel>
            
            <!-- ═════════ BOTTOM SECTION: Settings / User ═════════ -->
            <StackPanel Grid.Row="2" 
                        Margin="8,16,8,16"
                        VerticalAlignment="Bottom">
                
                <!-- Settings -->
                <Button x:Name="BtnSettings"
                        Style="{StaticResource NavigationButton}"
                        Margin="0,0,0,8"
                        Click="OnNavigationClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" 
                                   Text="" 
                                   FontSize="18"
                                   Width="20"
                                   Margin="0,0,12,0"
                                   VerticalAlignment="Center"/>
                        <TextBlock x:Name="LblSettings"
                                   Text="Settings" 
                                   Style="{StaticResource LabelTextStyle}"
                                   VerticalAlignment="Center"
                                   Opacity="0"/>
                    </StackPanel>
                </Button>
                
            </StackPanel>
        </Grid>
        
        <!-- ═══════════════════════════════════════════════════════════════
             EXPAND / COLLAPSE ANIMATION TRIGGERS
        ═══════════════════════════════════════════════════════════════════ -->
        <Border.Triggers>
            <EventTrigger RoutedEvent="MouseEnter">
                <BeginStoryboard>
                    <Storyboard>
                        <!-- Expand rail width -->
                        <DoubleAnimation Storyboard.TargetName="RailContainer"
                                         Storyboard.TargetProperty="Width"
                                         To="220"
                                         Duration="0:0:0.2">
                            <DoubleAnimation.EasingFunction>
                                <CubicEase EasingMode="EaseOut"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <!-- Fade in labels -->
                        <DoubleAnimation Storyboard.TargetName="LblHome" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"/>
                        <DoubleAnimation Storyboard.TargetName="LblCalendar" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"/>
                        <DoubleAnimation Storyboard.TargetName="LblTasks" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"/>
                        <DoubleAnimation Storyboard.TargetName="LblStudy" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"/>
                        <DoubleAnimation Storyboard.TargetName="LblAnalytics" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"/>
                        <DoubleAnimation Storyboard.TargetName="LblWorkspace" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"/>
                        <DoubleAnimation Storyboard.TargetName="LblAutomations" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"/>
                        <DoubleAnimation Storyboard.TargetName="LblSettings" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" BeginTime="0:0:0.1"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
            <EventTrigger RoutedEvent="MouseLeave">
                <BeginStoryboard>
                    <Storyboard>
                        <!-- Collapse rail width -->
                        <DoubleAnimation Storyboard.TargetName="RailContainer"
                                         Storyboard.TargetProperty="Width"
                                         To="64"
                                         Duration="0:0:0.2">
                            <DoubleAnimation.EasingFunction>
                                <CubicEase EasingMode="EaseOut"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <!-- Fade out labels -->
                        <DoubleAnimation Storyboard.TargetName="LblHome" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
                        <DoubleAnimation Storyboard.TargetName="LblCalendar" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
                        <DoubleAnimation Storyboard.TargetName="LblTasks" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
                        <DoubleAnimation Storyboard.TargetName="LblStudy" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
                        <DoubleAnimation Storyboard.TargetName="LblAnalytics" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
                        <DoubleAnimation Storyboard.TargetName="LblWorkspace" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
                        <DoubleAnimation Storyboard.TargetName="LblAutomations" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
                        <DoubleAnimation Storyboard.TargetName="LblSettings" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.15"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Border.Triggers>
    </Border>
</UserControl>
