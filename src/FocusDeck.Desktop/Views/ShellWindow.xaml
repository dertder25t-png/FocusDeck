<Window x:Class="FocusDeck.Desktop.Views.ShellWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="FocusDeck" 
        Height="800" 
        Width="1400"
        MinHeight="600"
        MinWidth="900"
        Background="{DynamicResource BackgroundBrush}"
        WindowStartupLocation="CenterScreen">

    <Window.InputBindings>
        <!-- Ctrl+K for Command Palette -->
        <KeyBinding Key="K" Modifiers="Control" Command="{Binding OpenCommandPaletteCommand}"/>
        <!-- Ctrl+, for Settings -->
        <KeyBinding Key="OemComma" Modifiers="Control" Command="{Binding OpenSettingsCommand}"/>
    </Window.InputBindings>

    <Grid>
        <Grid.RowDefinitions>
            <!-- Title Bar -->
            <RowDefinition Height="Auto"/>
            <!-- Main Content -->
            <RowDefinition Height="*"/>
            <!-- Snackbar Area -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <Border Grid.Row="0" 
                Background="{DynamicResource SurfaceBrush}" 
                BorderBrush="{DynamicResource BorderBrush}" 
                BorderThickness="0,0,0,1"
                Height="40">
            <Grid Margin="{StaticResource SpacingHorizontalBase}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- App Title -->
                <TextBlock Grid.Column="0" 
                          Text="FocusDeck" 
                          VerticalAlignment="Center"
                          FontWeight="{StaticResource FontWeightSemiBold}"
                          FontSize="{StaticResource FontSizeLarge}"
                          Foreground="{DynamicResource TextPrimaryBrush}"/>

                <!-- Search/Command Hint -->
                <Border Grid.Column="1" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        Background="{DynamicResource Surface2Brush}"
                        CornerRadius="{StaticResource RadiusSmall}"
                        Padding="12,4"
                        Cursor="Hand"
                        MouseDown="CommandHint_MouseDown">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="âŒ˜" 
                                  Foreground="{DynamicResource TextSecondaryBrush}"
                                  FontSize="{StaticResource FontSizeSmall}"
                                  Margin="0,0,4,0"/>
                        <TextBlock Text="Press Ctrl+K for commands" 
                                  Foreground="{DynamicResource TextSecondaryBrush}"
                                  FontSize="{StaticResource FontSizeSmall}"/>
                    </StackPanel>
                </Border>

                <!-- Theme Toggle & Settings -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="ðŸŒ™" 
                            Click="ThemeToggle_Click"
                            ToolTip="Toggle Theme"
                            Margin="0,0,8,0"
                            Padding="8,4"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"/>
                    <Button Content="âš™" 
                            Command="{Binding OpenSettingsCommand}"
                            ToolTip="Settings"
                            Padding="8,4"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"/>
                    <Button Content="Logout"
                            Click="Logout_Click"
                            ToolTip="Logout"
                            Padding="8,4"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main 3-Pane Layout -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <!-- Navigation Pane -->
                <ColumnDefinition Width="250" MinWidth="200"/>
                <ColumnDefinition Width="Auto"/>
                <!-- Content Pane -->
                <ColumnDefinition Width="*" MinWidth="400"/>
                <ColumnDefinition Width="Auto"/>
                <!-- Info/Details Pane -->
                <ColumnDefinition Width="300" MinWidth="200"/>
            </Grid.ColumnDefinitions>

            <!-- Navigation Pane -->
            <Border Grid.Column="0" 
                    Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="0,0,1,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="{StaticResource SpacingBase}">
                        <TextBlock Text="Navigation" 
                                  Style="{StaticResource H3TextStyle}"
                                  Margin="{StaticResource SpacingBottomBase}"/>

                        <!-- Navigation Items -->
                        <Button Content="ðŸ“Š Dashboard" 
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="{StaticResource SpacingSmall}"
                                Margin="{StaticResource SpacingBottomSmall}"
                                Background="Transparent"
                                BorderThickness="0"/>
                        
                        <Button Content="ðŸ“ Notes" 
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="{StaticResource SpacingSmall}"
                                Margin="{StaticResource SpacingBottomSmall}"
                                Background="Transparent"
                                BorderThickness="0"/>
                        
                        <Button Content="ðŸŽ¯ Study Sessions" 
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="{StaticResource SpacingSmall}"
                                Margin="{StaticResource SpacingBottomSmall}"
                                Background="Transparent"
                                BorderThickness="0"/>
                        
                        <Button Content="âš¡ Automations" 
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="{StaticResource SpacingSmall}"
                                Margin="{StaticResource SpacingBottomSmall}"
                                Background="Transparent"
                                BorderThickness="0"/>
                        
                        <Button Content="ðŸ”„ Sync" 
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="{StaticResource SpacingSmall}"
                                Background="Transparent"
                                BorderThickness="0"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Column="1" 
                         Width="4" 
                         Background="{DynamicResource BorderBrush}"
                         HorizontalAlignment="Stretch"/>

            <!-- Content Pane -->
            <Border Grid.Column="2" Background="{DynamicResource BackgroundBrush}">
                <Grid>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="{StaticResource SpacingXXLarge}">
                            <TextBlock Text="Content Area" 
                                      Style="{StaticResource H2TextStyle}"
                                      Margin="{StaticResource SpacingBottomBase}"/>
                            <TextBlock Text="This is the main content area where your application content will be displayed." 
                                      Style="{StaticResource BodyTextStyle}"
                                      TextWrapping="Wrap"/>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Column="3" 
                         Width="4" 
                         Background="{DynamicResource BorderBrush}"
                         HorizontalAlignment="Stretch"/>

            <!-- Info/Details Pane -->
            <Border Grid.Column="4" 
                    Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1,0,0,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="{StaticResource SpacingBase}">
                        <TextBlock Text="Details" 
                                  Style="{StaticResource H3TextStyle}"
                                  Margin="{StaticResource SpacingBottomBase}"/>
                        <TextBlock Text="Info and details will appear here." 
                                  Style="{StaticResource SecondaryTextStyle}"
                                  TextWrapping="Wrap"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- Snackbar Container -->
        <Border x:Name="SnackbarContainer" 
                Grid.Row="2" 
                Visibility="Collapsed"
                Background="{DynamicResource Surface2Brush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="{StaticResource SpacingBase}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="SnackbarText" 
                          Text="" 
                          Grid.Column="0"
                          VerticalAlignment="Center"
                          Foreground="{DynamicResource TextPrimaryBrush}"/>
                <Button Content="âœ•" 
                        Grid.Column="1"
                        Click="SnackbarClose_Click"
                        Background="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"/>
            </Grid>
        </Border>

        <!-- Command Palette Overlay -->
        <Grid x:Name="CommandPaletteOverlay" 
              Grid.RowSpan="3" 
              Visibility="Collapsed"
              Background="#80000000">
            <Grid.InputBindings>
                <MouseBinding MouseAction="LeftClick" Command="{Binding CloseCommandPaletteCommand}"/>
            </Grid.InputBindings>

            <Border Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="{StaticResource RadiusLarge}"
                    Width="600"
                    MaxHeight="400"
                    VerticalAlignment="Top"
                    Margin="0,100,0,0"
                    Padding="{StaticResource SpacingBase}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBox x:Name="CommandSearch"
                            Grid.Row="0"
                            Text="{Binding CommandSearchText, UpdateSourceTrigger=PropertyChanged}"
                            FontSize="{StaticResource FontSizeLarge}"
                            Padding="{StaticResource SpacingSmall}"
                            BorderThickness="0,0,0,1"
                            BorderBrush="{DynamicResource BorderBrush}"
                            Background="Transparent"/>

                    <ListBox x:Name="CommandList"
                            Grid.Row="1"
                            Margin="{StaticResource SpacingTopSmall}"
                            BorderThickness="0"
                            Background="Transparent">
                        <!-- Command items will be populated here -->
                        <ListBoxItem Content="Search Notes..."  Padding="{StaticResource SpacingSmall}"/>
                        <ListBoxItem Content="Create New Note" Padding="{StaticResource SpacingSmall}"/>
                        <ListBoxItem Content="Start Study Session" Padding="{StaticResource SpacingSmall}"/>
                        <ListBoxItem Content="Toggle Theme" Padding="{StaticResource SpacingSmall}"/>
                        <ListBoxItem Content="Open Settings" Padding="{StaticResource SpacingSmall}"/>
                    </ListBox>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
